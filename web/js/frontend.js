document.createElement("article");document.createElement("aside");document.createElement("audio");document.createElement("canvas");document.createElement("command");document.createElement("datalist");document.createElement("details");document.createElement("embed");document.createElement("figcaption");document.createElement("figure");document.createElement("footer");document.createElement("header");document.createElement("hgroup");document.createElement("keygen");document.createElement("mark");document.createElement("meter");document.createElement("nav");document.createElement("output");document.createElement("progress");document.createElement("rp");document.createElement("rt");document.createElement("ruby");document.createElement("section");document.createElement("source");document.createElement("summary");document.createElement("time");document.createElement("video");
/*!
 * jQuery JavaScript Library v1.10.2
 * http://jquery.com/
 *
 * Includes Sizzle.js
 * http://sizzlejs.com/
 *
 * Copyright 2005, 2013 jQuery Foundation, Inc. and other contributors
 * Released under the MIT license
 * http://jquery.org/license
 *
 * Date: 2013-07-03T13:48Z
 */
(function(a1,aE){var ag,w,aA=typeof aE,aJ=a1.location,l=a1.document,bV=l.documentElement,bh=a1.jQuery,G=a1.$,Y={},a5=[],s="1.10.2",aG=a5.concat,am=a5.push,a3=a5.slice,aK=a5.indexOf,y=Y.toString,T=Y.hasOwnProperty,aO=s.trim,bI=function(e,b3){return new bI.fn.init(e,b3,w)},bz=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,aa=/\S+/g,B=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,bq=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,a=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,bg=/^[\],:{}\s]*$/,bj=/(?:^|:|,)(?:\s*\[)+/g,bF=/\\(?:["\\\/bfnrt]|u[\da-fA-F]{4})/g,aX=/"[^"\\\r\n]*"|true|false|null|-?(?:\d+\.|)\d+(?:[eE][+-]?\d+|)/g,bR=/^-ms-/,aT=/-([\da-z])/gi,K=function(e,b3){return b3.toUpperCase()},bW=function(e){if(l.addEventListener||e.type==="load"||l.readyState==="complete"){bk();bI.ready()}},bk=function(){if(l.addEventListener){l.removeEventListener("DOMContentLoaded",bW,false);a1.removeEventListener("load",bW,false)}else{l.detachEvent("onreadystatechange",bW);a1.detachEvent("onload",bW)}};bI.fn=bI.prototype={jquery:s,constructor:bI,init:function(e,b5,b4){var b3,b6;if(!e){return this}if(typeof e==="string"){if(e.charAt(0)==="<"&&e.charAt(e.length-1)===">"&&e.length>=3){b3=[null,e,null]}else{b3=bq.exec(e)}if(b3&&(b3[1]||!b5)){if(b3[1]){b5=b5 instanceof bI?b5[0]:b5;bI.merge(this,bI.parseHTML(b3[1],b5&&b5.nodeType?b5.ownerDocument||b5:l,true));if(a.test(b3[1])&&bI.isPlainObject(b5)){for(b3 in b5){if(bI.isFunction(this[b3])){this[b3](b5[b3])}else{this.attr(b3,b5[b3])}}}return this}else{b6=l.getElementById(b3[2]);if(b6&&b6.parentNode){if(b6.id!==b3[2]){return b4.find(e)}this.length=1;this[0]=b6}this.context=l;this.selector=e;return this}}else{if(!b5||b5.jquery){return(b5||b4).find(e)}else{return this.constructor(b5).find(e)}}}else{if(e.nodeType){this.context=this[0]=e;this.length=1;return this}else{if(bI.isFunction(e)){return b4.ready(e)}}}if(e.selector!==aE){this.selector=e.selector;this.context=e.context}return bI.makeArray(e,this)},selector:"",length:0,toArray:function(){return a3.call(this)},get:function(e){return e==null?this.toArray():(e<0?this[this.length+e]:this[e])},pushStack:function(e){var b3=bI.merge(this.constructor(),e);b3.prevObject=this;b3.context=this.context;return b3},each:function(b3,e){return bI.each(this,b3,e)},ready:function(e){bI.ready.promise().done(e);return this},slice:function(){return this.pushStack(a3.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(b4){var e=this.length,b3=+b4+(b4<0?e:0);return this.pushStack(b3>=0&&b3<e?[this[b3]]:[])},map:function(e){return this.pushStack(bI.map(this,function(b4,b3){return e.call(b4,b3,b4)}))},end:function(){return this.prevObject||this.constructor(null)},push:am,sort:[].sort,splice:[].splice};bI.fn.init.prototype=bI.fn;bI.extend=bI.fn.extend=function(){var e,b8,b3,b4,cb,b9,b7=arguments[0]||{},b6=1,b5=arguments.length,ca=false;if(typeof b7==="boolean"){ca=b7;b7=arguments[1]||{};b6=2}if(typeof b7!=="object"&&!bI.isFunction(b7)){b7={}}if(b5===b6){b7=this;--b6}for(;b6<b5;b6++){if((cb=arguments[b6])!=null){for(b4 in cb){e=b7[b4];b3=cb[b4];if(b7===b3){continue}if(ca&&b3&&(bI.isPlainObject(b3)||(b8=bI.isArray(b3)))){if(b8){b8=false;b9=e&&bI.isArray(e)?e:[]}else{b9=e&&bI.isPlainObject(e)?e:{}}b7[b4]=bI.extend(ca,b9,b3)}else{if(b3!==aE){b7[b4]=b3}}}}}return b7};bI.extend({expando:"jQuery"+(s+Math.random()).replace(/\D/g,""),noConflict:function(e){if(a1.$===bI){a1.$=G}if(e&&a1.jQuery===bI){a1.jQuery=bh}return bI},isReady:false,readyWait:1,holdReady:function(e){if(e){bI.readyWait++}else{bI.ready(true)}},ready:function(e){if(e===true?--bI.readyWait:bI.isReady){return}if(!l.body){return setTimeout(bI.ready)}bI.isReady=true;if(e!==true&&--bI.readyWait>0){return}ag.resolveWith(l,[bI]);if(bI.fn.trigger){bI(l).trigger("ready").off("ready")}},isFunction:function(e){return bI.type(e)==="function"},isArray:Array.isArray||function(e){return bI.type(e)==="array"},isWindow:function(e){return e!=null&&e==e.window},isNumeric:function(e){return !isNaN(parseFloat(e))&&isFinite(e)},type:function(e){if(e==null){return String(e)}return typeof e==="object"||typeof e==="function"?Y[y.call(e)]||"object":typeof e},isPlainObject:function(b5){var b3;if(!b5||bI.type(b5)!=="object"||b5.nodeType||bI.isWindow(b5)){return false}try{if(b5.constructor&&!T.call(b5,"constructor")&&!T.call(b5.constructor.prototype,"isPrototypeOf")){return false}}catch(b4){return false}if(bI.support.ownLast){for(b3 in b5){return T.call(b5,b3)}}for(b3 in b5){}return b3===aE||T.call(b5,b3)},isEmptyObject:function(b3){var e;for(e in b3){return false}return true},error:function(e){throw new Error(e)},parseHTML:function(b6,b4,b5){if(!b6||typeof b6!=="string"){return null}if(typeof b4==="boolean"){b5=b4;b4=false}b4=b4||l;var b3=a.exec(b6),e=!b5&&[];if(b3){return[b4.createElement(b3[1])]}b3=bI.buildFragment([b6],b4,e);if(e){bI(e).remove()}return bI.merge([],b3.childNodes)},parseJSON:function(e){if(a1.JSON&&a1.JSON.parse){return a1.JSON.parse(e)}if(e===null){return e}if(typeof e==="string"){e=bI.trim(e);if(e){if(bg.test(e.replace(bF,"@").replace(aX,"]").replace(bj,""))){return(new Function("return "+e))()}}}bI.error("Invalid JSON: "+e)},parseXML:function(b5){var b3,b4;if(!b5||typeof b5!=="string"){return null}try{if(a1.DOMParser){b4=new DOMParser();b3=b4.parseFromString(b5,"text/xml")}else{b3=new ActiveXObject("Microsoft.XMLDOM");b3.async="false";b3.loadXML(b5)}}catch(b6){b3=aE}if(!b3||!b3.documentElement||b3.getElementsByTagName("parsererror").length){bI.error("Invalid XML: "+b5)}return b3},noop:function(){},globalEval:function(e){if(e&&bI.trim(e)){(a1.execScript||function(b3){a1["eval"].call(a1,b3)})(e)}},camelCase:function(e){return e.replace(bR,"ms-").replace(aT,K)},nodeName:function(b3,e){return b3.nodeName&&b3.nodeName.toLowerCase()===e.toLowerCase()},each:function(b7,b8,b3){var b6,b4=0,b5=b7.length,e=Z(b7);if(b3){if(e){for(;b4<b5;b4++){b6=b8.apply(b7[b4],b3);if(b6===false){break}}}else{for(b4 in b7){b6=b8.apply(b7[b4],b3);if(b6===false){break}}}}else{if(e){for(;b4<b5;b4++){b6=b8.call(b7[b4],b4,b7[b4]);if(b6===false){break}}}else{for(b4 in b7){b6=b8.call(b7[b4],b4,b7[b4]);if(b6===false){break}}}}return b7},trim:aO&&!aO.call("\uFEFF\xA0")?function(e){return e==null?"":aO.call(e)}:function(e){return e==null?"":(e+"").replace(B,"")},makeArray:function(e,b4){var b3=b4||[];if(e!=null){if(Z(Object(e))){bI.merge(b3,typeof e==="string"?[e]:e)}else{am.call(b3,e)}}return b3},inArray:function(b5,b3,b4){var e;if(b3){if(aK){return aK.call(b3,b5,b4)}e=b3.length;b4=b4?b4<0?Math.max(0,e+b4):b4:0;for(;b4<e;b4++){if(b4 in b3&&b3[b4]===b5){return b4}}}return -1},merge:function(b6,b4){var e=b4.length,b5=b6.length,b3=0;if(typeof e==="number"){for(;b3<e;b3++){b6[b5++]=b4[b3]}}else{while(b4[b3]!==aE){b6[b5++]=b4[b3++]}}b6.length=b5;return b6},grep:function(b3,b8,e){var b7,b4=[],b5=0,b6=b3.length;e=!!e;for(;b5<b6;b5++){b7=!!b8(b3[b5],b5);if(e!==b7){b4.push(b3[b5])}}return b4},map:function(b4,b9,e){var b8,b6=0,b7=b4.length,b3=Z(b4),b5=[];if(b3){for(;b6<b7;b6++){b8=b9(b4[b6],b6,e);if(b8!=null){b5[b5.length]=b8}}}else{for(b6 in b4){b8=b9(b4[b6],b6,e);if(b8!=null){b5[b5.length]=b8}}}return aG.apply([],b5)},guid:1,proxy:function(b6,b5){var e,b4,b3;if(typeof b5==="string"){b3=b6[b5];b5=b6;b6=b3}if(!bI.isFunction(b6)){return aE}e=a3.call(arguments,2);b4=function(){return b6.apply(b5||this,e.concat(a3.call(arguments)))};b4.guid=b6.guid=b6.guid||bI.guid++;return b4},access:function(e,b7,b9,b8,b5,cb,ca){var b4=0,b3=e.length,b6=b9==null;if(bI.type(b9)==="object"){b5=true;for(b4 in b9){bI.access(e,b7,b4,b9[b4],true,cb,ca)}}else{if(b8!==aE){b5=true;if(!bI.isFunction(b8)){ca=true}if(b6){if(ca){b7.call(e,b8);b7=null}else{b6=b7;b7=function(cd,cc,ce){return b6.call(bI(cd),ce)}}}if(b7){for(;b4<b3;b4++){b7(e[b4],b9,ca?b8:b8.call(e[b4],b4,b7(e[b4],b9)))}}}}return b5?e:b6?b7.call(e):b3?b7(e[0],b9):cb},now:function(){return(new Date()).getTime()},swap:function(b7,b6,b8,b5){var b4,b3,e={};for(b3 in b6){e[b3]=b7.style[b3];b7.style[b3]=b6[b3]}b4=b8.apply(b7,b5||[]);for(b3 in b6){b7.style[b3]=e[b3]}return b4}});bI.ready.promise=function(b6){if(!ag){ag=bI.Deferred();if(l.readyState==="complete"){setTimeout(bI.ready)}else{if(l.addEventListener){l.addEventListener("DOMContentLoaded",bW,false);a1.addEventListener("load",bW,false)}else{l.attachEvent("onreadystatechange",bW);a1.attachEvent("onload",bW);var b5=false;try{b5=a1.frameElement==null&&l.documentElement}catch(b4){}if(b5&&b5.doScroll){(function b3(){if(!bI.isReady){try{b5.doScroll("left")}catch(b7){return setTimeout(b3,50)}bk();bI.ready()}})()}}}}return ag.promise(b6)};bI.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(b3,e){Y["[object "+e+"]"]=e.toLowerCase()});function Z(b4){var b3=b4.length,e=bI.type(b4);if(bI.isWindow(b4)){return false}if(b4.nodeType===1&&b3){return true}return e==="array"||e!=="function"&&(b3===0||typeof b3==="number"&&b3>0&&(b3-1) in b4)}w=bI(l);
/*!
 * Sizzle CSS Selector Engine v1.10.2
 * http://sizzlejs.com/
 *
 * Copyright 2013 jQuery Foundation, Inc. and other contributors
 * Released under the MIT license
 * http://jquery.org/license
 *
 * Date: 2013-07-03
 */
(function(dc,ch){var cw,df,cc,cm,cF,cI,cT,dj,cG,cW,cA,cn,c5,c0,dd,cb,cD,c7="sizzle"+-(new Date()),cH=dc.document,dg=0,c1=0,b6=cy(),c6=cy(),cE=cy(),cU=false,cC=function(dk,e){if(dk===e){cU=true;return 0}return 0},db=typeof ch,cO=1<<31,cM=({}).hasOwnProperty,c9=[],da=c9.pop,cK=c9.push,b4=c9.push,cl=c9.slice,ca=c9.indexOf||function(dl){var dk=0,e=this.length;for(;dk<e;dk++){if(this[dk]===dl){return dk}}return -1},b5="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",co="[\\x20\\t\\r\\n\\f]",b3="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",cJ=b3.replace("w","w#"),c3="\\["+co+"*("+b3+")"+co+"*(?:([*^$|!~]?=)"+co+"*(?:(['\"])((?:\\\\.|[^\\\\])*?)\\3|("+cJ+")|)|)"+co+"*\\]",cj=":("+b3+")(?:\\(((['\"])((?:\\\\.|[^\\\\])*?)\\3|((?:\\\\.|[^\\\\()[\\]]|"+c3.replace(3,8)+")*)|.*)\\)|)",cq=new RegExp("^"+co+"+|((?:^|[^\\\\])(?:\\\\.)*)"+co+"+$","g"),ct=new RegExp("^"+co+"*,"+co+"*"),cz=new RegExp("^"+co+"*([>+~]|"+co+")"+co+"*"),cY=new RegExp(co+"*[+~]"),cs=new RegExp("="+co+"*([^\\]'\"]*)"+co+"*\\]","g"),cQ=new RegExp(cj),cR=new RegExp("^"+cJ+"$"),cZ={ID:new RegExp("^#("+b3+")"),CLASS:new RegExp("^\\.("+b3+")"),TAG:new RegExp("^("+b3.replace("w","w*")+")"),ATTR:new RegExp("^"+c3),PSEUDO:new RegExp("^"+cj),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+co+"*(even|odd|(([+-]|)(\\d*)n|)"+co+"*(?:([+-]|)"+co+"*(\\d+)|))"+co+"*\\)|)","i"),bool:new RegExp("^(?:"+b5+")$","i"),needsContext:new RegExp("^"+co+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+co+"*((?:-\\d)?\\d*)"+co+"*\\)|)(?=[^-]|$)","i")},cN=/^[^{]+\{\s*\[native \w/,cP=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,b9=/^(?:input|select|textarea|button)$/i,ck=/^h\d$/i,cL=/'|\\/g,cr=new RegExp("\\\\([\\da-f]{1,6}"+co+"?|("+co+")|.)","ig"),c2=function(e,dm,dk){var dl="0x"+dm-65536;return dl!==dl||dk?dm:dl<0?String.fromCharCode(dl+65536):String.fromCharCode(dl>>10|55296,dl&1023|56320)};try{b4.apply((c9=cl.call(cH.childNodes)),cH.childNodes);c9[cH.childNodes.length].nodeType}catch(cB){b4={apply:c9.length?function(dk,e){cK.apply(dk,cl.call(e))}:function(dm,dl){var e=dm.length,dk=0;while((dm[e++]=dl[dk++])){}dm.length=e-1}}}function cu(ds,dk,dw,dy){var dx,dp,dq,du,dv,dn,dm,e,dl,dt;if((dk?dk.ownerDocument||dk:cH)!==cA){cW(dk)}dk=dk||cA;dw=dw||[];if(!ds||typeof ds!=="string"){return dw}if((du=dk.nodeType)!==1&&du!==9){return[]}if(c5&&!dy){if((dx=cP.exec(ds))){if((dq=dx[1])){if(du===9){dp=dk.getElementById(dq);if(dp&&dp.parentNode){if(dp.id===dq){dw.push(dp);return dw}}else{return dw}}else{if(dk.ownerDocument&&(dp=dk.ownerDocument.getElementById(dq))&&cD(dk,dp)&&dp.id===dq){dw.push(dp);return dw}}}else{if(dx[2]){b4.apply(dw,dk.getElementsByTagName(ds));return dw}else{if((dq=dx[3])&&df.getElementsByClassName&&dk.getElementsByClassName){b4.apply(dw,dk.getElementsByClassName(dq));return dw}}}}if(df.qsa&&(!c0||!c0.test(ds))){e=dm=c7;dl=dk;dt=du===9&&ds;if(du===1&&dk.nodeName.toLowerCase()!=="object"){dn=cf(ds);if((dm=dk.getAttribute("id"))){e=dm.replace(cL,"\\$&")}else{dk.setAttribute("id",e)}e="[id='"+e+"'] ";dv=dn.length;while(dv--){dn[dv]=e+cg(dn[dv])}dl=cY.test(ds)&&dk.parentNode||dk;dt=dn.join(",")}if(dt){try{b4.apply(dw,dl.querySelectorAll(dt));return dw}catch(dr){}finally{if(!dm){dk.removeAttribute("id")}}}}}return de(ds.replace(cq,"$1"),dk,dw,dy)}function cy(){var dk=[];function e(dl,dm){if(dk.push(dl+=" ")>cm.cacheLength){delete e[dk.shift()]}return(e[dl]=dm)}return e}function ci(e){e[c7]=true;return e}function cd(dk){var dm=cA.createElement("div");try{return !!dk(dm)}catch(dl){return false}finally{if(dm.parentNode){dm.parentNode.removeChild(dm)}dm=null}}function dh(dk,dm){var e=dk.split("|"),dl=dk.length;while(dl--){cm.attrHandle[e[dl]]=dm}}function b7(dk,e){var dm=e&&dk,dl=dm&&dk.nodeType===1&&e.nodeType===1&&(~e.sourceIndex||cO)-(~dk.sourceIndex||cO);if(dl){return dl}if(dm){while((dm=dm.nextSibling)){if(dm===e){return -1}}}return dk?1:-1}function cv(e){return function(dl){var dk=dl.nodeName.toLowerCase();return dk==="input"&&dl.type===e}}function b8(e){return function(dl){var dk=dl.nodeName.toLowerCase();return(dk==="input"||dk==="button")&&dl.type===e}}function c4(e){return ci(function(dk){dk=+dk;return ci(function(dl,dq){var dn,dm=e([],dl.length,dk),dp=dm.length;while(dp--){if(dl[(dn=dm[dp])]){dl[dn]=!(dq[dn]=dl[dn])}}})})}cI=cu.isXML=function(e){var dk=e&&(e.ownerDocument||e).documentElement;return dk?dk.nodeName!=="HTML":false};df=cu.support={};cW=cu.setDocument=function(dk){var dl=dk?dk.ownerDocument||dk:cH,e=dl.defaultView;if(dl===cA||dl.nodeType!==9||!dl.documentElement){return cA}cA=dl;cn=dl.documentElement;c5=!cI(dl);if(e&&e.attachEvent&&e!==e.top){e.attachEvent("onbeforeunload",function(){cW()})}df.attributes=cd(function(dm){dm.className="i";return !dm.getAttribute("className")});df.getElementsByTagName=cd(function(dm){dm.appendChild(dl.createComment(""));return !dm.getElementsByTagName("*").length});df.getElementsByClassName=cd(function(dm){dm.innerHTML="<div class='a'></div><div class='a i'></div>";dm.firstChild.className="i";return dm.getElementsByClassName("i").length===2});df.getById=cd(function(dm){cn.appendChild(dm).id=c7;return !dl.getElementsByName||!dl.getElementsByName(c7).length});if(df.getById){cm.find.ID=function(dp,dn){if(typeof dn.getElementById!==db&&c5){var dm=dn.getElementById(dp);return dm&&dm.parentNode?[dm]:[]}};cm.filter.ID=function(dn){var dm=dn.replace(cr,c2);return function(dp){return dp.getAttribute("id")===dm}}}else{delete cm.find.ID;cm.filter.ID=function(dn){var dm=dn.replace(cr,c2);return function(dq){var dp=typeof dq.getAttributeNode!==db&&dq.getAttributeNode("id");return dp&&dp.value===dm}}}cm.find.TAG=df.getElementsByTagName?function(dm,dn){if(typeof dn.getElementsByTagName!==db){return dn.getElementsByTagName(dm)}}:function(dm,dr){var ds,dq=[],dp=0,dn=dr.getElementsByTagName(dm);if(dm==="*"){while((ds=dn[dp++])){if(ds.nodeType===1){dq.push(ds)}}return dq}return dn};cm.find.CLASS=df.getElementsByClassName&&function(dn,dm){if(typeof dm.getElementsByClassName!==db&&c5){return dm.getElementsByClassName(dn)}};dd=[];c0=[];if((df.qsa=cN.test(dl.querySelectorAll))){cd(function(dm){dm.innerHTML="<select><option selected=''></option></select>";if(!dm.querySelectorAll("[selected]").length){c0.push("\\["+co+"*(?:value|"+b5+")")}if(!dm.querySelectorAll(":checked").length){c0.push(":checked")}});cd(function(dn){var dm=dl.createElement("input");dm.setAttribute("type","hidden");dn.appendChild(dm).setAttribute("t","");if(dn.querySelectorAll("[t^='']").length){c0.push("[*^$]="+co+"*(?:''|\"\")")}if(!dn.querySelectorAll(":enabled").length){c0.push(":enabled",":disabled")}dn.querySelectorAll("*,:x");c0.push(",.*:")})}if((df.matchesSelector=cN.test((cb=cn.webkitMatchesSelector||cn.mozMatchesSelector||cn.oMatchesSelector||cn.msMatchesSelector)))){cd(function(dm){df.disconnectedMatch=cb.call(dm,"div");cb.call(dm,"[s!='']:x");dd.push("!=",cj)})}c0=c0.length&&new RegExp(c0.join("|"));dd=dd.length&&new RegExp(dd.join("|"));cD=cN.test(cn.contains)||cn.compareDocumentPosition?function(dn,dm){var dq=dn.nodeType===9?dn.documentElement:dn,dp=dm&&dm.parentNode;return dn===dp||!!(dp&&dp.nodeType===1&&(dq.contains?dq.contains(dp):dn.compareDocumentPosition&&dn.compareDocumentPosition(dp)&16))}:function(dn,dm){if(dm){while((dm=dm.parentNode)){if(dm===dn){return true}}}return false};cC=cn.compareDocumentPosition?function(dn,dm){if(dn===dm){cU=true;return 0}var dp=dm.compareDocumentPosition&&dn.compareDocumentPosition&&dn.compareDocumentPosition(dm);if(dp){if(dp&1||(!df.sortDetached&&dm.compareDocumentPosition(dn)===dp)){if(dn===dl||cD(cH,dn)){return -1}if(dm===dl||cD(cH,dm)){return 1}return cG?(ca.call(cG,dn)-ca.call(cG,dm)):0}return dp&4?-1:1}return dn.compareDocumentPosition?-1:1}:function(dn,dm){var du,dr=0,dt=dn.parentNode,dq=dm.parentNode,dp=[dn],ds=[dm];if(dn===dm){cU=true;return 0}else{if(!dt||!dq){return dn===dl?-1:dm===dl?1:dt?-1:dq?1:cG?(ca.call(cG,dn)-ca.call(cG,dm)):0}else{if(dt===dq){return b7(dn,dm)}}}du=dn;while((du=du.parentNode)){dp.unshift(du)}du=dm;while((du=du.parentNode)){ds.unshift(du)}while(dp[dr]===ds[dr]){dr++}return dr?b7(dp[dr],ds[dr]):dp[dr]===cH?-1:ds[dr]===cH?1:0};return dl};cu.matches=function(dk,e){return cu(dk,null,null,e)};cu.matchesSelector=function(dl,dn){if((dl.ownerDocument||dl)!==cA){cW(dl)}dn=dn.replace(cs,"='$1']");if(df.matchesSelector&&c5&&(!dd||!dd.test(dn))&&(!c0||!c0.test(dn))){try{var dk=cb.call(dl,dn);if(dk||df.disconnectedMatch||dl.document&&dl.document.nodeType!==11){return dk}}catch(dm){}}return cu(dn,cA,null,[dl]).length>0};cu.contains=function(e,dk){if((e.ownerDocument||e)!==cA){cW(e)}return cD(e,dk)};cu.attr=function(dl,e){if((dl.ownerDocument||dl)!==cA){cW(dl)}var dk=cm.attrHandle[e.toLowerCase()],dm=dk&&cM.call(cm.attrHandle,e.toLowerCase())?dk(dl,e,!c5):ch;return dm===ch?df.attributes||!c5?dl.getAttribute(e):(dm=dl.getAttributeNode(e))&&dm.specified?dm.value:null:dm};cu.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)};cu.uniqueSort=function(dl){var dm,dn=[],e=0,dk=0;cU=!df.detectDuplicates;cG=!df.sortStable&&dl.slice(0);dl.sort(cC);if(cU){while((dm=dl[dk++])){if(dm===dl[dk]){e=dn.push(dk)}}while(e--){dl.splice(dn[e],1)}}return dl};cF=cu.getText=function(dn){var dm,dk="",dl=0,e=dn.nodeType;if(!e){for(;(dm=dn[dl]);dl++){dk+=cF(dm)}}else{if(e===1||e===9||e===11){if(typeof dn.textContent==="string"){return dn.textContent}else{for(dn=dn.firstChild;dn;dn=dn.nextSibling){dk+=cF(dn)}}}else{if(e===3||e===4){return dn.nodeValue}}}return dk};cm=cu.selectors={cacheLength:50,createPseudo:ci,match:cZ,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:true}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:true},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){e[1]=e[1].replace(cr,c2);e[3]=(e[4]||e[5]||"").replace(cr,c2);if(e[2]==="~="){e[3]=" "+e[3]+" "}return e.slice(0,4)},CHILD:function(e){e[1]=e[1].toLowerCase();if(e[1].slice(0,3)==="nth"){if(!e[3]){cu.error(e[0])}e[4]=+(e[4]?e[5]+(e[6]||1):2*(e[3]==="even"||e[3]==="odd"));e[5]=+((e[7]+e[8])||e[3]==="odd")}else{if(e[3]){cu.error(e[0])}}return e},PSEUDO:function(dk){var e,dl=!dk[5]&&dk[2];if(cZ.CHILD.test(dk[0])){return null}if(dk[3]&&dk[4]!==ch){dk[2]=dk[4]}else{if(dl&&cQ.test(dl)&&(e=cf(dl,true))&&(e=dl.indexOf(")",dl.length-e)-dl.length)){dk[0]=dk[0].slice(0,e);dk[2]=dl.slice(0,e)}}return dk.slice(0,3)}},filter:{TAG:function(dk){var e=dk.replace(cr,c2).toLowerCase();return dk==="*"?function(){return true}:function(dl){return dl.nodeName&&dl.nodeName.toLowerCase()===e}},CLASS:function(e){var dk=b6[e+" "];return dk||(dk=new RegExp("(^|"+co+")"+e+"("+co+"|$)"))&&b6(e,function(dl){return dk.test(typeof dl.className==="string"&&dl.className||typeof dl.getAttribute!==db&&dl.getAttribute("class")||"")})},ATTR:function(dl,dk,e){return function(dn){var dm=cu.attr(dn,dl);if(dm==null){return dk==="!="}if(!dk){return true}dm+="";return dk==="="?dm===e:dk==="!="?dm!==e:dk==="^="?e&&dm.indexOf(e)===0:dk==="*="?e&&dm.indexOf(e)>-1:dk==="$="?e&&dm.slice(-e.length)===e:dk==="~="?(" "+dm+" ").indexOf(e)>-1:dk==="|="?dm===e||dm.slice(0,e.length+1)===e+"-":false}},CHILD:function(dk,dn,dm,dp,dl){var dr=dk.slice(0,3)!=="nth",e=dk.slice(-4)!=="last",dq=dn==="of-type";return dp===1&&dl===0?function(ds){return !!ds.parentNode}:function(dy,dw,dB){var ds,dE,dz,dD,dA,dv,dx=dr!==e?"nextSibling":"previousSibling",dC=dy.parentNode,du=dq&&dy.nodeName.toLowerCase(),dt=!dB&&!dq;if(dC){if(dr){while(dx){dz=dy;while((dz=dz[dx])){if(dq?dz.nodeName.toLowerCase()===du:dz.nodeType===1){return false}}dv=dx=dk==="only"&&!dv&&"nextSibling"}return true}dv=[e?dC.firstChild:dC.lastChild];if(e&&dt){dE=dC[c7]||(dC[c7]={});ds=dE[dk]||[];dA=ds[0]===dg&&ds[1];dD=ds[0]===dg&&ds[2];dz=dA&&dC.childNodes[dA];while((dz=++dA&&dz&&dz[dx]||(dD=dA=0)||dv.pop())){if(dz.nodeType===1&&++dD&&dz===dy){dE[dk]=[dg,dA,dD];break}}}else{if(dt&&(ds=(dy[c7]||(dy[c7]={}))[dk])&&ds[0]===dg){dD=ds[1]}else{while((dz=++dA&&dz&&dz[dx]||(dD=dA=0)||dv.pop())){if((dq?dz.nodeName.toLowerCase()===du:dz.nodeType===1)&&++dD){if(dt){(dz[c7]||(dz[c7]={}))[dk]=[dg,dD]}if(dz===dy){break}}}}}dD-=dl;return dD===dp||(dD%dp===0&&dD/dp>=0)}}},PSEUDO:function(dm,dl){var e,dk=cm.pseudos[dm]||cm.setFilters[dm.toLowerCase()]||cu.error("unsupported pseudo: "+dm);if(dk[c7]){return dk(dl)}if(dk.length>1){e=[dm,dm,"",dl];return cm.setFilters.hasOwnProperty(dm.toLowerCase())?ci(function(dq,ds){var dp,dn=dk(dq,dl),dr=dn.length;while(dr--){dp=ca.call(dq,dn[dr]);dq[dp]=!(ds[dp]=dn[dr])}}):function(dn){return dk(dn,0,e)}}return dk}},pseudos:{not:ci(function(e){var dk=[],dl=[],dm=cT(e.replace(cq,"$1"));return dm[c7]?ci(function(dp,du,ds,dq){var dt,dn=dm(dp,null,dq,[]),dr=dp.length;while(dr--){if((dt=dn[dr])){dp[dr]=!(du[dr]=dt)}}}):function(dq,dp,dn){dk[0]=dq;dm(dk,null,dn,dl);return !dl.pop()}}),has:ci(function(e){return function(dk){return cu(e,dk).length>0}}),contains:ci(function(e){return function(dk){return(dk.textContent||dk.innerText||cF(dk)).indexOf(e)>-1}}),lang:ci(function(e){if(!cR.test(e||"")){cu.error("unsupported lang: "+e)}e=e.replace(cr,c2).toLowerCase();return function(dl){var dk;do{if((dk=c5?dl.lang:dl.getAttribute("xml:lang")||dl.getAttribute("lang"))){dk=dk.toLowerCase();return dk===e||dk.indexOf(e+"-")===0}}while((dl=dl.parentNode)&&dl.nodeType===1);return false}}),target:function(e){var dk=dc.location&&dc.location.hash;return dk&&dk.slice(1)===e.id},root:function(e){return e===cn},focus:function(e){return e===cA.activeElement&&(!cA.hasFocus||cA.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:function(e){return e.disabled===false},disabled:function(e){return e.disabled===true},checked:function(e){var dk=e.nodeName.toLowerCase();return(dk==="input"&&!!e.checked)||(dk==="option"&&!!e.selected)},selected:function(e){if(e.parentNode){e.parentNode.selectedIndex}return e.selected===true},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling){if(e.nodeName>"@"||e.nodeType===3||e.nodeType===4){return false}}return true},parent:function(e){return !cm.pseudos.empty(e)},header:function(e){return ck.test(e.nodeName)},input:function(e){return b9.test(e.nodeName)},button:function(dk){var e=dk.nodeName.toLowerCase();return e==="input"&&dk.type==="button"||e==="button"},text:function(dk){var e;return dk.nodeName.toLowerCase()==="input"&&dk.type==="text"&&((e=dk.getAttribute("type"))==null||e.toLowerCase()===dk.type)},first:c4(function(){return[0]}),last:c4(function(e,dk){return[dk-1]}),eq:c4(function(e,dl,dk){return[dk<0?dk+dl:dk]}),even:c4(function(e,dl){var dk=0;for(;dk<dl;dk+=2){e.push(dk)}return e}),odd:c4(function(e,dl){var dk=1;for(;dk<dl;dk+=2){e.push(dk)}return e}),lt:c4(function(e,dm,dl){var dk=dl<0?dl+dm:dl;for(;--dk>=0;){e.push(dk)}return e}),gt:c4(function(e,dm,dl){var dk=dl<0?dl+dm:dl;for(;++dk<dm;){e.push(dk)}return e})}};cm.pseudos.nth=cm.pseudos.eq;for(cw in {radio:true,checkbox:true,file:true,password:true,image:true}){cm.pseudos[cw]=cv(cw)}for(cw in {submit:true,reset:true}){cm.pseudos[cw]=b8(cw)}function cS(){}cS.prototype=cm.filters=cm.pseudos;cm.setFilters=new cS();function cf(dn,dt){var dk,dp,dr,ds,dq,dl,e,dm=c6[dn+" "];if(dm){return dt?0:dm.slice(0)}dq=dn;dl=[];e=cm.preFilter;while(dq){if(!dk||(dp=ct.exec(dq))){if(dp){dq=dq.slice(dp[0].length)||dq}dl.push(dr=[])}dk=false;if((dp=cz.exec(dq))){dk=dp.shift();dr.push({value:dk,type:dp[0].replace(cq," ")});dq=dq.slice(dk.length)}for(ds in cm.filter){if((dp=cZ[ds].exec(dq))&&(!e[ds]||(dp=e[ds](dp)))){dk=dp.shift();dr.push({value:dk,type:ds,matches:dp});dq=dq.slice(dk.length)}}if(!dk){break}}return dt?dq.length:dq?cu.error(dn):c6(dn,dl).slice(0)}function cg(dm){var dl=0,dk=dm.length,e="";for(;dl<dk;dl++){e+=dm[dl].value}return e}function cp(dn,dl,dm){var e=dl.dir,dp=dm&&e==="parentNode",dk=c1++;return dl.first?function(ds,dr,dq){while((ds=ds[e])){if(ds.nodeType===1||dp){return dn(ds,dr,dq)}}}:function(du,ds,dr){var dw,dq,dt,dv=dg+" "+dk;if(dr){while((du=du[e])){if(du.nodeType===1||dp){if(dn(du,ds,dr)){return true}}}}else{while((du=du[e])){if(du.nodeType===1||dp){dt=du[c7]||(du[c7]={});if((dq=dt[e])&&dq[0]===dv){if((dw=dq[1])===true||dw===cc){return dw===true}}else{dq=dt[e]=[dv];dq[1]=dn(du,ds,dr)||cc;if(dq[1]===true){return true}}}}}}}function di(e){return e.length>1?function(dn,dm,dk){var dl=e.length;while(dl--){if(!e[dl](dn,dm,dk)){return false}}return true}:e[0]}function cX(e,dk,dl,dm,dq){var dn,dt=[],dp=0,dr=e.length,ds=dk!=null;for(;dp<dr;dp++){if((dn=e[dp])){if(!dl||dl(dn,dm,dq)){dt.push(dn);if(ds){dk.push(dp)}}}}return dt}function ce(dl,dk,dn,dm,dp,e){if(dm&&!dm[c7]){dm=ce(dm)}if(dp&&!dp[c7]){dp=ce(dp,e)}return ci(function(dA,dx,ds,dz){var dC,dy,du,dt=[],dB=[],dr=dx.length,dq=dA||cx(dk||"*",ds.nodeType?[ds]:ds,[]),dv=dl&&(dA||!dk)?cX(dq,dt,dl,ds,dz):dq,dw=dn?dp||(dA?dl:dr||dm)?[]:dx:dv;if(dn){dn(dv,dw,ds,dz)}if(dm){dC=cX(dw,dB);dm(dC,[],ds,dz);dy=dC.length;while(dy--){if((du=dC[dy])){dw[dB[dy]]=!(dv[dB[dy]]=du)}}}if(dA){if(dp||dl){if(dp){dC=[];dy=dw.length;while(dy--){if((du=dw[dy])){dC.push((dv[dy]=du))}}dp(null,(dw=[]),dC,dz)}dy=dw.length;while(dy--){if((du=dw[dy])&&(dC=dp?ca.call(dA,du):dt[dy])>-1){dA[dC]=!(dx[dC]=du)}}}}else{dw=cX(dw===dx?dw.splice(dr,dw.length):dw);if(dp){dp(null,dx,dw,dz)}else{b4.apply(dx,dw)}}})}function c8(dq){var dk,dn,dl,dp=dq.length,dt=cm.relative[dq[0].type],du=dt||cm.relative[" "],dm=dt?1:0,dr=cp(function(dv){return dv===dk},du,true),ds=cp(function(dv){return ca.call(dk,dv)>-1},du,true),e=[function(dx,dw,dv){return(!dt&&(dv||dw!==dj))||((dk=dw).nodeType?dr(dx,dw,dv):ds(dx,dw,dv))}];for(;dm<dp;dm++){if((dn=cm.relative[dq[dm].type])){e=[cp(di(e),dn)]}else{dn=cm.filter[dq[dm].type].apply(null,dq[dm].matches);if(dn[c7]){dl=++dm;for(;dl<dp;dl++){if(cm.relative[dq[dl].type]){break}}return ce(dm>1&&di(e),dm>1&&cg(dq.slice(0,dm-1).concat({value:dq[dm-2].type===" "?"*":""})).replace(cq,"$1"),dn,dm<dl&&c8(dq.slice(dm,dl)),dl<dp&&c8((dq=dq.slice(dl))),dl<dp&&cg(dq))}e.push(dn)}}return di(e)}function cV(dm,dl){var dp=0,e=dl.length>0,dn=dm.length>0,dk=function(dz,dt,dy,dx,dF){var du,dv,dA,dE=[],dD=0,dw="0",dq=dz&&[],dB=dF!=null,dC=dj,ds=dz||dn&&cm.find.TAG("*",dF&&dt.parentNode||dt),dr=(dg+=dC==null?1:Math.random()||0.1);if(dB){dj=dt!==cA&&dt;cc=dp}for(;(du=ds[dw])!=null;dw++){if(dn&&du){dv=0;while((dA=dm[dv++])){if(dA(du,dt,dy)){dx.push(du);break}}if(dB){dg=dr;cc=++dp}}if(e){if((du=!dA&&du)){dD--}if(dz){dq.push(du)}}}dD+=dw;if(e&&dw!==dD){dv=0;while((dA=dl[dv++])){dA(dq,dE,dt,dy)}if(dz){if(dD>0){while(dw--){if(!(dq[dw]||dE[dw])){dE[dw]=da.call(dx)}}}dE=cX(dE)}b4.apply(dx,dE);if(dB&&!dz&&dE.length>0&&(dD+dl.length)>1){cu.uniqueSort(dx)}}if(dB){dg=dr;dj=dC}return dq};return e?ci(dk):dk}cT=cu.compile=function(e,dp){var dl,dk=[],dn=[],dm=cE[e+" "];if(!dm){if(!dp){dp=cf(e)}dl=dp.length;while(dl--){dm=c8(dp[dl]);if(dm[c7]){dk.push(dm)}else{dn.push(dm)}}dm=cE(e,cV(dn,dk))}return dm};function cx(dk,dn,dm){var dl=0,e=dn.length;for(;dl<e;dl++){cu(dk,dn[dl],dm)}return dm}function de(dl,e,dm,dq){var dn,ds,dk,dt,dr,dp=cf(dl);if(!dq){if(dp.length===1){ds=dp[0]=dp[0].slice(0);if(ds.length>2&&(dk=ds[0]).type==="ID"&&df.getById&&e.nodeType===9&&c5&&cm.relative[ds[1].type]){e=(cm.find.ID(dk.matches[0].replace(cr,c2),e)||[])[0];if(!e){return dm}dl=dl.slice(ds.shift().value.length)}dn=cZ.needsContext.test(dl)?0:ds.length;while(dn--){dk=ds[dn];if(cm.relative[(dt=dk.type)]){break}if((dr=cm.find[dt])){if((dq=dr(dk.matches[0].replace(cr,c2),cY.test(ds[0].type)&&e.parentNode||e))){ds.splice(dn,1);dl=dq.length&&cg(ds);if(!dl){b4.apply(dm,dq);return dm}break}}}}}cT(dl,dp)(dq,e,!c5,dm,cY.test(dl));return dm}df.sortStable=c7.split("").sort(cC).join("")===c7;df.detectDuplicates=cU;cW();df.sortDetached=cd(function(e){return e.compareDocumentPosition(cA.createElement("div"))&1});if(!cd(function(e){e.innerHTML="<a href='#'></a>";return e.firstChild.getAttribute("href")==="#"})){dh("type|href|height|width",function(dk,e,dl){if(!dl){return dk.getAttribute(e,e.toLowerCase()==="type"?1:2)}})}if(!df.attributes||!cd(function(e){e.innerHTML="<input/>";e.firstChild.setAttribute("value","");return e.firstChild.getAttribute("value")===""})){dh("value",function(dk,e,dl){if(!dl&&dk.nodeName.toLowerCase()==="input"){return dk.defaultValue}})}if(!cd(function(e){return e.getAttribute("disabled")==null})){dh(b5,function(dk,e,dm){var dl;if(!dm){return(dl=dk.getAttributeNode(e))&&dl.specified?dl.value:dk[e]===true?e.toLowerCase():null}})}bI.find=cu;bI.expr=cu.selectors;bI.expr[":"]=bI.expr.pseudos;bI.unique=cu.uniqueSort;bI.text=cu.getText;bI.isXMLDoc=cu.isXML;bI.contains=cu.contains})(a1);var bY={};function ac(b3){var e=bY[b3]={};bI.each(b3.match(aa)||[],function(b5,b4){e[b4]=true});return e}bI.Callbacks=function(cc){cc=typeof cc==="string"?(bY[cc]||ac(cc)):bI.extend({},cc);var b6,b5,e,b7,b8,b4,b9=[],ca=!cc.once&&[],b3=function(cd){b5=cc.memory&&cd;e=true;b8=b4||0;b4=0;b7=b9.length;b6=true;for(;b9&&b8<b7;b8++){if(b9[b8].apply(cd[0],cd[1])===false&&cc.stopOnFalse){b5=false;break}}b6=false;if(b9){if(ca){if(ca.length){b3(ca.shift())}}else{if(b5){b9=[]}else{cb.disable()}}}},cb={add:function(){if(b9){var ce=b9.length;(function cd(cf){bI.each(cf,function(ch,cg){var ci=bI.type(cg);if(ci==="function"){if(!cc.unique||!cb.has(cg)){b9.push(cg)}}else{if(cg&&cg.length&&ci!=="string"){cd(cg)}}})})(arguments);if(b6){b7=b9.length}else{if(b5){b4=ce;b3(b5)}}}return this},remove:function(){if(b9){bI.each(arguments,function(cf,cd){var ce;while((ce=bI.inArray(cd,b9,ce))>-1){b9.splice(ce,1);if(b6){if(ce<=b7){b7--}if(ce<=b8){b8--}}}})}return this},has:function(cd){return cd?bI.inArray(cd,b9)>-1:!!(b9&&b9.length)},empty:function(){b9=[];b7=0;return this},disable:function(){b9=ca=b5=aE;return this},disabled:function(){return !b9},lock:function(){ca=aE;if(!b5){cb.disable()}return this},locked:function(){return !ca},fireWith:function(ce,cd){if(b9&&(!e||ca)){cd=cd||[];cd=[ce,cd.slice?cd.slice():cd];if(b6){ca.push(cd)}else{b3(cd)}}return this},fire:function(){cb.fireWith(this,arguments);return this},fired:function(){return !!e}};return cb};bI.extend({Deferred:function(b4){var b3=[["resolve","done",bI.Callbacks("once memory"),"resolved"],["reject","fail",bI.Callbacks("once memory"),"rejected"],["notify","progress",bI.Callbacks("memory")]],b5="pending",b6={state:function(){return b5},always:function(){e.done(arguments).fail(arguments);return this},then:function(){var b7=arguments;return bI.Deferred(function(b8){bI.each(b3,function(ca,b9){var cc=b9[0],cb=bI.isFunction(b7[ca])&&b7[ca];e[b9[1]](function(){var cd=cb&&cb.apply(this,arguments);if(cd&&bI.isFunction(cd.promise)){cd.promise().done(b8.resolve).fail(b8.reject).progress(b8.notify)}else{b8[cc+"With"](this===b6?b8.promise():this,cb?[cd]:arguments)}})});b7=null}).promise()},promise:function(b7){return b7!=null?bI.extend(b7,b6):b6}},e={};b6.pipe=b6.then;bI.each(b3,function(b8,b7){var ca=b7[2],b9=b7[3];b6[b7[1]]=ca.add;if(b9){ca.add(function(){b5=b9},b3[b8^1][2].disable,b3[2][2].lock)}e[b7[0]]=function(){e[b7[0]+"With"](this===e?b6:this,arguments);return this};e[b7[0]+"With"]=ca.fireWith});b6.promise(e);if(b4){b4.call(e,e)}return e},when:function(b6){var b4=0,b8=a3.call(arguments),e=b8.length,b3=e!==1||(b6&&bI.isFunction(b6.promise))?e:0,cb=b3===1?b6:bI.Deferred(),b5=function(cd,ce,cc){return function(cf){ce[cd]=this;cc[cd]=arguments.length>1?a3.call(arguments):cf;if(cc===ca){cb.notifyWith(ce,cc)}else{if(!(--b3)){cb.resolveWith(ce,cc)}}}},ca,b7,b9;if(e>1){ca=new Array(e);b7=new Array(e);b9=new Array(e);for(;b4<e;b4++){if(b8[b4]&&bI.isFunction(b8[b4].promise)){b8[b4].promise().done(b5(b4,b9,b8)).fail(cb.reject).progress(b5(b4,b7,ca))}else{--b3}}}if(!b3){cb.resolveWith(b9,b8)}return cb.promise()}});bI.support=(function(ce){var cd,cb,ca,cc,b9,b5,b7,b4,b6,b3=l.createElement("div");b3.setAttribute("className","t");b3.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>";cd=b3.getElementsByTagName("*")||[];cb=b3.getElementsByTagName("a")[0];if(!cb||!cb.style||!cd.length){return ce}cc=l.createElement("select");b5=cc.appendChild(l.createElement("option"));ca=b3.getElementsByTagName("input")[0];cb.style.cssText="top:1px;float:left;opacity:.5";ce.getSetAttribute=b3.className!=="t";ce.leadingWhitespace=b3.firstChild.nodeType===3;ce.tbody=!b3.getElementsByTagName("tbody").length;ce.htmlSerialize=!!b3.getElementsByTagName("link").length;ce.style=/top/.test(cb.getAttribute("style"));ce.hrefNormalized=cb.getAttribute("href")==="/a";ce.opacity=/^0.5/.test(cb.style.opacity);ce.cssFloat=!!cb.style.cssFloat;ce.checkOn=!!ca.value;ce.optSelected=b5.selected;ce.enctype=!!l.createElement("form").enctype;ce.html5Clone=l.createElement("nav").cloneNode(true).outerHTML!=="<:nav></:nav>";ce.inlineBlockNeedsLayout=false;ce.shrinkWrapBlocks=false;ce.pixelPosition=false;ce.deleteExpando=true;ce.noCloneEvent=true;ce.reliableMarginRight=true;ce.boxSizingReliable=true;ca.checked=true;ce.noCloneChecked=ca.cloneNode(true).checked;cc.disabled=true;ce.optDisabled=!b5.disabled;try{delete b3.test}catch(b8){ce.deleteExpando=false}ca=l.createElement("input");ca.setAttribute("value","");ce.input=ca.getAttribute("value")==="";ca.value="t";ca.setAttribute("type","radio");ce.radioValue=ca.value==="t";ca.setAttribute("checked","t");ca.setAttribute("name","t");b9=l.createDocumentFragment();b9.appendChild(ca);ce.appendChecked=ca.checked;ce.checkClone=b9.cloneNode(true).cloneNode(true).lastChild.checked;if(b3.attachEvent){b3.attachEvent("onclick",function(){ce.noCloneEvent=false});b3.cloneNode(true).click()}for(b6 in {submit:true,change:true,focusin:true}){b3.setAttribute(b7="on"+b6,"t");ce[b6+"Bubbles"]=b7 in a1||b3.attributes[b7].expando===false}b3.style.backgroundClip="content-box";b3.cloneNode(true).style.backgroundClip="";ce.clearCloneStyle=b3.style.backgroundClip==="content-box";for(b6 in bI(ce)){break}ce.ownLast=b6!=="0";bI(function(){var cf,ci,ch,cg="padding:0;margin:0;border:0;display:block;box-sizing:content-box;-moz-box-sizing:content-box;-webkit-box-sizing:content-box;",e=l.getElementsByTagName("body")[0];if(!e){return}cf=l.createElement("div");cf.style.cssText="border:0;width:0;height:0;position:absolute;top:0;left:-9999px;margin-top:1px";e.appendChild(cf).appendChild(b3);b3.innerHTML="<table><tr><td></td><td>t</td></tr></table>";ch=b3.getElementsByTagName("td");ch[0].style.cssText="padding:0;margin:0;border:0;display:none";b4=(ch[0].offsetHeight===0);ch[0].style.display="";ch[1].style.display="none";ce.reliableHiddenOffsets=b4&&(ch[0].offsetHeight===0);b3.innerHTML="";b3.style.cssText="box-sizing:border-box;-moz-box-sizing:border-box;-webkit-box-sizing:border-box;padding:1px;border:1px;display:block;width:4px;margin-top:1%;position:absolute;top:1%;";bI.swap(e,e.style.zoom!=null?{zoom:1}:{},function(){ce.boxSizing=b3.offsetWidth===4});if(a1.getComputedStyle){ce.pixelPosition=(a1.getComputedStyle(b3,null)||{}).top!=="1%";ce.boxSizingReliable=(a1.getComputedStyle(b3,null)||{width:"4px"}).width==="4px";ci=b3.appendChild(l.createElement("div"));ci.style.cssText=b3.style.cssText=cg;ci.style.marginRight=ci.style.width="0";b3.style.width="1px";ce.reliableMarginRight=!parseFloat((a1.getComputedStyle(ci,null)||{}).marginRight)}if(typeof b3.style.zoom!==aA){b3.innerHTML="";b3.style.cssText=cg+"width:1px;padding:1px;display:inline;zoom:1";ce.inlineBlockNeedsLayout=(b3.offsetWidth===3);b3.style.display="block";b3.innerHTML="<div></div>";b3.firstChild.style.width="5px";ce.shrinkWrapBlocks=(b3.offsetWidth!==3);if(ce.inlineBlockNeedsLayout){e.style.zoom=1}}e.removeChild(cf);cf=b3=ch=ci=null});cd=cc=b9=b5=cb=ca=null;return ce})({});var bv=/(?:\{[\s\S]*\}|\[[\s\S]*\])$/,aL=/([A-Z])/g;function a9(b5,b3,b7,b6){if(!bI.acceptData(b5)){return}var b9,b8,ca=bI.expando,cb=b5.nodeType,e=cb?bI.cache:b5,b4=cb?b5[ca]:b5[ca]&&ca;if((!b4||!e[b4]||(!b6&&!e[b4].data))&&b7===aE&&typeof b3==="string"){return}if(!b4){if(cb){b4=b5[ca]=a5.pop()||bI.guid++}else{b4=ca}}if(!e[b4]){e[b4]=cb?{}:{toJSON:bI.noop}}if(typeof b3==="object"||typeof b3==="function"){if(b6){e[b4]=bI.extend(e[b4],b3)}else{e[b4].data=bI.extend(e[b4].data,b3)}}b8=e[b4];if(!b6){if(!b8.data){b8.data={}}b8=b8.data}if(b7!==aE){b8[bI.camelCase(b3)]=b7}if(typeof b3==="string"){b9=b8[b3];if(b9==null){b9=b8[bI.camelCase(b3)]}}else{b9=b8}return b9}function X(b6,b4,e){if(!bI.acceptData(b6)){return}var b8,b5,b7=b6.nodeType,b3=b7?bI.cache:b6,b9=b7?b6[bI.expando]:bI.expando;if(!b3[b9]){return}if(b4){b8=e?b3[b9]:b3[b9].data;if(b8){if(!bI.isArray(b4)){if(b4 in b8){b4=[b4]}else{b4=bI.camelCase(b4);if(b4 in b8){b4=[b4]}else{b4=b4.split(" ")}}}else{b4=b4.concat(bI.map(b4,bI.camelCase))}b5=b4.length;while(b5--){delete b8[b4[b5]]}if(e?!L(b8):!bI.isEmptyObject(b8)){return}}}if(!e){delete b3[b9].data;if(!L(b3[b9])){return}}if(b7){bI.cleanData([b6],true)}else{if(bI.support.deleteExpando||b3!=b3.window){delete b3[b9]}else{b3[b9]=null}}}bI.extend({cache:{},noData:{applet:true,embed:true,object:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"},hasData:function(e){e=e.nodeType?bI.cache[e[bI.expando]]:e[bI.expando];return !!e&&!L(e)},data:function(b3,e,b4){return a9(b3,e,b4)},removeData:function(b3,e){return X(b3,e)},_data:function(b3,e,b4){return a9(b3,e,b4,true)},_removeData:function(b3,e){return X(b3,e,true)},acceptData:function(b3){if(b3.nodeType&&b3.nodeType!==1&&b3.nodeType!==9){return false}var e=b3.nodeName&&bI.noData[b3.nodeName.toLowerCase()];return !e||e!==true&&b3.getAttribute("classid")===e}});bI.fn.extend({data:function(b5,b8){var b3,e,b7=null,b4=0,b6=this[0];if(b5===aE){if(this.length){b7=bI.data(b6);if(b6.nodeType===1&&!bI._data(b6,"parsedAttrs")){b3=b6.attributes;for(;b4<b3.length;b4++){e=b3[b4].name;if(e.indexOf("data-")===0){e=bI.camelCase(e.slice(5));bx(b6,e,b7[e])}}bI._data(b6,"parsedAttrs",true)}}return b7}if(typeof b5==="object"){return this.each(function(){bI.data(this,b5)})}return arguments.length>1?this.each(function(){bI.data(this,b5,b8)}):b6?bx(b6,b5,bI.data(b6,b5)):null},removeData:function(e){return this.each(function(){bI.removeData(this,e)})}});function bx(b5,b4,b6){if(b6===aE&&b5.nodeType===1){var b3="data-"+b4.replace(aL,"-$1").toLowerCase();b6=b5.getAttribute(b3);if(typeof b6==="string"){try{b6=b6==="true"?true:b6==="false"?false:b6==="null"?null:+b6+""===b6?+b6:bv.test(b6)?bI.parseJSON(b6):b6}catch(b7){}bI.data(b5,b4,b6)}else{b6=aE}}return b6}function L(b3){var e;for(e in b3){if(e==="data"&&bI.isEmptyObject(b3[e])){continue}if(e!=="toJSON"){return false}}return true}bI.extend({queue:function(b4,b3,b5){var e;if(b4){b3=(b3||"fx")+"queue";e=bI._data(b4,b3);if(b5){if(!e||bI.isArray(b5)){e=bI._data(b4,b3,bI.makeArray(b5))}else{e.push(b5)}}return e||[]}},dequeue:function(b7,b6){b6=b6||"fx";var b3=bI.queue(b7,b6),b8=b3.length,b5=b3.shift(),e=bI._queueHooks(b7,b6),b4=function(){bI.dequeue(b7,b6)};if(b5==="inprogress"){b5=b3.shift();b8--}if(b5){if(b6==="fx"){b3.unshift("inprogress")}delete e.stop;b5.call(b7,b4,e)}if(!b8&&e){e.empty.fire()}},_queueHooks:function(b4,b3){var e=b3+"queueHooks";return bI._data(b4,e)||bI._data(b4,e,{empty:bI.Callbacks("once memory").add(function(){bI._removeData(b4,b3+"queue");bI._removeData(b4,e)})})}});bI.fn.extend({queue:function(e,b3){var b4=2;if(typeof e!=="string"){b3=e;e="fx";b4--}if(arguments.length<b4){return bI.queue(this[0],e)}return b3===aE?this:this.each(function(){var b5=bI.queue(this,e,b3);bI._queueHooks(this,e);if(e==="fx"&&b5[0]!=="inprogress"){bI.dequeue(this,e)}})},dequeue:function(e){return this.each(function(){bI.dequeue(this,e)})},delay:function(b3,e){b3=bI.fx?bI.fx.speeds[b3]||b3:b3;e=e||"fx";return this.queue(e,function(b5,b4){var b6=setTimeout(b5,b3);b4.stop=function(){clearTimeout(b6)}})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(b4,b8){var b3,b5=1,b9=bI.Deferred(),b7=this,e=this.length,b6=function(){if(!(--b5)){b9.resolveWith(b7,[b7])}};if(typeof b4!=="string"){b8=b4;b4=aE}b4=b4||"fx";while(e--){b3=bI._data(b7[e],b4+"queueHooks");if(b3&&b3.empty){b5++;b3.empty.add(b6)}}b6();return b9.promise(b8)}});var a7,bZ,bL=/[\t\r\n\f]/g,ah=/\r/g,aD=/^(?:input|select|textarea|button|object)$/i,C=/^(?:a|area)$/i,ao=/^(?:checked|selected)$/i,bO=bI.support.getSetAttribute,bE=bI.support.input;bI.fn.extend({attr:function(e,b3){return bI.access(this,bI.attr,e,b3,arguments.length>1)},removeAttr:function(e){return this.each(function(){bI.removeAttr(this,e)})},prop:function(e,b3){return bI.access(this,bI.prop,e,b3,arguments.length>1)},removeProp:function(e){e=bI.propFix[e]||e;return this.each(function(){try{this[e]=aE;delete this[e]}catch(b3){}})},addClass:function(b9){var b3,e,ca,b6,b4,b5=0,b7=this.length,b8=typeof b9==="string"&&b9;if(bI.isFunction(b9)){return this.each(function(cb){bI(this).addClass(b9.call(this,cb,this.className))})}if(b8){b3=(b9||"").match(aa)||[];for(;b5<b7;b5++){e=this[b5];ca=e.nodeType===1&&(e.className?(" "+e.className+" ").replace(bL," "):" ");if(ca){b4=0;while((b6=b3[b4++])){if(ca.indexOf(" "+b6+" ")<0){ca+=b6+" "}}e.className=bI.trim(ca)}}}return this},removeClass:function(b9){var b3,e,ca,b6,b4,b5=0,b7=this.length,b8=arguments.length===0||typeof b9==="string"&&b9;if(bI.isFunction(b9)){return this.each(function(cb){bI(this).removeClass(b9.call(this,cb,this.className))})}if(b8){b3=(b9||"").match(aa)||[];for(;b5<b7;b5++){e=this[b5];ca=e.nodeType===1&&(e.className?(" "+e.className+" ").replace(bL," "):"");if(ca){b4=0;while((b6=b3[b4++])){while(ca.indexOf(" "+b6+" ")>=0){ca=ca.replace(" "+b6+" "," ")}}e.className=b9?bI.trim(ca):""}}}return this},toggleClass:function(b4,e){var b3=typeof b4;if(typeof e==="boolean"&&b3==="string"){return e?this.addClass(b4):this.removeClass(b4)}if(bI.isFunction(b4)){return this.each(function(b5){bI(this).toggleClass(b4.call(this,b5,this.className,e),e)})}return this.each(function(){if(b3==="string"){var b7,b6=0,b5=bI(this),b8=b4.match(aa)||[];while((b7=b8[b6++])){if(b5.hasClass(b7)){b5.removeClass(b7)}else{b5.addClass(b7)}}}else{if(b3===aA||b3==="boolean"){if(this.className){bI._data(this,"__className__",this.className)}this.className=this.className||b4===false?"":bI._data(this,"__className__")||""}}})},hasClass:function(e){var b5=" "+e+" ",b4=0,b3=this.length;for(;b4<b3;b4++){if(this[b4].nodeType===1&&(" "+this[b4].className+" ").replace(bL," ").indexOf(b5)>=0){return true}}return false},val:function(b5){var b3,e,b6,b4=this[0];if(!arguments.length){if(b4){e=bI.valHooks[b4.type]||bI.valHooks[b4.nodeName.toLowerCase()];if(e&&"get" in e&&(b3=e.get(b4,"value"))!==aE){return b3}b3=b4.value;return typeof b3==="string"?b3.replace(ah,""):b3==null?"":b3}return}b6=bI.isFunction(b5);return this.each(function(b7){var b8;if(this.nodeType!==1){return}if(b6){b8=b5.call(this,b7,bI(this).val())}else{b8=b5}if(b8==null){b8=""}else{if(typeof b8==="number"){b8+=""}else{if(bI.isArray(b8)){b8=bI.map(b8,function(b9){return b9==null?"":b9+""})}}}e=bI.valHooks[this.type]||bI.valHooks[this.nodeName.toLowerCase()];if(!e||!("set" in e)||e.set(this,b8,"value")===aE){this.value=b8}})}});bI.extend({valHooks:{option:{get:function(e){var b3=bI.find.attr(e,"value");return b3!=null?b3:e.text}},select:{get:function(e){var b8,b4,ca=e.options,b6=e.selectedIndex,b5=e.type==="select-one"||b6<0,b9=b5?null:[],b7=b5?b6+1:ca.length,b3=b6<0?b7:b5?b6:0;for(;b3<b7;b3++){b4=ca[b3];if((b4.selected||b3===b6)&&(bI.support.optDisabled?!b4.disabled:b4.getAttribute("disabled")===null)&&(!b4.parentNode.disabled||!bI.nodeName(b4.parentNode,"optgroup"))){b8=bI(b4).val();if(b5){return b8}b9.push(b8)}}return b9},set:function(b6,b7){var b8,b5,b3=b6.options,e=bI.makeArray(b7),b4=b3.length;while(b4--){b5=b3[b4];if((b5.selected=bI.inArray(bI(b5).val(),e)>=0)){b8=true}}if(!b8){b6.selectedIndex=-1}return e}}},attr:function(b6,b5,b7){var e,b4,b3=b6.nodeType;if(!b6||b3===3||b3===8||b3===2){return}if(typeof b6.getAttribute===aA){return bI.prop(b6,b5,b7)}if(b3!==1||!bI.isXMLDoc(b6)){b5=b5.toLowerCase();e=bI.attrHooks[b5]||(bI.expr.match.bool.test(b5)?bZ:a7)}if(b7!==aE){if(b7===null){bI.removeAttr(b6,b5)}else{if(e&&"set" in e&&(b4=e.set(b6,b7,b5))!==aE){return b4}else{b6.setAttribute(b5,b7+"");return b7}}}else{if(e&&"get" in e&&(b4=e.get(b6,b5))!==null){return b4}else{b4=bI.find.attr(b6,b5);return b4==null?aE:b4}}},removeAttr:function(b4,b6){var e,b5,b3=0,b7=b6&&b6.match(aa);if(b7&&b4.nodeType===1){while((e=b7[b3++])){b5=bI.propFix[e]||e;if(bI.expr.match.bool.test(e)){if(bE&&bO||!ao.test(e)){b4[b5]=false}else{b4[bI.camelCase("default-"+e)]=b4[b5]=false}}else{bI.attr(b4,e,"")}b4.removeAttribute(bO?e:b5)}}},attrHooks:{type:{set:function(e,b3){if(!bI.support.radioValue&&b3==="radio"&&bI.nodeName(e,"input")){var b4=e.value;e.setAttribute("type",b3);if(b4){e.value=b4}return b3}}}},propFix:{"for":"htmlFor","class":"className"},prop:function(b7,b5,b8){var b4,e,b6,b3=b7.nodeType;if(!b7||b3===3||b3===8||b3===2){return}b6=b3!==1||!bI.isXMLDoc(b7);if(b6){b5=bI.propFix[b5]||b5;e=bI.propHooks[b5]}if(b8!==aE){return e&&"set" in e&&(b4=e.set(b7,b8,b5))!==aE?b4:(b7[b5]=b8)}else{return e&&"get" in e&&(b4=e.get(b7,b5))!==null?b4:b7[b5]}},propHooks:{tabIndex:{get:function(b3){var e=bI.find.attr(b3,"tabindex");return e?parseInt(e,10):aD.test(b3.nodeName)||C.test(b3.nodeName)&&b3.href?0:-1}}}});bZ={set:function(b3,b4,e){if(b4===false){bI.removeAttr(b3,e)}else{if(bE&&bO||!ao.test(e)){b3.setAttribute(!bO&&bI.propFix[e]||e,e)}else{b3[bI.camelCase("default-"+e)]=b3[e]=true}}return e}};bI.each(bI.expr.match.bool.source.match(/\w+/g),function(b4,b3){var e=bI.expr.attrHandle[b3]||bI.find.attr;bI.expr.attrHandle[b3]=bE&&bO||!ao.test(b3)?function(b8,b6,b9){var b7=bI.expr.attrHandle[b6],b5=b9?aE:(bI.expr.attrHandle[b6]=aE)!=e(b8,b6,b9)?b6.toLowerCase():null;bI.expr.attrHandle[b6]=b7;return b5}:function(b6,b5,b7){return b7?aE:b6[bI.camelCase("default-"+b5)]?b5.toLowerCase():null}});if(!bE||!bO){bI.attrHooks.value={set:function(b3,b4,e){if(bI.nodeName(b3,"input")){b3.defaultValue=b4}else{return a7&&a7.set(b3,b4,e)}}}}if(!bO){a7={set:function(b4,b5,b3){var e=b4.getAttributeNode(b3);if(!e){b4.setAttributeNode((e=b4.ownerDocument.createAttribute(b3)))}e.value=b5+="";return b3==="value"||b5===b4.getAttribute(b3)?b5:aE}};bI.expr.attrHandle.id=bI.expr.attrHandle.name=bI.expr.attrHandle.coords=function(b4,b3,b5){var e;return b5?aE:(e=b4.getAttributeNode(b3))&&e.value!==""?e.value:null};bI.valHooks.button={get:function(b4,b3){var e=b4.getAttributeNode(b3);return e&&e.specified?e.value:aE},set:a7.set};bI.attrHooks.contenteditable={set:function(b3,b4,e){a7.set(b3,b4===""?false:b4,e)}};bI.each(["width","height"],function(b3,e){bI.attrHooks[e]={set:function(b4,b5){if(b5===""){b4.setAttribute(e,"auto");return b5}}}})}if(!bI.support.hrefNormalized){bI.each(["href","src"],function(b3,e){bI.propHooks[e]={get:function(b4){return b4.getAttribute(e,4)}}})}if(!bI.support.style){bI.attrHooks.style={get:function(e){return e.style.cssText||aE},set:function(e,b3){return(e.style.cssText=b3+"")}}}if(!bI.support.optSelected){bI.propHooks.selected={get:function(b3){var e=b3.parentNode;if(e){e.selectedIndex;if(e.parentNode){e.parentNode.selectedIndex}}return null}}}bI.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){bI.propFix[this.toLowerCase()]=this});if(!bI.support.enctype){bI.propFix.enctype="encoding"}bI.each(["radio","checkbox"],function(){bI.valHooks[this]={set:function(e,b3){if(bI.isArray(b3)){return(e.checked=bI.inArray(bI(e).val(),b3)>=0)}}};if(!bI.support.checkOn){bI.valHooks[this].get=function(e){return e.getAttribute("value")===null?"on":e.value}}});var bG=/^(?:input|select|textarea)$/i,a2=/^key/,bM=/^(?:mouse|contextmenu)|click/,bA=/^(?:focusinfocus|focusoutblur)$/,bt=/^([^.]*)(?:\.(.+)|)$/;function P(){return true}function V(){return false}function ai(){try{return l.activeElement}catch(e){}}bI.event={global:{},add:function(b6,cb,cg,b8,b7){var b9,ch,ci,b4,cd,ca,cf,b5,ce,e,b3,cc=bI._data(b6);if(!cc){return}if(cg.handler){b4=cg;cg=b4.handler;b7=b4.selector}if(!cg.guid){cg.guid=bI.guid++}if(!(ch=cc.events)){ch=cc.events={}}if(!(ca=cc.handle)){ca=cc.handle=function(cj){return typeof bI!==aA&&(!cj||bI.event.triggered!==cj.type)?bI.event.dispatch.apply(ca.elem,arguments):aE};ca.elem=b6}cb=(cb||"").match(aa)||[""];ci=cb.length;while(ci--){b9=bt.exec(cb[ci])||[];ce=b3=b9[1];e=(b9[2]||"").split(".").sort();if(!ce){continue}cd=bI.event.special[ce]||{};ce=(b7?cd.delegateType:cd.bindType)||ce;cd=bI.event.special[ce]||{};cf=bI.extend({type:ce,origType:b3,data:b8,handler:cg,guid:cg.guid,selector:b7,needsContext:b7&&bI.expr.match.needsContext.test(b7),namespace:e.join(".")},b4);if(!(b5=ch[ce])){b5=ch[ce]=[];b5.delegateCount=0;if(!cd.setup||cd.setup.call(b6,b8,e,ca)===false){if(b6.addEventListener){b6.addEventListener(ce,ca,false)}else{if(b6.attachEvent){b6.attachEvent("on"+ce,ca)}}}}if(cd.add){cd.add.call(b6,cf);if(!cf.handler.guid){cf.handler.guid=cg.guid}}if(b7){b5.splice(b5.delegateCount++,0,cf)}else{b5.push(cf)}bI.event.global[ce]=true}b6=null},remove:function(b5,cb,ci,b6,ca){var b8,cf,b9,b7,ch,cg,cd,b4,ce,e,b3,cc=bI.hasData(b5)&&bI._data(b5);if(!cc||!(cg=cc.events)){return}cb=(cb||"").match(aa)||[""];ch=cb.length;while(ch--){b9=bt.exec(cb[ch])||[];ce=b3=b9[1];e=(b9[2]||"").split(".").sort();if(!ce){for(ce in cg){bI.event.remove(b5,ce+cb[ch],ci,b6,true)}continue}cd=bI.event.special[ce]||{};ce=(b6?cd.delegateType:cd.bindType)||ce;b4=cg[ce]||[];b9=b9[2]&&new RegExp("(^|\\.)"+e.join("\\.(?:.*\\.|)")+"(\\.|$)");b7=b8=b4.length;while(b8--){cf=b4[b8];if((ca||b3===cf.origType)&&(!ci||ci.guid===cf.guid)&&(!b9||b9.test(cf.namespace))&&(!b6||b6===cf.selector||b6==="**"&&cf.selector)){b4.splice(b8,1);if(cf.selector){b4.delegateCount--}if(cd.remove){cd.remove.call(b5,cf)}}}if(b7&&!b4.length){if(!cd.teardown||cd.teardown.call(b5,e,cc.handle)===false){bI.removeEvent(b5,ce,cc.handle)}delete cg[ce]}}if(bI.isEmptyObject(cg)){delete cc.handle;bI._removeData(b5,"events")}},trigger:function(b3,ca,b6,ch){var cb,b5,cf,cg,cd,b9,b8,b7=[b6||l],ce=T.call(b3,"type")?b3.type:b3,b4=T.call(b3,"namespace")?b3.namespace.split("."):[];cf=b9=b6=b6||l;if(b6.nodeType===3||b6.nodeType===8){return}if(bA.test(ce+bI.event.triggered)){return}if(ce.indexOf(".")>=0){b4=ce.split(".");ce=b4.shift();b4.sort()}b5=ce.indexOf(":")<0&&"on"+ce;b3=b3[bI.expando]?b3:new bI.Event(ce,typeof b3==="object"&&b3);b3.isTrigger=ch?2:3;b3.namespace=b4.join(".");b3.namespace_re=b3.namespace?new RegExp("(^|\\.)"+b4.join("\\.(?:.*\\.|)")+"(\\.|$)"):null;b3.result=aE;if(!b3.target){b3.target=b6}ca=ca==null?[b3]:bI.makeArray(ca,[b3]);cd=bI.event.special[ce]||{};if(!ch&&cd.trigger&&cd.trigger.apply(b6,ca)===false){return}if(!ch&&!cd.noBubble&&!bI.isWindow(b6)){cg=cd.delegateType||ce;if(!bA.test(cg+ce)){cf=cf.parentNode}for(;cf;cf=cf.parentNode){b7.push(cf);b9=cf}if(b9===(b6.ownerDocument||l)){b7.push(b9.defaultView||b9.parentWindow||a1)}}b8=0;while((cf=b7[b8++])&&!b3.isPropagationStopped()){b3.type=b8>1?cg:cd.bindType||ce;cb=(bI._data(cf,"events")||{})[b3.type]&&bI._data(cf,"handle");if(cb){cb.apply(cf,ca)}cb=b5&&cf[b5];if(cb&&bI.acceptData(cf)&&cb.apply&&cb.apply(cf,ca)===false){b3.preventDefault()}}b3.type=ce;if(!ch&&!b3.isDefaultPrevented()){if((!cd._default||cd._default.apply(b7.pop(),ca)===false)&&bI.acceptData(b6)){if(b5&&b6[ce]&&!bI.isWindow(b6)){b9=b6[b5];if(b9){b6[b5]=null}bI.event.triggered=ce;try{b6[ce]()}catch(cc){}bI.event.triggered=aE;if(b9){b6[b5]=b9}}}}return b3.result},dispatch:function(e){e=bI.event.fix(e);var b6,b7,cb,b3,b5,ca=[],b9=a3.call(arguments),b4=(bI._data(this,"events")||{})[e.type]||[],b8=bI.event.special[e.type]||{};b9[0]=e;e.delegateTarget=this;if(b8.preDispatch&&b8.preDispatch.call(this,e)===false){return}ca=bI.event.handlers.call(this,e,b4);b6=0;while((b3=ca[b6++])&&!e.isPropagationStopped()){e.currentTarget=b3.elem;b5=0;while((cb=b3.handlers[b5++])&&!e.isImmediatePropagationStopped()){if(!e.namespace_re||e.namespace_re.test(cb.namespace)){e.handleObj=cb;e.data=cb.data;b7=((bI.event.special[cb.origType]||{}).handle||cb.handler).apply(b3.elem,b9);if(b7!==aE){if((e.result=b7)===false){e.preventDefault();e.stopPropagation()}}}}}if(b8.postDispatch){b8.postDispatch.call(this,e)}return e.result},handlers:function(e,b4){var b3,b9,b7,b6,b8=[],b5=b4.delegateCount,ca=e.target;if(b5&&ca.nodeType&&(!e.button||e.type!=="click")){for(;ca!=this;ca=ca.parentNode||this){if(ca.nodeType===1&&(ca.disabled!==true||e.type!=="click")){b7=[];for(b6=0;b6<b5;b6++){b9=b4[b6];b3=b9.selector+" ";if(b7[b3]===aE){b7[b3]=b9.needsContext?bI(b3,this).index(ca)>=0:bI.find(b3,this,null,[ca]).length}if(b7[b3]){b7.push(b9)}}if(b7.length){b8.push({elem:ca,handlers:b7})}}}}if(b5<b4.length){b8.push({elem:this,handlers:b4.slice(b5)})}return b8},fix:function(b5){if(b5[bI.expando]){return b5}var b3,b8,b7,b4=b5.type,e=b5,b6=this.fixHooks[b4];if(!b6){this.fixHooks[b4]=b6=bM.test(b4)?this.mouseHooks:a2.test(b4)?this.keyHooks:{}}b7=b6.props?this.props.concat(b6.props):this.props;b5=new bI.Event(e);b3=b7.length;while(b3--){b8=b7[b3];b5[b8]=e[b8]}if(!b5.target){b5.target=e.srcElement||l}if(b5.target.nodeType===3){b5.target=b5.target.parentNode}b5.metaKey=!!b5.metaKey;return b6.filter?b6.filter(b5,e):b5},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(b3,e){if(b3.which==null){b3.which=e.charCode!=null?e.charCode:e.keyCode}return b3}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(b5,b4){var e,b6,b7,b3=b4.button,b8=b4.fromElement;if(b5.pageX==null&&b4.clientX!=null){b6=b5.target.ownerDocument||l;b7=b6.documentElement;e=b6.body;b5.pageX=b4.clientX+(b7&&b7.scrollLeft||e&&e.scrollLeft||0)-(b7&&b7.clientLeft||e&&e.clientLeft||0);b5.pageY=b4.clientY+(b7&&b7.scrollTop||e&&e.scrollTop||0)-(b7&&b7.clientTop||e&&e.clientTop||0)}if(!b5.relatedTarget&&b8){b5.relatedTarget=b8===b5.target?b4.toElement:b8}if(!b5.which&&b3!==aE){b5.which=(b3&1?1:(b3&2?3:(b3&4?2:0)))}return b5}},special:{load:{noBubble:true},focus:{trigger:function(){if(this!==ai()&&this.focus){try{this.focus();return false}catch(b3){}}},delegateType:"focusin"},blur:{trigger:function(){if(this===ai()&&this.blur){this.blur();return false}},delegateType:"focusout"},click:{trigger:function(){if(bI.nodeName(this,"input")&&this.type==="checkbox"&&this.click){this.click();return false}},_default:function(e){return bI.nodeName(e.target,"a")}},beforeunload:{postDispatch:function(e){if(e.result!==aE){e.originalEvent.returnValue=e.result}}}},simulate:function(b4,b6,b5,b3){var b7=bI.extend(new bI.Event(),b5,{type:b4,isSimulated:true,originalEvent:{}});if(b3){bI.event.trigger(b7,null,b6)}else{bI.event.dispatch.call(b6,b7)}if(b7.isDefaultPrevented()){b5.preventDefault()}}};bI.removeEvent=l.removeEventListener?function(b3,e,b4){if(b3.removeEventListener){b3.removeEventListener(e,b4,false)}}:function(b4,b3,b5){var e="on"+b3;if(b4.detachEvent){if(typeof b4[e]===aA){b4[e]=null}b4.detachEvent(e,b5)}};bI.Event=function(b3,e){if(!(this instanceof bI.Event)){return new bI.Event(b3,e)}if(b3&&b3.type){this.originalEvent=b3;this.type=b3.type;this.isDefaultPrevented=(b3.defaultPrevented||b3.returnValue===false||b3.getPreventDefault&&b3.getPreventDefault())?P:V}else{this.type=b3}if(e){bI.extend(this,e)}this.timeStamp=b3&&b3.timeStamp||bI.now();this[bI.expando]=true};bI.Event.prototype={isDefaultPrevented:V,isPropagationStopped:V,isImmediatePropagationStopped:V,preventDefault:function(){var b3=this.originalEvent;this.isDefaultPrevented=P;if(!b3){return}if(b3.preventDefault){b3.preventDefault()}else{b3.returnValue=false}},stopPropagation:function(){var b3=this.originalEvent;this.isPropagationStopped=P;if(!b3){return}if(b3.stopPropagation){b3.stopPropagation()}b3.cancelBubble=true},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=P;this.stopPropagation()}};bI.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(b3,e){bI.event.special[b3]={delegateType:e,bindType:e,handle:function(b6){var b4,b8=this,b7=b6.relatedTarget,b5=b6.handleObj;if(!b7||(b7!==b8&&!bI.contains(b8,b7))){b6.type=b5.origType;b4=b5.handler.apply(this,arguments);b6.type=e}return b4}}});if(!bI.support.submitBubbles){bI.event.special.submit={setup:function(){if(bI.nodeName(this,"form")){return false}bI.event.add(this,"click._submit keypress._submit",function(b5){var b4=b5.target,b3=bI.nodeName(b4,"input")||bI.nodeName(b4,"button")?b4.form:aE;if(b3&&!bI._data(b3,"submitBubbles")){bI.event.add(b3,"submit._submit",function(e){e._submit_bubble=true});bI._data(b3,"submitBubbles",true)}})},postDispatch:function(e){if(e._submit_bubble){delete e._submit_bubble;if(this.parentNode&&!e.isTrigger){bI.event.simulate("submit",this.parentNode,e,true)}}},teardown:function(){if(bI.nodeName(this,"form")){return false}bI.event.remove(this,"._submit")}}}if(!bI.support.changeBubbles){bI.event.special.change={setup:function(){if(bG.test(this.nodeName)){if(this.type==="checkbox"||this.type==="radio"){bI.event.add(this,"propertychange._change",function(e){if(e.originalEvent.propertyName==="checked"){this._just_changed=true}});bI.event.add(this,"click._change",function(e){if(this._just_changed&&!e.isTrigger){this._just_changed=false}bI.event.simulate("change",this,e,true)})}return false}bI.event.add(this,"beforeactivate._change",function(b4){var b3=b4.target;if(bG.test(b3.nodeName)&&!bI._data(b3,"changeBubbles")){bI.event.add(b3,"change._change",function(e){if(this.parentNode&&!e.isSimulated&&!e.isTrigger){bI.event.simulate("change",this.parentNode,e,true)}});bI._data(b3,"changeBubbles",true)}})},handle:function(b3){var e=b3.target;if(this!==e||b3.isSimulated||b3.isTrigger||(e.type!=="radio"&&e.type!=="checkbox")){return b3.handleObj.handler.apply(this,arguments)}},teardown:function(){bI.event.remove(this,"._change");return !bG.test(this.nodeName)}}}if(!bI.support.focusinBubbles){bI.each({focus:"focusin",blur:"focusout"},function(b5,e){var b3=0,b4=function(b6){bI.event.simulate(e,b6.target,bI.event.fix(b6),true)};bI.event.special[e]={setup:function(){if(b3++===0){l.addEventListener(b5,b4,true)}},teardown:function(){if(--b3===0){l.removeEventListener(b5,b4,true)}}}})}bI.fn.extend({on:function(b4,e,b7,b6,b3){var b5,b8;if(typeof b4==="object"){if(typeof e!=="string"){b7=b7||e;e=aE}for(b5 in b4){this.on(b5,e,b7,b4[b5],b3)}return this}if(b7==null&&b6==null){b6=e;b7=e=aE}else{if(b6==null){if(typeof e==="string"){b6=b7;b7=aE}else{b6=b7;b7=e;e=aE}}}if(b6===false){b6=V}else{if(!b6){return this}}if(b3===1){b8=b6;b6=function(b9){bI().off(b9);return b8.apply(this,arguments)};b6.guid=b8.guid||(b8.guid=bI.guid++)}return this.each(function(){bI.event.add(this,b4,b6,b7,e)})},one:function(b3,e,b5,b4){return this.on(b3,e,b5,b4,1)},off:function(b4,e,b6){var b3,b5;if(b4&&b4.preventDefault&&b4.handleObj){b3=b4.handleObj;bI(b4.delegateTarget).off(b3.namespace?b3.origType+"."+b3.namespace:b3.origType,b3.selector,b3.handler);return this}if(typeof b4==="object"){for(b5 in b4){this.off(b5,e,b4[b5])}return this}if(e===false||typeof e==="function"){b6=e;e=aE}if(b6===false){b6=V}return this.each(function(){bI.event.remove(this,b4,b6,e)})},trigger:function(e,b3){return this.each(function(){bI.event.trigger(e,b3,this)})},triggerHandler:function(e,b4){var b3=this[0];if(b3){return bI.event.trigger(e,b4,b3,true)}}});var al=/^.[^:#\[\.,]*$/,bs=/^(?:parents|prev(?:Until|All))/,x=bI.expr.match.needsContext,bw={children:true,contents:true,next:true,prev:true};bI.fn.extend({find:function(b3){var b6,b5=[],b4=this,e=b4.length;if(typeof b3!=="string"){return this.pushStack(bI(b3).filter(function(){for(b6=0;b6<e;b6++){if(bI.contains(b4[b6],this)){return true}}}))}for(b6=0;b6<e;b6++){bI.find(b3,b4[b6],b5)}b5=this.pushStack(e>1?bI.unique(b5):b5);b5.selector=this.selector?this.selector+" "+b3:b3;return b5},has:function(b5){var b4,b3=bI(b5,this),e=b3.length;return this.filter(function(){for(b4=0;b4<e;b4++){if(bI.contains(this,b3[b4])){return true}}})},not:function(e){return this.pushStack(aM(this,e||[],true))},filter:function(e){return this.pushStack(aM(this,e||[],false))},is:function(e){return !!aM(this,typeof e==="string"&&x.test(e)?bI(e):e||[],false).length},closest:function(b6,b5){var b7,b4=0,e=this.length,b3=[],b8=x.test(b6)||typeof b6!=="string"?bI(b6,b5||this.context):0;for(;b4<e;b4++){for(b7=this[b4];b7&&b7!==b5;b7=b7.parentNode){if(b7.nodeType<11&&(b8?b8.index(b7)>-1:b7.nodeType===1&&bI.find.matchesSelector(b7,b6))){b7=b3.push(b7);break}}}return this.pushStack(b3.length>1?bI.unique(b3):b3)},index:function(e){if(!e){return(this[0]&&this[0].parentNode)?this.first().prevAll().length:-1}if(typeof e==="string"){return bI.inArray(this[0],bI(e))}return bI.inArray(e.jquery?e[0]:e,this)},add:function(e,b3){var b5=typeof e==="string"?bI(e,b3):bI.makeArray(e&&e.nodeType?[e]:e),b4=bI.merge(this.get(),b5);return this.pushStack(bI.unique(b4))},addBack:function(e){return this.add(e==null?this.prevObject:this.prevObject.filter(e))}});function aV(b3,e){do{b3=b3[e]}while(b3&&b3.nodeType!==1);return b3}bI.each({parent:function(b3){var e=b3.parentNode;return e&&e.nodeType!==11?e:null},parents:function(e){return bI.dir(e,"parentNode")},parentsUntil:function(b3,e,b4){return bI.dir(b3,"parentNode",b4)},next:function(e){return aV(e,"nextSibling")},prev:function(e){return aV(e,"previousSibling")},nextAll:function(e){return bI.dir(e,"nextSibling")},prevAll:function(e){return bI.dir(e,"previousSibling")},nextUntil:function(b3,e,b4){return bI.dir(b3,"nextSibling",b4)},prevUntil:function(b3,e,b4){return bI.dir(b3,"previousSibling",b4)},siblings:function(e){return bI.sibling((e.parentNode||{}).firstChild,e)},children:function(e){return bI.sibling(e.firstChild)},contents:function(e){return bI.nodeName(e,"iframe")?e.contentDocument||e.contentWindow.document:bI.merge([],e.childNodes)}},function(e,b3){bI.fn[e]=function(b6,b4){var b5=bI.map(this,b3,b6);if(e.slice(-5)!=="Until"){b4=b6}if(b4&&typeof b4==="string"){b5=bI.filter(b4,b5)}if(this.length>1){if(!bw[e]){b5=bI.unique(b5)}if(bs.test(e)){b5=b5.reverse()}}return this.pushStack(b5)}});bI.extend({filter:function(b5,e,b4){var b3=e[0];if(b4){b5=":not("+b5+")"}return e.length===1&&b3.nodeType===1?bI.find.matchesSelector(b3,b5)?[b3]:[]:bI.find.matches(b5,bI.grep(e,function(b6){return b6.nodeType===1}))},dir:function(b4,b3,b6){var e=[],b5=b4[b3];while(b5&&b5.nodeType!==9&&(b6===aE||b5.nodeType!==1||!bI(b5).is(b6))){if(b5.nodeType===1){e.push(b5)}b5=b5[b3]}return e},sibling:function(b4,b3){var e=[];for(;b4;b4=b4.nextSibling){if(b4.nodeType===1&&b4!==b3){e.push(b4)}}return e}});function aM(b4,e,b3){if(bI.isFunction(e)){return bI.grep(b4,function(b6,b5){return !!e.call(b6,b5,b6)!==b3})}if(e.nodeType){return bI.grep(b4,function(b5){return(b5===e)!==b3})}if(typeof e==="string"){if(al.test(e)){return bI.filter(e,b4,b3)}e=bI.filter(e,b4)}return bI.grep(b4,function(b5){return(bI.inArray(b5,e)>=0)!==b3})}function z(e){var b4=d.split("|"),b3=e.createDocumentFragment();if(b3.createElement){while(b4.length){b3.createElement(b4.pop())}}return b3}var d="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",ay=/ jQuery\d+="(?:null|\d+)"/g,I=new RegExp("<(?:"+d+")[\\s/>]","i"),b2=/^\s+/,aB=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,m=/<([\w:]+)/,bX=/<tbody/i,H=/<|&#?\w+;/,aj=/<(?:script|style|link)/i,q=/^(?:checkbox|radio)$/i,bT=/checked\s*(?:[^=]|=\s*.checked.)/i,by=/^$|\/(?:java|ecma)script/i,ap=/^true\/(.*)/,aI=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,R={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],area:[1,"<map>","</map>"],param:[1,"<object>","</object>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:bI.support.htmlSerialize?[0,"",""]:[1,"X<div>","</div>"]},aQ=z(l),j=aQ.appendChild(l.createElement("div"));R.optgroup=R.option;R.tbody=R.tfoot=R.colgroup=R.caption=R.thead;R.th=R.td;bI.fn.extend({text:function(e){return bI.access(this,function(b3){return b3===aE?bI.text(this):this.empty().append((this[0]&&this[0].ownerDocument||l).createTextNode(b3))},null,e,arguments.length)},append:function(){return this.domManip(arguments,function(e){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var b3=aZ(this,e);b3.appendChild(e)}})},prepend:function(){return this.domManip(arguments,function(e){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var b3=aZ(this,e);b3.insertBefore(e,b3.firstChild)}})},before:function(){return this.domManip(arguments,function(e){if(this.parentNode){this.parentNode.insertBefore(e,this)}})},after:function(){return this.domManip(arguments,function(e){if(this.parentNode){this.parentNode.insertBefore(e,this.nextSibling)}})},remove:function(e,b6){var b5,b3=e?bI.filter(e,this):this,b4=0;for(;(b5=b3[b4])!=null;b4++){if(!b6&&b5.nodeType===1){bI.cleanData(k(b5))}if(b5.parentNode){if(b6&&bI.contains(b5.ownerDocument,b5)){br(k(b5,"script"))}b5.parentNode.removeChild(b5)}}return this},empty:function(){var b3,e=0;for(;(b3=this[e])!=null;e++){if(b3.nodeType===1){bI.cleanData(k(b3,false))}while(b3.firstChild){b3.removeChild(b3.firstChild)}if(b3.options&&bI.nodeName(b3,"select")){b3.options.length=0}}return this},clone:function(b3,e){b3=b3==null?false:b3;e=e==null?b3:e;return this.map(function(){return bI.clone(this,b3,e)})},html:function(e){return bI.access(this,function(b6){var b5=this[0]||{},b4=0,b3=this.length;if(b6===aE){return b5.nodeType===1?b5.innerHTML.replace(ay,""):aE}if(typeof b6==="string"&&!aj.test(b6)&&(bI.support.htmlSerialize||!I.test(b6))&&(bI.support.leadingWhitespace||!b2.test(b6))&&!R[(m.exec(b6)||["",""])[1].toLowerCase()]){b6=b6.replace(aB,"<$1></$2>");try{for(;b4<b3;b4++){b5=this[b4]||{};if(b5.nodeType===1){bI.cleanData(k(b5,false));b5.innerHTML=b6}}b5=0}catch(b7){}}if(b5){this.empty().append(b6)}},null,e,arguments.length)},replaceWith:function(){var e=bI.map(this,function(b4){return[b4.nextSibling,b4.parentNode]}),b3=0;this.domManip(arguments,function(b6){var b5=e[b3++],b4=e[b3++];if(b4){if(b5&&b5.parentNode!==b4){b5=this.nextSibling}bI(this).remove();b4.insertBefore(b6,b5)}},true);return b3?this:this.remove()},detach:function(e){return this.remove(e,true)},domManip:function(cb,cg,b4){cb=aG.apply([],cb);var b9,b5,e,b7,ce,ca,b8=0,b6=this.length,cd=this,cf=b6-1,cc=cb[0],b3=bI.isFunction(cc);if(b3||!(b6<=1||typeof cc!=="string"||bI.support.checkClone||!bT.test(cc))){return this.each(function(ci){var ch=cd.eq(ci);if(b3){cb[0]=cc.call(this,ci,ch.html())}ch.domManip(cb,cg,b4)})}if(b6){ca=bI.buildFragment(cb,this[0].ownerDocument,false,!b4&&this);b9=ca.firstChild;if(ca.childNodes.length===1){ca=b9}if(b9){b7=bI.map(k(ca,"script"),t);e=b7.length;for(;b8<b6;b8++){b5=ca;if(b8!==cf){b5=bI.clone(b5,true,true);if(e){bI.merge(b7,k(b5,"script"))}}cg.call(this[b8],b5,b8)}if(e){ce=b7[b7.length-1].ownerDocument;bI.map(b7,bc);for(b8=0;b8<e;b8++){b5=b7[b8];if(by.test(b5.type||"")&&!bI._data(b5,"globalEval")&&bI.contains(ce,b5)){if(b5.src){bI._evalUrl(b5.src)}else{bI.globalEval((b5.text||b5.textContent||b5.innerHTML||"").replace(aI,""))}}}}ca=b9=null}}return this}});function aZ(b3,e){return bI.nodeName(b3,"table")&&bI.nodeName(e.nodeType===1?e:e.firstChild,"tr")?b3.getElementsByTagName("tbody")[0]||b3.appendChild(b3.ownerDocument.createElement("tbody")):b3}function t(e){e.type=(bI.find.attr(e,"type")!==null)+"/"+e.type;return e}function bc(b3){var e=ap.exec(b3.type);if(e){b3.type=e[1]}else{b3.removeAttribute("type")}return b3}function br(e,b4){var b5,b3=0;for(;(b5=e[b3])!=null;b3++){bI._data(b5,"globalEval",!b4||bI._data(b4[b3],"globalEval"))}}function aq(b9,b3){if(b3.nodeType!==1||!bI.hasData(b9)){return}var b6,b5,e,b8=bI._data(b9),b7=bI._data(b3,b8),b4=b8.events;if(b4){delete b7.handle;b7.events={};for(b6 in b4){for(b5=0,e=b4[b6].length;b5<e;b5++){bI.event.add(b3,b6,b4[b6][b5])}}}if(b7.data){b7.data=bI.extend({},b7.data)}}function O(b6,b3){var b7,b5,b4;if(b3.nodeType!==1){return}b7=b3.nodeName.toLowerCase();if(!bI.support.noCloneEvent&&b3[bI.expando]){b4=bI._data(b3);for(b5 in b4.events){bI.removeEvent(b3,b5,b4.handle)}b3.removeAttribute(bI.expando)}if(b7==="script"&&b3.text!==b6.text){t(b3).text=b6.text;bc(b3)}else{if(b7==="object"){if(b3.parentNode){b3.outerHTML=b6.outerHTML}if(bI.support.html5Clone&&(b6.innerHTML&&!bI.trim(b3.innerHTML))){b3.innerHTML=b6.innerHTML}}else{if(b7==="input"&&q.test(b6.type)){b3.defaultChecked=b3.checked=b6.checked;if(b3.value!==b6.value){b3.value=b6.value}}else{if(b7==="option"){b3.defaultSelected=b3.selected=b6.defaultSelected}else{if(b7==="input"||b7==="textarea"){b3.defaultValue=b6.defaultValue}}}}}}bI.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,b3){bI.fn[e]=function(b4){var b5,b7=0,b6=[],b9=bI(b4),b8=b9.length-1;for(;b7<=b8;b7++){b5=b7===b8?this:this.clone(true);bI(b9[b7])[b3](b5);am.apply(b6,b5.get())}return this.pushStack(b6)}});function k(b5,e){var b3,b6,b4=0,b7=typeof b5.getElementsByTagName!==aA?b5.getElementsByTagName(e||"*"):typeof b5.querySelectorAll!==aA?b5.querySelectorAll(e||"*"):aE;if(!b7){for(b7=[],b3=b5.childNodes||b5;(b6=b3[b4])!=null;b4++){if(!e||bI.nodeName(b6,e)){b7.push(b6)}else{bI.merge(b7,k(b6,e))}}}return e===aE||e&&bI.nodeName(b5,e)?bI.merge([b5],b7):b7}function bU(e){if(q.test(e.type)){e.defaultChecked=e.checked}}bI.extend({clone:function(b3,b5,e){var b7,b4,ca,b6,b8,b9=bI.contains(b3.ownerDocument,b3);if(bI.support.html5Clone||bI.isXMLDoc(b3)||!I.test("<"+b3.nodeName+">")){ca=b3.cloneNode(true)}else{j.innerHTML=b3.outerHTML;j.removeChild(ca=j.firstChild)}if((!bI.support.noCloneEvent||!bI.support.noCloneChecked)&&(b3.nodeType===1||b3.nodeType===11)&&!bI.isXMLDoc(b3)){b7=k(ca);b8=k(b3);for(b6=0;(b4=b8[b6])!=null;++b6){if(b7[b6]){O(b4,b7[b6])}}}if(b5){if(e){b8=b8||k(b3);b7=b7||k(ca);for(b6=0;(b4=b8[b6])!=null;b6++){aq(b4,b7[b6])}}else{aq(b3,ca)}}b7=k(ca,"script");if(b7.length>0){br(b7,!b9&&k(b3,"script"))}b7=b8=b4=null;return ca},buildFragment:function(b3,b5,ca,cf){var cb,b7,b9,ce,cg,cd,b4,b8=b3.length,b6=z(b5),e=[],cc=0;for(;cc<b8;cc++){b7=b3[cc];if(b7||b7===0){if(bI.type(b7)==="object"){bI.merge(e,b7.nodeType?[b7]:b7)}else{if(!H.test(b7)){e.push(b5.createTextNode(b7))}else{ce=ce||b6.appendChild(b5.createElement("div"));cg=(m.exec(b7)||["",""])[1].toLowerCase();b4=R[cg]||R._default;ce.innerHTML=b4[1]+b7.replace(aB,"<$1></$2>")+b4[2];cb=b4[0];while(cb--){ce=ce.lastChild}if(!bI.support.leadingWhitespace&&b2.test(b7)){e.push(b5.createTextNode(b2.exec(b7)[0]))}if(!bI.support.tbody){b7=cg==="table"&&!bX.test(b7)?ce.firstChild:b4[1]==="<table>"&&!bX.test(b7)?ce:0;cb=b7&&b7.childNodes.length;while(cb--){if(bI.nodeName((cd=b7.childNodes[cb]),"tbody")&&!cd.childNodes.length){b7.removeChild(cd)}}}bI.merge(e,ce.childNodes);ce.textContent="";while(ce.firstChild){ce.removeChild(ce.firstChild)}ce=b6.lastChild}}}}if(ce){b6.removeChild(ce)}if(!bI.support.appendChecked){bI.grep(k(e,"input"),bU)}cc=0;while((b7=e[cc++])){if(cf&&bI.inArray(b7,cf)!==-1){continue}b9=bI.contains(b7.ownerDocument,b7);ce=k(b6.appendChild(b7),"script");if(b9){br(ce)}if(ca){cb=0;while((b7=ce[cb++])){if(by.test(b7.type||"")){ca.push(b7)}}}}ce=null;return b6},cleanData:function(b3,cb){var b5,ca,b4,b6,b7=0,cc=bI.expando,e=bI.cache,b8=bI.support.deleteExpando,b9=bI.event.special;for(;(b5=b3[b7])!=null;b7++){if(cb||bI.acceptData(b5)){b4=b5[cc];b6=b4&&e[b4];if(b6){if(b6.events){for(ca in b6.events){if(b9[ca]){bI.event.remove(b5,ca)}else{bI.removeEvent(b5,ca,b6.handle)}}}if(e[b4]){delete e[b4];if(b8){delete b5[cc]}else{if(typeof b5.removeAttribute!==aA){b5.removeAttribute(cc)}else{b5[cc]=null}}a5.push(b4)}}}}},_evalUrl:function(e){return bI.ajax({url:e,type:"GET",dataType:"script",async:false,global:false,"throws":true})}});bI.fn.extend({wrapAll:function(e){if(bI.isFunction(e)){return this.each(function(b4){bI(this).wrapAll(e.call(this,b4))})}if(this[0]){var b3=bI(e,this[0].ownerDocument).eq(0).clone(true);if(this[0].parentNode){b3.insertBefore(this[0])}b3.map(function(){var b4=this;while(b4.firstChild&&b4.firstChild.nodeType===1){b4=b4.firstChild}return b4}).append(this)}return this},wrapInner:function(e){if(bI.isFunction(e)){return this.each(function(b3){bI(this).wrapInner(e.call(this,b3))})}return this.each(function(){var b3=bI(this),b4=b3.contents();if(b4.length){b4.wrapAll(e)}else{b3.append(e)}})},wrap:function(e){var b3=bI.isFunction(e);return this.each(function(b4){bI(this).wrapAll(b3?e.call(this,b4):e)})},unwrap:function(){return this.parent().each(function(){if(!bI.nodeName(this,"body")){bI(this).replaceWith(this.childNodes)}}).end()}});var aC,bn,D,bf=/alpha\([^)]*\)/i,aR=/opacity\s*=\s*([^)]*)/,bm=/^(top|right|bottom|left)$/,E=/^(none|table(?!-c[ea]).+)/,aW=/^margin/,a8=new RegExp("^("+bz+")(.*)$","i"),U=new RegExp("^("+bz+")(?!px)[a-z%]+$","i"),Q=new RegExp("^([+-])=("+bz+")","i"),bi={BODY:"block"},bb={position:"absolute",visibility:"hidden",display:"block"},bB={letterSpacing:0,fontWeight:400},bS=["Top","Right","Bottom","Left"],at=["Webkit","O","Moz","ms"];function b(b5,b3){if(b3 in b5){return b3}var b6=b3.charAt(0).toUpperCase()+b3.slice(1),e=b3,b4=at.length;while(b4--){b3=at[b4]+b6;if(b3 in b5){return b3}}return e}function N(b3,e){b3=e||b3;return bI.css(b3,"display")==="none"||!bI.contains(b3.ownerDocument,b3)}function p(b8,e){var b9,b6,b7,b3=[],b4=0,b5=b8.length;for(;b4<b5;b4++){b6=b8[b4];if(!b6.style){continue}b3[b4]=bI._data(b6,"olddisplay");b9=b6.style.display;if(e){if(!b3[b4]&&b9==="none"){b6.style.display=""}if(b6.style.display===""&&N(b6)){b3[b4]=bI._data(b6,"olddisplay",bD(b6.nodeName))}}else{if(!b3[b4]){b7=N(b6);if(b9&&b9!=="none"||!b7){bI._data(b6,"olddisplay",b7?b9:bI.css(b6,"display"))}}}}for(b4=0;b4<b5;b4++){b6=b8[b4];if(!b6.style){continue}if(!e||b6.style.display==="none"||b6.style.display===""){b6.style.display=e?b3[b4]||"":"none"}}return b8}bI.fn.extend({css:function(e,b3){return bI.access(this,function(b8,b5,b9){var b4,b7,ca={},b6=0;if(bI.isArray(b5)){b7=bn(b8);b4=b5.length;for(;b6<b4;b6++){ca[b5[b6]]=bI.css(b8,b5[b6],false,b7)}return ca}return b9!==aE?bI.style(b8,b5,b9):bI.css(b8,b5)},e,b3,arguments.length>1)},show:function(){return p(this,true)},hide:function(){return p(this)},toggle:function(e){if(typeof e==="boolean"){return e?this.show():this.hide()}return this.each(function(){if(N(this)){bI(this).show()}else{bI(this).hide()}})}});bI.extend({cssHooks:{opacity:{get:function(b4,b3){if(b3){var e=D(b4,"opacity");return e===""?"1":e}}}},cssNumber:{columnCount:true,fillOpacity:true,fontWeight:true,lineHeight:true,opacity:true,order:true,orphans:true,widows:true,zIndex:true,zoom:true},cssProps:{"float":bI.support.cssFloat?"cssFloat":"styleFloat"},style:function(b5,b4,cb,b6){if(!b5||b5.nodeType===3||b5.nodeType===8||!b5.style){return}var b9,ca,cc,b7=bI.camelCase(b4),b3=b5.style;b4=bI.cssProps[b7]||(bI.cssProps[b7]=b(b3,b7));cc=bI.cssHooks[b4]||bI.cssHooks[b7];if(cb!==aE){ca=typeof cb;if(ca==="string"&&(b9=Q.exec(cb))){cb=(b9[1]+1)*b9[2]+parseFloat(bI.css(b5,b4));ca="number"}if(cb==null||ca==="number"&&isNaN(cb)){return}if(ca==="number"&&!bI.cssNumber[b7]){cb+="px"}if(!bI.support.clearCloneStyle&&cb===""&&b4.indexOf("background")===0){b3[b4]="inherit"}if(!cc||!("set" in cc)||(cb=cc.set(b5,cb,b6))!==aE){try{b3[b4]=cb}catch(b8){}}}else{if(cc&&"get" in cc&&(b9=cc.get(b5,false,b6))!==aE){return b9}return b3[b4]}},css:function(b8,b6,b3,b7){var b5,b9,e,b4=bI.camelCase(b6);b6=bI.cssProps[b4]||(bI.cssProps[b4]=b(b8.style,b4));e=bI.cssHooks[b6]||bI.cssHooks[b4];if(e&&"get" in e){b9=e.get(b8,true,b3)}if(b9===aE){b9=D(b8,b6,b7)}if(b9==="normal"&&b6 in bB){b9=bB[b6]}if(b3===""||b3){b5=parseFloat(b9);return b3===true||bI.isNumeric(b5)?b5||0:b9}return b9}});if(a1.getComputedStyle){bn=function(e){return a1.getComputedStyle(e,null)};D=function(b6,b4,b8){var b5,b3,ca,b7=b8||bn(b6),b9=b7?b7.getPropertyValue(b4)||b7[b4]:aE,e=b6.style;if(b7){if(b9===""&&!bI.contains(b6.ownerDocument,b6)){b9=bI.style(b6,b4)}if(U.test(b9)&&aW.test(b4)){b5=e.width;b3=e.minWidth;ca=e.maxWidth;e.minWidth=e.maxWidth=e.width=b9;b9=b7.width;e.width=b5;e.minWidth=b3;e.maxWidth=ca}}return b9}}else{if(l.documentElement.currentStyle){bn=function(e){return e.currentStyle};D=function(b5,b3,b8){var b4,b7,b9,b6=b8||bn(b5),ca=b6?b6[b3]:aE,e=b5.style;if(ca==null&&e&&e[b3]){ca=e[b3]}if(U.test(ca)&&!bm.test(b3)){b4=e.left;b7=b5.runtimeStyle;b9=b7&&b7.left;if(b9){b7.left=b5.currentStyle.left}e.left=b3==="fontSize"?"1em":ca;ca=e.pixelLeft+"px";e.left=b4;if(b9){b7.left=b9}}return ca===""?"auto":ca}}}function aH(e,b4,b5){var b3=a8.exec(b4);return b3?Math.max(0,b3[1]-(b5||0))+(b3[2]||"px"):b4}function au(b6,b3,e,b8,b5){var b4=e===(b8?"border":"content")?4:b3==="width"?1:0,b7=0;for(;b4<4;b4+=2){if(e==="margin"){b7+=bI.css(b6,e+bS[b4],true,b5)}if(b8){if(e==="content"){b7-=bI.css(b6,"padding"+bS[b4],true,b5)}if(e!=="margin"){b7-=bI.css(b6,"border"+bS[b4]+"Width",true,b5)}}else{b7+=bI.css(b6,"padding"+bS[b4],true,b5);if(e!=="padding"){b7+=bI.css(b6,"border"+bS[b4]+"Width",true,b5)}}}return b7}function u(b6,b3,e){var b5=true,b7=b3==="width"?b6.offsetWidth:b6.offsetHeight,b4=bn(b6),b8=bI.support.boxSizing&&bI.css(b6,"boxSizing",false,b4)==="border-box";if(b7<=0||b7==null){b7=D(b6,b3,b4);if(b7<0||b7==null){b7=b6.style[b3]}if(U.test(b7)){return b7}b5=b8&&(bI.support.boxSizingReliable||b7===b6.style[b3]);b7=parseFloat(b7)||0}return(b7+au(b6,b3,e||(b8?"border":"content"),b5,b4))+"px"}function bD(b4){var b3=l,e=bi[b4];if(!e){e=a0(b4,b3);if(e==="none"||!e){aC=(aC||bI("<iframe frameborder='0' width='0' height='0'/>").css("cssText","display:block !important")).appendTo(b3.documentElement);b3=(aC[0].contentWindow||aC[0].contentDocument).document;b3.write("<!doctype html><html><body>");b3.close();e=a0(b4,b3);aC.detach()}bi[b4]=e}return e}function a0(e,b5){var b3=bI(b5.createElement(e)).appendTo(b5.body),b4=bI.css(b3[0],"display");b3.remove();return b4}bI.each(["height","width"],function(b3,e){bI.cssHooks[e]={get:function(b6,b5,b4){if(b5){return b6.offsetWidth===0&&E.test(bI.css(b6,"display"))?bI.swap(b6,bb,function(){return u(b6,e,b4)}):u(b6,e,b4)}},set:function(b6,b7,b4){var b5=b4&&bn(b6);return aH(b6,b7,b4?au(b6,e,b4,bI.support.boxSizing&&bI.css(b6,"boxSizing",false,b5)==="border-box",b5):0)}}});if(!bI.support.opacity){bI.cssHooks.opacity={get:function(b3,e){return aR.test((e&&b3.currentStyle?b3.currentStyle.filter:b3.style.filter)||"")?(0.01*parseFloat(RegExp.$1))+"":e?"1":""},set:function(b6,b7){var b5=b6.style,b3=b6.currentStyle,e=bI.isNumeric(b7)?"alpha(opacity="+b7*100+")":"",b4=b3&&b3.filter||b5.filter||"";b5.zoom=1;if((b7>=1||b7==="")&&bI.trim(b4.replace(bf,""))===""&&b5.removeAttribute){b5.removeAttribute("filter");if(b7===""||b3&&!b3.filter){return}}b5.filter=bf.test(b4)?b4.replace(bf,e):b4+" "+e}}}bI(function(){if(!bI.support.reliableMarginRight){bI.cssHooks.marginRight={get:function(b3,e){if(e){return bI.swap(b3,{display:"inline-block"},D,[b3,"marginRight"])}}}}if(!bI.support.pixelPosition&&bI.fn.position){bI.each(["top","left"],function(e,b3){bI.cssHooks[b3]={get:function(b5,b4){if(b4){b4=D(b5,b3);return U.test(b4)?bI(b5).position()[b3]+"px":b4}}}})}});if(bI.expr&&bI.expr.filters){bI.expr.filters.hidden=function(e){return e.offsetWidth<=0&&e.offsetHeight<=0||(!bI.support.reliableHiddenOffsets&&((e.style&&e.style.display)||bI.css(e,"display"))==="none")};bI.expr.filters.visible=function(e){return !bI.expr.filters.hidden(e)}}bI.each({margin:"",padding:"",border:"Width"},function(e,b3){bI.cssHooks[e+b3]={expand:function(b6){var b5=0,b4={},b7=typeof b6==="string"?b6.split(" "):[b6];for(;b5<4;b5++){b4[e+bS[b5]+b3]=b7[b5]||b7[b5-2]||b7[0]}return b4}};if(!aW.test(e)){bI.cssHooks[e+b3].set=aH}});var bu=/%20/g,aP=/\[\]$/,S=/\r?\n/g,c=/^(?:submit|button|image|reset|file)$/i,ar=/^(?:input|select|textarea|keygen)/i;bI.fn.extend({serialize:function(){return bI.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=bI.prop(this,"elements");return e?bI.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!bI(this).is(":disabled")&&ar.test(this.nodeName)&&!c.test(e)&&(this.checked||!q.test(e))}).map(function(e,b3){var b4=bI(this).val();return b4==null?null:bI.isArray(b4)?bI.map(b4,function(b5){return{name:b3.name,value:b5.replace(S,"\r\n")}}):{name:b3.name,value:b4.replace(S,"\r\n")}}).get()}});bI.param=function(e,b4){var b5,b3=[],b6=function(b7,b8){b8=bI.isFunction(b8)?b8():(b8==null?"":b8);b3[b3.length]=encodeURIComponent(b7)+"="+encodeURIComponent(b8)};if(b4===aE){b4=bI.ajaxSettings&&bI.ajaxSettings.traditional}if(bI.isArray(e)||(e.jquery&&!bI.isPlainObject(e))){bI.each(e,function(){b6(this.name,this.value)})}else{for(b5 in e){i(b5,e[b5],b4,b6)}}return b3.join("&").replace(bu,"+")};function i(b4,b6,b3,b5){var e;if(bI.isArray(b6)){bI.each(b6,function(b8,b7){if(b3||aP.test(b4)){b5(b4,b7)}else{i(b4+"["+(typeof b7==="object"?b8:"")+"]",b7,b3,b5)}})}else{if(!b3&&bI.type(b6)==="object"){for(e in b6){i(b4+"["+e+"]",b6[e],b3,b5)}}else{b5(b4,b6)}}}bI.each(("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu").split(" "),function(b3,e){bI.fn[e]=function(b5,b4){return arguments.length>0?this.on(e,null,b5,b4):this.trigger(e)}});bI.fn.extend({hover:function(e,b3){return this.mouseenter(e).mouseleave(b3||e)},bind:function(e,b4,b3){return this.on(e,null,b4,b3)},unbind:function(e,b3){return this.off(e,null,b3)},delegate:function(e,b3,b5,b4){return this.on(b3,e,b5,b4)},undelegate:function(e,b3,b4){return arguments.length===1?this.off(e,"**"):this.off(b3,e||"**",b4)}});var b1,W,bN=bI.now(),ax=/\?/,an=/#.*$/,M=/([?&])_=[^&]*/,ae=/^(.*?):[ \t]*([^\r\n]*)\r?$/mg,A=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,o=/^(?:GET|HEAD)$/,aF=/^\/\//,aS=/^([\w.+-]+:)(?:\/\/([^\/?#:]*)(?::(\d+)|)|)/,b0=bI.fn.load,v={},a6={},aU="*/".concat("*");try{W=aJ.href}catch(be){W=l.createElement("a");W.href="";W=W.href}b1=aS.exec(W.toLowerCase())||[];function bK(e){return function(b6,b7){if(typeof b6!=="string"){b7=b6;b6="*"}var b3,b4=0,b5=b6.toLowerCase().match(aa)||[];if(bI.isFunction(b7)){while((b3=b5[b4++])){if(b3[0]==="+"){b3=b3.slice(1)||"*";(e[b3]=e[b3]||[]).unshift(b7)}else{(e[b3]=e[b3]||[]).push(b7)}}}}}function n(e,b4,b8,b5){var b3={},b6=(e===a6);function b7(b9){var ca;b3[b9]=true;bI.each(e[b9]||[],function(cc,cb){var cd=cb(b4,b8,b5);if(typeof cd==="string"&&!b6&&!b3[cd]){b4.dataTypes.unshift(cd);b7(cd);return false}else{if(b6){return !(ca=cd)}}});return ca}return b7(b4.dataTypes[0])||!b3["*"]&&b7("*")}function r(b4,b5){var e,b3,b6=bI.ajaxSettings.flatOptions||{};for(b3 in b5){if(b5[b3]!==aE){(b6[b3]?b4:(e||(e={})))[b3]=b5[b3]}}if(e){bI.extend(true,b4,e)}return b4}bI.fn.load=function(b5,b8,b9){if(typeof b5!=="string"&&b0){return b0.apply(this,arguments)}var e,b4,b6,b3=this,b7=b5.indexOf(" ");if(b7>=0){e=b5.slice(b7,b5.length);b5=b5.slice(0,b7)}if(bI.isFunction(b8)){b9=b8;b8=aE}else{if(b8&&typeof b8==="object"){b6="POST"}}if(b3.length>0){bI.ajax({url:b5,type:b6,dataType:"html",data:b8}).done(function(ca){b4=arguments;b3.html(e?bI("<div>").append(bI.parseHTML(ca)).find(e):ca)}).complete(b9&&function(cb,ca){b3.each(b9,b4||[cb.responseText,ca,cb])})}return this};bI.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,b3){bI.fn[b3]=function(b4){return this.on(b3,b4)}});bI.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:W,type:"GET",isLocal:A.test(b1[1]),global:true,processData:true,async:true,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":aU,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":true,"text json":bI.parseJSON,"text xml":bI.parseXML},flatOptions:{url:true,context:true}},ajaxSetup:function(b3,e){return e?r(r(b3,bI.ajaxSettings),e):r(bI.ajaxSettings,b3)},ajaxPrefilter:bK(v),ajaxTransport:bK(a6),ajax:function(b7,b4){if(typeof b7==="object"){b4=b7;b7=aE}b4=b4||{};var cg,ci,b8,cn,cc,b3,cj,b5,cb=bI.ajaxSetup({},b4),cp=cb.context||cb,ce=cb.context&&(cp.nodeType||cp.jquery)?bI(cp):bI.event,co=bI.Deferred(),cl=bI.Callbacks("once memory"),b9=cb.statusCode||{},cf={},cm={},b6=0,ca="canceled",ch={readyState:0,getResponseHeader:function(cq){var e;if(b6===2){if(!b5){b5={};while((e=ae.exec(cn))){b5[e[1].toLowerCase()]=e[2]}}e=b5[cq.toLowerCase()]}return e==null?null:e},getAllResponseHeaders:function(){return b6===2?cn:null},setRequestHeader:function(cq,cr){var e=cq.toLowerCase();if(!b6){cq=cm[e]=cm[e]||cq;cf[cq]=cr}return this},overrideMimeType:function(e){if(!b6){cb.mimeType=e}return this},statusCode:function(cq){var e;if(cq){if(b6<2){for(e in cq){b9[e]=[b9[e],cq[e]]}}else{ch.always(cq[ch.status])}}return this},abort:function(cq){var e=cq||ca;if(cj){cj.abort(e)}cd(0,e);return this}};co.promise(ch).complete=cl.add;ch.success=ch.done;ch.error=ch.fail;cb.url=((b7||cb.url||W)+"").replace(an,"").replace(aF,b1[1]+"//");cb.type=b4.method||b4.type||cb.method||cb.type;cb.dataTypes=bI.trim(cb.dataType||"*").toLowerCase().match(aa)||[""];if(cb.crossDomain==null){cg=aS.exec(cb.url.toLowerCase());cb.crossDomain=!!(cg&&(cg[1]!==b1[1]||cg[2]!==b1[2]||(cg[3]||(cg[1]==="http:"?"80":"443"))!==(b1[3]||(b1[1]==="http:"?"80":"443"))))}if(cb.data&&cb.processData&&typeof cb.data!=="string"){cb.data=bI.param(cb.data,cb.traditional)}n(v,cb,b4,ch);if(b6===2){return ch}b3=cb.global;if(b3&&bI.active++===0){bI.event.trigger("ajaxStart")}cb.type=cb.type.toUpperCase();cb.hasContent=!o.test(cb.type);b8=cb.url;if(!cb.hasContent){if(cb.data){b8=(cb.url+=(ax.test(b8)?"&":"?")+cb.data);delete cb.data}if(cb.cache===false){cb.url=M.test(b8)?b8.replace(M,"$1_="+bN++):b8+(ax.test(b8)?"&":"?")+"_="+bN++}}if(cb.ifModified){if(bI.lastModified[b8]){ch.setRequestHeader("If-Modified-Since",bI.lastModified[b8])}if(bI.etag[b8]){ch.setRequestHeader("If-None-Match",bI.etag[b8])}}if(cb.data&&cb.hasContent&&cb.contentType!==false||b4.contentType){ch.setRequestHeader("Content-Type",cb.contentType)}ch.setRequestHeader("Accept",cb.dataTypes[0]&&cb.accepts[cb.dataTypes[0]]?cb.accepts[cb.dataTypes[0]]+(cb.dataTypes[0]!=="*"?", "+aU+"; q=0.01":""):cb.accepts["*"]);for(ci in cb.headers){ch.setRequestHeader(ci,cb.headers[ci])}if(cb.beforeSend&&(cb.beforeSend.call(cp,ch,cb)===false||b6===2)){return ch.abort()}ca="abort";for(ci in {success:1,error:1,complete:1}){ch[ci](cb[ci])}cj=n(a6,cb,b4,ch);if(!cj){cd(-1,"No Transport")}else{ch.readyState=1;if(b3){ce.trigger("ajaxSend",[ch,cb])}if(cb.async&&cb.timeout>0){cc=setTimeout(function(){ch.abort("timeout")},cb.timeout)}try{b6=1;cj.send(cf,cd)}catch(ck){if(b6<2){cd(-1,ck)}else{throw ck}}}function cd(cu,cq,cv,cs){var e,cy,cw,ct,cx,cr=cq;if(b6===2){return}b6=2;if(cc){clearTimeout(cc)}cj=aE;cn=cs||"";ch.readyState=cu>0?4:0;e=cu>=200&&cu<300||cu===304;if(cv){ct=g(cb,ch,cv)}ct=ad(cb,ct,ch,e);if(e){if(cb.ifModified){cx=ch.getResponseHeader("Last-Modified");if(cx){bI.lastModified[b8]=cx}cx=ch.getResponseHeader("etag");if(cx){bI.etag[b8]=cx}}if(cu===204||cb.type==="HEAD"){cr="nocontent"}else{if(cu===304){cr="notmodified"}else{cr=ct.state;cy=ct.data;cw=ct.error;e=!cw}}}else{cw=cr;if(cu||!cr){cr="error";if(cu<0){cu=0}}}ch.status=cu;ch.statusText=(cq||cr)+"";if(e){co.resolveWith(cp,[cy,cr,ch])}else{co.rejectWith(cp,[ch,cr,cw])}ch.statusCode(b9);b9=aE;if(b3){ce.trigger(e?"ajaxSuccess":"ajaxError",[ch,cb,e?cy:cw])}cl.fireWith(cp,[ch,cr]);if(b3){ce.trigger("ajaxComplete",[ch,cb]);if(!(--bI.active)){bI.event.trigger("ajaxStop")}}}return ch},getJSON:function(e,b3,b4){return bI.get(e,b3,b4,"json")},getScript:function(e,b3){return bI.get(e,aE,b3,"script")}});bI.each(["get","post"],function(e,b3){bI[b3]=function(b4,b6,b7,b5){if(bI.isFunction(b6)){b5=b5||b7;b7=b6;b6=aE}return bI.ajax({url:b4,type:b3,dataType:b5,data:b6,success:b7})}});function g(ca,b9,b6){var e,b5,b4,b7,b3=ca.contents,b8=ca.dataTypes;while(b8[0]==="*"){b8.shift();if(b5===aE){b5=ca.mimeType||b9.getResponseHeader("Content-Type")}}if(b5){for(b7 in b3){if(b3[b7]&&b3[b7].test(b5)){b8.unshift(b7);break}}}if(b8[0] in b6){b4=b8[0]}else{for(b7 in b6){if(!b8[0]||ca.converters[b7+" "+b8[0]]){b4=b7;break}if(!e){e=b7}}b4=b4||e}if(b4){if(b4!==b8[0]){b8.unshift(b4)}return b6[b4]}}function ad(ce,b6,cb,b4){var b3,b9,cc,b7,b5,cd={},ca=ce.dataTypes.slice();if(ca[1]){for(cc in ce.converters){cd[cc.toLowerCase()]=ce.converters[cc]}}b9=ca.shift();while(b9){if(ce.responseFields[b9]){cb[ce.responseFields[b9]]=b6}if(!b5&&b4&&ce.dataFilter){b6=ce.dataFilter(b6,ce.dataType)}b5=b9;b9=ca.shift();if(b9){if(b9==="*"){b9=b5}else{if(b5!=="*"&&b5!==b9){cc=cd[b5+" "+b9]||cd["* "+b9];if(!cc){for(b3 in cd){b7=b3.split(" ");if(b7[1]===b9){cc=cd[b5+" "+b7[0]]||cd["* "+b7[0]];if(cc){if(cc===true){cc=cd[b3]}else{if(cd[b3]!==true){b9=b7[0];ca.unshift(b7[1])}}break}}}}if(cc!==true){if(cc&&ce["throws"]){b6=cc(b6)}else{try{b6=cc(b6)}catch(b8){return{state:"parsererror",error:cc?b8:"No conversion from "+b5+" to "+b9}}}}}}}}return{state:"success",data:b6}}bI.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(e){bI.globalEval(e);return e}}});bI.ajaxPrefilter("script",function(e){if(e.cache===aE){e.cache=false}if(e.crossDomain){e.type="GET";e.global=false}});bI.ajaxTransport("script",function(b4){if(b4.crossDomain){var e,b3=l.head||bI("head")[0]||l.documentElement;return{send:function(b5,b6){e=l.createElement("script");e.async=true;if(b4.scriptCharset){e.charset=b4.scriptCharset}e.src=b4.url;e.onload=e.onreadystatechange=function(b8,b7){if(b7||!e.readyState||/loaded|complete/.test(e.readyState)){e.onload=e.onreadystatechange=null;if(e.parentNode){e.parentNode.removeChild(e)}e=null;if(!b7){b6(200,"success")}}};b3.insertBefore(e,b3.firstChild)},abort:function(){if(e){e.onload(aE,true)}}}}});var bp=[],a4=/(=)\?(?=&|$)|\?\?/;bI.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=bp.pop()||(bI.expando+"_"+(bN++));this[e]=true;return e}});bI.ajaxPrefilter("json jsonp",function(b5,e,b6){var b8,b3,b4,b7=b5.jsonp!==false&&(a4.test(b5.url)?"url":typeof b5.data==="string"&&!(b5.contentType||"").indexOf("application/x-www-form-urlencoded")&&a4.test(b5.data)&&"data");if(b7||b5.dataTypes[0]==="jsonp"){b8=b5.jsonpCallback=bI.isFunction(b5.jsonpCallback)?b5.jsonpCallback():b5.jsonpCallback;if(b7){b5[b7]=b5[b7].replace(a4,"$1"+b8)}else{if(b5.jsonp!==false){b5.url+=(ax.test(b5.url)?"&":"?")+b5.jsonp+"="+b8}}b5.converters["script json"]=function(){if(!b4){bI.error(b8+" was not called")}return b4[0]};b5.dataTypes[0]="json";b3=a1[b8];a1[b8]=function(){b4=arguments};b6.always(function(){a1[b8]=b3;if(b5[b8]){b5.jsonpCallback=e.jsonpCallback;bp.push(b8)}if(b4&&bI.isFunction(b3)){b3(b4[0])}b4=b3=aE});return"script"}});var af,av,aw=0,aN=a1.ActiveXObject&&function(){var e;for(e in af){af[e](aE,true)}};function bC(){try{return new a1.XMLHttpRequest()}catch(b3){}}function bd(){try{return new a1.ActiveXObject("Microsoft.XMLHTTP")}catch(b3){}}bI.ajaxSettings.xhr=a1.ActiveXObject?function(){return !this.isLocal&&bC()||bd()}:bC;av=bI.ajaxSettings.xhr();bI.support.cors=!!av&&("withCredentials" in av);av=bI.support.ajax=!!av;if(av){bI.ajaxTransport(function(e){if(!e.crossDomain||bI.support.cors){var b3;return{send:function(b9,b4){var b7,b5,b8=e.xhr();if(e.username){b8.open(e.type,e.url,e.async,e.username,e.password)}else{b8.open(e.type,e.url,e.async)}if(e.xhrFields){for(b5 in e.xhrFields){b8[b5]=e.xhrFields[b5]}}if(e.mimeType&&b8.overrideMimeType){b8.overrideMimeType(e.mimeType)}if(!e.crossDomain&&!b9["X-Requested-With"]){b9["X-Requested-With"]="XMLHttpRequest"}try{for(b5 in b9){b8.setRequestHeader(b5,b9[b5])}}catch(b6){}b8.send((e.hasContent&&e.data)||null);b3=function(cc,cb){var ca,cd,cg,ce;try{if(b3&&(cb||b8.readyState===4)){b3=aE;if(b7){b8.onreadystatechange=bI.noop;if(aN){delete af[b7]}}if(cb){if(b8.readyState!==4){b8.abort()}}else{ce={};ca=b8.status;cd=b8.getAllResponseHeaders();if(typeof b8.responseText==="string"){ce.text=b8.responseText}try{cg=b8.statusText}catch(cf){cg=""}if(!ca&&e.isLocal&&!e.crossDomain){ca=ce.text?200:404}else{if(ca===1223){ca=204}}}}}catch(ch){if(!cb){b4(-1,ch)}}if(ce){b4(ca,cg,ce,cd)}};if(!e.async){b3()}else{if(b8.readyState===4){setTimeout(b3)}else{b7=++aw;if(aN){if(!af){af={};bI(a1).unload(aN)}af[b7]=b3}b8.onreadystatechange=b3}}},abort:function(){if(b3){b3(aE,true)}}}}})}var J,ab,bQ=/^(?:toggle|show|hide)$/,bJ=new RegExp("^(?:([+-])=|)("+bz+")([a-z%]*)$","i"),bP=/queueHooks$/,az=[h],aY={"*":[function(e,b8){var ca=this.createTween(e,b8),b6=ca.cur(),b5=bJ.exec(b8),b9=b5&&b5[3]||(bI.cssNumber[e]?"":"px"),b3=(bI.cssNumber[e]||b9!=="px"&&+b6)&&bJ.exec(bI.css(ca.elem,e)),b4=1,b7=20;if(b3&&b3[3]!==b9){b9=b9||b3[3];b5=b5||[];b3=+b6||1;do{b4=b4||".5";b3=b3/b4;bI.style(ca.elem,e,b3+b9)}while(b4!==(b4=ca.cur()/b6)&&b4!==1&&--b7)}if(b5){b3=ca.start=+b3||+b6||0;ca.unit=b9;ca.end=b5[1]?b3+(b5[1]+1)*b5[2]:+b5[2]}return ca}]};function bl(){setTimeout(function(){J=aE});return(J=bI.now())}function ba(b6,b8,b5){var b3,b7=(aY[b8]||[]).concat(aY["*"]),e=0,b4=b7.length;for(;e<b4;e++){if((b3=b7[e].call(b5,b8,b6))){return b3}}}function f(b4,b8,cb){var cc,e,b7=0,b3=az.length,ca=bI.Deferred().always(function(){delete b6.elem}),b6=function(){if(e){return false}var ci=J||bl(),cf=Math.max(0,b5.startTime+b5.duration-ci),cd=cf/b5.duration||0,ch=1-cd,ce=0,cg=b5.tweens.length;for(;ce<cg;ce++){b5.tweens[ce].run(ch)}ca.notifyWith(b4,[b5,ch,cf]);if(ch<1&&cg){return cf}else{ca.resolveWith(b4,[b5]);return false}},b5=ca.promise({elem:b4,props:bI.extend({},b8),opts:bI.extend(true,{specialEasing:{}},cb),originalProperties:b8,originalOptions:cb,startTime:J||bl(),duration:cb.duration,tweens:[],createTween:function(cf,cd){var ce=bI.Tween(b4,b5.opts,cf,cd,b5.opts.specialEasing[cf]||b5.opts.easing);b5.tweens.push(ce);return ce},stop:function(ce){var cd=0,cf=ce?b5.tweens.length:0;if(e){return this}e=true;for(;cd<cf;cd++){b5.tweens[cd].run(1)}if(ce){ca.resolveWith(b4,[b5,ce])}else{ca.rejectWith(b4,[b5,ce])}return this}}),b9=b5.props;ak(b9,b5.opts.specialEasing);for(;b7<b3;b7++){cc=az[b7].call(b5,b4,b9,b5.opts);if(cc){return cc}}bI.map(b9,ba,b5);if(bI.isFunction(b5.opts.start)){b5.opts.start.call(b4,b5)}bI.fx.timer(bI.extend(b6,{elem:b4,anim:b5,queue:b5.opts.queue}));return b5.progress(b5.opts.progress).done(b5.opts.done,b5.opts.complete).fail(b5.opts.fail).always(b5.opts.always)}function ak(b5,b7){var b4,b3,b8,b6,e;for(b4 in b5){b3=bI.camelCase(b4);b8=b7[b3];b6=b5[b4];if(bI.isArray(b6)){b8=b6[1];b6=b5[b4]=b6[0]}if(b4!==b3){b5[b3]=b6;delete b5[b4]}e=bI.cssHooks[b3];if(e&&"expand" in e){b6=e.expand(b6);delete b5[b3];for(b4 in b6){if(!(b4 in b5)){b5[b4]=b6[b4];b7[b4]=b8}}}else{b7[b3]=b8}}}bI.Animation=bI.extend(f,{tweener:function(b3,b6){if(bI.isFunction(b3)){b6=b3;b3=["*"]}else{b3=b3.split(" ")}var b5,e=0,b4=b3.length;for(;e<b4;e++){b5=b3[e];aY[b5]=aY[b5]||[];aY[b5].unshift(b6)}},prefilter:function(b3,e){if(e){az.unshift(b3)}else{az.push(b3)}}});function h(b5,b9,e){var b4,cb,b7,ce,cf,cc,b6=this,ca={},b3=b5.style,b8=b5.nodeType&&N(b5),cd=bI._data(b5,"fxshow");if(!e.queue){cf=bI._queueHooks(b5,"fx");if(cf.unqueued==null){cf.unqueued=0;cc=cf.empty.fire;cf.empty.fire=function(){if(!cf.unqueued){cc()}}}cf.unqueued++;b6.always(function(){b6.always(function(){cf.unqueued--;if(!bI.queue(b5,"fx").length){cf.empty.fire()}})})}if(b5.nodeType===1&&("height" in b9||"width" in b9)){e.overflow=[b3.overflow,b3.overflowX,b3.overflowY];if(bI.css(b5,"display")==="inline"&&bI.css(b5,"float")==="none"){if(!bI.support.inlineBlockNeedsLayout||bD(b5.nodeName)==="inline"){b3.display="inline-block"}else{b3.zoom=1}}}if(e.overflow){b3.overflow="hidden";if(!bI.support.shrinkWrapBlocks){b6.always(function(){b3.overflow=e.overflow[0];b3.overflowX=e.overflow[1];b3.overflowY=e.overflow[2]})}}for(b4 in b9){cb=b9[b4];if(bQ.exec(cb)){delete b9[b4];b7=b7||cb==="toggle";if(cb===(b8?"hide":"show")){continue}ca[b4]=cd&&cd[b4]||bI.style(b5,b4)}}if(!bI.isEmptyObject(ca)){if(cd){if("hidden" in cd){b8=cd.hidden}}else{cd=bI._data(b5,"fxshow",{})}if(b7){cd.hidden=!b8}if(b8){bI(b5).show()}else{b6.done(function(){bI(b5).hide()})}b6.done(function(){var cg;bI._removeData(b5,"fxshow");for(cg in ca){bI.style(b5,cg,ca[cg])}});for(b4 in ca){ce=ba(b8?cd[b4]:0,b4,b6);if(!(b4 in cd)){cd[b4]=ce.start;if(b8){ce.end=ce.start;ce.start=b4==="width"||b4==="height"?1:0}}}}}function F(b4,b3,b6,e,b5){return new F.prototype.init(b4,b3,b6,e,b5)}bI.Tween=F;F.prototype={constructor:F,init:function(b5,b3,b7,e,b6,b4){this.elem=b5;this.prop=b7;this.easing=b6||"swing";this.options=b3;this.start=this.now=this.cur();this.end=e;this.unit=b4||(bI.cssNumber[b7]?"":"px")},cur:function(){var e=F.propHooks[this.prop];return e&&e.get?e.get(this):F.propHooks._default.get(this)},run:function(b4){var b3,e=F.propHooks[this.prop];if(this.options.duration){this.pos=b3=bI.easing[this.easing](b4,this.options.duration*b4,0,1,this.options.duration)}else{this.pos=b3=b4}this.now=(this.end-this.start)*b3+this.start;if(this.options.step){this.options.step.call(this.elem,this.now,this)}if(e&&e.set){e.set(this)}else{F.propHooks._default.set(this)}return this}};F.prototype.init.prototype=F.prototype;F.propHooks={_default:{get:function(b3){var e;if(b3.elem[b3.prop]!=null&&(!b3.elem.style||b3.elem.style[b3.prop]==null)){return b3.elem[b3.prop]}e=bI.css(b3.elem,b3.prop,"");return !e||e==="auto"?0:e},set:function(e){if(bI.fx.step[e.prop]){bI.fx.step[e.prop](e)}else{if(e.elem.style&&(e.elem.style[bI.cssProps[e.prop]]!=null||bI.cssHooks[e.prop])){bI.style(e.elem,e.prop,e.now+e.unit)}else{e.elem[e.prop]=e.now}}}}};F.propHooks.scrollTop=F.propHooks.scrollLeft={set:function(e){if(e.elem.nodeType&&e.elem.parentNode){e.elem[e.prop]=e.now}}};bI.each(["toggle","show","hide"],function(b3,e){var b4=bI.fn[e];bI.fn[e]=function(b5,b7,b6){return b5==null||typeof b5==="boolean"?b4.apply(this,arguments):this.animate(bH(e,true),b5,b7,b6)}});bI.fn.extend({fadeTo:function(e,b5,b4,b3){return this.filter(N).css("opacity",0).show().end().animate({opacity:b5},e,b4,b3)},animate:function(b8,b5,b7,b6){var b4=bI.isEmptyObject(b8),e=bI.speed(b5,b7,b6),b3=function(){var b9=f(this,bI.extend({},b8),e);if(b4||bI._data(this,"finish")){b9.stop(true)}};b3.finish=b3;return b4||e.queue===false?this.each(b3):this.queue(e.queue,b3)},stop:function(b4,b3,e){var b5=function(b6){var b7=b6.stop;delete b6.stop;b7(e)};if(typeof b4!=="string"){e=b3;b3=b4;b4=aE}if(b3&&b4!==false){this.queue(b4||"fx",[])}return this.each(function(){var b9=true,b6=b4!=null&&b4+"queueHooks",b8=bI.timers,b7=bI._data(this);if(b6){if(b7[b6]&&b7[b6].stop){b5(b7[b6])}}else{for(b6 in b7){if(b7[b6]&&b7[b6].stop&&bP.test(b6)){b5(b7[b6])}}}for(b6=b8.length;b6--;){if(b8[b6].elem===this&&(b4==null||b8[b6].queue===b4)){b8[b6].anim.stop(e);b9=false;b8.splice(b6,1)}}if(b9||!e){bI.dequeue(this,b4)}})},finish:function(e){if(e!==false){e=e||"fx"}return this.each(function(){var b5,b8=bI._data(this),b4=b8[e+"queue"],b3=b8[e+"queueHooks"],b7=bI.timers,b6=b4?b4.length:0;b8.finish=true;bI.queue(this,e,[]);if(b3&&b3.stop){b3.stop.call(this,true)}for(b5=b7.length;b5--;){if(b7[b5].elem===this&&b7[b5].queue===e){b7[b5].anim.stop(true);b7.splice(b5,1)}}for(b5=0;b5<b6;b5++){if(b4[b5]&&b4[b5].finish){b4[b5].finish.call(this)}}delete b8.finish})}});function bH(b4,b6){var b5,e={height:b4},b3=0;b6=b6?1:0;for(;b3<4;b3+=2-b6){b5=bS[b3];e["margin"+b5]=e["padding"+b5]=b4}if(b6){e.opacity=e.width=b4}return e}bI.each({slideDown:bH("show"),slideUp:bH("hide"),slideToggle:bH("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,b3){bI.fn[e]=function(b4,b6,b5){return this.animate(b3,b4,b6,b5)}});bI.speed=function(b4,b5,b3){var e=b4&&typeof b4==="object"?bI.extend({},b4):{complete:b3||!b3&&b5||bI.isFunction(b4)&&b4,duration:b4,easing:b3&&b5||b5&&!bI.isFunction(b5)&&b5};e.duration=bI.fx.off?0:typeof e.duration==="number"?e.duration:e.duration in bI.fx.speeds?bI.fx.speeds[e.duration]:bI.fx.speeds._default;if(e.queue==null||e.queue===true){e.queue="fx"}e.old=e.complete;e.complete=function(){if(bI.isFunction(e.old)){e.old.call(this)}if(e.queue){bI.dequeue(this,e.queue)}};return e};bI.easing={linear:function(e){return e},swing:function(e){return 0.5-Math.cos(e*Math.PI)/2}};bI.timers=[];bI.fx=F.prototype.init;bI.fx.tick=function(){var b4,b3=bI.timers,e=0;J=bI.now();for(;e<b3.length;e++){b4=b3[e];if(!b4()&&b3[e]===b4){b3.splice(e--,1)}}if(!b3.length){bI.fx.stop()}J=aE};bI.fx.timer=function(e){if(e()&&bI.timers.push(e)){bI.fx.start()}};bI.fx.interval=13;bI.fx.start=function(){if(!ab){ab=setInterval(bI.fx.tick,bI.fx.interval)}};bI.fx.stop=function(){clearInterval(ab);ab=null};bI.fx.speeds={slow:600,fast:200,_default:400};bI.fx.step={};if(bI.expr&&bI.expr.filters){bI.expr.filters.animated=function(e){return bI.grep(bI.timers,function(b3){return e===b3.elem}).length}}bI.fn.offset=function(b3){if(arguments.length){return b3===aE?this:this.each(function(b8){bI.offset.setOffset(this,b3,b8)})}var e,b7,b5={top:0,left:0},b4=this[0],b6=b4&&b4.ownerDocument;if(!b6){return}e=b6.documentElement;if(!bI.contains(e,b4)){return b5}if(typeof b4.getBoundingClientRect!==aA){b5=b4.getBoundingClientRect()}b7=bo(b6);return{top:b5.top+(b7.pageYOffset||e.scrollTop)-(e.clientTop||0),left:b5.left+(b7.pageXOffset||e.scrollLeft)-(e.clientLeft||0)}};bI.offset={setOffset:function(b5,ce,b8){var b9=bI.css(b5,"position");if(b9==="static"){b5.style.position="relative"}var b7=bI(b5),b3=b7.offset(),e=bI.css(b5,"top"),cc=bI.css(b5,"left"),cd=(b9==="absolute"||b9==="fixed")&&bI.inArray("auto",[e,cc])>-1,cb={},ca={},b4,b6;if(cd){ca=b7.position();b4=ca.top;b6=ca.left}else{b4=parseFloat(e)||0;b6=parseFloat(cc)||0}if(bI.isFunction(ce)){ce=ce.call(b5,b8,b3)}if(ce.top!=null){cb.top=(ce.top-b3.top)+b4}if(ce.left!=null){cb.left=(ce.left-b3.left)+b6}if("using" in ce){ce.using.call(b5,cb)}else{b7.css(cb)}}};bI.fn.extend({position:function(){if(!this[0]){return}var b4,b5,e={top:0,left:0},b3=this[0];if(bI.css(b3,"position")==="fixed"){b5=b3.getBoundingClientRect()}else{b4=this.offsetParent();b5=this.offset();if(!bI.nodeName(b4[0],"html")){e=b4.offset()}e.top+=bI.css(b4[0],"borderTopWidth",true);e.left+=bI.css(b4[0],"borderLeftWidth",true)}return{top:b5.top-e.top-bI.css(b3,"marginTop",true),left:b5.left-e.left-bI.css(b3,"marginLeft",true)}},offsetParent:function(){return this.map(function(){var e=this.offsetParent||bV;while(e&&(!bI.nodeName(e,"html")&&bI.css(e,"position")==="static")){e=e.offsetParent}return e||bV})}});bI.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(b4,b3){var e=/Y/.test(b3);bI.fn[b4]=function(b5){return bI.access(this,function(b6,b9,b8){var b7=bo(b6);if(b8===aE){return b7?(b3 in b7)?b7[b3]:b7.document.documentElement[b9]:b6[b9]}if(b7){b7.scrollTo(!e?b8:bI(b7).scrollLeft(),e?b8:bI(b7).scrollTop())}else{b6[b9]=b8}},b4,b5,arguments.length,null)}});function bo(e){return bI.isWindow(e)?e:e.nodeType===9?e.defaultView||e.parentWindow:false}bI.each({Height:"height",Width:"width"},function(e,b3){bI.each({padding:"inner"+e,content:b3,"":"outer"+e},function(b4,b5){bI.fn[b5]=function(b9,b8){var b7=arguments.length&&(b4||typeof b9!=="boolean"),b6=b4||(b9===true||b8===true?"margin":"border");return bI.access(this,function(cb,ca,cc){var cd;if(bI.isWindow(cb)){return cb.document.documentElement["client"+e]}if(cb.nodeType===9){cd=cb.documentElement;return Math.max(cb.body["scroll"+e],cd["scroll"+e],cb.body["offset"+e],cd["offset"+e],cd["client"+e])}return cc===aE?bI.css(cb,ca,b6):bI.style(cb,ca,cc,b6)},b3,b7?b9:aE,b7,null)}})});bI.fn.size=function(){return this.length};bI.fn.andSelf=bI.fn.addBack;if(typeof module==="object"&&module&&typeof module.exports==="object"){module.exports=bI}else{a1.jQuery=a1.$=bI;if(typeof define==="function"&&define.amd){define("jquery",[],function(){return bI})}}})(window);
(function(v){var ab,C="2.1.0",ag=Math.round,ai,S={},R=(typeof module!=="undefined"&&module.exports),z=/^\/?Date\((\-?\d+)/i,af=/(\-)?(\d*)?\.?(\d+)\:(\d+)\:(\d+)\.?(\d{3})?/,l=/(\[[^\[]*\])|(\\)?(Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|mm?|ss?|SS?S?|X|zz?|ZZ?|.)/g,r=/(\[[^\[]*\])|(\\)?(LT|LL?L?L?|l{1,4})/g,g=/\d\d?/,T=/\d{1,3}/,V=/\d{3}/,L=/\d{1,4}/,q=/[+\-]?\d{1,6}/,M=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,b=/Z|[\+\-]\d\d:?\d\d/i,w=/T/i,p=/[\+\-]?\d+(\.\d{1,3})?/,N=/^\s*\d{4}-\d\d-\d\d((T| )(\d\d(:\d\d(:\d\d(\.\d\d?\d?)?)?)?)?([\+\-]\d\d:?\d\d)?)?/,d="YYYY-MM-DDTHH:mm:ssZ",j=[["HH:mm:ss.S",/(T| )\d\d:\d\d:\d\d\.\d{1,3}/],["HH:mm:ss",/(T| )\d\d:\d\d:\d\d/],["HH:mm",/(T| )\d\d:\d\d/],["HH",/(T| )\d\d/]],E=/([\+\-]|\d\d)/gi,n="Date|Hours|Minutes|Seconds|Milliseconds".split("|"),ac={Milliseconds:1,Seconds:1000,Minutes:60000,Hours:3600000,Days:86400000,Months:2592000000,Years:31536000000},u={ms:"millisecond",s:"second",m:"minute",h:"hour",d:"day",w:"week",M:"month",y:"year"},m={},I="DDD w W M D d".split(" "),y="M D H h m s w W".split(" "),h={M:function(){return this.month()+1},MMM:function(i){return this.lang().monthsShort(this,i)},MMMM:function(i){return this.lang().months(this,i)},D:function(){return this.date()},DDD:function(){return this.dayOfYear()},d:function(){return this.day()},dd:function(i){return this.lang().weekdaysMin(this,i)},ddd:function(i){return this.lang().weekdaysShort(this,i)},dddd:function(i){return this.lang().weekdays(this,i)},w:function(){return this.week()},W:function(){return this.isoWeek()},YY:function(){return ae(this.year()%100,2)},YYYY:function(){return ae(this.year(),4)},YYYYY:function(){return ae(this.year(),5)},gg:function(){return ae(this.weekYear()%100,2)},gggg:function(){return this.weekYear()},ggggg:function(){return ae(this.weekYear(),5)},GG:function(){return ae(this.isoWeekYear()%100,2)},GGGG:function(){return this.isoWeekYear()},GGGGG:function(){return ae(this.isoWeekYear(),5)},e:function(){return this.weekday()},E:function(){return this.isoWeekday()},a:function(){return this.lang().meridiem(this.hours(),this.minutes(),true)},A:function(){return this.lang().meridiem(this.hours(),this.minutes(),false)},H:function(){return this.hours()},h:function(){return this.hours()%12||12},m:function(){return this.minutes()},s:function(){return this.seconds()},S:function(){return ~~(this.milliseconds()/100)},SS:function(){return ae(~~(this.milliseconds()/10),2)},SSS:function(){return ae(this.milliseconds(),3)},Z:function(){var am=-this.zone(),i="+";if(am<0){am=-am;i="-"}return i+ae(~~(am/60),2)+":"+ae(~~am%60,2)},ZZ:function(){var am=-this.zone(),i="+";if(am<0){am=-am;i="-"}return i+ae(~~(10*am/6),4)},z:function(){return this.zoneAbbr()},zz:function(){return this.zoneName()},X:function(){return this.unix()}};function P(am,i){return function(an){return ae(am.call(this,an),i)}}function J(i,am){return function(an){return this.lang().ordinal(i.call(this,an),am)}}while(I.length){ai=I.pop();h[ai+"o"]=J(h[ai],ai)}while(y.length){ai=y.pop();h[ai+ai]=P(h[ai],2)}h.DDDD=P(h.DDD,3);function ak(){}function x(i){t(this,i)}function al(ao){var aq=ao.years||ao.year||ao.y||0,am=ao.months||ao.month||ao.M||0,i=ao.weeks||ao.week||ao.w||0,au=ao.days||ao.day||ao.d||0,ar=ao.hours||ao.hour||ao.h||0,ap=ao.minutes||ao.minute||ao.m||0,at=ao.seconds||ao.second||ao.s||0,an=ao.milliseconds||ao.millisecond||ao.ms||0;this._input=ao;this._milliseconds=an+at*1000+ap*60000+ar*3600000;this._days=au+i*7;this._months=am+aq*12;this._data={};this._bubble()}function t(an,am){for(var ao in am){if(am.hasOwnProperty(ao)){an[ao]=am[ao]}}return an}function aa(i){if(i<0){return Math.ceil(i)}else{return Math.floor(i)}}function ae(an,am){var i=an+"";while(i.length<am){i="0"+i}return i}function X(ap,ao,at,ar){var an=ao._milliseconds,av=ao._days,am=ao._months,aq,au,i;if(an){ap._d.setTime(+ap._d+an*at)}if(av||am){aq=ap.minute();au=ap.hour()}if(av){ap.date(ap.date()+av*at)}if(am){ap.month(ap.month()+am*at)}if(an&&!ar){ab.updateOffset(ap)}if(av||am){ap.minute(aq);ap.hour(au)}}function F(i){return Object.prototype.toString.call(i)==="[object Array]"}function W(aq,ap){var am=Math.min(aq.length,ap.length),an=Math.abs(aq.length-ap.length),ar=0,ao;for(ao=0;ao<am;ao++){if(~~aq[ao]!==~~ap[ao]){ar++}}return ar+an}function G(i){return i?u[i]||i.toLowerCase().replace(/(.)s$/,"$1"):i}ak.prototype={set:function(am){var ao,an;for(an in am){ao=am[an];if(typeof ao==="function"){this[an]=ao}else{this["_"+an]=ao}}},_months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),months:function(i){return this._months[i.month()]},_monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),monthsShort:function(i){return this._monthsShort[i.month()]},monthsParse:function(am){var an,ap,ao;if(!this._monthsParse){this._monthsParse=[]}for(an=0;an<12;an++){if(!this._monthsParse[an]){ap=ab([2000,an]);ao="^"+this.months(ap,"")+"|^"+this.monthsShort(ap,"");this._monthsParse[an]=new RegExp(ao.replace(".",""),"i")}if(this._monthsParse[an].test(am)){return an}}},_weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdays:function(i){return this._weekdays[i.day()]},_weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysShort:function(i){return this._weekdaysShort[i.day()]},_weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),weekdaysMin:function(i){return this._weekdaysMin[i.day()]},weekdaysParse:function(ap){var am,ao,an;if(!this._weekdaysParse){this._weekdaysParse=[]}for(am=0;am<7;am++){if(!this._weekdaysParse[am]){ao=ab([2000,1]).day(am);an="^"+this.weekdays(ao,"")+"|^"+this.weekdaysShort(ao,"")+"|^"+this.weekdaysMin(ao,"");this._weekdaysParse[am]=new RegExp(an.replace(".",""),"i")}if(this._weekdaysParse[am].test(ap)){return am}}},_longDateFormat:{LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D YYYY",LLL:"MMMM D YYYY LT",LLLL:"dddd, MMMM D YYYY LT"},longDateFormat:function(am){var i=this._longDateFormat[am];if(!i&&this._longDateFormat[am.toUpperCase()]){i=this._longDateFormat[am.toUpperCase()].replace(/MMMM|MM|DD|dddd/g,function(an){return an.slice(1)});this._longDateFormat[am]=i}return i},isPM:function(i){return((i+"").toLowerCase()[0]==="p")},_meridiemParse:/[ap]\.?m?\.?/i,meridiem:function(i,am,an){if(i>11){return an?"pm":"PM"}else{return an?"am":"AM"}},_calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},calendar:function(am,an){var i=this._calendar[am];return typeof i==="function"?i.apply(an):i},_relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},relativeTime:function(ao,an,am,ap){var i=this._relativeTime[am];return(typeof i==="function")?i(ao,an,am,ap):i.replace(/%d/i,ao)},pastFuture:function(an,i){var am=this._relativeTime[an>0?"future":"past"];return typeof am==="function"?am(i):am.replace(/%s/i,i)},ordinal:function(i){return this._ordinal.replace("%d",i)},_ordinal:"%d",preparse:function(i){return i},postformat:function(i){return i},week:function(i){return U(i,this._week.dow,this._week.doy).week},_week:{dow:0,doy:6}};function B(am,i){i.abbr=am;if(!S[am]){S[am]=new ak()}S[am].set(i);return S[am]}function A(i){if(!i){return ab.fn._lang}if(!S[i]&&R){try{require("./lang/"+i)}catch(am){return ab.fn._lang}}return S[i]}function K(i){if(i.match(/\[.*\]/)){return i.replace(/^\[|\]$/g,"")}return i.replace(/\\/g,"")}function Z(ao){var ap=ao.match(l),am,an;for(am=0,an=ap.length;am<an;am++){if(h[ap[am]]){ap[am]=h[ap[am]]}else{ap[am]=K(ap[am])}}return function(aq){var i="";for(am=0;am<an;am++){i+=ap[am] instanceof Function?ap[am].call(aq,ao):ap[am]}return i}}function Q(am,ap){var an=5;function ao(i){return am.lang().longDateFormat(i)||i}while(an--&&r.test(ap)){ap=ap.replace(r,ao)}if(!m[ap]){m[ap]=Z(ap)}return m[ap](am)}function f(am,i){switch(am){case"DDDD":return V;case"YYYY":return L;case"YYYYY":return q;case"S":case"SS":case"SSS":case"DDD":return T;case"MMM":case"MMMM":case"dd":case"ddd":case"dddd":return M;case"a":case"A":return A(i._l)._meridiemParse;case"X":return p;case"Z":case"ZZ":return b;case"T":return w;case"MM":case"DD":case"YY":case"HH":case"hh":case"mm":case"ss":case"M":case"D":case"d":case"H":case"h":case"m":case"s":return g;default:return new RegExp(am.replace("\\",""))}}function s(am){var i=(b.exec(am)||[])[0],ao=(i+"").match(E)||["-",0,0],an=+(ao[1]*60)+~~ao[2];return ao[0]==="+"?-an:an}function e(ap,an,ao){var am,i=ao._a;switch(ap){case"M":case"MM":i[1]=(an==null)?0:~~an-1;break;case"MMM":case"MMMM":am=A(ao._l).monthsParse(an);if(am!=null){i[1]=am}else{ao._isValid=false}break;case"D":case"DD":case"DDD":case"DDDD":if(an!=null){i[2]=~~an}break;case"YY":i[0]=~~an+(~~an>68?1900:2000);break;case"YYYY":case"YYYYY":i[0]=~~an;break;case"a":case"A":ao._isPm=A(ao._l).isPM(an);break;case"H":case"HH":case"h":case"hh":i[3]=~~an;break;case"m":case"mm":i[4]=~~an;break;case"s":case"ss":i[5]=~~an;break;case"S":case"SS":case"SSS":i[6]=~~(("0."+an)*1000);break;case"X":ao._d=new Date(parseFloat(an)*1000);break;case"Z":case"ZZ":ao._useUTC=true;ao._tzm=s(an);break}if(an==null){ao._isValid=false}}function k(ao){var ap,an,am=[];if(ao._d){return}for(ap=0;ap<7;ap++){ao._a[ap]=am[ap]=(ao._a[ap]==null)?(ap===2?1:0):ao._a[ap]}am[3]+=~~((ao._tzm||0)/60);am[4]+=~~((ao._tzm||0)%60);an=new Date(0);if(ao._useUTC){an.setUTCFullYear(am[0],am[1],am[2]);an.setUTCHours(am[3],am[4],am[5],am[6])}else{an.setFullYear(am[0],am[1],am[2]);an.setHours(am[3],am[4],am[5],am[6])}ao._d=an}function O(an){var aq=an._f.match(l),am=an._i,ao,ap;an._a=[];for(ao=0;ao<aq.length;ao++){ap=(f(aq[ao],an).exec(am)||[])[0];if(ap){am=am.slice(am.indexOf(ap)+ap.length)}if(h[aq[ao]]){e(aq[ao],ap,an)}}if(am){an._il=am}if(an._isPm&&an._a[3]<12){an._a[3]+=12}if(an._isPm===false&&an._a[3]===12){an._a[3]=0}k(an)}function D(an){var ar,am,ap,aq=99,ao,at;for(ao=0;ao<an._f.length;ao++){ar=t({},an);ar._f=an._f[ao];O(ar);am=new x(ar);at=W(ar._a,am.toArray());if(am._il){at+=am._il.length}if(at<aq){aq=at;ap=am}}t(an,ap)}function ad(ao){var ap,an=ao._i,am=N.exec(an);if(am){ao._f="YYYY-MM-DD"+(am[2]||" ");for(ap=0;ap<4;ap++){if(j[ap][1].exec(an)){ao._f+=j[ap][0];break}}if(b.exec(an)){ao._f+=" Z"}O(ao)}else{ao._d=new Date(an)}}function aj(an){var am=an._i,i=z.exec(am);if(am===v){an._d=new Date()}else{if(i){an._d=new Date(+i[1])}else{if(typeof am==="string"){ad(an)}else{if(F(am)){an._a=am.slice(0);k(an)}else{an._d=am instanceof Date?new Date(+am):new Date(am)}}}}}function Y(i,an,am,ao,ap){return ap.relativeTime(an||1,!!am,i,ao)}function H(an,i,am){var at=ag(Math.abs(an)/1000),ao=ag(at/60),ar=ag(ao/60),au=ag(ar/24),ap=ag(au/365),aq=at<45&&["s",at]||ao===1&&["m"]||ao<45&&["mm",ao]||ar===1&&["h"]||ar<22&&["hh",ar]||au===1&&["d"]||au<=25&&["dd",au]||au<=45&&["M"]||au<345&&["MM",ag(au/30)]||ap===1&&["y"]||["yy",ap];aq[2]=i;aq[3]=an>0;aq[4]=am;return Y.apply({},aq)}function U(ap,an,aq){var am=aq-an,i=aq-ap.day(),ao;if(i>am){i-=7}if(i<am-7){i+=7}ao=ab(ap).add("d",i);return{week:Math.ceil(ao.dayOfYear()/7),year:ao.year()}}function ah(am){var i=am._i,an=am._f;if(i===null||i===""){return null}if(typeof i==="string"){am._i=i=A().preparse(i)}if(ab.isMoment(i)){am=t({},i);am._d=new Date(+i._d)}else{if(an){if(F(an)){D(am)}else{O(am)}}else{aj(am)}}return new x(am)}ab=function(i,am,an){return ah({_i:i,_f:am,_l:an,_isUTC:false})};ab.utc=function(i,am,an){return ah({_useUTC:true,_isUTC:true,_l:an,_i:i,_f:am})};ab.unix=function(i){return ab(i*1000)};ab.duration=function(an,ar){var aq=ab.isDuration(an),ap=(typeof an==="number"),at=(aq?an._input:(ap?{}:an)),i=af.exec(an),am,ao;if(ap){if(ar){at[ar]=an}else{at.milliseconds=an}}else{if(i){am=(i[1]==="-")?-1:1;at={y:0,d:~~i[2]*am,h:~~i[3]*am,m:~~i[4]*am,s:~~i[5]*am,ms:~~i[6]*am}}}ao=new al(at);if(aq&&an.hasOwnProperty("_lang")){ao._lang=an._lang}return ao};ab.version=C;ab.defaultFormat=d;ab.updateOffset=function(){};ab.lang=function(am,i){if(!am){return ab.fn._lang._abbr}if(i){B(am,i)}else{if(!S[am]){A(am)}}ab.duration.fn._lang=ab.fn._lang=A(am)};ab.langData=function(i){if(i&&i._lang&&i._lang._abbr){i=i._lang._abbr}return A(i)};ab.isMoment=function(i){return i instanceof x};ab.isDuration=function(i){return i instanceof al};ab.fn=x.prototype={clone:function(){return ab(this)},valueOf:function(){return +this._d+((this._offset||0)*60000)},unix:function(){return Math.floor(+this/1000)},toString:function(){return this.format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")},toDate:function(){return this._offset?new Date(+this):this._d},toISOString:function(){return Q(ab(this).utc(),"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]")},toArray:function(){var i=this;return[i.year(),i.month(),i.date(),i.hours(),i.minutes(),i.seconds(),i.milliseconds()]},isValid:function(){if(this._isValid==null){if(this._a){this._isValid=!W(this._a,(this._isUTC?ab.utc(this._a):ab(this._a)).toArray())}else{this._isValid=!isNaN(this._d.getTime())}}return !!this._isValid},utc:function(){return this.zone(0)},local:function(){this.zone(0);this._isUTC=false;return this},format:function(am){var i=Q(this,am||ab.defaultFormat);return this.lang().postformat(i)},add:function(i,an){var am;if(typeof i==="string"){am=ab.duration(+an,i)}else{am=ab.duration(i,an)}X(this,am,1);return this},subtract:function(i,an){var am;if(typeof i==="string"){am=ab.duration(+an,i)}else{am=ab.duration(i,an)}X(this,am,-1);return this},diff:function(ap,ao,i){var aq=this._isUTC?ab(ap).zone(this._offset||0):ab(ap).local(),am=(this.zone()-aq.zone())*60000,ar,an;ao=G(ao);if(ao==="year"||ao==="month"){ar=(this.daysInMonth()+aq.daysInMonth())*43200000;an=((this.year()-aq.year())*12)+(this.month()-aq.month());an+=((this-ab(this).startOf("month"))-(aq-ab(aq).startOf("month")))/ar;an-=((this.zone()-ab(this).startOf("month").zone())-(aq.zone()-ab(aq).startOf("month").zone()))*60000/ar;if(ao==="year"){an=an/12}}else{ar=(this-aq);an=ao==="second"?ar/1000:ao==="minute"?ar/60000:ao==="hour"?ar/3600000:ao==="day"?(ar-am)/86400000:ao==="week"?(ar-am)/604800000:ar}return i?an:aa(an)},from:function(am,i){return ab.duration(this.diff(am)).lang(this.lang()._abbr).humanize(!i)},fromNow:function(i){return this.from(ab(),i)},calendar:function(){var am=this.diff(ab().startOf("day"),"days",true),i=am<-6?"sameElse":am<-1?"lastWeek":am<0?"lastDay":am<1?"sameDay":am<2?"nextDay":am<7?"nextWeek":"sameElse";return this.format(this.lang().calendar(i,this))},isLeapYear:function(){var i=this.year();return(i%4===0&&i%100!==0)||i%400===0},isDST:function(){return(this.zone()<this.clone().month(0).zone()||this.zone()<this.clone().month(5).zone())},day:function(am){var i=this._isUTC?this._d.getUTCDay():this._d.getDay();if(am!=null){if(typeof am==="string"){am=this.lang().weekdaysParse(am);if(typeof am!=="number"){return this}}return this.add({d:am-i})}else{return i}},month:function(am){var an=this._isUTC?"UTC":"",ao,i;if(am!=null){if(typeof am==="string"){am=this.lang().monthsParse(am);if(typeof am!=="number"){return this}}ao=this.date();this.date(1);this._d["set"+an+"Month"](am);this.date(Math.min(ao,this.daysInMonth()));ab.updateOffset(this);return this}else{return this._d["get"+an+"Month"]()}},startOf:function(i){i=G(i);switch(i){case"year":this.month(0);case"month":this.date(1);case"week":case"day":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}if(i==="week"){this.weekday(0)}return this},endOf:function(i){return this.startOf(i).add(i,1).subtract("ms",1)},isAfter:function(am,i){i=typeof i!=="undefined"?i:"millisecond";return +this.clone().startOf(i)>+ab(am).startOf(i)},isBefore:function(am,i){i=typeof i!=="undefined"?i:"millisecond";return +this.clone().startOf(i)<+ab(am).startOf(i)},isSame:function(am,i){i=typeof i!=="undefined"?i:"millisecond";return +this.clone().startOf(i)===+ab(am).startOf(i)},min:function(i){i=ab.apply(null,arguments);return i<this?this:i},max:function(i){i=ab.apply(null,arguments);return i>this?this:i},zone:function(i){var am=this._offset||0;if(i!=null){if(typeof i==="string"){i=s(i)}if(Math.abs(i)<16){i=i*60}this._offset=i;this._isUTC=true;if(am!==i){X(this,ab.duration(am-i,"m"),1,true)}}else{return this._isUTC?am:this._d.getTimezoneOffset()}return this},zoneAbbr:function(){return this._isUTC?"UTC":""},zoneName:function(){return this._isUTC?"Coordinated Universal Time":""},daysInMonth:function(){return ab.utc([this.year(),this.month()+1,0]).date()},dayOfYear:function(i){var am=ag((ab(this).startOf("day")-ab(this).startOf("year"))/86400000)+1;return i==null?am:this.add("d",(i-am))},weekYear:function(i){var am=U(this,this.lang()._week.dow,this.lang()._week.doy).year;return i==null?am:this.add("y",(i-am))},isoWeekYear:function(i){var am=U(this,1,4).year;return i==null?am:this.add("y",(i-am))},week:function(i){var am=this.lang().week(this);return i==null?am:this.add("d",(i-am)*7)},isoWeek:function(i){var am=U(this,1,4).week;return i==null?am:this.add("d",(i-am)*7)},weekday:function(i){var am=(this._d.getDay()+7-this.lang()._week.dow)%7;return i==null?am:this.add("d",i-am)},isoWeekday:function(i){return i==null?this.day()||7:this.day(this.day()%7?i:i-7)},lang:function(i){if(i===v){return this._lang}else{this._lang=A(i);return this}}};function o(i,am){ab.fn[i]=ab.fn[i+"s"]=function(an){var ao=this._isUTC?"UTC":"";if(an!=null){this._d["set"+ao+am](an);ab.updateOffset(this);return this}else{return this._d["get"+ao+am]()}}}for(ai=0;ai<n.length;ai++){o(n[ai].toLowerCase().replace(/s$/,""),n[ai])}o("year","FullYear");ab.fn.days=ab.fn.day;ab.fn.months=ab.fn.month;ab.fn.weeks=ab.fn.week;ab.fn.isoWeeks=ab.fn.isoWeek;ab.fn.toJSON=ab.fn.toISOString;ab.duration.fn=al.prototype={_bubble:function(){var an=this._milliseconds,at=this._days,i=this._months,aq=this._data,ar,ap,am,ao;aq.milliseconds=an%1000;ar=aa(an/1000);aq.seconds=ar%60;ap=aa(ar/60);aq.minutes=ap%60;am=aa(ap/60);aq.hours=am%24;at+=aa(am/24);aq.days=at%30;i+=aa(at/30);aq.months=i%12;ao=aa(i/12);aq.years=ao},weeks:function(){return aa(this.days()/7)},valueOf:function(){return this._milliseconds+this._days*86400000+(this._months%12)*2592000000+~~(this._months/12)*31536000000},humanize:function(am){var an=+this,i=H(an,!am,this.lang());if(am){i=this.lang().pastFuture(an,i)}return this.lang().postformat(i)},add:function(i,an){var am=ab.duration(i,an);this._milliseconds+=am._milliseconds;this._days+=am._days;this._months+=am._months;this._bubble();return this},subtract:function(i,an){var am=ab.duration(i,an);this._milliseconds-=am._milliseconds;this._days-=am._days;this._months-=am._months;this._bubble();return this},get:function(i){i=G(i);return this[i.toLowerCase()+"s"]()},as:function(i){i=G(i);return this["as"+i.charAt(0).toUpperCase()+i.slice(1)+"s"]()},lang:ab.fn.lang};function a(i){ab.duration.fn[i]=function(){return this._data[i]}}function c(i,am){ab.duration.fn["as"+i]=function(){return +this/am}}for(ai in ac){if(ac.hasOwnProperty(ai)){c(ai,ac[ai]);a(ai.toLowerCase())}}c("Weeks",604800000);ab.duration.fn.asMonths=function(){return(+this-this.years()*31536000000)/2592000000+this.years()*12};ab.lang("en",{ordinal:function(an){var i=an%10,am=(~~(an%100/10)===1)?"th":(i===1)?"st":(i===2)?"nd":(i===3)?"rd":"th";return an+am}});if(R){module.exports=ab}if(typeof ender==="undefined"){this["moment"]=ab}if(typeof define==="function"&&define.amd){define("moment",[],function(){return ab})}}).call(this);
(function(a){if(typeof define==="function"&&define.amd){define("pnotify",["jquery"],a)}else{a(jQuery)}}(function(d){var b={dir1:"down",dir2:"left",push:"bottom",spacing1:25,spacing2:25,context:d("body")};var f,a,e=d(window);var c=function(){a=d("body");PNotify.prototype.options.stack.context=a;e=d(window);e.bind("resize",function(){if(f){clearTimeout(f)}f=setTimeout(function(){PNotify.positionAll(true)},10)})};PNotify=function(g){this.parseOptions(g);this.init()};d.extend(PNotify.prototype,{version:"2.0.1",options:{title:false,title_escape:false,text:false,text_escape:false,styling:"bootstrap3",addclass:"",cornerclass:"",auto_display:true,width:"300px",min_height:"16px",type:"notice",icon:true,opacity:1,animation:"fade",animate_speed:"slow",position_animate_speed:500,shadow:true,hide:true,delay:8000,mouse_reset:true,remove:true,insert_brs:true,destroy:true,stack:b},modules:{},runModules:function(j,g){var i;for(var h in this.modules){i=((typeof g==="object"&&h in g)?g[h]:g);if(typeof this.modules[h][j]==="function"){this.modules[h][j](this,typeof this.options[h]==="object"?this.options[h]:{},i)}}},state:"initializing",timer:null,styles:null,elem:null,container:null,title_container:null,text_container:null,animating:false,timerHide:false,init:function(){var g=this;this.modules={};d.extend(true,this.modules,PNotify.prototype.modules);if(typeof this.options.styling==="object"){this.styles=this.options.styling}else{this.styles=PNotify.styling[this.options.styling]}this.elem=d("<div />",{"class":"ui-pnotify "+this.options.addclass,css:{display:"none"},mouseenter:function(h){if(g.options.mouse_reset&&g.animating==="out"){if(!g.timerHide){return}g.cancelRemove()}if(g.options.hide&&g.options.mouse_reset){g.cancelRemove()}},mouseleave:function(h){if(g.options.hide&&g.options.mouse_reset){g.queueRemove()}PNotify.positionAll()}});this.container=d("<div />",{"class":this.styles.container+" ui-pnotify-container "+(this.options.type==="error"?this.styles.error:(this.options.type==="info"?this.styles.info:(this.options.type==="success"?this.styles.success:this.styles.notice)))}).appendTo(this.elem);if(this.options.cornerclass!==""){this.container.removeClass("ui-corner-all").addClass(this.options.cornerclass)}if(this.options.shadow){this.container.addClass("ui-pnotify-shadow")}if(this.options.icon!==false){d("<div />",{"class":"ui-pnotify-icon"}).append(d("<span />",{"class":this.options.icon===true?(this.options.type==="error"?this.styles.error_icon:(this.options.type==="info"?this.styles.info_icon:(this.options.type==="success"?this.styles.success_icon:this.styles.notice_icon))):this.options.icon})).prependTo(this.container)}this.title_container=d("<h4 />",{"class":"ui-pnotify-title"}).appendTo(this.container);if(this.options.title===false){this.title_container.hide()}else{if(this.options.title_escape){this.title_container.text(this.options.title)}else{this.title_container.html(this.options.title)}}this.text_container=d("<div />",{"class":"ui-pnotify-text"}).appendTo(this.container);if(this.options.text===false){this.text_container.hide()}else{if(this.options.text_escape){this.text_container.text(this.options.text)}else{this.text_container.html(this.options.insert_brs?String(this.options.text).replace(/\n/g,"<br />"):this.options.text)}}if(typeof this.options.width==="string"){this.elem.css("width",this.options.width)}if(typeof this.options.min_height==="string"){this.container.css("min-height",this.options.min_height)}if(this.options.stack.push==="top"){PNotify.notices=d.merge([this],PNotify.notices)}else{PNotify.notices=d.merge(PNotify.notices,[this])}if(this.options.stack.push==="top"){this.queuePosition(false,1)}this.options.stack.animation=false;this.runModules("init");if(this.options.auto_display){this.open()}return this},update:function(g){var h=this.options;this.parseOptions(h,g);if(this.options.cornerclass!==h.cornerclass){this.container.removeClass("ui-corner-all "+h.cornerclass).addClass(this.options.cornerclass)}if(this.options.shadow!==h.shadow){if(this.options.shadow){this.container.addClass("ui-pnotify-shadow")}else{this.container.removeClass("ui-pnotify-shadow")}}if(this.options.addclass===false){this.elem.removeClass(h.addclass)}else{if(this.options.addclass!==h.addclass){this.elem.removeClass(h.addclass).addClass(this.options.addclass)}}if(this.options.title===false){this.title_container.slideUp("fast")}else{if(this.options.title!==h.title){if(this.options.title_escape){this.title_container.text(this.options.title)}else{this.title_container.html(this.options.title)}if(h.title===false){this.title_container.slideDown(200)}}}if(this.options.text===false){this.text_container.slideUp("fast")}else{if(this.options.text!==h.text){if(this.options.text_escape){this.text_container.text(this.options.text)}else{this.text_container.html(this.options.insert_brs?String(this.options.text).replace(/\n/g,"<br />"):this.options.text)}if(h.text===false){this.text_container.slideDown(200)}}}if(this.options.type!==h.type){this.container.removeClass(this.styles.error+" "+this.styles.notice+" "+this.styles.success+" "+this.styles.info).addClass(this.options.type==="error"?this.styles.error:(this.options.type==="info"?this.styles.info:(this.options.type==="success"?this.styles.success:this.styles.notice)))}if(this.options.icon!==h.icon||(this.options.icon===true&&this.options.type!==h.type)){this.container.find("div.ui-pnotify-icon").remove();if(this.options.icon!==false){d("<div />",{"class":"ui-pnotify-icon"}).append(d("<span />",{"class":this.options.icon===true?(this.options.type==="error"?this.styles.error_icon:(this.options.type==="info"?this.styles.info_icon:(this.options.type==="success"?this.styles.success_icon:this.styles.notice_icon))):this.options.icon})).prependTo(this.container)}}if(this.options.width!==h.width){this.elem.animate({width:this.options.width})}if(this.options.min_height!==h.min_height){this.container.animate({minHeight:this.options.min_height})}if(this.options.opacity!==h.opacity){this.elem.fadeTo(this.options.animate_speed,this.options.opacity)}if(!this.options.hide){this.cancelRemove()}else{if(!h.hide){this.queueRemove()}}this.queuePosition(true);this.runModules("update",h);return this},open:function(){this.state="opening";this.runModules("beforeOpen");var g=this;if(!this.elem.parent().length){this.elem.appendTo(this.options.stack.context?this.options.stack.context:a)}if(this.options.stack.push!=="top"){this.position(true)}if(this.options.animation==="fade"||this.options.animation.effect_in==="fade"){this.elem.show().fadeTo(0,0).hide()}else{if(this.options.opacity!==1){this.elem.show().fadeTo(0,this.options.opacity).hide()}}this.animateIn(function(){g.queuePosition(true);if(g.options.hide){g.queueRemove()}g.state="open";g.runModules("afterOpen")});return this},remove:function(g){this.state="closing";this.timerHide=!!g;this.runModules("beforeClose");var h=this;if(this.timer){window.clearTimeout(this.timer);this.timer=null}this.animateOut(function(){h.state="closed";h.runModules("afterClose");h.queuePosition(true);if(h.options.remove){h.elem.detach()}h.runModules("beforeDestroy");if(h.options.destroy){if(PNotify.notices!==null){var i=d.inArray(h,PNotify.notices);if(i!==-1){PNotify.notices.splice(i,1)}}}h.runModules("afterDestroy")});return this},get:function(){return this.elem},parseOptions:function(h,l){this.options=d.extend(true,{},PNotify.prototype.options);this.options.stack=PNotify.prototype.options.stack;var g=[h,l],k;for(var i in g){k=g[i];if(typeof k=="undefined"){break}if(typeof k!=="object"){this.options.text=k}else{for(var j in k){if(this.modules[j]){d.extend(true,this.options[j],k[j])}else{this.options[j]=k[j]}}}}},animateIn:function(h){this.animating="in";var g;if(typeof this.options.animation.effect_in!=="undefined"){g=this.options.animation.effect_in}else{g=this.options.animation}if(g==="none"){this.elem.show();h()}else{if(g==="show"){this.elem.show(this.options.animate_speed,h)}else{if(g==="fade"){this.elem.show().fadeTo(this.options.animate_speed,this.options.opacity,h)}else{if(g==="slide"){this.elem.slideDown(this.options.animate_speed,h)}else{if(typeof g==="function"){g("in",h,this.elem)}else{this.elem.show(g,(typeof this.options.animation.options_in==="object"?this.options.animation.options_in:{}),this.options.animate_speed,h)}}}}}if(this.elem.parent().hasClass("ui-effects-wrapper")){this.elem.parent().css({position:"fixed",overflow:"visible"})}if(g!=="slide"){this.elem.css("overflow","visible")}this.container.css("overflow","hidden")},animateOut:function(h){this.animating="out";var g;if(typeof this.options.animation.effect_out!=="undefined"){g=this.options.animation.effect_out}else{g=this.options.animation}if(g==="none"){this.elem.hide();h()}else{if(g==="show"){this.elem.hide(this.options.animate_speed,h)}else{if(g==="fade"){this.elem.fadeOut(this.options.animate_speed,h)}else{if(g==="slide"){this.elem.slideUp(this.options.animate_speed,h)}else{if(typeof g==="function"){g("out",h,this.elem)}else{this.elem.hide(g,(typeof this.options.animation.options_out==="object"?this.options.animation.options_out:{}),this.options.animate_speed,h)}}}}}if(this.elem.parent().hasClass("ui-effects-wrapper")){this.elem.parent().css({position:"fixed",overflow:"visible"})}if(g!=="slide"){this.elem.css("overflow","visible")}this.container.css("overflow","hidden")},position:function(h){var o=this.options.stack,l=this.elem;if(l.parent().hasClass("ui-effects-wrapper")){l=this.elem.css({left:"0",top:"0",right:"0",bottom:"0"}).parent()}if(typeof o.context==="undefined"){o.context=a}if(!o){return}if(typeof o.nextpos1!=="number"){o.nextpos1=o.firstpos1}if(typeof o.nextpos2!=="number"){o.nextpos2=o.firstpos2}if(typeof o.addpos2!=="number"){o.addpos2=0}var k=l.css("display")==="none";if(!k||h){var j,i;var g={};var n;switch(o.dir1){case"down":n="top";break;case"up":n="bottom";break;case"left":n="right";break;case"right":n="left";break}j=parseInt(l.css(n).replace(/(?:\..*|[^0-9.])/g,""));if(isNaN(j)){j=0}if(typeof o.firstpos1==="undefined"&&!k){o.firstpos1=j;o.nextpos1=o.firstpos1}var m;switch(o.dir2){case"down":m="top";break;case"up":m="bottom";break;case"left":m="right";break;case"right":m="left";break}i=parseInt(l.css(m).replace(/(?:\..*|[^0-9.])/g,""));if(isNaN(i)){i=0}if(typeof o.firstpos2==="undefined"&&!k){o.firstpos2=i;o.nextpos2=o.firstpos2}if((o.dir1==="down"&&o.nextpos1+l.height()>(o.context.is(a)?e.height():o.context.prop("scrollHeight")))||(o.dir1==="up"&&o.nextpos1+l.height()>(o.context.is(a)?e.height():o.context.prop("scrollHeight")))||(o.dir1==="left"&&o.nextpos1+l.width()>(o.context.is(a)?e.width():o.context.prop("scrollWidth")))||(o.dir1==="right"&&o.nextpos1+l.width()>(o.context.is(a)?e.width():o.context.prop("scrollWidth")))){o.nextpos1=o.firstpos1;o.nextpos2+=o.addpos2+(typeof o.spacing2==="undefined"?25:o.spacing2);o.addpos2=0}if(o.animation&&o.nextpos2<i){switch(o.dir2){case"down":g.top=o.nextpos2+"px";break;case"up":g.bottom=o.nextpos2+"px";break;case"left":g.right=o.nextpos2+"px";break;case"right":g.left=o.nextpos2+"px";break}}else{if(typeof o.nextpos2==="number"){l.css(m,o.nextpos2+"px")}}switch(o.dir2){case"down":case"up":if(l.outerHeight(true)>o.addpos2){o.addpos2=l.height()}break;case"left":case"right":if(l.outerWidth(true)>o.addpos2){o.addpos2=l.width()}break}if(typeof o.nextpos1==="number"){if(o.animation&&(j>o.nextpos1||g.top||g.bottom||g.right||g.left)){switch(o.dir1){case"down":g.top=o.nextpos1+"px";break;case"up":g.bottom=o.nextpos1+"px";break;case"left":g.right=o.nextpos1+"px";break;case"right":g.left=o.nextpos1+"px";break}}else{l.css(n,o.nextpos1+"px")}}if(g.top||g.bottom||g.right||g.left){l.animate(g,{duration:this.options.position_animate_speed,queue:false})}switch(o.dir1){case"down":case"up":o.nextpos1+=l.height()+(typeof o.spacing1==="undefined"?25:o.spacing1);break;case"left":case"right":o.nextpos1+=l.width()+(typeof o.spacing1==="undefined"?25:o.spacing1);break}}return this},queuePosition:function(g,h){if(f){clearTimeout(f)}if(!h){h=10}f=setTimeout(function(){PNotify.positionAll(g)},h);return this},cancelRemove:function(){if(this.timer){window.clearTimeout(this.timer)}if(this.state==="closing"){this.elem.stop(true);this.state="open";this.animating="in";this.elem.css("height","auto").animate({width:this.options.width,opacity:this.options.opacity},"fast")}return this},queueRemove:function(){var g=this;this.cancelRemove();this.timer=window.setTimeout(function(){g.remove(true)},(isNaN(this.options.delay)?0:this.options.delay));return this}});d.extend(PNotify,{notices:[],removeAll:function(){d.each(PNotify.notices,function(){if(this.remove){this.remove()}})},positionAll:function(g){if(f){clearTimeout(f)}f=null;d.each(PNotify.notices,function(){var h=this.options.stack;if(!h){return}h.nextpos1=h.firstpos1;h.nextpos2=h.firstpos2;h.addpos2=0;h.animation=g});d.each(PNotify.notices,function(){this.position()})},styling:{jqueryui:{container:"ui-widget ui-widget-content ui-corner-all",notice:"ui-state-highlight",notice_icon:"ui-icon ui-icon-info",info:"",info_icon:"ui-icon ui-icon-info",success:"ui-state-default",success_icon:"ui-icon ui-icon-circle-check",error:"ui-state-error",error_icon:"ui-icon ui-icon-alert"},bootstrap2:{container:"alert",notice:"",notice_icon:"icon-exclamation-sign",info:"alert-info",info_icon:"icon-info-sign",success:"alert-success",success_icon:"icon-ok-sign",error:"alert-error",error_icon:"icon-warning-sign"},bootstrap3:{container:"alert",notice:"alert-warning",notice_icon:"glyphicon glyphicon-exclamation-sign",info:"alert-info",info_icon:"glyphicon glyphicon-info-sign",success:"alert-success",success_icon:"glyphicon glyphicon-ok-sign",error:"alert-danger",error_icon:"glyphicon glyphicon-warning-sign"}}});PNotify.styling.fontawesome=d.extend({},PNotify.styling.bootstrap3);d.extend(PNotify.styling.fontawesome,{notice_icon:"fa fa-exclamation-circle",info_icon:"fa fa-info",success_icon:"fa fa-check",error_icon:"fa fa-warning"});if(document.body){c()}else{d(c)}return PNotify}));(function(a){if(typeof define==="function"&&define.amd){define("pnotify.buttons",["jquery","pnotify"],a)}else{a(jQuery,PNotify)}}(function(a,b){b.prototype.options.buttons={closer:true,closer_hover:true,sticker:true,sticker_hover:true,labels:{close:"Close",stick:"Stick"}};b.prototype.modules.buttons={myOptions:null,closer:null,sticker:null,init:function(e,c){var d=this;this.myOptions=c;e.elem.on({mouseenter:function(f){if(d.myOptions.sticker&&!(e.options.nonblock&&e.options.nonblock.nonblock)){d.sticker.trigger("pnotify_icon").css("visibility","visible")}if(d.myOptions.closer&&!(e.options.nonblock&&e.options.nonblock.nonblock)){d.closer.css("visibility","visible")}},mouseleave:function(f){if(d.myOptions.sticker_hover){d.sticker.css("visibility","hidden")}if(d.myOptions.closer_hover){d.closer.css("visibility","hidden")}}});this.sticker=a("<div />",{"class":"ui-pnotify-sticker",css:{cursor:"pointer",visibility:c.sticker_hover?"hidden":"visible"},click:function(){e.options.hide=!e.options.hide;if(e.options.hide){e.queueRemove()}else{e.cancelRemove()}a(this).trigger("pnotify_icon")}}).bind("pnotify_icon",function(){a(this).children().removeClass(e.styles.pin_up+" "+e.styles.pin_down).addClass(e.options.hide?e.styles.pin_up:e.styles.pin_down)}).append(a("<span />",{"class":e.styles.pin_up,title:c.labels.stick})).prependTo(e.container);if(!c.sticker||(e.options.nonblock&&e.options.nonblock.nonblock)){this.sticker.css("display","none")}this.closer=a("<div />",{"class":"ui-pnotify-closer",css:{cursor:"pointer",visibility:c.closer_hover?"hidden":"visible"},click:function(){e.remove(false);d.sticker.css("visibility","hidden");d.closer.css("visibility","hidden")}}).append(a("<span />",{"class":e.styles.closer,title:c.labels.close})).prependTo(e.container);if(!c.closer||(e.options.nonblock&&e.options.nonblock.nonblock)){this.closer.css("display","none")}},update:function(d,c){this.myOptions=c;if(!c.closer||(d.options.nonblock&&d.options.nonblock.nonblock)){this.closer.css("display","none")}else{if(c.closer){this.closer.css("display","block")}}if(!c.sticker||(d.options.nonblock&&d.options.nonblock.nonblock)){this.sticker.css("display","none")}else{if(c.sticker){this.sticker.css("display","block")}}this.sticker.trigger("pnotify_icon");if(c.sticker_hover){this.sticker.css("visibility","hidden")}else{if(!(d.options.nonblock&&d.options.nonblock.nonblock)){this.sticker.css("visibility","visible")}}if(c.closer_hover){this.closer.css("visibility","hidden")}else{if(!(d.options.nonblock&&d.options.nonblock.nonblock)){this.closer.css("visibility","visible")}}}};a.extend(b.styling.jqueryui,{closer:"ui-icon ui-icon-close",pin_up:"ui-icon ui-icon-pin-w",pin_down:"ui-icon ui-icon-pin-s"});a.extend(b.styling.bootstrap2,{closer:"icon-remove",pin_up:"icon-pause",pin_down:"icon-play"});a.extend(b.styling.bootstrap3,{closer:"glyphicon glyphicon-remove",pin_up:"glyphicon glyphicon-pause",pin_down:"glyphicon glyphicon-play"});a.extend(b.styling.fontawesome,{closer:"fa fa-times",pin_up:"fa fa-pause",pin_down:"fa fa-play"})}));(function(a){if(typeof define==="function"&&define.amd){define("pnotify.callbacks",["jquery","pnotify"],a)}else{a(jQuery,PNotify)}}(function(d,e){var c=e.prototype.init,a=e.prototype.open,b=e.prototype.remove;e.prototype.init=function(){if(this.options.before_init){this.options.before_init(this.options)}c.apply(this,arguments);if(this.options.after_init){this.options.after_init(this)}};e.prototype.open=function(){var f;if(this.options.before_open){f=this.options.before_open(this)}if(f!==false){a.apply(this,arguments);if(this.options.after_open){this.options.after_open(this)}}};e.prototype.remove=function(g){var f;if(this.options.before_close){f=this.options.before_close(this,g)}if(f!==false){b.apply(this,arguments);if(this.options.after_close){this.options.after_close(this,g)}}}}));(function(a){if(typeof define==="function"&&define.amd){define("pnotify.confirm",["jquery","pnotify"],a)}else{a(jQuery,PNotify)}}(function(a,b){b.prototype.options.confirm={confirm:false,prompt:false,prompt_class:"",prompt_default:"",prompt_multi_line:false,align:"right",buttons:[{text:"Ok",addClass:"",promptTrigger:true,click:function(d,c){d.remove();d.get().trigger("pnotify.confirm",[d,c])}},{text:"Cancel",addClass:"",click:function(c){c.remove();c.get().trigger("pnotify.cancel",c)}}]};b.prototype.modules.confirm={container:null,prompt:null,init:function(d,c){this.container=a('<div style="margin-top:5px;clear:both;" />').css("text-align",c.align).appendTo(d.container);if(c.confirm||c.prompt){this.makeDialog(d,c)}else{this.container.hide()}},update:function(d,c){if(c.confirm){this.makeDialog(d,c);this.container.show()}else{this.container.hide().empty()}},afterOpen:function(d,c){if(c.prompt){this.prompt.focus()}},makeDialog:function(h,c){var j=false,g=this,e,f;this.container.empty();if(c.prompt){this.prompt=a("<"+(c.prompt_multi_line?'textarea rows="5"':'input type="text"')+' style="margin-bottom:5px;clear:both;" />').addClass(h.styles.input+" "+c.prompt_class).val(c.prompt_default).appendTo(this.container)}for(var d in c.buttons){e=c.buttons[d];if(j){this.container.append(" ")}else{j=true}f=a('<button type="button" />').addClass(h.styles.btn+" "+e.addClass).text(e.text).appendTo(this.container).on("click",(function(i){return function(){if(typeof i.click=="function"){i.click(h,c.prompt?g.prompt.val():null)}}})(e));if(c.prompt&&!c.prompt_multi_line&&e.promptTrigger){this.prompt.keypress((function(i){return function(k){if(k.keyCode==13){i.click()}}})(f))}if(h.styles.text){f.wrapInner('<span class="'+h.styles.text+'"></span>')}if(h.styles.btnhover){f.hover((function(i){return function(){i.addClass(h.styles.btnhover)}})(f),(function(i){return function(){i.removeClass(h.styles.btnhover)}})(f))}if(h.styles.btnactive){f.on("mousedown",(function(i){return function(){i.addClass(h.styles.btnactive)}})(f)).on("mouseup",(function(i){return function(){i.removeClass(h.styles.btnactive)}})(f))}if(h.styles.btnfocus){f.on("focus",(function(i){return function(){i.addClass(h.styles.btnfocus)}})(f)).on("blur",(function(i){return function(){i.removeClass(h.styles.btnfocus)}})(f))}}}};a.extend(b.styling.jqueryui,{btn:"ui-button ui-widget ui-state-default ui-corner-all ui-button-text-only",btnhover:"ui-state-hover",btnactive:"ui-state-active",btnfocus:"ui-state-focus",input:"",text:"ui-button-text"});a.extend(b.styling.bootstrap2,{btn:"btn",input:""});a.extend(b.styling.bootstrap3,{btn:"btn btn-default",input:"form-control"});a.extend(b.styling.fontawesome,{btn:"btn btn-default",input:"form-control"})}));(function(a){if(typeof define==="function"&&define.amd){define("pnotify.desktop",["jquery","pnotify"],a)}else{a(jQuery,PNotify)}}(function(c,d){var a;var b=function(f,e){if("Notification" in window){b=function(h,g){return new Notification(h,g)}}else{if("mozNotification" in navigator){b=function(h,g){return navigator.mozNotification.createNotification(h,g.body,g.icon).show()}}else{if("webkitNotifications" in window){b=function(h,g){return window.webkitNotifications.createNotification(g.icon,h,g.body)}}else{b=function(h,g){return null}}}}return b(f,e)};d.prototype.options.desktop={desktop:false,icon:null,tag:null};d.prototype.modules.desktop={tag:null,icon:null,genNotice:function(f,e){if(e.icon===null){this.icon="http://sciactive.com/pnotify/includes/desktop/"+f.options.type+".png"}else{if(e.icon===false){this.icon=null}else{this.icon=e.icon}}if(this.tag===null||e.tag!==null){this.tag=e.tag===null?"PNotify-"+Math.round(Math.random()*1000000):e.tag}f.desktop=b(f.options.title,{icon:this.icon,body:f.options.text,tag:this.tag});if(!("close" in f.desktop)){f.desktop.close=function(){f.desktop.cancel()}}f.desktop.onclick=function(){f.elem.trigger("click")};f.desktop.onclose=function(){if(f.state!=="closing"&&f.state!=="closed"){f.remove()}}},init:function(f,e){if(!e.desktop){return}a=d.desktop.checkPermission();if(a!=0){return}this.genNotice(f,e)},update:function(f,e,g){if(a!=0||!e.desktop){return}this.genNotice(f,e)},beforeOpen:function(f,e){if(a!=0||!e.desktop){return}f.elem.css({left:"-10000px",display:"none"})},afterOpen:function(f,e){if(a!=0||!e.desktop){return}f.elem.css({left:"-10000px",display:"none"});if("show" in f.desktop){f.desktop.show()}},beforeClose:function(f,e){if(a!=0||!e.desktop){return}f.elem.css({left:"-10000px",display:"none"})},afterClose:function(f,e){if(a!=0||!e.desktop){return}f.elem.css({left:"-10000px",display:"none"});f.desktop.close()}};d.desktop={permission:function(){if(typeof Notification!=="undefined"&&"requestPermission" in Notification){Notification.requestPermission()}else{if("webkitNotifications" in window){window.webkitNotifications.requestPermission()}}},checkPermission:function(){if(typeof Notification!=="undefined"&&"permission" in Notification){return(Notification.permission=="granted"?0:1)}else{if("webkitNotifications" in window){return window.webkitNotifications.checkPermission()}else{return 1}}}};a=d.desktop.checkPermission()}));(function(a){if(typeof define==="function"&&define.amd){define("pnotify.history",["jquery","pnotify"],a)}else{a(jQuery,PNotify)}}(function(c,d){var b,a;c(function(){c("body").on("pnotify.history-all",function(){c.each(d.notices,function(){if(this.modules.history.inHistory){if(this.elem.is(":visible")){if(this.options.hide){this.queueRemove()}}else{if(this.open){this.open()}}}})}).on("pnotify.history-last",function(){var e=(d.prototype.options.stack.push==="top");var f=(e?0:-1);var g;do{if(f===-1){g=d.notices.slice(f)}else{g=d.notices.slice(f,f+1)}if(!g[0]){return false}f=(e?f+1:f-1)}while(!g[0].modules.history.inHistory||g[0].elem.is(":visible"));if(g[0].open){g[0].open()}})});d.prototype.options.history={history:true,menu:false,fixed:true,maxonscreen:Infinity,labels:{redisplay:"Redisplay",all:"All",last:"Last"}};d.prototype.modules.history={inHistory:false,init:function(g,e){g.options.destroy=false;this.inHistory=e.history;if(e.menu){if(typeof b==="undefined"){b=c("<div />",{"class":"ui-pnotify-history-container "+g.styles.hi_menu,mouseleave:function(){b.animate({top:"-"+a+"px"},{duration:100,queue:false})}}).append(c("<div />",{"class":"ui-pnotify-history-header",text:e.labels.redisplay})).append(c("<button />",{"class":"ui-pnotify-history-all "+g.styles.hi_btn,text:e.labels.all,mouseenter:function(){c(this).addClass(g.styles.hi_btnhov)},mouseleave:function(){c(this).removeClass(g.styles.hi_btnhov)},click:function(){c(this).trigger("pnotify.history-all");return false}})).append(c("<button />",{"class":"ui-pnotify-history-last "+g.styles.hi_btn,text:e.labels.last,mouseenter:function(){c(this).addClass(g.styles.hi_btnhov)},mouseleave:function(){c(this).removeClass(g.styles.hi_btnhov)},click:function(){c(this).trigger("pnotify.history-last");return false}})).appendTo("body");var f=c("<span />",{"class":"ui-pnotify-history-pulldown "+g.styles.hi_hnd,mouseenter:function(){b.animate({top:"0"},{duration:100,queue:false})}}).appendTo(b);console.log(f.offset());a=f.offset().top+2;b.css({top:"-"+a+"px"});if(e.fixed){b.addClass("ui-pnotify-history-fixed")}}}},update:function(f,e){this.inHistory=e.history;if(e.fixed&&b){b.addClass("ui-pnotify-history-fixed")}else{if(b){b.removeClass("ui-pnotify-history-fixed")}}},beforeOpen:function(g,e){if(d.notices&&(d.notices.length>e.maxonscreen)){var f;if(g.options.stack.push!=="top"){f=d.notices.slice(0,d.notices.length-e.maxonscreen)}else{f=d.notices.slice(e.maxonscreen,d.notices.length)}c.each(f,function(){if(this.remove){this.remove()}})}}};c.extend(d.styling.jqueryui,{hi_menu:"ui-state-default ui-corner-bottom",hi_btn:"ui-state-default ui-corner-all",hi_btnhov:"ui-state-hover",hi_hnd:"ui-icon ui-icon-grip-dotted-horizontal"});c.extend(d.styling.bootstrap2,{hi_menu:"well",hi_btn:"btn",hi_btnhov:"",hi_hnd:"icon-chevron-down"});c.extend(d.styling.bootstrap3,{hi_menu:"well",hi_btn:"btn btn-default",hi_btnhov:"",hi_hnd:"glyphicon glyphicon-chevron-down"});c.extend(d.styling.fontawesome,{hi_menu:"well",hi_btn:"btn btn-default",hi_btnhov:"",hi_hnd:"fa fa-chevron-down"})}));(function(a){if(typeof define==="function"&&define.amd){define("pnotify.nonblock",["jquery","pnotify"],a)}else{a(jQuery,PNotify)}}(function(d,e){var i=/^on/,b=/^(dbl)?click$|^mouse(move|down|up|over|out|enter|leave)$|^contextmenu$/,h=/^(focus|blur|select|change|reset)$|^key(press|down|up)$/,g=/^(scroll|resize|(un)?load|abort|error)$/;var f=function(k,j){var l;k=k.toLowerCase();if(document.createEvent&&this.dispatchEvent){k=k.replace(i,"");if(k.match(b)){d(this).offset();l=document.createEvent("MouseEvents");l.initMouseEvent(k,j.bubbles,j.cancelable,j.view,j.detail,j.screenX,j.screenY,j.clientX,j.clientY,j.ctrlKey,j.altKey,j.shiftKey,j.metaKey,j.button,j.relatedTarget)}else{if(k.match(h)){l=document.createEvent("UIEvents");l.initUIEvent(k,j.bubbles,j.cancelable,j.view,j.detail)}else{if(k.match(g)){l=document.createEvent("HTMLEvents");l.initEvent(k,j.bubbles,j.cancelable)}}}if(!l){return}this.dispatchEvent(l)}else{if(!k.match(i)){k="on"+k}l=document.createEventObject(j);this.fireEvent(k,l)}};var a;var c=function(n,o,k){n.elem.css("display","none");var j=document.elementFromPoint(o.clientX,o.clientY);n.elem.css("display","block");var m=d(j);var l=m.css("cursor");n.elem.css("cursor",l!=="auto"?l:"default");if(!a||a.get(0)!=j){if(a){f.call(a.get(0),"mouseleave",o.originalEvent);f.call(a.get(0),"mouseout",o.originalEvent)}f.call(j,"mouseenter",o.originalEvent);f.call(j,"mouseover",o.originalEvent)}f.call(j,k,o.originalEvent);a=m};e.prototype.options.nonblock={nonblock:false,nonblock_opacity:0.2};e.prototype.modules.nonblock={myOptions:null,init:function(l,j){var k=this;this.myOptions=j;l.elem.on({mouseenter:function(m){if(k.myOptions.nonblock){m.stopPropagation()}if(k.myOptions.nonblock){l.elem.stop().animate({opacity:k.myOptions.nonblock_opacity},"fast")}},mouseleave:function(m){if(k.myOptions.nonblock){m.stopPropagation()}a=null;l.elem.css("cursor","auto");if(k.myOptions.nonblock&&l.animating!=="out"){l.elem.stop().animate({opacity:l.options.opacity},"fast")}},mouseover:function(m){if(k.myOptions.nonblock){m.stopPropagation()}},mouseout:function(m){if(k.myOptions.nonblock){m.stopPropagation()}},mousemove:function(m){if(k.myOptions.nonblock){m.stopPropagation();c(l,m,"onmousemove")}},mousedown:function(m){if(k.myOptions.nonblock){m.stopPropagation();m.preventDefault();c(l,m,"onmousedown")}},mouseup:function(m){if(k.myOptions.nonblock){m.stopPropagation();m.preventDefault();c(l,m,"onmouseup")}},click:function(m){if(k.myOptions.nonblock){m.stopPropagation();c(l,m,"onclick")}},dblclick:function(m){if(k.myOptions.nonblock){m.stopPropagation();c(l,m,"ondblclick")}}})},update:function(k,j){this.myOptions=j}}}));(function(a){if(typeof define==="function"&&define.amd){define("pnotify.reference",["jquery","pnotify"],a)}else{a(jQuery,PNotify)}}(function(a,b){b.prototype.options.reference={putThing:false,labels:{text:"Spin Around"}};b.prototype.modules.reference={thingElem:null,init:function(e,c){var d=this;if(!c.putThing){return}this.thingElem=a('<button style="float:right;" class="btn btn-default" type="button" disabled><i class="'+e.styles.athing+'" />&nbsp;'+c.labels.text+"</button>").appendTo(e.container);e.container.append('<div style="clear: right; line-height: 0;" />');e.elem.on({mouseenter:function(f){d.thingElem.prop("disabled",false)},mouseleave:function(f){d.thingElem.prop("disabled",true)}});this.thingElem.on("click",function(){var f=0;var g=setInterval(function(){f+=10;if(f==360){f=0;clearInterval(g)}e.elem.css({"-moz-transform":("rotate("+f+"deg)"),"-webkit-transform":("rotate("+f+"deg)"),"-o-transform":("rotate("+f+"deg)"),"-ms-transform":("rotate("+f+"deg)"),filter:("progid:DXImageTransform.Microsoft.BasicImage(rotation="+(f/360*4)+")")})},20)})},update:function(d,c,e){if(c.putThing&&this.thingElem){this.thingElem.show()}else{if(!c.putThing&&this.thingElem){this.thingElem.hide()}}if(this.thingElem){this.thingElem.find("i").attr("class",d.styles.athing)}},beforeOpen:function(d,c){},afterOpen:function(d,c){},beforeClose:function(d,c){},afterClose:function(d,c){},beforeDestroy:function(d,c){},afterDestroy:function(d,c){}};a.extend(b.styling.jqueryui,{athing:"ui-icon ui-icon-refresh"});a.extend(b.styling.bootstrap2,{athing:"icon-refresh"});a.extend(b.styling.bootstrap3,{athing:"glyphicon glyphicon-refresh"});a.extend(b.styling.fontawesome,{athing:"fa fa-refresh"})}));
(function(h){var c=h(window);function k(){return new Date(Date.UTC.apply(Date,arguments))}function e(){var n=new Date();return k(n.getUTCFullYear(),n.getUTCMonth(),n.getUTCDate())}var i=function(o,n){var p=this;this._process_options(n);this.element=h(o);this.isInline=false;this.isInput=this.element.is("input");this.component=this.element.is(".date")?this.element.find(".add-on, .btn"):false;this.hasInput=this.component&&this.element.find("input").length;if(this.component&&this.component.length===0){this.component=false}this.picker=h(j.template);this._buildEvents();this._attachEvents();if(this.isInline){this.picker.addClass("datepicker-inline").appendTo(this.element)}else{this.picker.addClass("datepicker-dropdown dropdown-menu")}if(this.o.rtl){this.picker.addClass("datepicker-rtl");this.picker.find(".prev i, .next i").toggleClass("icon-arrow-left icon-arrow-right")}this.viewMode=this.o.startView;if(this.o.calendarWeeks){this.picker.find("tfoot th.today").attr("colspan",function(q,r){return parseInt(r)+1})}this._allow_update=false;this.setStartDate(this._o.startDate);this.setEndDate(this._o.endDate);this.setDaysOfWeekDisabled(this.o.daysOfWeekDisabled);this.fillDow();this.fillMonths();this._allow_update=true;this.update();this.showMode();if(this.isInline){this.show()}};i.prototype={constructor:i,_process_options:function(n){this._o=h.extend({},this._o,n);var s=this.o=h.extend({},this._o);var r=s.language;if(!b[r]){r=r.split("-")[0];if(!b[r]){r=f.language}}s.language=r;switch(s.startView){case 2:case"decade":s.startView=2;break;case 1:case"year":s.startView=1;break;default:s.startView=0}switch(s.minViewMode){case 1:case"months":s.minViewMode=1;break;case 2:case"years":s.minViewMode=2;break;default:s.minViewMode=0}s.startView=Math.max(s.startView,s.minViewMode);s.weekStart%=7;s.weekEnd=((s.weekStart+6)%7);var p=j.parseFormat(s.format);if(s.startDate!==-Infinity){if(!!s.startDate){if(s.startDate instanceof Date){s.startDate=this._local_to_utc(this._zero_time(s.startDate))}else{s.startDate=j.parseDate(s.startDate,p,s.language)}}else{s.startDate=-Infinity}}if(s.endDate!==Infinity){if(!!s.endDate){if(s.endDate instanceof Date){s.endDate=this._local_to_utc(this._zero_time(s.endDate))}else{s.endDate=j.parseDate(s.endDate,p,s.language)}}else{s.endDate=Infinity}}s.daysOfWeekDisabled=s.daysOfWeekDisabled||[];if(!h.isArray(s.daysOfWeekDisabled)){s.daysOfWeekDisabled=s.daysOfWeekDisabled.split(/[,\s]*/)}s.daysOfWeekDisabled=h.map(s.daysOfWeekDisabled,function(o){return parseInt(o,10)});var q=String(s.orientation).toLowerCase().split(/\s+/g),t=s.orientation.toLowerCase();q=h.grep(q,function(o){return(/^auto|left|right|top|bottom$/).test(o)});s.orientation={x:"auto",y:"auto"};if(!t||t==="auto"){}else{if(q.length===1){switch(q[0]){case"top":case"bottom":s.orientation.y=q[0];break;case"left":case"right":s.orientation.x=q[0];break}}else{t=h.grep(q,function(o){return(/^left|right$/).test(o)});s.orientation.x=t[0]||"auto";t=h.grep(q,function(o){return(/^top|bottom$/).test(o)});s.orientation.y=t[0]||"auto"}}},_events:[],_secondaryEvents:[],_applyEvents:function(n){for(var o=0,p,q;o<n.length;o++){p=n[o][0];q=n[o][1];p.on(q)}},_unapplyEvents:function(n){for(var o=0,p,q;o<n.length;o++){p=n[o][0];q=n[o][1];p.off(q)}},_buildEvents:function(){if(this.isInput){this._events=[[this.element,{focus:h.proxy(this.show,this),keyup:h.proxy(this.update,this),keydown:h.proxy(this.keydown,this)}]]}else{if(this.component&&this.hasInput){this._events=[[this.element.find("input"),{focus:h.proxy(this.show,this),keyup:h.proxy(this.update,this),keydown:h.proxy(this.keydown,this)}],[this.component,{click:h.proxy(this.show,this)}]]}else{if(this.element.is("div")){this.isInline=true}else{this._events=[[this.element,{click:h.proxy(this.show,this)}]]}}}this._secondaryEvents=[[this.picker,{click:h.proxy(this.click,this)}],[h(window),{resize:h.proxy(this.place,this)}],[h(document),{mousedown:h.proxy(function(n){if(!(this.element.is(n.target)||this.element.find(n.target).length||this.picker.is(n.target)||this.picker.find(n.target).length)){this.hide()}},this)}]]},_attachEvents:function(){this._detachEvents();this._applyEvents(this._events)},_detachEvents:function(){this._unapplyEvents(this._events)},_attachSecondaryEvents:function(){this._detachSecondaryEvents();this._applyEvents(this._secondaryEvents)},_detachSecondaryEvents:function(){this._unapplyEvents(this._secondaryEvents)},_trigger:function(p,q){var o=q||this.date,n=this._utc_to_local(o);this.element.trigger({type:p,date:n,format:h.proxy(function(s){var r=s||this.o.format;return j.formatDate(o,r,this.o.language)},this)})},show:function(n){if(!this.isInline){this.picker.appendTo("body")}this.picker.show();this.height=this.component?this.component.outerHeight():this.element.outerHeight();this.place();this._attachSecondaryEvents();if(n){n.preventDefault()}this._trigger("show")},hide:function(n){if(this.isInline){return}if(!this.picker.is(":visible")){return}this.picker.hide().detach();this._detachSecondaryEvents();this.viewMode=this.o.startView;this.showMode();if(this.o.forceParse&&(this.isInput&&this.element.val()||this.hasInput&&this.element.find("input").val())){this.setValue()}this._trigger("hide")},remove:function(){this.hide();this._detachEvents();this._detachSecondaryEvents();this.picker.remove();delete this.element.data().datepicker;if(!this.isInput){delete this.element.data().date}},_utc_to_local:function(n){return new Date(n.getTime()+(n.getTimezoneOffset()*60000))},_local_to_utc:function(n){return new Date(n.getTime()-(n.getTimezoneOffset()*60000))},_zero_time:function(n){return new Date(n.getFullYear(),n.getMonth(),n.getDate())},_zero_utc_time:function(n){return new Date(Date.UTC(n.getUTCFullYear(),n.getUTCMonth(),n.getUTCDate()))},getDate:function(){return this._utc_to_local(this.getUTCDate())},getUTCDate:function(){return this.date},setDate:function(n){this.setUTCDate(this._local_to_utc(n))},setUTCDate:function(n){this.date=n;this.setValue()},setValue:function(){var n=this.getFormattedDate();if(!this.isInput){if(this.component){this.element.find("input").val(n).change()}}else{this.element.val(n).change()}},getFormattedDate:function(n){if(n===undefined){n=this.o.format}return j.formatDate(this.date,n,this.o.language)},setStartDate:function(n){this._process_options({startDate:n});this.update();this.updateNavArrows()},setEndDate:function(n){this._process_options({endDate:n});this.update();this.updateNavArrows()},setDaysOfWeekDisabled:function(n){this._process_options({daysOfWeekDisabled:n});this.update();this.updateNavArrows()},place:function(){if(this.isInline){return}var B=this.picker.outerWidth(),x=this.picker.outerHeight(),r=10,t=c.width(),o=c.height(),s=c.scrollTop();var z=parseInt(this.element.parents().filter(function(){return h(this).css("z-index")!="auto"}).first().css("z-index"))+10;var w=this.component?this.component.parent().offset():this.element.offset();var A=this.component?this.component.outerHeight(true):this.element.outerHeight(false);var q=this.component?this.component.outerWidth(true):this.element.outerWidth(false);var v=w.left,y=w.top;this.picker.removeClass("datepicker-orient-top datepicker-orient-bottom datepicker-orient-right datepicker-orient-left");if(this.o.orientation.x!=="auto"){this.picker.addClass("datepicker-orient-"+this.o.orientation.x);if(this.o.orientation.x==="right"){v-=B-q}}else{this.picker.addClass("datepicker-orient-left");if(w.left<0){v-=w.left-r}else{if(w.left+B>t){v=t-B-r}}}var n=this.o.orientation.y,p,u;if(n==="auto"){p=-s+w.top-x;u=s+o-(w.top+A+x);if(Math.max(p,u)===u){n="top"}else{n="bottom"}}this.picker.addClass("datepicker-orient-"+n);if(n==="top"){y+=A}else{y-=x+parseInt(this.picker.css("padding-top"))}this.picker.css({top:y,left:v,zIndex:z})},_allow_update:true,update:function(){if(!this._allow_update){return}var p=new Date(this.date),n,o=false;if(arguments&&arguments.length&&(typeof arguments[0]==="string"||arguments[0] instanceof Date)){n=arguments[0];if(n instanceof Date){n=this._local_to_utc(n)}o=true}else{n=this.isInput?this.element.val():this.element.data("date")||this.element.find("input").val();delete this.element.data().date}this.date=j.parseDate(n,this.o.format,this.o.language);if(o){this.setValue()}else{if(n){if(p.getTime()!==this.date.getTime()){this._trigger("changeDate")}}else{this._trigger("clearDate")}}if(this.date<this.o.startDate){this.viewDate=new Date(this.o.startDate);this.date=new Date(this.o.startDate)}else{if(this.date>this.o.endDate){this.viewDate=new Date(this.o.endDate);this.date=new Date(this.o.endDate)}else{this.viewDate=new Date(this.date);this.date=new Date(this.date)}}this.fill()},fillDow:function(){var o=this.o.weekStart,p="<tr>";if(this.o.calendarWeeks){var n='<th class="cw">&nbsp;</th>';p+=n;this.picker.find(".datepicker-days thead tr:first-child").prepend(n)}while(o<this.o.weekStart+7){p+='<th class="dow">'+b[this.o.language].daysMin[(o++)%7]+"</th>"}p+="</tr>";this.picker.find(".datepicker-days thead").append(p)},fillMonths:function(){var o="",n=0;while(n<12){o+='<span class="month">'+b[this.o.language].monthsShort[n++]+"</span>"}this.picker.find(".datepicker-months td").html(o)},setRange:function(n){if(!n||!n.length){delete this.range}else{this.range=h.map(n,function(o){return o.valueOf()})}this.fill()},getClassNames:function(q){var o=[],r=this.viewDate.getUTCFullYear(),s=this.viewDate.getUTCMonth(),n=this.date.valueOf(),p=new Date();if(q.getUTCFullYear()<r||(q.getUTCFullYear()==r&&q.getUTCMonth()<s)){o.push("old")}else{if(q.getUTCFullYear()>r||(q.getUTCFullYear()==r&&q.getUTCMonth()>s)){o.push("new")}}if(this.o.todayHighlight&&q.getUTCFullYear()==p.getFullYear()&&q.getUTCMonth()==p.getMonth()&&q.getUTCDate()==p.getDate()){o.push("today")}if(n&&q.valueOf()==n){o.push("active")}if(q.valueOf()<this.o.startDate||q.valueOf()>this.o.endDate||h.inArray(q.getUTCDay(),this.o.daysOfWeekDisabled)!==-1){o.push("disabled")}if(this.range){if(q>this.range[0]&&q<this.range[this.range.length-1]){o.push("range")}if(h.inArray(q.valueOf(),this.range)!=-1){o.push("selected")}}return o},fill:function(){var F=new Date(this.viewDate),w=F.getUTCFullYear(),G=F.getUTCMonth(),A=this.o.startDate!==-Infinity?this.o.startDate.getUTCFullYear():-Infinity,E=this.o.startDate!==-Infinity?this.o.startDate.getUTCMonth():-Infinity,t=this.o.endDate!==Infinity?this.o.endDate.getUTCFullYear():Infinity,B=this.o.endDate!==Infinity?this.o.endDate.getUTCMonth():Infinity,u=this.date&&this.date.valueOf(),q;this.picker.find(".datepicker-days thead th.datepicker-switch").text(b[this.o.language].months[G]+" "+w);this.picker.find("tfoot th.today").text(b[this.o.language].today).toggle(this.o.todayBtn!==false);this.picker.find("tfoot th.clear").text(b[this.o.language].clear).toggle(this.o.clearBtn!==false);this.updateNavArrows();this.fillMonths();var I=k(w,G-1,28,0,0,0,0),D=j.getDaysInMonth(I.getUTCFullYear(),I.getUTCMonth());I.setUTCDate(D);I.setUTCDate(D-(I.getUTCDay()-this.o.weekStart+7)%7);var n=new Date(I);n.setUTCDate(n.getUTCDate()+42);n=n.valueOf();var v=[];var z;while(I.valueOf()<n){if(I.getUTCDay()==this.o.weekStart){v.push("<tr>");if(this.o.calendarWeeks){var o=new Date(+I+(this.o.weekStart-I.getUTCDay()-7)%7*86400000),r=new Date(+o+(7+4-o.getUTCDay())%7*86400000),p=new Date(+(p=k(r.getUTCFullYear(),0,1))+(7+4-p.getUTCDay())%7*86400000),x=(r-p)/86400000/7+1;v.push('<td class="cw">'+x+"</td>")}}z=this.getClassNames(I);z.push("day");if(this.o.beforeShowDay!==h.noop){var y=this.o.beforeShowDay(this._utc_to_local(I));if(y===undefined){y={}}else{if(typeof(y)==="boolean"){y={enabled:y}}else{if(typeof(y)==="string"){y={classes:y}}}}if(y.enabled===false){z.push("disabled")}if(y.classes){z=z.concat(y.classes.split(/\s+/))}if(y.tooltip){q=y.tooltip}}z=h.unique(z);v.push('<td class="'+z.join(" ")+'"'+(q?' title="'+q+'"':"")+">"+I.getUTCDate()+"</td>");if(I.getUTCDay()==this.o.weekEnd){v.push("</tr>")}I.setUTCDate(I.getUTCDate()+1)}this.picker.find(".datepicker-days tbody").empty().append(v.join(""));var J=this.date&&this.date.getUTCFullYear();var s=this.picker.find(".datepicker-months").find("th:eq(1)").text(w).end().find("span").removeClass("active");if(J&&J==w){s.eq(this.date.getUTCMonth()).addClass("active")}if(w<A||w>t){s.addClass("disabled")}if(w==A){s.slice(0,E).addClass("disabled")}if(w==t){s.slice(B+1).addClass("disabled")}v="";w=parseInt(w/10,10)*10;var H=this.picker.find(".datepicker-years").find("th:eq(1)").text(w+"-"+(w+9)).end().find("td");w-=1;for(var C=-1;C<11;C++){v+='<span class="year'+(C==-1?" old":C==10?" new":"")+(J==w?" active":"")+(w<A||w>t?" disabled":"")+'">'+w+"</span>";w+=1}H.html(v)},updateNavArrows:function(){if(!this._allow_update){return}var p=new Date(this.viewDate),n=p.getUTCFullYear(),o=p.getUTCMonth();switch(this.viewMode){case 0:if(this.o.startDate!==-Infinity&&n<=this.o.startDate.getUTCFullYear()&&o<=this.o.startDate.getUTCMonth()){this.picker.find(".prev").css({visibility:"hidden"})}else{this.picker.find(".prev").css({visibility:"visible"})}if(this.o.endDate!==Infinity&&n>=this.o.endDate.getUTCFullYear()&&o>=this.o.endDate.getUTCMonth()){this.picker.find(".next").css({visibility:"hidden"})}else{this.picker.find(".next").css({visibility:"visible"})}break;case 1:case 2:if(this.o.startDate!==-Infinity&&n<=this.o.startDate.getUTCFullYear()){this.picker.find(".prev").css({visibility:"hidden"})}else{this.picker.find(".prev").css({visibility:"visible"})}if(this.o.endDate!==Infinity&&n>=this.o.endDate.getUTCFullYear()){this.picker.find(".next").css({visibility:"hidden"})}else{this.picker.find(".next").css({visibility:"visible"})}break}},click:function(r){r.preventDefault();var s=h(r.target).closest("span, td, th");if(s.length==1){switch(s[0].nodeName.toLowerCase()){case"th":switch(s[0].className){case"datepicker-switch":this.showMode(1);break;case"prev":case"next":var n=j.modes[this.viewMode].navStep*(s[0].className=="prev"?-1:1);switch(this.viewMode){case 0:this.viewDate=this.moveMonth(this.viewDate,n);this._trigger("changeMonth",this.viewDate);break;case 1:case 2:this.viewDate=this.moveYear(this.viewDate,n);if(this.viewMode===1){this._trigger("changeYear",this.viewDate)}break}this.fill();break;case"today":var o=new Date();o=k(o.getFullYear(),o.getMonth(),o.getDate(),0,0,0);this.showMode(-2);var p=this.o.todayBtn=="linked"?null:"view";this._setDate(o,p);break;case"clear":var q;if(this.isInput){q=this.element}else{if(this.component){q=this.element.find("input")}}if(q){q.val("").change()}this._trigger("changeDate");this.update();if(this.o.autoclose){this.hide()}break}break;case"span":if(!s.is(".disabled")){this.viewDate.setUTCDate(1);if(s.is(".month")){var v=1;var t=s.parent().find("span").index(s);var u=this.viewDate.getUTCFullYear();this.viewDate.setUTCMonth(t);this._trigger("changeMonth",this.viewDate);if(this.o.minViewMode===1){this._setDate(k(u,t,v,0,0,0,0))}}else{var u=parseInt(s.text(),10)||0;var v=1;var t=0;this.viewDate.setUTCFullYear(u);this._trigger("changeYear",this.viewDate);if(this.o.minViewMode===2){this._setDate(k(u,t,v,0,0,0,0))}}this.showMode(-1);this.fill()}break;case"td":if(s.is(".day")&&!s.is(".disabled")){var v=parseInt(s.text(),10)||1;var u=this.viewDate.getUTCFullYear(),t=this.viewDate.getUTCMonth();if(s.is(".old")){if(t===0){t=11;u-=1}else{t-=1}}else{if(s.is(".new")){if(t==11){t=0;u+=1}else{t+=1}}}this._setDate(k(u,t,v,0,0,0,0))}break}}},_setDate:function(n,p){if(!p||p=="date"){this.date=new Date(n)}if(!p||p=="view"){this.viewDate=new Date(n)}this.fill();this.setValue();this._trigger("changeDate");var o;if(this.isInput){o=this.element}else{if(this.component){o=this.element.find("input")}}if(o){o.change()}if(this.o.autoclose&&(!p||p=="date")){this.hide()}},moveMonth:function(n,o){if(!o){return n}var r=new Date(n.valueOf()),v=r.getUTCDate(),s=r.getUTCMonth(),q=Math.abs(o),u,t;o=o>0?1:-1;if(q==1){t=o==-1?function(){return r.getUTCMonth()==s}:function(){return r.getUTCMonth()!=u};u=s+o;r.setUTCMonth(u);if(u<0||u>11){u=(u+12)%12}}else{for(var p=0;p<q;p++){r=this.moveMonth(r,o)}u=r.getUTCMonth();r.setUTCDate(v);t=function(){return u!=r.getUTCMonth()}}while(t()){r.setUTCDate(--v);r.setUTCMonth(u)}return r},moveYear:function(o,n){return this.moveMonth(o,n*12)},dateWithinRange:function(n){return n>=this.o.startDate&&n<=this.o.endDate},keydown:function(u){if(this.picker.is(":not(:visible)")){if(u.keyCode==27){this.show()}return}var q=false,p,o,t,n,s;switch(u.keyCode){case 27:this.hide();u.preventDefault();break;case 37:case 39:if(!this.o.keyboardNavigation){break}p=u.keyCode==37?-1:1;if(u.ctrlKey){n=this.moveYear(this.date,p);s=this.moveYear(this.viewDate,p);this._trigger("changeYear",this.viewDate)}else{if(u.shiftKey){n=this.moveMonth(this.date,p);s=this.moveMonth(this.viewDate,p);this._trigger("changeMonth",this.viewDate)}else{n=new Date(this.date);n.setUTCDate(this.date.getUTCDate()+p);s=new Date(this.viewDate);s.setUTCDate(this.viewDate.getUTCDate()+p)}}if(this.dateWithinRange(n)){this.date=n;this.viewDate=s;this.setValue();this.update();u.preventDefault();q=true}break;case 38:case 40:if(!this.o.keyboardNavigation){break}p=u.keyCode==38?-1:1;if(u.ctrlKey){n=this.moveYear(this.date,p);s=this.moveYear(this.viewDate,p);this._trigger("changeYear",this.viewDate)}else{if(u.shiftKey){n=this.moveMonth(this.date,p);s=this.moveMonth(this.viewDate,p);this._trigger("changeMonth",this.viewDate)}else{n=new Date(this.date);n.setUTCDate(this.date.getUTCDate()+p*7);s=new Date(this.viewDate);s.setUTCDate(this.viewDate.getUTCDate()+p*7)}}if(this.dateWithinRange(n)){this.date=n;this.viewDate=s;this.setValue();this.update();u.preventDefault();q=true}break;case 13:this.hide();u.preventDefault();break;case 9:this.hide();break}if(q){this._trigger("changeDate");var r;if(this.isInput){r=this.element}else{if(this.component){r=this.element.find("input")}}if(r){r.change()}}},showMode:function(n){if(n){this.viewMode=Math.max(this.o.minViewMode,Math.min(2,this.viewMode+n))}this.picker.find(">div").hide().filter(".datepicker-"+j.modes[this.viewMode].clsName).css("display","block");this.updateNavArrows()}};var m=function(o,n){this.element=h(o);this.inputs=h.map(n.inputs,function(p){return p.jquery?p[0]:p});delete n.inputs;h(this.inputs).datepicker(n).bind("changeDate",h.proxy(this.dateUpdated,this));this.pickers=h.map(this.inputs,function(p){return h(p).data("datepicker")});this.updateDates()};m.prototype={updateDates:function(){this.dates=h.map(this.pickers,function(n){return n.date});this.updateRanges()},updateRanges:function(){var n=h.map(this.dates,function(o){return o.valueOf()});h.each(this.pickers,function(o,q){q.setRange(n)})},dateUpdated:function(q){var r=h(q.target).data("datepicker"),p=r.getUTCDate(),o=h.inArray(q.target,this.inputs),n=this.inputs.length;if(o==-1){return}if(p<this.dates[o]){while(o>=0&&p<this.dates[o]){this.pickers[o--].setUTCDate(p)}}else{if(p>this.dates[o]){while(o<n&&p>this.dates[o]){this.pickers[o++].setUTCDate(p)}}}this.updateDates()},remove:function(){h.map(this.pickers,function(n){n.remove()});delete this.element.data().datepicker}};function g(q,t){var s=h(q).data(),n={},r,p=new RegExp("^"+t.toLowerCase()+"([A-Z])"),t=new RegExp("^"+t.toLowerCase());for(var o in s){if(t.test(o)){r=o.replace(p,function(v,u){return u.toLowerCase()});n[r]=s[o]}}return n}function a(p){var n={};if(!b[p]){p=p.split("-")[0];if(!b[p]){return}}var o=b[p];h.each(l,function(r,q){if(q in o){n[q]=o[q]}});return n}var d=h.fn.datepicker;h.fn.datepicker=function(q){var o=Array.apply(null,arguments);o.shift();var p,n;this.each(function(){var y=h(this),w=y.data("datepicker"),s=typeof q=="object"&&q;if(!w){var u=g(this,"date"),r=h.extend({},f,u,s),t=a(r.language),v=h.extend({},f,t,u,s);if(y.is(".input-daterange")||v.inputs){var x={inputs:v.inputs||y.find("input").toArray()};y.data("datepicker",(w=new m(this,h.extend(v,x))))}else{y.data("datepicker",(w=new i(this,v)))}}if(typeof q=="string"&&typeof w[q]=="function"){p=w[q].apply(w,o);if(p!==undefined){return false}}});if(p!==undefined){return p}else{return this}};var f=h.fn.datepicker.defaults={autoclose:false,beforeShowDay:h.noop,calendarWeeks:false,clearBtn:false,daysOfWeekDisabled:[],endDate:Infinity,forceParse:true,format:"mm/dd/yyyy",keyboardNavigation:true,language:"en",minViewMode:0,orientation:"auto",rtl:false,startDate:-Infinity,startView:0,todayBtn:false,todayHighlight:false,weekStart:0};var l=h.fn.datepicker.locale_opts=["format","rtl","weekStart"];h.fn.datepicker.Constructor=i;var b=h.fn.datepicker.dates={en:{days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],daysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sun"],daysMin:["Su","Mo","Tu","We","Th","Fr","Sa","Su"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],today:"Today",clear:"Clear"}};var j={modes:[{clsName:"days",navFnc:"Month",navStep:1},{clsName:"months",navFnc:"FullYear",navStep:1},{clsName:"years",navFnc:"FullYear",navStep:10}],isLeapYear:function(n){return(((n%4===0)&&(n%100!==0))||(n%400===0))},getDaysInMonth:function(n,o){return[31,(j.isLeapYear(n)?29:28),31,30,31,30,31,31,30,31,30,31][o]},validParts:/dd?|DD?|mm?|MM?|yy(?:yy)?/g,nonpunctuation:/[^ -\/:-@\[\u3400-\u9fff-`{-~\t\n\r]+/g,parseFormat:function(p){var n=p.replace(this.validParts,"\0").split("\0"),o=p.match(this.validParts);if(!n||!n.length||!o||o.length===0){throw new Error("Invalid date format.")}return{separators:n,parts:o}},parseDate:function(q,A,u){if(q instanceof Date){return q}if(typeof A==="string"){A=j.parseFormat(A)}if(/^[\-+]\d+[dmwy]([\s,]+[\-+]\d+[dmwy])*$/.test(q)){var C=/([\-+]\d+)([dmwy])/,t=q.match(/([\-+]\d+)([dmwy])/g),n,r;q=new Date();for(var v=0;v<t.length;v++){n=C.exec(t[v]);r=parseInt(n[1]);switch(n[2]){case"d":q.setUTCDate(q.getUTCDate()+r);break;case"m":q=i.prototype.moveMonth.call(i.prototype,q,r);break;case"w":q.setUTCDate(q.getUTCDate()+r*7);break;case"y":q=i.prototype.moveYear.call(i.prototype,q,r);break}}return k(q.getUTCFullYear(),q.getUTCMonth(),q.getUTCDate(),0,0,0)}var t=q&&q.match(this.nonpunctuation)||[],q=new Date(),y={},z=["yyyy","yy","M","MM","m","mm","d","dd"],B={yyyy:function(F,s){return F.setUTCFullYear(s)},yy:function(F,s){return F.setUTCFullYear(2000+s)},m:function(F,s){if(isNaN(F)){return F}s-=1;while(s<0){s+=12}s%=12;F.setUTCMonth(s);while(F.getUTCMonth()!=s){F.setUTCDate(F.getUTCDate()-1)}return F},d:function(F,s){return F.setUTCDate(s)}},p,w,n;B.M=B.MM=B.mm=B.m;B.dd=B.d;q=k(q.getFullYear(),q.getMonth(),q.getDate(),0,0,0);var x=A.parts.slice();if(t.length!=x.length){x=h(x).filter(function(s,F){return h.inArray(F,z)!==-1}).toArray()}if(t.length==x.length){for(var v=0,o=x.length;v<o;v++){p=parseInt(t[v],10);n=x[v];if(isNaN(p)){switch(n){case"MM":w=h(b[u].months).filter(function(){var s=this.slice(0,t[v].length),F=t[v].slice(0,s.length);return s==F});p=h.inArray(w[0],b[u].months)+1;break;case"M":w=h(b[u].monthsShort).filter(function(){var s=this.slice(0,t[v].length),F=t[v].slice(0,s.length);return s==F});p=h.inArray(w[0],b[u].monthsShort)+1;break}}y[n]=p}for(var v=0,E,D;v<z.length;v++){D=z[v];if(D in y&&!isNaN(y[D])){E=new Date(q);B[D](E,y[D]);if(!isNaN(E)){q=E}}}}return q},formatDate:function(n,r,t){if(typeof r==="string"){r=j.parseFormat(r)}var s={d:n.getUTCDate(),D:b[t].daysShort[n.getUTCDay()],DD:b[t].days[n.getUTCDay()],m:n.getUTCMonth()+1,M:b[t].monthsShort[n.getUTCMonth()],MM:b[t].months[n.getUTCMonth()],yy:n.getUTCFullYear().toString().substring(2),yyyy:n.getUTCFullYear()};s.dd=(s.d<10?"0":"")+s.d;s.mm=(s.m<10?"0":"")+s.m;var n=[],q=h.extend([],r.separators);for(var p=0,o=r.parts.length;p<=o;p++){if(q.length){n.push(q.shift())}n.push(s[r.parts[p]])}return n.join("")},headTemplate:'<thead><tr><th class="prev">&laquo;</th><th colspan="5" class="datepicker-switch"></th><th class="next">&raquo;</th></tr></thead>',contTemplate:'<tbody><tr><td colspan="7"></td></tr></tbody>',footTemplate:'<tfoot><tr><th colspan="7" class="today"></th></tr><tr><th colspan="7" class="clear"></th></tr></tfoot>'};j.template='<div class="datepicker"><div class="datepicker-days"><table class=" table-condensed">'+j.headTemplate+"<tbody></tbody>"+j.footTemplate+'</table></div><div class="datepicker-months"><table class="table-condensed">'+j.headTemplate+j.contTemplate+j.footTemplate+'</table></div><div class="datepicker-years"><table class="table-condensed">'+j.headTemplate+j.contTemplate+j.footTemplate+"</table></div></div>";h.fn.datepicker.DPGlobal=j;h.fn.datepicker.noConflict=function(){h.fn.datepicker=d;return this};h(document).on("focus.datepicker.data-api click.datepicker.data-api",'[data-provide="datepicker"]',function(o){var n=h(this);if(n.data("datepicker")){return}o.preventDefault();n.datepicker("show")});h(function(){h('[data-provide="datepicker-inline"]').datepicker()})}(window.jQuery));
(function(a){a.fn.datepicker.dates.es={days:["Domingo","Lunes","Martes","Miércoles","Jueves","Viernes","Sábado","Domingo"],daysShort:["Dom","Lun","Mar","Mié","Jue","Vie","Sáb","Dom"],daysMin:["Do","Lu","Ma","Mi","Ju","Vi","Sa","Do"],months:["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"],monthsShort:["Ene","Feb","Mar","Abr","May","Jun","Jul","Ago","Sep","Oct","Nov","Dic"],today:"Hoy"}}(jQuery));
!function(b){var a=function(k,s,i){var q=typeof s=="object";var f;this.startDate=moment().startOf("day");this.endDate=moment().startOf("day");this.minDate=false;this.maxDate=false;this.dateLimit=false;this.showDropdowns=false;this.showWeekNumbers=false;this.timePicker=false;this.timePickerIncrement=30;this.timePicker12Hour=true;this.ranges={};this.opens="right";this.buttonClasses=["btn","btn-small"];this.applyClass="btn-success";this.cancelClass="btn-default";this.format="MM/DD/YYYY";this.separator=" - ";this.locale={applyLabel:"Apply",cancelLabel:"Cancel",fromLabel:"From",toLabel:"To",weekLabel:"W",customRangeLabel:"Custom Range",daysOfWeek:moment()._lang._weekdaysMin.slice(),monthNames:moment()._lang._monthsShort.slice(),firstDay:0};this.cb=function(){};this.parentEl="body";this.element=b(k);if(this.element.hasClass("pull-right")){this.opens="left"}if(this.element.is("input")){this.element.on({click:b.proxy(this.show,this),focus:b.proxy(this.show,this)})}else{this.element.on("click",b.proxy(this.show,this))}f=this.locale;if(q){if(typeof s.locale=="object"){b.each(f,function(t,c){f[t]=s.locale[t]||c})}if(s.applyClass){this.applyClass=s.applyClass}if(s.cancelClass){this.cancelClass=s.cancelClass}}var d='<div class="daterangepicker dropdown-menu"><div class="calendar left"></div><div class="calendar right"></div><div class="ranges"><div class="range_inputs"><div class="daterangepicker_start_input" style="float: left"><label for="daterangepicker_start">'+this.locale.fromLabel+'</label><input class="input-mini" type="text" name="daterangepicker_start" value="" disabled="disabled" /></div><div class="daterangepicker_end_input" style="float: left; padding-left: 11px"><label for="daterangepicker_end">'+this.locale.toLabel+'</label><input class="input-mini" type="text" name="daterangepicker_end" value="" disabled="disabled" /></div><button class="'+this.applyClass+' applyBtn" disabled="disabled">'+this.locale.applyLabel+'</button>&nbsp;<button class="'+this.cancelClass+' cancelBtn">'+this.locale.cancelLabel+"</button></div></div></div>";this.parentEl=(q&&s.parentEl&&b(s.parentEl))||b(this.parentEl);this.container=b(d).appendTo(this.parentEl);if(q){if(typeof s.format=="string"){this.format=s.format}if(typeof s.separator=="string"){this.separator=s.separator}if(typeof s.startDate=="string"){this.startDate=moment(s.startDate,this.format)}if(typeof s.endDate=="string"){this.endDate=moment(s.endDate,this.format)}if(typeof s.minDate=="string"){this.minDate=moment(s.minDate,this.format)}if(typeof s.maxDate=="string"){this.maxDate=moment(s.maxDate,this.format)}if(typeof s.startDate=="object"){this.startDate=moment(s.startDate)}if(typeof s.endDate=="object"){this.endDate=moment(s.endDate)}if(typeof s.minDate=="object"){this.minDate=moment(s.minDate)}if(typeof s.maxDate=="object"){this.maxDate=moment(s.maxDate)}if(typeof s.ranges=="object"){for(var m in s.ranges){var e=moment(s.ranges[m][0]);var j=moment(s.ranges[m][1]);if(this.minDate&&e.isBefore(this.minDate)){e=moment(this.minDate)}if(this.maxDate&&j.isAfter(this.maxDate)){j=moment(this.maxDate)}if((this.minDate&&j.isBefore(this.minDate))||(this.maxDate&&e.isAfter(this.maxDate))){continue}this.ranges[m]=[e,j]}var n="<ul>";for(var m in this.ranges){n+="<li>"+m+"</li>"}n+="<li>"+this.locale.customRangeLabel+"</li>";n+="</ul>";this.container.find(".ranges").prepend(n)}if(typeof s.dateLimit=="object"){this.dateLimit=s.dateLimit}if(typeof s.locale=="object"){if(typeof s.locale.firstDay=="number"){this.locale.firstDay=s.locale.firstDay;var l=s.locale.firstDay;while(l>0){this.locale.daysOfWeek.push(this.locale.daysOfWeek.shift());l--}}}if(typeof s.opens=="string"){this.opens=s.opens}if(typeof s.showWeekNumbers=="boolean"){this.showWeekNumbers=s.showWeekNumbers}if(typeof s.buttonClasses=="string"){this.buttonClasses=[s.buttonClasses]}if(typeof s.buttonClasses=="object"){this.buttonClasses=s.buttonClasses}if(typeof s.showDropdowns=="boolean"){this.showDropdowns=s.showDropdowns}if(typeof s.timePicker=="boolean"){this.timePicker=s.timePicker}if(typeof s.timePickerIncrement=="number"){this.timePickerIncrement=s.timePickerIncrement}if(typeof s.timePicker12Hour=="boolean"){this.timePicker12Hour=s.timePicker12Hour}}if(!this.timePicker){this.startDate=this.startDate.startOf("day");this.endDate=this.endDate.startOf("day")}var p=this.container;b.each(this.buttonClasses,function(c,t){p.find("button").addClass(t)});if(this.opens=="right"){var h=this.container.find(".calendar.left");var r=this.container.find(".calendar.right");h.removeClass("left").addClass("right");r.removeClass("right").addClass("left")}if(typeof s=="undefined"||typeof s.ranges=="undefined"){this.container.find(".calendar").show();this.move()}if(typeof i=="function"){this.cb=i}this.container.addClass("opens"+this.opens);if(!q||(typeof s.startDate=="undefined"&&typeof s.endDate=="undefined")){if(b(this.element).is("input[type=text]")){var g=b(this.element).val();var o=g.split(this.separator);var e,j;if(o.length==2){e=moment(o[0],this.format);j=moment(o[1],this.format)}if(e!=null&&j!=null){this.startDate=e;this.endDate=j}}}this.oldStartDate=this.startDate.clone();this.oldEndDate=this.endDate.clone();this.leftCalendar={month:moment([this.startDate.year(),this.startDate.month(),1,this.startDate.hour(),this.startDate.minute()]),calendar:[]};this.rightCalendar={month:moment([this.endDate.year(),this.endDate.month(),1,this.endDate.hour(),this.endDate.minute()]),calendar:[]};this.container.on("mousedown",b.proxy(this.mousedown,this));this.container.find(".calendar").on("click",".prev",b.proxy(this.clickPrev,this)).on("click",".next",b.proxy(this.clickNext,this)).on("click","td.available",b.proxy(this.clickDate,this)).on("mouseenter","td.available",b.proxy(this.enterDate,this)).on("mouseleave","td.available",b.proxy(this.updateFormInputs,this)).on("change","select.yearselect",b.proxy(this.updateMonthYear,this)).on("change","select.monthselect",b.proxy(this.updateMonthYear,this)).on("change","select.hourselect,select.minuteselect,select.ampmselect",b.proxy(this.updateTime,this));this.container.find(".ranges").on("click","button.applyBtn",b.proxy(this.clickApply,this)).on("click","button.cancelBtn",b.proxy(this.clickCancel,this)).on("click",".daterangepicker_start_input,.daterangepicker_end_input",b.proxy(this.showCalendars,this)).on("click","li",b.proxy(this.clickRange,this)).on("mouseenter","li",b.proxy(this.enterRange,this)).on("mouseleave","li",b.proxy(this.updateFormInputs,this));this.element.on("keyup",b.proxy(this.updateFromControl,this));this.updateView();this.updateCalendars()};a.prototype={constructor:a,mousedown:function(c){c.stopPropagation()},updateView:function(){this.leftCalendar.month.month(this.startDate.month()).year(this.startDate.year());this.rightCalendar.month.month(this.endDate.month()).year(this.endDate.year());this.updateFormInputs()},updateFormInputs:function(){this.container.find("input[name=daterangepicker_start]").val(this.startDate.format(this.format));this.container.find("input[name=daterangepicker_end]").val(this.endDate.format(this.format));if(this.startDate.isSame(this.endDate)||this.startDate.isBefore(this.endDate)){this.container.find("button.applyBtn").removeAttr("disabled")}else{this.container.find("button.applyBtn").attr("disabled","disabled")}},updateFromControl:function(){if(!this.element.is("input")){return}if(!this.element.val().length){return}var d=this.element.val().split(this.separator);var e=moment(d[0],this.format);var c=moment(d[1],this.format);if(e==null||c==null){return}if(c.isBefore(e)){return}this.oldStartDate=this.startDate.clone();this.oldEndDate=this.endDate.clone();this.startDate=e;this.endDate=c;if(!this.startDate.isSame(this.oldStartDate)||!this.endDate.isSame(this.oldEndDate)){this.notify()}this.updateCalendars()},notify:function(){this.updateView();this.cb(this.startDate,this.endDate)},move:function(){var c={top:this.parentEl.offset().top-(this.parentEl.is("body")?0:this.parentEl.scrollTop()),left:this.parentEl.offset().left-(this.parentEl.is("body")?0:this.parentEl.scrollLeft())};if(this.opens=="left"){this.container.css({top:this.element.offset().top+this.element.outerHeight()-c.top,right:b(window).width()-this.element.offset().left-this.element.outerWidth()-c.left,left:"auto"});if(this.container.offset().left<0){this.container.css({right:"auto",left:9})}}else{this.container.css({top:this.element.offset().top+this.element.outerHeight()-c.top,left:this.element.offset().left-c.left,right:"auto"});if(this.container.offset().left+this.container.outerWidth()>b(window).width()){this.container.css({left:"auto",right:0})}}},show:function(c){this.container.show();this.move();if(c){c.stopPropagation();c.preventDefault()}b(document).on("mousedown",b.proxy(this.hide,this));this.element.trigger("shown",{target:c.target,picker:this})},hide:function(c){this.container.hide();if(!this.startDate.isSame(this.oldStartDate)||!this.endDate.isSame(this.oldEndDate)){this.notify()}this.oldStartDate=this.startDate.clone();this.oldEndDate=this.endDate.clone();b(document).off("mousedown",this.hide);this.element.trigger("hidden",{picker:this})},enterRange:function(f){var c=f.target.innerHTML;if(c==this.locale.customRangeLabel){this.updateView()}else{var d=this.ranges[c];this.container.find("input[name=daterangepicker_start]").val(d[0].format(this.format));this.container.find("input[name=daterangepicker_end]").val(d[1].format(this.format))}},showCalendars:function(){this.container.find(".calendar").show();this.move()},updateInputText:function(){if(this.element.is("input")){this.element.val(this.startDate.format(this.format)+this.separator+this.endDate.format(this.format))}},clickRange:function(f){var c=f.target.innerHTML;if(c==this.locale.customRangeLabel){this.showCalendars()}else{var d=this.ranges[c];this.startDate=d[0];this.endDate=d[1];if(!this.timePicker){this.startDate.startOf("day");this.endDate.startOf("day")}this.leftCalendar.month.month(this.startDate.month()).year(this.startDate.year()).hour(this.startDate.hour()).minute(this.startDate.minute());this.rightCalendar.month.month(this.endDate.month()).year(this.endDate.year()).hour(this.endDate.hour()).minute(this.endDate.minute());this.updateCalendars();this.updateInputText();this.container.find(".calendar").hide();this.hide()}},clickPrev:function(d){var c=b(d.target).parents(".calendar");if(c.hasClass("left")){this.leftCalendar.month.subtract("month",1)}else{this.rightCalendar.month.subtract("month",1)}this.updateCalendars()},clickNext:function(d){var c=b(d.target).parents(".calendar");if(c.hasClass("left")){this.leftCalendar.month.add("month",1)}else{this.rightCalendar.month.add("month",1)}this.updateCalendars()},enterDate:function(f){var h=b(f.target).attr("data-title");var g=h.substr(1,1);var c=h.substr(3,1);var d=b(f.target).parents(".calendar");if(d.hasClass("left")){this.container.find("input[name=daterangepicker_start]").val(this.leftCalendar.calendar[g][c].format(this.format))}else{this.container.find("input[name=daterangepicker_end]").val(this.rightCalendar.calendar[g][c].format(this.format))}},clickDate:function(j){var k=b(j.target).attr("data-title");var l=k.substr(1,1);var g=k.substr(3,1);var d=b(j.target).parents(".calendar");if(d.hasClass("left")){var f=this.leftCalendar.calendar[l][g];var i=this.endDate;if(typeof this.dateLimit=="object"){var c=moment(f).add(this.dateLimit).startOf("day");if(i.isAfter(c)){i=c}}}else{var f=this.startDate;var i=this.rightCalendar.calendar[l][g];if(typeof this.dateLimit=="object"){var h=moment(i).subtract(this.dateLimit).startOf("day");if(f.isBefore(h)){f=h}}}d.find("td").removeClass("active");if(f.isSame(i)||f.isBefore(i)){b(j.target).addClass("active");this.startDate=f;this.endDate=i}else{if(f.isAfter(i)){b(j.target).addClass("active");this.startDate=f;this.endDate=moment(f).add("day",1).startOf("day")}}this.leftCalendar.month.month(this.startDate.month()).year(this.startDate.year());this.rightCalendar.month.month(this.endDate.month()).year(this.endDate.year());this.updateCalendars()},clickApply:function(c){this.updateInputText();this.hide()},clickCancel:function(c){this.startDate=this.oldStartDate;this.endDate=this.oldEndDate;this.updateView();this.updateCalendars();this.hide()},updateMonthYear:function(g){var h=b(g.target).closest(".calendar").hasClass("left");var f=this.container.find(".calendar.left");if(!h){f=this.container.find(".calendar.right")}var d=parseInt(f.find(".monthselect").val(),10);var c=f.find(".yearselect").val();if(h){this.leftCalendar.month.month(d).year(c)}else{this.rightCalendar.month.month(d).year(c)}this.updateCalendars()},updateTime:function(h){var j=b(h.target).closest(".calendar").hasClass("left");var g=this.container.find(".calendar.left");if(!j){g=this.container.find(".calendar.right")}var d=parseInt(g.find(".hourselect").val());var i=parseInt(g.find(".minuteselect").val());if(this.timePicker12Hour){var f=g.find(".ampmselect").val();if(f=="PM"&&d<12){d+=12}if(f=="AM"&&d==12){d=0}}if(j){var k=this.startDate.clone();k.hour(d);k.minute(i);this.startDate=k;this.leftCalendar.month.hour(d).minute(i)}else{var c=this.endDate.clone();c.hour(d);c.minute(i);this.endDate=c;this.rightCalendar.month.hour(d).minute(i)}this.updateCalendars()},updateCalendars:function(){this.leftCalendar.calendar=this.buildCalendar(this.leftCalendar.month.month(),this.leftCalendar.month.year(),this.leftCalendar.month.hour(),this.leftCalendar.month.minute(),"left");this.rightCalendar.calendar=this.buildCalendar(this.rightCalendar.month.month(),this.rightCalendar.month.year(),this.rightCalendar.month.hour(),this.rightCalendar.month.minute(),"right");this.container.find(".calendar.left").html(this.renderCalendar(this.leftCalendar.calendar,this.startDate,this.minDate,this.maxDate));this.container.find(".calendar.right").html(this.renderCalendar(this.rightCalendar.calendar,this.endDate,this.startDate,this.maxDate));this.container.find(".ranges li").removeClass("active");var c=true;var e=0;for(var d in this.ranges){if(this.timePicker){if(this.startDate.isSame(this.ranges[d][0])&&this.endDate.isSame(this.ranges[d][1])){c=false;this.container.find(".ranges li:eq("+e+")").addClass("active")}}else{if(this.startDate.format("YYYY-MM-DD")==this.ranges[d][0].format("YYYY-MM-DD")&&this.endDate.format("YYYY-MM-DD")==this.ranges[d][1].format("YYYY-MM-DD")){c=false;this.container.find(".ranges li:eq("+e+")").addClass("active")}}e++}if(c){this.container.find(".ranges li:last").addClass("active")}},buildCalendar:function(o,q,h,g,p){var c=moment([q,o,1]);var m=moment(c).subtract("month",1).month();var l=moment(c).subtract("month",1).year();var r=moment([l,m]).daysInMonth();var e=c.day();var k=[];for(var j=0;j<6;j++){k[j]=[]}var n=r-e+this.locale.firstDay+1;if(n>r){n-=7}if(e==this.locale.firstDay){n=r-6}var f=moment([l,m,n,12,g]);for(var j=0,d=0,s=0;j<42;j++,d++,f=moment(f).add("hour",24)){if(j>0&&d%7==0){d=0;s++}k[s][d]=f.clone().hour(h);f.hour(12)}return k},renderDropdowns:function(h,g,c){var k=h.month();var f='<select class="monthselect">';var d=false;var p=false;for(var e=0;e<12;e++){if((!d||e>=g.month())&&(!p||e<=c.month())){f+="<option value='"+e+"'"+(e===k?" selected='selected'":"")+">"+this.locale.monthNames[e]+"</option>"}}f+="</select>";var j=h.year();var i=(c&&c.year())||(j+5);var o=(g&&g.year())||(j-50);var n='<select class="yearselect">';for(var l=o;l<=i;l++){n+='<option value="'+l+'"'+(l===j?' selected="selected"':"")+">"+l+"</option>"}n+="</select>";return f+n},renderCalendar:function(m,k,j,d){var p='<div class="calendar-date">';p+='<table class="table-condensed">';p+="<thead>";p+="<tr>";if(this.showWeekNumbers){p+="<th></th>"}if(!j||j.isBefore(m[1][1])){p+='<th class="prev available"><i class="icon-arrow-left glyphicon glyphicon-arrow-left"></i></th>'}else{p+="<th></th>"}var f=this.locale.monthNames[m[1][1].month()]+m[1][1].format(" YYYY");if(this.showDropdowns){f=this.renderDropdowns(m[1][1],j,d)}p+='<th colspan="5" style="width: auto">'+f+"</th>";if(!d||d.isAfter(m[1][1])){p+='<th class="next available"><i class="icon-arrow-right glyphicon glyphicon-arrow-right"></i></th>'}else{p+="<th></th>"}p+="</tr>";p+="<tr>";if(this.showWeekNumbers){p+='<th class="week">'+this.locale.weekLabel+"</th>"}b.each(this.locale.daysOfWeek,function(s,i){p+="<th>"+i+"</th>"});p+="</tr>";p+="</thead>";p+="<tbody>";for(var r=0;r<6;r++){p+="<tr>";if(this.showWeekNumbers){p+='<td class="week">'+m[r][0].week()+"</td>"}for(var g=0;g<7;g++){var o="available ";o+=(m[r][g].month()==m[1][1].month())?"":"off";if((j&&m[r][g].isBefore(j))||(d&&m[r][g].isAfter(d))){o=" off disabled "}else{if(m[r][g].format("YYYY-MM-DD")==k.format("YYYY-MM-DD")){o+=" active ";if(m[r][g].format("YYYY-MM-DD")==this.startDate.format("YYYY-MM-DD")){o+=" start-date "}if(m[r][g].format("YYYY-MM-DD")==this.endDate.format("YYYY-MM-DD")){o+=" end-date "}}else{if(m[r][g]>=this.startDate&&m[r][g]<=this.endDate){o+=" in-range ";if(m[r][g].isSame(this.startDate)){o+=" start-date "}if(m[r][g].isSame(this.endDate)){o+=" end-date "}}}}var q="r"+r+"c"+g;p+='<td class="'+o.replace(/\s+/g," ").replace(/^\s?(.*?)\s?$/,"$1")+'" data-title="'+q+'">'+m[r][g].date()+"</td>"}p+="</tr>"}p+="</tbody>";p+="</table>";p+="</div>";if(this.timePicker){p+='<div class="calendar-time">';p+='<select class="hourselect">';var e=0;var h=23;var c=k.hour();if(this.timePicker12Hour){e=1;h=12;if(c>=12){c-=12}if(c==0){c=12}}for(var l=e;l<=h;l++){if(l==c){p+='<option value="'+l+'" selected="selected">'+l+"</option>"}else{p+='<option value="'+l+'">'+l+"</option>"}}p+="</select> : ";p+='<select class="minuteselect">';for(var l=0;l<60;l+=this.timePickerIncrement){var n=l;if(n<10){n="0"+n}if(l==k.minute()){p+='<option value="'+l+'" selected="selected">'+n+"</option>"}else{p+='<option value="'+l+'">'+n+"</option>"}}p+="</select> ";if(this.timePicker12Hour){p+='<select class="ampmselect">';if(k.hour()>=12){p+='<option value="AM">AM</option><option value="PM" selected="selected">PM</option>'}else{p+='<option value="AM" selected="selected">AM</option><option value="PM">PM</option>'}p+="</select>"}p+="</div>"}return p}};b.fn.daterangepicker=function(d,c){this.each(function(){var e=b(this);if(!e.data("daterangepicker")){e.data("daterangepicker",new a(e,d,c))}});return this}}(window.jQuery);
/*!
 * jQuery Form Plugin
 * version: 3.45.0-2013.10.17
 * Requires jQuery v1.5 or later
 * Copyright (c) 2013 M. Alsup
 * Examples and documentation at: http://malsup.com/jquery/form/
 * Project repository: https://github.com/malsup/form
 * Dual licensed under the MIT and GPL licenses.
 * https://github.com/malsup/form#copyright-and-license
 */
(function(f){var c={};c.fileapi=f("<input type='file'/>").get(0).files!==undefined;c.formdata=window.FormData!==undefined;var e=!!f.fn.prop;f.fn.attr2=function(){if(!e){return this.attr.apply(this,arguments)}var g=this.prop.apply(this,arguments);if((g&&g.jquery)||typeof g==="string"){return g}return this.attr.apply(this,arguments)};f.fn.ajaxSubmit=function(j){if(!this.length){d("ajaxSubmit: skipping submit process - no element selected");return this}var i,C,m,o=this;if(typeof j=="function"){j={success:j}}else{if(j===undefined){j={}}}i=j.type||this.attr2("method");C=j.url||this.attr2("action");m=(typeof C==="string")?f.trim(C):"";m=m||window.location.href||"";if(m){m=(m.match(/^([^#]+)/)||[])[1]}j=f.extend(true,{url:m,success:f.ajaxSettings.success,type:i||f.ajaxSettings.type,iframeSrc:/^https/i.test(window.location.href||"")?"javascript:false":"about:blank"},j);var u={};this.trigger("form-pre-serialize",[this,j,u]);if(u.veto){d("ajaxSubmit: submit vetoed via form-pre-serialize trigger");return this}if(j.beforeSerialize&&j.beforeSerialize(this,j)===false){d("ajaxSubmit: submit aborted via beforeSerialize callback");return this}var n=j.traditional;if(n===undefined){n=f.ajaxSettings.traditional}var s=[];var E,F=this.formToArray(j.semantic,s);if(j.data){j.extraData=j.data;E=f.param(j.data,n)}if(j.beforeSubmit&&j.beforeSubmit(F,this,j)===false){d("ajaxSubmit: submit aborted via beforeSubmit callback");return this}this.trigger("form-submit-validate",[F,this,j,u]);if(u.veto){d("ajaxSubmit: submit vetoed via form-submit-validate trigger");return this}var y=f.param(F,n);if(E){y=(y?(y+"&"+E):E)}if(j.type.toUpperCase()=="GET"){j.url+=(j.url.indexOf("?")>=0?"&":"?")+y;j.data=null}else{j.data=y}var H=[];if(j.resetForm){H.push(function(){o.resetForm()})}if(j.clearForm){H.push(function(){o.clearForm(j.includeHidden)})}if(!j.dataType&&j.target){var l=j.success||function(){};H.push(function(q){var k=j.replaceTarget?"replaceWith":"html";f(j.target)[k](q).each(l,arguments)})}else{if(j.success){H.push(j.success)}}j.success=function(K,q,L){var J=j.context||this;for(var I=0,k=H.length;I<k;I++){H[I].apply(J,[K,q,L||o,o])}};if(j.error){var z=j.error;j.error=function(J,k,q){var I=j.context||this;z.apply(I,[J,k,q,o])}}if(j.complete){var h=j.complete;j.complete=function(I,k){var q=j.context||this;h.apply(q,[I,k,o])}}var D=f("input[type=file]:enabled",this).filter(function(){return f(this).val()!==""});var p=D.length>0;var B="multipart/form-data";var x=(o.attr("enctype")==B||o.attr("encoding")==B);var w=c.fileapi&&c.formdata;d("fileAPI :"+w);var r=(p||x)&&!w;var v;if(j.iframe!==false&&(j.iframe||r)){if(j.closeKeepAlive){f.get(j.closeKeepAlive,function(){v=G(F)})}else{v=G(F)}}else{if((p||x)&&w){v=t(F)}else{v=f.ajax(j)}}o.removeData("jqxhr").data("jqxhr",v);for(var A=0;A<s.length;A++){s[A]=null}this.trigger("form-submit-notify",[this,j]);return this;function g(K){var L=f.param(K,j.traditional).split("&");var q=L.length;var k=[];var J,I;for(J=0;J<q;J++){L[J]=L[J].replace(/\+/g," ");I=L[J].split("=");k.push([decodeURIComponent(I[0]),decodeURIComponent(I[1])])}return k}function t(q){var k=new FormData();for(var I=0;I<q.length;I++){k.append(q[I].name,q[I].value)}if(j.extraData){var L=g(j.extraData);for(I=0;I<L.length;I++){if(L[I]){k.append(L[I][0],L[I][1])}}}j.data=null;var K=f.extend(true,{},f.ajaxSettings,j,{contentType:false,processData:false,cache:false,type:i||"POST"});if(j.uploadProgress){K.xhr=function(){var M=f.ajaxSettings.xhr();if(M.upload){M.upload.addEventListener("progress",function(Q){var P=0;var N=Q.loaded||Q.position;var O=Q.total;if(Q.lengthComputable){P=Math.ceil(N/O*100)}j.uploadProgress(Q,N,O,P)},false)}return M}}K.data=null;var J=K.beforeSend;K.beforeSend=function(N,M){if(j.formData){M.data=j.formData}else{M.data=k}if(J){J.call(this,N,M)}};return f.ajax(K)}function G(af){var L=o[0],K,ab,V,ad,Y,N,Q,O,P,Z,ac,T;var ai=f.Deferred();ai.abort=function(aj){O.abort(aj)};if(af){for(ab=0;ab<s.length;ab++){K=f(s[ab]);if(e){K.prop("disabled",false)}else{K.removeAttr("disabled")}}}V=f.extend(true,{},f.ajaxSettings,j);V.context=V.context||V;Y="jqFormIO"+(new Date().getTime());if(V.iframeTarget){N=f(V.iframeTarget);Z=N.attr2("name");if(!Z){N.attr2("name",Y)}else{Y=Z}}else{N=f('<iframe name="'+Y+'" src="'+V.iframeSrc+'" />');N.css({position:"absolute",top:"-1000px",left:"-1000px"})}Q=N[0];O={aborted:0,responseText:null,responseXML:null,status:0,statusText:"n/a",getAllResponseHeaders:function(){},getResponseHeader:function(){},setRequestHeader:function(){},abort:function(aj){var ak=(aj==="timeout"?"timeout":"aborted");d("aborting upload... "+ak);this.aborted=1;try{if(Q.contentWindow.document.execCommand){Q.contentWindow.document.execCommand("Stop")}}catch(al){}N.attr("src",V.iframeSrc);O.error=ak;if(V.error){V.error.call(V.context,O,ak,aj)}if(ad){f.event.trigger("ajaxError",[O,V,ak])}if(V.complete){V.complete.call(V.context,O,ak)}}};ad=V.global;if(ad&&0===f.active++){f.event.trigger("ajaxStart")}if(ad){f.event.trigger("ajaxSend",[O,V])}if(V.beforeSend&&V.beforeSend.call(V.context,O,V)===false){if(V.global){f.active--}ai.reject();return ai}if(O.aborted){ai.reject();return ai}P=L.clk;if(P){Z=P.name;if(Z&&!P.disabled){V.extraData=V.extraData||{};V.extraData[Z]=P.value;if(P.type=="image"){V.extraData[Z+".x"]=L.clk_x;V.extraData[Z+".y"]=L.clk_y}}}var U=1;var R=2;function S(al){var ak=null;try{if(al.contentWindow){ak=al.contentWindow.document}}catch(aj){d("cannot get iframe.contentWindow document: "+aj)}if(ak){return ak}try{ak=al.contentDocument?al.contentDocument:al.document}catch(aj){d("cannot get iframe.contentDocument: "+aj);ak=al.document}return ak}var J=f("meta[name=csrf-token]").attr("content");var I=f("meta[name=csrf-param]").attr("content");if(I&&J){V.extraData=V.extraData||{};V.extraData[I]=J}function aa(){var al=o.attr2("target"),aj=o.attr2("action");L.setAttribute("target",Y);if(!i||/post/i.test(i)){L.setAttribute("method","POST")}if(aj!=V.url){L.setAttribute("action",V.url)}if(!V.skipEncodingOverride&&(!i||/post/i.test(i))){o.attr({encoding:"multipart/form-data",enctype:"multipart/form-data"})}if(V.timeout){T=setTimeout(function(){ac=true;X(U)},V.timeout)}function am(){try{var aq=S(Q).readyState;d("state = "+aq);if(aq&&aq.toLowerCase()=="uninitialized"){setTimeout(am,50)}}catch(ar){d("Server abort: ",ar," (",ar.name,")");X(R);if(T){clearTimeout(T)}T=undefined}}var ak=[];try{if(V.extraData){for(var ap in V.extraData){if(V.extraData.hasOwnProperty(ap)){if(f.isPlainObject(V.extraData[ap])&&V.extraData[ap].hasOwnProperty("name")&&V.extraData[ap].hasOwnProperty("value")){ak.push(f('<input type="hidden" name="'+V.extraData[ap].name+'">').val(V.extraData[ap].value).appendTo(L)[0])}else{ak.push(f('<input type="hidden" name="'+ap+'">').val(V.extraData[ap]).appendTo(L)[0])}}}}if(!V.iframeTarget){N.appendTo("body")}if(Q.attachEvent){Q.attachEvent("onload",X)}else{Q.addEventListener("load",X,false)}setTimeout(am,15);try{L.submit()}catch(an){var ao=document.createElement("form").submit;ao.apply(L)}}finally{L.setAttribute("action",aj);if(al){L.setAttribute("target",al)}else{o.removeAttr("target")}f(ak).remove()}}if(V.forceSync){aa()}else{setTimeout(aa,10)}var ag,ah,ae=50,M;function X(ap){if(O.aborted||M){return}ah=S(Q);if(!ah){d("cannot access response document");ap=R}if(ap===U&&O){O.abort("timeout");ai.reject(O,"timeout");return}else{if(ap==R&&O){O.abort("server abort");ai.reject(O,"error","server abort");return}}if(!ah||ah.location.href==V.iframeSrc){if(!ac){return}}if(Q.detachEvent){Q.detachEvent("onload",X)}else{Q.removeEventListener("load",X,false)}var an="success",ar;try{if(ac){throw"timeout"}var am=V.dataType=="xml"||ah.XMLDocument||f.isXMLDoc(ah);d("isXml="+am);if(!am&&window.opera&&(ah.body===null||!ah.body.innerHTML)){if(--ae){d("requeing onLoad callback, DOM not available");setTimeout(X,250);return}}var at=ah.body?ah.body:ah.documentElement;O.responseText=at?at.innerHTML:null;O.responseXML=ah.XMLDocument?ah.XMLDocument:ah;if(am){V.dataType="xml"}O.getResponseHeader=function(aw){var av={"content-type":V.dataType};return av[aw.toLowerCase()]};if(at){O.status=Number(at.getAttribute("status"))||O.status;O.statusText=at.getAttribute("statusText")||O.statusText}var aj=(V.dataType||"").toLowerCase();var aq=/(json|script|text)/.test(aj);if(aq||V.textarea){var ao=ah.getElementsByTagName("textarea")[0];if(ao){O.responseText=ao.value;O.status=Number(ao.getAttribute("status"))||O.status;O.statusText=ao.getAttribute("statusText")||O.statusText}else{if(aq){var ak=ah.getElementsByTagName("pre")[0];var au=ah.getElementsByTagName("body")[0];if(ak){O.responseText=ak.textContent?ak.textContent:ak.innerText}else{if(au){O.responseText=au.textContent?au.textContent:au.innerText}}}}}else{if(aj=="xml"&&!O.responseXML&&O.responseText){O.responseXML=W(O.responseText)}}try{ag=k(O,aj,V)}catch(al){an="parsererror";O.error=ar=(al||an)}}catch(al){d("error caught: ",al);an="error";O.error=ar=(al||an)}if(O.aborted){d("upload aborted");an=null}if(O.status){an=(O.status>=200&&O.status<300||O.status===304)?"success":"error"}if(an==="success"){if(V.success){V.success.call(V.context,ag,"success",O)}ai.resolve(O.responseText,"success",O);if(ad){f.event.trigger("ajaxSuccess",[O,V])}}else{if(an){if(ar===undefined){ar=O.statusText}if(V.error){V.error.call(V.context,O,an,ar)}ai.reject(O,"error",ar);if(ad){f.event.trigger("ajaxError",[O,V,ar])}}}if(ad){f.event.trigger("ajaxComplete",[O,V])}if(ad&&!--f.active){f.event.trigger("ajaxStop")}if(V.complete){V.complete.call(V.context,O,an)}M=true;if(V.timeout){clearTimeout(T)}setTimeout(function(){if(!V.iframeTarget){N.remove()}else{N.attr("src",V.iframeSrc)}O.responseXML=null},100)}var W=f.parseXML||function(aj,ak){if(window.ActiveXObject){ak=new ActiveXObject("Microsoft.XMLDOM");ak.async="false";ak.loadXML(aj)}else{ak=(new DOMParser()).parseFromString(aj,"text/xml")}return(ak&&ak.documentElement&&ak.documentElement.nodeName!="parsererror")?ak:null};var q=f.parseJSON||function(aj){return window["eval"]("("+aj+")")};var k=function(ao,am,al){var ak=ao.getResponseHeader("content-type")||"",aj=am==="xml"||!am&&ak.indexOf("xml")>=0,an=aj?ao.responseXML:ao.responseText;if(aj&&an.documentElement.nodeName==="parsererror"){if(f.error){f.error("parsererror")}}if(al&&al.dataFilter){an=al.dataFilter(an,am)}if(typeof an==="string"){if(am==="json"||!am&&ak.indexOf("json")>=0){an=q(an)}else{if(am==="script"||!am&&ak.indexOf("javascript")>=0){f.globalEval(an)}}}return an};return ai}};f.fn.ajaxForm=function(g){g=g||{};g.delegation=g.delegation&&f.isFunction(f.fn.on);if(!g.delegation&&this.length===0){var h={s:this.selector,c:this.context};if(!f.isReady&&h.s){d("DOM not ready, queuing ajaxForm");f(function(){f(h.s,h.c).ajaxForm(g)});return this}d("terminating; zero elements found by selector"+(f.isReady?"":" (DOM not ready)"));return this}if(g.delegation){f(document).off("submit.form-plugin",this.selector,b).off("click.form-plugin",this.selector,a).on("submit.form-plugin",this.selector,g,b).on("click.form-plugin",this.selector,g,a);return this}return this.ajaxFormUnbind().bind("submit.form-plugin",g,b).bind("click.form-plugin",g,a)};function b(h){var g=h.data;if(!h.isDefaultPrevented()){h.preventDefault();f(h.target).ajaxSubmit(g)}}function a(k){var j=k.target;var h=f(j);if(!(h.is("[type=submit],[type=image]"))){var g=h.closest("[type=submit]");if(g.length===0){return}j=g[0]}var i=this;i.clk=j;if(j.type=="image"){if(k.offsetX!==undefined){i.clk_x=k.offsetX;i.clk_y=k.offsetY}else{if(typeof f.fn.offset=="function"){var l=h.offset();i.clk_x=k.pageX-l.left;i.clk_y=k.pageY-l.top}else{i.clk_x=k.pageX-j.offsetLeft;i.clk_y=k.pageY-j.offsetTop}}}setTimeout(function(){i.clk=i.clk_x=i.clk_y=null},100)}f.fn.ajaxFormUnbind=function(){return this.unbind("submit.form-plugin click.form-plugin")};f.fn.formToArray=function(x,g){var w=[];if(this.length===0){return w}var l=this[0];var p=x?l.getElementsByTagName("*"):l.elements;if(!p){return w}var r,q,o,y,m,t,k;for(r=0,t=p.length;r<t;r++){m=p[r];o=m.name;if(!o||m.disabled){continue}if(x&&l.clk&&m.type=="image"){if(l.clk==m){w.push({name:o,value:f(m).val(),type:m.type});w.push({name:o+".x",value:l.clk_x},{name:o+".y",value:l.clk_y})}continue}y=f.fieldValue(m,true);if(y&&y.constructor==Array){if(g){g.push(m)}for(q=0,k=y.length;q<k;q++){w.push({name:o,value:y[q]})}}else{if(c.fileapi&&m.type=="file"){if(g){g.push(m)}var h=m.files;if(h.length){for(q=0;q<h.length;q++){w.push({name:o,value:h[q],type:m.type})}}else{w.push({name:o,value:"",type:m.type})}}else{if(y!==null&&typeof y!="undefined"){if(g){g.push(m)}w.push({name:o,value:y,type:m.type,required:m.required})}}}}if(!x&&l.clk){var s=f(l.clk),u=s[0];o=u.name;if(o&&!u.disabled&&u.type=="image"){w.push({name:o,value:s.val()});w.push({name:o+".x",value:l.clk_x},{name:o+".y",value:l.clk_y})}}return w};f.fn.formSerialize=function(g){return f.param(this.formToArray(g))};f.fn.fieldSerialize=function(h){var g=[];this.each(function(){var m=this.name;if(!m){return}var k=f.fieldValue(this,h);if(k&&k.constructor==Array){for(var l=0,j=k.length;l<j;l++){g.push({name:m,value:k[l]})}}else{if(k!==null&&typeof k!="undefined"){g.push({name:this.name,value:k})}}});return f.param(g)};f.fn.fieldValue=function(m){for(var l=[],j=0,g=this.length;j<g;j++){var k=this[j];var h=f.fieldValue(k,m);if(h===null||typeof h=="undefined"||(h.constructor==Array&&!h.length)){continue}if(h.constructor==Array){f.merge(l,h)}else{l.push(h)}}return l};f.fieldValue=function(g,o){var j=g.name,u=g.type,w=g.tagName.toLowerCase();if(o===undefined){o=true}if(o&&(!j||g.disabled||u=="reset"||u=="button"||(u=="checkbox"||u=="radio")&&!g.checked||(u=="submit"||u=="image")&&g.form&&g.form.clk!=g||w=="select"&&g.selectedIndex==-1)){return null}if(w=="select"){var p=g.selectedIndex;if(p<0){return null}var r=[],h=g.options;var l=(u=="select-one");var q=(l?p+1:h.length);for(var k=(l?p:0);k<q;k++){var m=h[k];if(m.selected){var s=m.value;if(!s){s=(m.attributes&&m.attributes.value&&!(m.attributes.value.specified))?m.text:m.value}if(l){return s}r.push(s)}}return r}return f(g).val()};f.fn.clearForm=function(g){return this.each(function(){f("input,select,textarea",this).clearFields(g)})};f.fn.clearFields=f.fn.clearInputs=function(g){var h=/^(?:color|date|datetime|email|month|number|password|range|search|tel|text|time|url|week)$/i;return this.each(function(){var j=this.type,i=this.tagName.toLowerCase();if(h.test(j)||i=="textarea"){this.value=""}else{if(j=="checkbox"||j=="radio"){this.checked=false}else{if(i=="select"){this.selectedIndex=-1}else{if(j=="file"){if(/MSIE/.test(navigator.userAgent)){f(this).replaceWith(f(this).clone(true))}else{f(this).val("")}}else{if(g){if((g===true&&/hidden/.test(j))||(typeof g=="string"&&f(this).is(g))){this.value=""}}}}}}})};f.fn.resetForm=function(){return this.each(function(){if(typeof this.reset=="function"||(typeof this.reset=="object"&&!this.reset.nodeType)){this.reset()}})};f.fn.enable=function(g){if(g===undefined){g=true}return this.each(function(){this.disabled=!g})};f.fn.selected=function(g){if(g===undefined){g=true}return this.each(function(){var h=this.type;if(h=="checkbox"||h=="radio"){this.checked=g}else{if(this.tagName.toLowerCase()=="option"){var i=f(this).parent("select");if(g&&i[0]&&i[0].type=="select-one"){i.find("option").selected(false)}this.selected=g}}})};f.fn.ajaxSubmit.debug=false;function d(){if(!f.fn.ajaxSubmit.debug){return}var g="[jquery.form] "+Array.prototype.join.call(arguments,"");if(window.console&&window.console.log){window.console.log(g)}else{if(window.opera&&window.opera.postError){window.opera.postError(g)}}}})((typeof(jQuery)!="undefined")?jQuery:window.Zepto);
!function(a){a(function(){a.support.transition=(function(){var b=(function(){var e=document.createElement("bootstrap"),d={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"},c;for(c in d){if(e.style[c]!==undefined){return d[c]}}}());return b&&{end:b}})()})}(window.jQuery);!function(d){var c='[data-dismiss="alert"]',b=function(e){d(e).on("click",c,this.close)};b.prototype.close=function(j){var i=d(this),g=i.attr("data-target"),h;if(!g){g=i.attr("href");g=g&&g.replace(/.*(?=#[^\s]*$)/,"")}h=d(g);j&&j.preventDefault();h.length||(h=i.hasClass("alert")?i:i.parent());h.trigger(j=d.Event("close"));if(j.isDefaultPrevented()){return}h.removeClass("in");function f(){h.trigger("closed").remove()}d.support.transition&&h.hasClass("fade")?h.on(d.support.transition.end,f):f()};var a=d.fn.alert;d.fn.alert=function(e){return this.each(function(){var g=d(this),f=g.data("alert");if(!f){g.data("alert",(f=new b(this)))}if(typeof e=="string"){f[e].call(g)}})};d.fn.alert.Constructor=b;d.fn.alert.noConflict=function(){d.fn.alert=a;return this};d(document).on("click.alert.data-api",c,b.prototype.close)}(window.jQuery);!function(c){var b=function(e,d){this.$element=c(e);this.options=c.extend({},c.fn.button.defaults,d)};b.prototype.setState=function(g){var i="disabled",e=this.$element,f=e.data(),h=e.is("input")?"val":"html";g=g+"Text";f.resetText||e.data("resetText",e[h]());e[h](f[g]||this.options[g]);setTimeout(function(){g=="loadingText"?e.addClass(i).attr(i,i):e.removeClass(i).removeAttr(i)},0)};b.prototype.toggle=function(){var d=this.$element.closest('[data-toggle="buttons-radio"]');d&&d.find(".active").removeClass("active");this.$element.toggleClass("active")};var a=c.fn.button;c.fn.button=function(d){return this.each(function(){var g=c(this),f=g.data("button"),e=typeof d=="object"&&d;if(!f){g.data("button",(f=new b(this,e)))}if(d=="toggle"){f.toggle()}else{if(d){f.setState(d)}}})};c.fn.button.defaults={loadingText:"loading..."};c.fn.button.Constructor=b;c.fn.button.noConflict=function(){c.fn.button=a;return this};c(document).on("click.button.data-api","[data-toggle^=button]",function(f){var d=c(f.target);if(!d.hasClass("btn")){d=d.closest(".btn")}d.button("toggle")})}(window.jQuery);!function(b){var c=function(e,d){this.$element=b(e);this.$indicators=this.$element.find(".carousel-indicators");this.options=d;this.options.pause=="hover"&&this.$element.on("mouseenter",b.proxy(this.pause,this)).on("mouseleave",b.proxy(this.cycle,this))};c.prototype={cycle:function(d){if(!d){this.paused=false}if(this.interval){clearInterval(this.interval)}this.options.interval&&!this.paused&&(this.interval=setInterval(b.proxy(this.next,this),this.options.interval));return this},getActiveIndex:function(){this.$active=this.$element.find(".item.active");this.$items=this.$active.parent().children();return this.$items.index(this.$active)},to:function(f){var d=this.getActiveIndex(),e=this;if(f>(this.$items.length-1)||f<0){return}if(this.sliding){return this.$element.one("slid",function(){e.to(f)})}if(d==f){return this.pause().cycle()}return this.slide(f>d?"next":"prev",b(this.$items[f]))},pause:function(d){if(!d){this.paused=true}if(this.$element.find(".next, .prev").length&&b.support.transition.end){this.$element.trigger(b.support.transition.end);this.cycle(true)}clearInterval(this.interval);this.interval=null;return this},next:function(){if(this.sliding){return}return this.slide("next")},prev:function(){if(this.sliding){return}return this.slide("prev")},slide:function(k,f){var m=this.$element.find(".item.active"),d=f||m[k](),j=this.interval,l=k=="next"?"left":"right",g=k=="next"?"first":"last",h=this,i;this.sliding=true;j&&this.pause();d=d.length?d:this.$element.find(".item")[g]();i=b.Event("slide",{relatedTarget:d[0],direction:l});if(d.hasClass("active")){return}if(this.$indicators.length){this.$indicators.find(".active").removeClass("active");this.$element.one("slid",function(){var e=b(h.$indicators.children()[h.getActiveIndex()]);e&&e.addClass("active")})}if(b.support.transition&&this.$element.hasClass("slide")){this.$element.trigger(i);if(i.isDefaultPrevented()){return}d.addClass(k);d[0].offsetWidth;m.addClass(l);d.addClass(l);this.$element.one(b.support.transition.end,function(){d.removeClass([k,l].join(" ")).addClass("active");m.removeClass(["active",l].join(" "));h.sliding=false;setTimeout(function(){h.$element.trigger("slid")},0)})}else{this.$element.trigger(i);if(i.isDefaultPrevented()){return}m.removeClass("active");d.addClass("active");this.sliding=false;this.$element.trigger("slid")}j&&this.cycle();return this}};var a=b.fn.carousel;b.fn.carousel=function(d){return this.each(function(){var h=b(this),g=h.data("carousel"),e=b.extend({},b.fn.carousel.defaults,typeof d=="object"&&d),f=typeof d=="string"?d:e.slide;if(!g){h.data("carousel",(g=new c(this,e)))}if(typeof d=="number"){g.to(d)}else{if(f){g[f]()}else{if(e.interval){g.pause().cycle()}}}})};b.fn.carousel.defaults={interval:5000,pause:"hover"};b.fn.carousel.Constructor=c;b.fn.carousel.noConflict=function(){b.fn.carousel=a;return this};b(document).on("click.carousel.data-api","[data-slide], [data-slide-to]",function(j){var i=b(this),f,d=b(i.attr("data-target")||(f=i.attr("href"))&&f.replace(/.*(?=#[^\s]+$)/,"")),g=b.extend({},d.data(),i.data()),h;d.carousel(g);if(h=i.attr("data-slide-to")){d.data("carousel").pause().to(h).cycle()}j.preventDefault()})}(window.jQuery);!function(b){var c=function(e,d){this.$element=b(e);this.options=b.extend({},b.fn.collapse.defaults,d);if(this.options.parent){this.$parent=b(this.options.parent)}this.options.toggle&&this.toggle()};c.prototype={constructor:c,dimension:function(){var d=this.$element.hasClass("width");return d?"width":"height"},show:function(){var g,d,f,e;if(this.transitioning||this.$element.hasClass("in")){return}g=this.dimension();d=b.camelCase(["scroll",g].join("-"));f=this.$parent&&this.$parent.find("> .accordion-group > .in");if(f&&f.length){e=f.data("collapse");if(e&&e.transitioning){return}f.collapse("hide");e||f.data("collapse",null)}this.$element[g](0);this.transition("addClass",b.Event("show"),"shown");b.support.transition&&this.$element[g](this.$element[0][d])},hide:function(){var d;if(this.transitioning||!this.$element.hasClass("in")){return}d=this.dimension();this.reset(this.$element[d]());this.transition("removeClass",b.Event("hide"),"hidden");this.$element[d](0)},reset:function(d){var e=this.dimension();this.$element.removeClass("collapse")[e](d||"auto")[0].offsetWidth;this.$element[d!==null?"addClass":"removeClass"]("collapse");return this},transition:function(h,e,f){var g=this,d=function(){if(e.type=="show"){g.reset()}g.transitioning=0;g.$element.trigger(f)};this.$element.trigger(e);if(e.isDefaultPrevented()){return}this.transitioning=1;this.$element[h]("in");b.support.transition&&this.$element.hasClass("collapse")?this.$element.one(b.support.transition.end,d):d()},toggle:function(){this[this.$element.hasClass("in")?"hide":"show"]()}};var a=b.fn.collapse;b.fn.collapse=function(d){return this.each(function(){var g=b(this),f=g.data("collapse"),e=b.extend({},b.fn.collapse.defaults,g.data(),typeof d=="object"&&d);if(!f){g.data("collapse",(f=new c(this,e)))}if(typeof d=="string"){f[d]()}})};b.fn.collapse.defaults={toggle:true};b.fn.collapse.Constructor=c;b.fn.collapse.noConflict=function(){b.fn.collapse=a;return this};b(document).on("click.collapse.data-api","[data-toggle=collapse]",function(i){var h=b(this),d,g=h.attr("data-target")||i.preventDefault()||(d=h.attr("href"))&&d.replace(/.*(?=#[^\s]+$)/,""),f=b(g).data("collapse")?"toggle":h.data();h[b(g).hasClass("in")?"addClass":"removeClass"]("collapsed");b(g).collapse(f)})}(window.jQuery);!function(f){var b="[data-toggle=dropdown]",a=function(h){var g=f(h).on("click.dropdown.data-api",this.toggle);f("html").on("click.dropdown.data-api",function(){g.parent().removeClass("open")})};a.prototype={constructor:a,toggle:function(j){var i=f(this),h,g;if(i.is(".disabled, :disabled")){return}h=e(i);g=h.hasClass("open");d();if(!g){if("ontouchstart" in document.documentElement){f('<div class="dropdown-backdrop"/>').insertBefore(f(this)).on("click",d)}h.toggleClass("open")}i.focus();return false},keydown:function(l){var k,m,g,j,i,h;if(!/(38|40|27)/.test(l.keyCode)){return}k=f(this);l.preventDefault();l.stopPropagation();if(k.is(".disabled, :disabled")){return}j=e(k);i=j.hasClass("open");if(!i||(i&&l.keyCode==27)){if(l.which==27){j.find(b).focus()}return k.click()}m=f("[role=menu] li:not(.divider):visible a",j);if(!m.length){return}h=m.index(m.filter(":focus"));if(l.keyCode==38&&h>0){h--}if(l.keyCode==40&&h<m.length-1){h++}if(!~h){h=0}m.eq(h).focus()}};function d(){f(".dropdown-backdrop").remove();f(b).each(function(){e(f(this)).removeClass("open")})}function e(i){var g=i.attr("data-target"),h;if(!g){g=i.attr("href");g=g&&/#/.test(g)&&g.replace(/.*(?=#[^\s]*$)/,"")}h=g&&f(g);if(!h||!h.length){h=i.parent()}return h}var c=f.fn.dropdown;f.fn.dropdown=function(g){return this.each(function(){var i=f(this),h=i.data("dropdown");if(!h){i.data("dropdown",(h=new a(this)))}if(typeof g=="string"){h[g].call(i)}})};f.fn.dropdown.Constructor=a;f.fn.dropdown.noConflict=function(){f.fn.dropdown=c;return this};f(document).on("click.dropdown.data-api",d).on("click.dropdown.data-api",".dropdown form",function(g){g.stopPropagation()}).on("click.dropdown.data-api",b,a.prototype.toggle).on("keydown.dropdown.data-api",b+", [role=menu]",a.prototype.keydown)}(window.jQuery);!function(c){var b=function(e,d){this.options=d;this.$element=c(e).delegate('[data-dismiss="modal"]',"click.dismiss.modal",c.proxy(this.hide,this));this.options.remote&&this.$element.find(".modal-body").load(this.options.remote)};b.prototype={constructor:b,toggle:function(){return this[!this.isShown?"show":"hide"]()},show:function(){var d=this,f=c.Event("show");this.$element.trigger(f);if(this.isShown||f.isDefaultPrevented()){return}this.isShown=true;this.escape();this.backdrop(function(){var e=c.support.transition&&d.$element.hasClass("fade");if(!d.$element.parent().length){d.$element.appendTo(document.body)}d.$element.show();if(e){d.$element[0].offsetWidth}d.$element.addClass("in").attr("aria-hidden",false);d.enforceFocus();e?d.$element.one(c.support.transition.end,function(){d.$element.focus().trigger("shown")}):d.$element.focus().trigger("shown")})},hide:function(f){f&&f.preventDefault();var d=this;f=c.Event("hide");this.$element.trigger(f);if(!this.isShown||f.isDefaultPrevented()){return}this.isShown=false;this.escape();c(document).off("focusin.modal");this.$element.removeClass("in").attr("aria-hidden",true);c.support.transition&&this.$element.hasClass("fade")?this.hideWithTransition():this.hideModal()},enforceFocus:function(){var d=this;c(document).on("focusin.modal",function(f){if(d.$element[0]!==f.target&&!d.$element.has(f.target).length){d.$element.focus()}})},escape:function(){var d=this;if(this.isShown&&this.options.keyboard){this.$element.on("keyup.dismiss.modal",function(f){f.which==27&&d.hide()})}else{if(!this.isShown){this.$element.off("keyup.dismiss.modal")}}},hideWithTransition:function(){var d=this,e=setTimeout(function(){d.$element.off(c.support.transition.end);d.hideModal()},500);this.$element.one(c.support.transition.end,function(){clearTimeout(e);d.hideModal()})},hideModal:function(){var d=this;this.$element.hide();this.backdrop(function(){d.removeBackdrop();d.$element.trigger("hidden")})},removeBackdrop:function(){this.$backdrop&&this.$backdrop.remove();this.$backdrop=null},backdrop:function(g){var f=this,e=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var d=c.support.transition&&e;this.$backdrop=c('<div class="modal-backdrop '+e+'" />').appendTo(document.body);this.$backdrop.click(this.options.backdrop=="static"?c.proxy(this.$element[0].focus,this.$element[0]):c.proxy(this.hide,this));if(d){this.$backdrop[0].offsetWidth}this.$backdrop.addClass("in");if(!g){return}d?this.$backdrop.one(c.support.transition.end,g):g()}else{if(!this.isShown&&this.$backdrop){this.$backdrop.removeClass("in");c.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one(c.support.transition.end,g):g()}else{if(g){g()}}}}};var a=c.fn.modal;c.fn.modal=function(d){return this.each(function(){var g=c(this),f=g.data("modal"),e=c.extend({},c.fn.modal.defaults,g.data(),typeof d=="object"&&d);if(!f){g.data("modal",(f=new b(this,e)))}if(typeof d=="string"){f[d]()}else{if(e.show){f.show()}}})};c.fn.modal.defaults={backdrop:true,keyboard:true,show:true};c.fn.modal.Constructor=b;c.fn.modal.noConflict=function(){c.fn.modal=a;return this};c(document).on("click.modal.data-api",'[data-toggle="modal"]',function(i){var h=c(this),f=h.attr("href"),d=c(h.attr("data-target")||(f&&f.replace(/.*(?=#[^\s]+$)/,""))),g=d.data("modal")?"toggle":c.extend({remote:!/#/.test(f)&&f},d.data(),h.data());i.preventDefault();d.modal(g).one("hide",function(){h.focus()})})}(window.jQuery);!function(c){var b=function(e,d){this.init("tooltip",e,d)};b.prototype={constructor:b,init:function(k,h,f){var l,d,j,e,g;this.type=k;this.$element=c(h);this.options=this.getOptions(f);this.enabled=true;j=this.options.trigger.split(" ");for(g=j.length;g--;){e=j[g];if(e=="click"){this.$element.on("click."+this.type,this.options.selector,c.proxy(this.toggle,this))}else{if(e!="manual"){l=e=="hover"?"mouseenter":"focus";d=e=="hover"?"mouseleave":"blur";this.$element.on(l+"."+this.type,this.options.selector,c.proxy(this.enter,this));this.$element.on(d+"."+this.type,this.options.selector,c.proxy(this.leave,this))}}}this.options.selector?(this._options=c.extend({},this.options,{trigger:"manual",selector:""})):this.fixTitle()},getOptions:function(d){d=c.extend({},c.fn[this.type].defaults,this.$element.data(),d);if(d.delay&&typeof d.delay=="number"){d.delay={show:d.delay,hide:d.delay}}return d},enter:function(h){var g=c.fn[this.type].defaults,f={},d;this._options&&c.each(this._options,function(e,i){if(g[e]!=i){f[e]=i}},this);d=c(h.currentTarget)[this.type](f).data(this.type);if(!d.options.delay||!d.options.delay.show){return d.show()}clearTimeout(this.timeout);d.hoverState="in";this.timeout=setTimeout(function(){if(d.hoverState=="in"){d.show()}},d.options.delay.show)},leave:function(f){var d=c(f.currentTarget)[this.type](this._options).data(this.type);if(this.timeout){clearTimeout(this.timeout)}if(!d.options.delay||!d.options.delay.hide){return d.hide()}d.hoverState="out";this.timeout=setTimeout(function(){if(d.hoverState=="out"){d.hide()}},d.options.delay.hide)},show:function(){var i,k,g,j,d,h,f=c.Event("show");if(this.hasContent()&&this.enabled){this.$element.trigger(f);if(f.isDefaultPrevented()){return}i=this.tip();this.setContent();if(this.options.animation){i.addClass("fade")}d=typeof this.options.placement=="function"?this.options.placement.call(this,i[0],this.$element[0]):this.options.placement;i.detach().css({top:0,left:0,display:"block"});this.options.container?i.appendTo(this.options.container):i.insertAfter(this.$element);k=this.getPosition();g=i[0].offsetWidth;j=i[0].offsetHeight;switch(d){case"bottom":h={top:k.top+k.height,left:k.left+k.width/2-g/2};break;case"top":h={top:k.top-j,left:k.left+k.width/2-g/2};break;case"left":h={top:k.top+k.height/2-j/2,left:k.left-g};break;case"right":h={top:k.top+k.height/2-j/2,left:k.left+k.width};break}this.applyPlacement(h,d);this.$element.trigger("shown")}},applyPlacement:function(g,h){var i=this.tip(),e=i[0].offsetWidth,l=i[0].offsetHeight,d,j,k,f;i.offset(g).addClass(h).addClass("in");d=i[0].offsetWidth;j=i[0].offsetHeight;if(h=="top"&&j!=l){g.top=g.top+l-j;f=true}if(h=="bottom"||h=="top"){k=0;if(g.left<0){k=g.left*-2;g.left=0;i.offset(g);d=i[0].offsetWidth;j=i[0].offsetHeight}this.replaceArrow(k-e+d,d,"left")}else{this.replaceArrow(j-l,j,"top")}if(f){i.offset(g)}},replaceArrow:function(f,e,d){this.arrow().css(d,f?(50*(1-f/e)+"%"):"")},setContent:function(){var e=this.tip(),d=this.getTitle();e.find(".tooltip-inner")[this.options.html?"html":"text"](d);e.removeClass("fade in top bottom left right")},hide:function(){var d=this,g=this.tip(),f=c.Event("hide");this.$element.trigger(f);if(f.isDefaultPrevented()){return}g.removeClass("in");function h(){var e=setTimeout(function(){g.off(c.support.transition.end).detach()},500);g.one(c.support.transition.end,function(){clearTimeout(e);g.detach()})}c.support.transition&&this.$tip.hasClass("fade")?h():g.detach();this.$element.trigger("hidden");return this},fixTitle:function(){var d=this.$element;if(d.attr("title")||typeof(d.attr("data-original-title"))!="string"){d.attr("data-original-title",d.attr("title")||"").attr("title","")}},hasContent:function(){return this.getTitle()},getPosition:function(){var d=this.$element[0];return c.extend({},(typeof d.getBoundingClientRect=="function")?d.getBoundingClientRect():{width:d.offsetWidth,height:d.offsetHeight},this.$element.offset())},getTitle:function(){var f,d=this.$element,e=this.options;f=d.attr("data-original-title")||(typeof e.title=="function"?e.title.call(d[0]):e.title);return f},tip:function(){return this.$tip=this.$tip||c(this.options.template)},arrow:function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},validate:function(){if(!this.$element[0].parentNode){this.hide();this.$element=null;this.options=null}},enable:function(){this.enabled=true},disable:function(){this.enabled=false},toggleEnabled:function(){this.enabled=!this.enabled},toggle:function(f){var d=f?c(f.currentTarget)[this.type](this._options).data(this.type):this;d.tip().hasClass("in")?d.hide():d.show()},destroy:function(){this.hide().$element.off("."+this.type).removeData(this.type)}};var a=c.fn.tooltip;c.fn.tooltip=function(d){return this.each(function(){var g=c(this),f=g.data("tooltip"),e=typeof d=="object"&&d;if(!f){g.data("tooltip",(f=new b(this,e)))}if(typeof d=="string"){f[d]()}})};c.fn.tooltip.Constructor=b;c.fn.tooltip.defaults={animation:true,placement:"top",selector:false,template:'<div class="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:false,container:false};c.fn.tooltip.noConflict=function(){c.fn.tooltip=a;return this}}(window.jQuery);!function(c){var b=function(e,d){this.init("popover",e,d)};b.prototype=c.extend({},c.fn.tooltip.Constructor.prototype,{constructor:b,setContent:function(){var f=this.tip(),e=this.getTitle(),d=this.getContent();f.find(".popover-title")[this.options.html?"html":"text"](e);f.find(".popover-content")[this.options.html?"html":"text"](d);f.removeClass("fade top bottom left right in")},hasContent:function(){return this.getTitle()||this.getContent()},getContent:function(){var e,d=this.$element,f=this.options;e=(typeof f.content=="function"?f.content.call(d[0]):f.content)||d.attr("data-content");return e},tip:function(){if(!this.$tip){this.$tip=c(this.options.template)}return this.$tip},destroy:function(){this.hide().$element.off("."+this.type).removeData(this.type)}});var a=c.fn.popover;c.fn.popover=function(d){return this.each(function(){var g=c(this),f=g.data("popover"),e=typeof d=="object"&&d;if(!f){g.data("popover",(f=new b(this,e)))}if(typeof d=="string"){f[d]()}})};c.fn.popover.Constructor=b;c.fn.popover.defaults=c.extend({},c.fn.tooltip.defaults,{placement:"right",trigger:"click",content:"",template:'<div class="popover"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'});c.fn.popover.noConflict=function(){c.fn.popover=a;return this}}(window.jQuery);!function(c){function b(g,f){var h=c.proxy(this.process,this),d=c(g).is("body")?c(window):c(g),e;this.options=c.extend({},c.fn.scrollspy.defaults,f);this.$scrollElement=d.on("scroll.scroll-spy.data-api",h);this.selector=(this.options.target||((e=c(g).attr("href"))&&e.replace(/.*(?=#[^\s]+$)/,""))||"")+" .nav li > a";this.$body=c("body");this.refresh();this.process()}b.prototype={constructor:b,refresh:function(){var d=this,e;this.offsets=c([]);this.targets=c([]);e=this.$body.find(this.selector).map(function(){var g=c(this),f=g.data("target")||g.attr("href"),h=/^#\w/.test(f)&&c(f);return(h&&h.length&&[[h.position().top+(!c.isWindow(d.$scrollElement.get(0))&&d.$scrollElement.scrollTop()),f]])||null}).sort(function(g,f){return g[0]-f[0]}).each(function(){d.offsets.push(this[0]);d.targets.push(this[1])})},process:function(){var j=this.$scrollElement.scrollTop()+this.options.offset,f=this.$scrollElement[0].scrollHeight||this.$body[0].scrollHeight,h=f-this.$scrollElement.height(),g=this.offsets,d=this.targets,k=this.activeTarget,e;if(j>=h){return k!=(e=d.last()[0])&&this.activate(e)}for(e=g.length;e--;){k!=d[e]&&j>=g[e]&&(!g[e+1]||j<=g[e+1])&&this.activate(d[e])}},activate:function(f){var e,d;this.activeTarget=f;c(this.selector).parent(".active").removeClass("active");d=this.selector+'[data-target="'+f+'"],'+this.selector+'[href="'+f+'"]';e=c(d).parent("li").addClass("active");if(e.parent(".dropdown-menu").length){e=e.closest("li.dropdown").addClass("active")}e.trigger("activate")}};var a=c.fn.scrollspy;c.fn.scrollspy=function(d){return this.each(function(){var g=c(this),f=g.data("scrollspy"),e=typeof d=="object"&&d;if(!f){g.data("scrollspy",(f=new b(this,e)))}if(typeof d=="string"){f[d]()}})};c.fn.scrollspy.Constructor=b;c.fn.scrollspy.defaults={offset:10};c.fn.scrollspy.noConflict=function(){c.fn.scrollspy=a;return this};c(window).on("load",function(){c('[data-spy="scroll"]').each(function(){var d=c(this);d.scrollspy(d.data())})})}(window.jQuery);!function(c){var b=function(d){this.element=c(d)};b.prototype={constructor:b,show:function(){var j=this.element,g=j.closest("ul:not(.dropdown-menu)"),f=j.attr("data-target"),h,d,i;if(!f){f=j.attr("href");f=f&&f.replace(/.*(?=#[^\s]*$)/,"")}if(j.parent("li").hasClass("active")){return}h=g.find(".active:last a")[0];i=c.Event("show",{relatedTarget:h});j.trigger(i);if(i.isDefaultPrevented()){return}d=c(f);this.activate(j.parent("li"),g);this.activate(d,d.parent(),function(){j.trigger({type:"shown",relatedTarget:h})})},activate:function(f,e,i){var d=e.find("> .active"),h=i&&c.support.transition&&d.hasClass("fade");function g(){d.removeClass("active").find("> .dropdown-menu > .active").removeClass("active");f.addClass("active");if(h){f[0].offsetWidth;f.addClass("in")}else{f.removeClass("fade")}if(f.parent(".dropdown-menu")){f.closest("li.dropdown").addClass("active")}i&&i()}h?d.one(c.support.transition.end,g):g();d.removeClass("in")}};var a=c.fn.tab;c.fn.tab=function(d){return this.each(function(){var f=c(this),e=f.data("tab");if(!e){f.data("tab",(e=new b(this)))}if(typeof d=="string"){e[d]()}})};c.fn.tab.Constructor=b;c.fn.tab.noConflict=function(){c.fn.tab=a;return this};c(document).on("click.tab.data-api",'[data-toggle="tab"], [data-toggle="pill"]',function(d){d.preventDefault();c(this).tab("show")})}(window.jQuery);!function(b){var c=function(e,d){this.$element=b(e);this.options=b.extend({},b.fn.typeahead.defaults,d);this.matcher=this.options.matcher||this.matcher;this.sorter=this.options.sorter||this.sorter;this.highlighter=this.options.highlighter||this.highlighter;this.updater=this.options.updater||this.updater;this.source=this.options.source;this.$menu=b(this.options.menu);this.shown=false;this.listen()};c.prototype={constructor:c,select:function(){var d=this.$menu.find(".active").attr("data-value");this.$element.val(this.updater(d)).change();return this.hide()},updater:function(d){return d},show:function(){var d=b.extend({},this.$element.position(),{height:this.$element[0].offsetHeight});this.$menu.insertAfter(this.$element).css({top:d.top+d.height,left:d.left}).show();this.shown=true;return this},hide:function(){this.$menu.hide();this.shown=false;return this},lookup:function(e){var d;this.query=this.$element.val();if(!this.query||this.query.length<this.options.minLength){return this.shown?this.hide():this}d=b.isFunction(this.source)?this.source(this.query,b.proxy(this.process,this)):this.source;return d?this.process(d):this},process:function(d){var e=this;d=b.grep(d,function(f){return e.matcher(f)});d=this.sorter(d);if(!d.length){return this.shown?this.hide():this}return this.render(d.slice(0,this.options.items)).show()},matcher:function(d){return ~d.toLowerCase().indexOf(this.query.toLowerCase())},sorter:function(f){var g=[],e=[],d=[],h;while(h=f.shift()){if(!h.toLowerCase().indexOf(this.query.toLowerCase())){g.push(h)}else{if(~h.indexOf(this.query)){e.push(h)}else{d.push(h)}}}return g.concat(e,d)},highlighter:function(d){var e=this.query.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&");return d.replace(new RegExp("("+e+")","ig"),function(f,g){return"<strong>"+g+"</strong>"})},render:function(d){var e=this;d=b(d).map(function(f,g){f=b(e.options.item).attr("data-value",g);f.find("a").html(e.highlighter(g));return f[0]});d.first().addClass("active");this.$menu.html(d);return this},next:function(e){var f=this.$menu.find(".active").removeClass("active"),d=f.next();if(!d.length){d=b(this.$menu.find("li")[0])}d.addClass("active")},prev:function(e){var f=this.$menu.find(".active").removeClass("active"),d=f.prev();if(!d.length){d=this.$menu.find("li").last()}d.addClass("active")},listen:function(){this.$element.on("focus",b.proxy(this.focus,this)).on("blur",b.proxy(this.blur,this)).on("keypress",b.proxy(this.keypress,this)).on("keyup",b.proxy(this.keyup,this));if(this.eventSupported("keydown")){this.$element.on("keydown",b.proxy(this.keydown,this))}this.$menu.on("click",b.proxy(this.click,this)).on("mouseenter","li",b.proxy(this.mouseenter,this)).on("mouseleave","li",b.proxy(this.mouseleave,this))},eventSupported:function(d){var e=d in this.$element;if(!e){this.$element.setAttribute(d,"return;");e=typeof this.$element[d]==="function"}return e},move:function(d){if(!this.shown){return}switch(d.keyCode){case 9:case 13:case 27:d.preventDefault();break;case 38:d.preventDefault();this.prev();break;case 40:d.preventDefault();this.next();break}d.stopPropagation()},keydown:function(d){this.suppressKeyPressRepeat=~b.inArray(d.keyCode,[40,38,9,13,27]);this.move(d)},keypress:function(d){if(this.suppressKeyPressRepeat){return}this.move(d)},keyup:function(d){switch(d.keyCode){case 40:case 38:case 16:case 17:case 18:break;case 9:case 13:if(!this.shown){return}this.select();break;case 27:if(!this.shown){return}this.hide();break;default:this.lookup()}d.stopPropagation();d.preventDefault()},focus:function(d){this.focused=true},blur:function(d){this.focused=false;if(!this.mousedover&&this.shown){this.hide()}},click:function(d){d.stopPropagation();d.preventDefault();this.select();this.$element.focus()},mouseenter:function(d){this.mousedover=true;this.$menu.find(".active").removeClass("active");b(d.currentTarget).addClass("active")},mouseleave:function(d){this.mousedover=false;if(!this.focused&&this.shown){this.hide()}}};var a=b.fn.typeahead;b.fn.typeahead=function(d){return this.each(function(){var g=b(this),f=g.data("typeahead"),e=typeof d=="object"&&d;if(!f){g.data("typeahead",(f=new c(this,e)))}if(typeof d=="string"){f[d]()}})};b.fn.typeahead.defaults={source:[],items:8,menu:'<ul class="typeahead dropdown-menu"></ul>',item:'<li><a href="#"></a></li>',minLength:1};b.fn.typeahead.Constructor=c;b.fn.typeahead.noConflict=function(){b.fn.typeahead=a;return this};b(document).on("focus.typeahead.data-api",'[data-provide="typeahead"]',function(f){var d=b(this);if(d.data("typeahead")){return}d.typeahead(d.data())})}(window.jQuery);!function(c){var b=function(e,d){this.options=c.extend({},c.fn.affix.defaults,d);this.$window=c(window).on("scroll.affix.data-api",c.proxy(this.checkPosition,this)).on("click.affix.data-api",c.proxy(function(){setTimeout(c.proxy(this.checkPosition,this),1)},this));this.$element=c(e);this.checkPosition()};b.prototype.checkPosition=function(){if(!this.$element.is(":visible")){return}var h=c(document).height(),j=this.$window.scrollTop(),d=this.$element.offset(),k=this.options.offset,f=k.bottom,g=k.top,i="affix affix-top affix-bottom",e;if(typeof k!="object"){f=g=k}if(typeof g=="function"){g=k.top()}if(typeof f=="function"){f=k.bottom()}e=this.unpin!=null&&(j+this.unpin<=d.top)?false:f!=null&&(d.top+this.$element.height()>=h-f)?"bottom":g!=null&&j<=g?"top":false;if(this.affixed===e){return}this.affixed=e;this.unpin=e=="bottom"?d.top-j:null;this.$element.removeClass(i).addClass("affix"+(e?"-"+e:""))};var a=c.fn.affix;c.fn.affix=function(d){return this.each(function(){var g=c(this),f=g.data("affix"),e=typeof d=="object"&&d;if(!f){g.data("affix",(f=new b(this,e)))}if(typeof d=="string"){f[d]()}})};c.fn.affix.Constructor=b;c.fn.affix.defaults={offset:0};c.fn.affix.noConflict=function(){c.fn.affix=a;return this};c(window).on("load",function(){c('[data-spy="affix"]').each(function(){var e=c(this),d=e.data();d.offset=d.offset||{};d.offsetBottom&&(d.offset.bottom=d.offsetBottom);d.offsetTop&&(d.offset.top=d.offsetTop);e.affix(d)})})}(window.jQuery);
(function(f){var g="<div class='modal' style=\"display: none;\"><div class='modal-header loading'><a href='#' class='close'></a><span class='loader'></span><h3></h3></div><div class='modal-body'></div><div class='modal-footer'></div></div>";var i=function(n,l){this.__init(n,l);var m=this;var o=this.__handle;this.__ajaxCompleteTrigger=f.proxy(function(){this.trigger("dialog2.ajax-complete");this.trigger("dialog2.content-update")},o);this.__ajaxStartTrigger=f.proxy(function(){this.trigger("dialog2.ajax-start")},o);this.__ajaxBeforeSend=f.proxy(function(q,p){o.trigger("dialog2.before-send",[q,p]);if(f.isFunction(f.fn.dialog2.defaults.beforeSend)){f.fn.dialog2.defaults.beforeSend.call(this,q,p)}},o);this.__removeDialog=f.proxy(this.__remove,this);o.bind("dialog2.ajax-start",function(){m.options({buttons:l.autoAddCancelButton?c():{}});o.parent().addClass("loading")});o.bind("dialog2.content-update",function(){m.__ajaxify();m.__updateMarkup();m.__focus()});o.bind("dialog2.ajax-complete",function(){o.parent().removeClass("loading")});this.options(l);o.trigger("dialog2.content-update")};i.prototype={__init:function(n,m){var o=f(n);var p;if(!o.is(".modal-body")){var l=f('<div class="modal-backdrop"></div>').hide();var q=f(g);if(m.modalClass){q.addClass(m.modalClass);delete m.modalClass}f(".modal-header a.close",q).text(unescape("%D7")).click(function(r){r.preventDefault();f(this).parents(".modal").find(".modal-body").dialog2("close")});f("body").append(l).append(q);p=f(".modal-body",q);if(o.is("div")&&o.length==1){p.replaceWith(o);o.addClass("modal-body").show();p=o}else{p.append(o)}if(m.id){p.attr("id",m.id)}}else{p=o}this.__handle=p;this.__overlay=p.parent().prev(".modal-backdrop");this.__addFocusCatchers(q)},__addFocusCatchers:function(l){l.prepend(new d(this.__handle,true));l.append(new d(this.__handle,false))},__updateMarkup:function(){var m=this;var p=m.__handle;p.trigger("dialog2.before-update-markup");var l={};var q=f(".form-actions",p).css({position:"absolute",left:"-9999px",height:"1px"});var n=q.find("input[type=submit], input[type=button], input[type=reset], button, .btn");if(n.length){l.buttons={};n.each(function(){var s=f(this);var r=s.is("input")?s.val()||s.attr("type"):s.html();l.buttons[r]={primary:s.is("input[type=submit] .btn-primary"),type:s.attr("class"),click:function(t){if(s.is("a")){window.location=s[0].href}s.click();if(s.is(".close-dialog")){t.preventDefault();m.close()}}}})}var o=p.find("h1").hide();if(o.length>0){l.title=o.html()}m.options(l);p.trigger("dialog2.after-update-markup")},__ajaxify:function(){var m=this;var n=this.__handle;n.trigger("dialog2.before-ajaxify");n.find("a.ajax").click(function(p){var o=f(this).attr("href");m.load(o);p.preventDefault()}).removeClass("ajax");if(f.fn.ajaxForm){var l={target:n,success:m.__ajaxCompleteTrigger,beforeSubmit:m.__ajaxStartTrigger,beforeSend:m.__ajaxBeforeSend,error:function(){throw dialogError("Form submit failed: "+f.makeArray(arguments))}};f("form.ajax",n).removeClass("ajax").ajaxForm(l)}n.trigger("dialog2.after-ajaxify")},__remove:function(){this.__overlay.remove();this.__handle.removeData("dialog2").parent().remove()},__focus:function(l){var n=this.__handle;var p=n.find("a, input:not([type=hidden]), .btn, select, textarea, button").not("[tabindex='0']").filter(function(){return f(this).parents(".form-actions").length==0}).eq(0);var m=n.parent().find(".modal-footer").find("input[type=submit], input[type=button], .btn, button");var o=p.add(m);var q=o[l?"last":"first"]();q.focus();n.trigger("dialog2.focussed",[q.get(0)]);return this},focus:function(){return this.__focus()},close:function(){var m=this.__handle;var l=this.__overlay;l.hide();m.parent().hide().end().trigger("dialog2.closed").removeClass("opened")},open:function(){var l=this.__handle;if(!l.is(".opened")){this.__overlay.show();l.trigger("dialog2.before-open").addClass("opened").parent().show().end().trigger("dialog2.opened");this.__focus()}},addButton:function(m,l){var o=this.__handle;var q=f.isFunction(l)?l:l.click;var p=o.siblings(".modal-footer");var n=f("<a href='#' class='btn'></a>").html(m).click(function(r){q.apply(o,[r]);r.preventDefault()});if(l.primary){n.addClass("btn-primary")}if(l.type){n.addClass(l.type)}p.append(n)},removeButton:function(l){var m=this.__handle.siblings(".modal-footer");m.find("a.btn").filter(function(n,o){return f(o).text()==l}).remove();return this},load:function(m){var n=this.__handle;if(n.is(":empty")){var l=this.options().initialLoadText;n.html(f("<span></span>").text(l))}n.trigger("dialog2.ajax-start");a.call(n,m,this.__ajaxCompleteTrigger,this.__ajaxBeforeSend);return this},options:function(n){var l=this.__handle.data("options");if(!n){return l}var p=n.buttons;delete n.buttons;if(!l){this.__handle.data("options",n)}var o=this;var q=o.__handle;var m=o.__overlay;var s=q.parent();if(n.title){f(".modal-header h3",s).html(n.title)}if(p){if(p.__mode!="append"){f(".modal-footer",s).empty()}f.each(p,function(t,u){o.addButton(t,u)})}if(k(n.closeOnOverlayClick)){m.unbind("click");if(n.closeOnOverlayClick){m.click(function(t){if(f(t.target).is(".modal-backdrop")){o.close()}})}}if(k(n.showCloseHandle)){var r=n.showCloseHandle?"show":"hide";f(".modal-header .close",s)[r]()}if(k(n.removeOnClose)){q.unbind("dialog2.closed",this.__removeDialog);if(n.removeOnClose){q.bind("dialog2.closed",this.__removeDialog)}}if(n.autoOpen===true){this.open()}if(n.content){this.load(n.content)}delete n.buttons;n=f.extend(true,{},l,n);this.__handle.data("options",n);return this},handle:function(){return this.__handle}};function d(m,l){return f("<span />").css({"float":"right",width:"0px"}).attr("tabindex",0).focus(function(n){f(m).dialog2("__focus",l);n.preventDefault()})}f.extend(f.fn,{dialog2:function(){var n=f.makeArray(arguments);var p=n.shift();var o=f(this).data("dialog2");if(!o){var m=f.extend(true,{},f.fn.dialog2.defaults);if(f.isPlainObject(p)){m=f.extend(true,m,p)}o=new i(this,m);o.handle().data("dialog2",o)}else{if(typeof p=="string"){var q=o[p];if(q){var l=o[p].apply(o,n);return(l==o?o.handle():l)}else{throw new e("Unknown API method '"+p+"'")}}else{if(f.isPlainObject(p)){o.options(p)}else{throw new e("Unknown API invocation: "+p+" with args "+n)}}}return o.handle()}});f(document).ready(function(){f(document).keyup(function(l){if(l.which==27){f(this).find(".modal > .opened").each(function(){var m=f(this);if(m.dialog2("options").closeOnEscape){m.dialog2("close")}})}})});f(document).ready(function(l){f(document).keyup(function(m){if(m.which==9){if(f(".modal .opened").length){setTimeout(function(){var o=document.activeElement;if(o){var n=f(o).parents(".modal").find(".modal-body.opened");if(n.length!=0){return}}f(".modal-body.opened").dialog2("focus")},0)}}})});function k(l){return typeof l=="boolean"}function e(l){new Error("[jquery.dialog2] "+l)}f.fn.dialog2.defaults={autoOpen:true,closeOnOverlayClick:true,removeOnClose:true,showCloseHandle:true,initialLoadText:"",closeOnEscape:true,beforeSend:null};f.fn.dialog2.localization={de:{cancel:"Abbrechen"},en:{cancel:"Cancel"}};var b=f.fn.dialog2.localization.en;function h(l){return b[l.toLowerCase()]||l}function j(m,l,n){n=n||{};n[h(m)]=l;return n}f.extend(f.fn.dialog2.localization,{localizedButton:j,get:h,setLocale:function(l){var m=f.fn.dialog2.localization[l];if(m==null){throw new Error("No localizaton for language "+l)}else{b=m}}});function c(){return j("close",function(){f(this).dialog2("close")})}function a(p,r,o){if(!this.length){return this}var l,q,n,m=this,s=p.indexOf(" ");if(s>=0){l=p.slice(s,p.length);p=p.slice(0,s)}jQuery.ajax({url:p,type:q,dataType:"html",beforeSend:o,complete:function(u,t){if(r){m.each(r,n||[u.responseText,t,u])}}}).done(function(t){n=arguments;m.html(l?jQuery("<div>").append(t.replace(rscript,"")).find(l):t)});return this}if(f.fn.controls&&f.fn.controls.bindings){f.extend(f.fn.controls.bindings,{"a.open-dialog":function(){var l=f(this).removeClass("open-dialog");var q=l.attr("rel");var o=l.attr("href");var m={modal:true};var n;if(q){var p=f("#"+q);if(p.length){n=p}}if(!n){if(q){m.id=q}}if(l.attr("data-dialog-class")){m.modalClass=l.attr("data-dialog-class")}if(l.attr("title")){m.title=l.attr("title")}f.each(f.fn.dialog2.defaults,function(r,s){if(l.attr(r)){m[r]=l.attr(r)=="true"}});if(o&&o!="#"){m.content=o;l.click(function(r){r.preventDefault();f(n||"<div></div>").dialog2(m)})}else{m.removeOnClose=false;m.autoOpen=false;n=n||"<div></div>";f(n).dialog2(m);l.attr("href","#").click(function(r){r.preventDefault();f(n).dialog2("open")})}}})}})(jQuery);
(function(e){var b=e.fn.dialog2.localization.localizedButton;var c={alert:function(i,f){f=e.extend({},f);var k=e.extend({},e.fn.dialog2.helpers.defaults.alert,f);var g=e("<div />");var j=f.close;delete f.close;var h=b(k.buttonLabelOk,a(j,g));return d(g,i,k.title,h,f)},confirm:function(i,f){f=e.extend({},f);var l=e.extend({},e.fn.dialog2.helpers.defaults.confirm,f);var g=e("<div />");var k=f.confirm;delete f.confirm;var j=f.decline;delete f.decline;var h={};b(l.buttonLabelYes,a(k,g),h);b(l.buttonLabelNo,a(j,g),h);return d(g,i,l.title,h,f)},prompt:function(o,p){p=e.extend({},p,{closeOnEscape:true});var g=e.extend({},e.fn.dialog2.helpers.defaults.prompt,p);var m="dialog2.helpers.prompt.input.id";var l=e("<input type='text' class='span6' />").attr("id",m).val(p.defaultValue||"");var f=e("<form class='form-stacked'></form>");f.append(e("<label/>").attr("for",m).text(o));f.append(l);var i=e("<div />");var h;if(p.ok){var k=p.ok;h=function(q){k.call(i,q,l.val())}}delete p.ok;var n=p.cancel;delete p.cancel;var j={};b(g.buttonLabelOk,a(h,i),j);b(g.buttonLabelCancel,a(n,i),j);f.bind("submit",a(h,i));d(i,f,g.title,j,p)},defaults:{}};function a(g,f){return e.proxy(function(h){h.preventDefault();e(this).dialog2("close");if(g){g.call(this,h)}},f||this)}function d(i,h,j,g,f){f.buttons=g;f.title=j;return i.append(h).dialog2(f)}e.extend(true,e.fn.dialog2,{helpers:c});e.extend(e.fn.dialog2.helpers.defaults,{alert:{title:"Alert",buttonLabelOk:"Ok"},prompt:{title:"Prompt",buttonLabelOk:"Ok",buttonLabelCancel:"Cancel"},confirm:{title:"Confirmation",buttonLabelYes:"Yes",buttonLabelNo:"No"}})})(jQuery);
(function(d){window._originalAlert=window.alert;window.alert=function(f,e){if(f!==null&&f==="License file corrupt."){return}d.extend(d.fn.dialog2.helpers.defaults,{alert:{title:"Alerta",buttonLabelOk:"Aceptar"}});d.fn.dialog2.helpers.alert(f,{closeOnOverlayClick:false,closeOnEscape:false,removeOnClose:true,showCloseHandle:false,autoOpen:true,close:function(){if(e&&jQuery.isFunction(e)){e()}}})};window._originalConfirm=window.confirm;window.confirm=function(f,e){d.extend(d.fn.dialog2.helpers.defaults,{confirm:{title:"Confirmación",buttonLabelYes:"Si",buttonLabelNo:"No"}});d.fn.dialog2.helpers.confirm(f,{closeOnOverlayClick:false,closeOnEscape:false,removeOnClose:true,showCloseHandle:false,autoOpen:true,confirm:function(){if(e&&jQuery.isFunction(e)){e(true)}},decline:function(){if(e&&jQuery.isFunction(e)){e(false)}}})};window._originalPrompt=window.prompt;window.prompt=function(g,e,f){d.extend(d.fn.dialog2.helpers.defaults,{prompt:{title:"Entre el valor",buttonLabelOk:"Aceptar",buttonLabelCancel:"Cancelar",}});d.fn.dialog2.helpers.prompt(g,{closeOnOverlayClick:false,closeOnEscape:false,removeOnClose:true,showCloseHandle:false,autoOpen:true,ok:function(h,i){if(e&&jQuery.isFunction(e)){e(i,h)}},cancel:function(h){if(f&&jQuery.isFunction(f)){f(h)}}})};d.fn.dialog2.helpers.prompt=function(n,o){o=d.extend({},o,{closeOnEscape:true});var f=d.extend({},d.fn.dialog2.helpers.defaults.prompt,o);var l="dialog2.helpers.prompt.input.id";var k=d("<input type='text' />").attr("id",l).val(o.defaultValue||"");var e=d("<form class='form-stacked'></form>");e.append(d("<label/>").attr("for",l).text(n));e.append(k);var h=d("<div />");var g;if(o.ok){var j=o.ok;g=function(p){j.call(h,p,k.val())}}delete o.ok;var m=o.cancel;delete o.cancel;var i={};b(f.buttonLabelOk,a(g,h),i);b(f.buttonLabelCancel,a(m,h),i);e.bind("submit",a(g,h));c(h,e,f.title,i,o)};var b=d.fn.dialog2.localization.localizedButton;function a(f,e){return d.proxy(function(g){g.preventDefault();d(this).dialog2("close");if(f){f.call(this,g)}},e||this)}function a(f,e){return d.proxy(function(g){g.preventDefault();d(this).dialog2("close");if(f){f.call(this,g)}},e||this)}function c(i,h,j,g,f){f.buttons=g;f.title=j;return i.append(h).dialog2(f)}})(jQuery);
(function($){var browser=$.browser;if(!browser){function uaMatch(ua){ua=ua.toLowerCase();var match=/(chrome)[ \/]([\w.]+)/.exec(ua)||/(webkit)[ \/]([\w.]+)/.exec(ua)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(ua)||/(msie) ([\w.]+)/.exec(ua)||ua.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(ua)||[];return{browser:match[1]||"",version:match[2]||"0"}}var matched=uaMatch(navigator.userAgent);browser={};if(matched.browser){browser[matched.browser]=true;browser.version=matched.version}if(browser.chrome){browser.webkit=true}else{if(browser.webkit){browser.safari=true}}
/*!
     * START code from jQuery UI
     *
     * Copyright 2011, AUTHORS.txt (http://jqueryui.com/about)
     * Dual licensed under the MIT or GPL Version 2 licenses.
     * http://jquery.org/license
     *
     * http://docs.jquery.com/UI
     */
}if(typeof $.support.selectstart!="function"){$.support.selectstart="onselectstart" in document.createElement("div")}if(typeof $.fn.disableSelection!="function"){$.fn.disableSelection=function(){return this.bind(($.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",function(event){event.preventDefault()})}}$.addFlex=function(t,p){if(t.grid){return false}p=$.extend({height:200,width:"auto",striped:true,novstripe:false,minwidth:30,minheight:80,resizable:true,url:false,method:"POST",dataType:"xml",errormsg:"Connection Error",usepager:false,nowrap:true,page:1,total:1,useRp:true,rp:15,rpOptions:[10,15,20,30,50],title:false,idProperty:"id",pagestat:"Displaying {from} to {to} of {total} items",pagetext:"Page",outof:"of",findtext:"Find",params:[],procmsg:"Processing, please wait ...",query:"",qtype:"",nomsg:"No items",minColToggle:1,showToggleBtn:true,hideOnSubmit:true,autoload:true,blockOpacity:0.5,preProcess:false,addTitleToCell:false,dblClickResize:false,onDragCol:false,onToggleCol:false,onChangeSort:false,onDoubleClick:false,onSuccess:false,onError:false,onSubmit:false,__mw:{datacol:function(p,col,val){var _col=(typeof p.datacol[col]=="function")?p.datacol[col](val):val;if(typeof p.datacol["*"]=="function"){return p.datacol["*"](_col)}else{return _col}}},getGridClass:function(g){return g},datacol:{},colResize:true,colMove:true},p);$(t).show().attr({cellPadding:0,cellSpacing:0,border:0}).removeAttr("width");var g={hset:{},rePosDrag:function(){var cdleft=0-this.hDiv.scrollLeft;if(this.hDiv.scrollLeft>0){cdleft-=Math.floor(p.cgwidth/2)}$(g.cDrag).css({top:g.hDiv.offsetTop+1});var cdpad=this.cdpad;var cdcounter=0;$("div",g.cDrag).hide();$("thead tr:first th:visible",this.hDiv).each(function(){var n=$("thead tr:first th:visible",g.hDiv).index(this);var cdpos=parseInt($("div",this).width());if(cdleft==0){cdleft-=Math.floor(p.cgwidth/2)}cdpos=cdpos+cdleft+cdpad;if(isNaN(cdpos)){cdpos=0}$("div:eq("+n+")",g.cDrag).css({left:(!(browser.mozilla)?cdpos-cdcounter:cdpos)+"px"}).show();cdleft=cdpos;cdcounter++})},fixHeight:function(newH){newH=false;if(!newH){newH=$(g.bDiv).height()}var hdHeight=$(this.hDiv).height();$("div",this.cDrag).each(function(){$(this).height(newH+hdHeight)});var nd=parseInt($(g.nDiv).height(),10);if(nd>newH){$(g.nDiv).height(newH).width(200)}else{$(g.nDiv).height("auto").width("auto")}$(g.block).css({height:newH,marginBottom:(newH*-1)});var hrH=g.bDiv.offsetTop+newH;if(p.height!="auto"&&p.resizable){hrH=g.vDiv.offsetTop}$(g.rDiv).css({height:hrH})},dragStart:function(dragtype,e,obj){if(dragtype=="colresize"&&p.colResize===true){$(g.nDiv).hide();$(g.nBtn).hide();var n=$("div",this.cDrag).index(obj);var ow=$("th:visible div:eq("+n+")",this.hDiv).width();$(obj).addClass("dragging").siblings().hide();$(obj).prev().addClass("dragging").show();this.colresize={startX:e.pageX,ol:parseInt(obj.style.left,10),ow:ow,n:n};$("body").css("cursor","col-resize")}else{if(dragtype=="vresize"){var hgo=false;$("body").css("cursor","row-resize");if(obj){hgo=true;$("body").css("cursor","col-resize")}this.vresize={h:p.height,sy:e.pageY,w:p.width,sx:e.pageX,hgo:hgo}}else{if(dragtype=="colMove"){$(e.target).disableSelection();if((p.colMove===true)){$(g.nDiv).hide();$(g.nBtn).hide();this.hset=$(this.hDiv).offset();this.hset.right=this.hset.left+$("table",this.hDiv).width();this.hset.bottom=this.hset.top+$("table",this.hDiv).height();this.dcol=obj;this.dcoln=$("th",this.hDiv).index(obj);this.colCopy=document.createElement("div");this.colCopy.className="colCopy";this.colCopy.innerHTML=obj.innerHTML;if(browser.msie){this.colCopy.className="colCopy ie"}$(this.colCopy).css({position:"absolute","float":"left",display:"none",textAlign:obj.align});$("body").append(this.colCopy);$(this.cDrag).hide()}}}}$("body").noSelect()},dragMove:function(e){if(this.colresize){var n=this.colresize.n;var diff=e.pageX-this.colresize.startX;var nleft=this.colresize.ol+diff;var nw=this.colresize.ow+diff;if(nw>p.minwidth){$("div:eq("+n+")",this.cDrag).css("left",nleft);this.colresize.nw=nw}}else{if(this.vresize){var v=this.vresize;var y=e.pageY;var diff=y-v.sy;if(!p.defwidth){p.defwidth=p.width}if(p.width!="auto"&&!p.nohresize&&v.hgo){var x=e.pageX;var xdiff=x-v.sx;var newW=v.w+xdiff;if(newW>p.defwidth){this.gDiv.style.width=newW+"px";p.width=newW}}var newH=v.h+diff;if((newH>p.minheight||p.height<p.minheight)&&!v.hgo){this.bDiv.style.height=newH+"px";p.height=newH;this.fixHeight(newH)}v=null}else{if(this.colCopy){$(this.dcol).addClass("thMove").removeClass("thOver");if(e.pageX>this.hset.right||e.pageX<this.hset.left||e.pageY>this.hset.bottom||e.pageY<this.hset.top){$("body").css("cursor","move")}else{$("body").css("cursor","pointer")}$(this.colCopy).css({top:e.pageY+10,left:e.pageX+20,display:"block"})}}}},dragEnd:function(){if(this.colresize){var n=this.colresize.n;var nw=this.colresize.nw;$("th:visible div:eq("+n+")",this.hDiv).css("width",nw);$("tr",this.bDiv).each(function(){var $tdDiv=$("td:visible div:eq("+n+")",this);$tdDiv.css("width",nw);g.addTitleToCell($tdDiv)});this.hDiv.scrollLeft=this.bDiv.scrollLeft;$("div:eq("+n+")",this.cDrag).siblings().show();$(".dragging",this.cDrag).removeClass("dragging");this.rePosDrag();this.fixHeight();this.colresize=false;if($.cookies){var name=p.colModel[n].name;$.cookie("flexiwidths/"+name,nw)}}else{if(this.vresize){this.vresize=false}else{if(this.colCopy){$(this.colCopy).remove();if(this.dcolt!==null){if(this.dcoln>this.dcolt){$("th:eq("+this.dcolt+")",this.hDiv).before(this.dcol)}else{$("th:eq("+this.dcolt+")",this.hDiv).after(this.dcol)}this.switchCol(this.dcoln,this.dcolt);$(this.cdropleft).remove();$(this.cdropright).remove();this.rePosDrag();if(p.onDragCol){p.onDragCol(this.dcoln,this.dcolt)}}this.dcol=null;this.hset=null;this.dcoln=null;this.dcolt=null;this.colCopy=null;$(".thMove",this.hDiv).removeClass("thMove");$(this.cDrag).show()}}}$("body").css("cursor","default");$("body").noSelect(false)},toggleCol:function(cid,visible){var ncol=$("th[axis='col"+cid+"']",this.hDiv)[0];var n=$("thead th",g.hDiv).index(ncol);var cb=$("input[value="+cid+"]",g.nDiv)[0];if(visible==null){visible=ncol.hidden}if($("input:checked",g.nDiv).length<p.minColToggle&&!visible){return false}if(visible){ncol.hidden=false;$(ncol).show();cb.checked=true}else{ncol.hidden=true;$(ncol).hide();cb.checked=false}$("tbody tr",t).each(function(){if(visible){$("td:eq("+n+")",this).show()}else{$("td:eq("+n+")",this).hide()}});this.rePosDrag();if(p.onToggleCol){p.onToggleCol(cid,visible)}return visible},switchCol:function(cdrag,cdrop){$("tbody tr",t).each(function(){if(cdrag>cdrop){$("td:eq("+cdrop+")",this).before($("td:eq("+cdrag+")",this))}else{$("td:eq("+cdrop+")",this).after($("td:eq("+cdrag+")",this))}});if(cdrag>cdrop){$("tr:eq("+cdrop+")",this.nDiv).before($("tr:eq("+cdrag+")",this.nDiv))}else{$("tr:eq("+cdrop+")",this.nDiv).after($("tr:eq("+cdrag+")",this.nDiv))}if(browser.msie&&browser.version<7){$("tr:eq("+cdrop+") input",this.nDiv)[0].checked=true}this.hDiv.scrollLeft=this.bDiv.scrollLeft},scroll:function(){this.hDiv.scrollLeft=this.bDiv.scrollLeft;this.rePosDrag()},addData:function(data){if(p.dataType=="json"){data=$.extend({rows:[],page:0,total:0},data)}if(p.preProcess){data=p.preProcess(data)}$(".pReload",this.pDiv).removeClass("loading");this.loading=false;if(!data){$(".pPageStat",this.pDiv).html(p.errormsg);if(p.onSuccess){p.onSuccess(this)}return false}if(p.dataType=="xml"){p.total=+$("rows total",data).text()}else{p.total=data.total}if(p.total===0){$("tr, a, td, div",t).unbind();$(t).empty();p.pages=1;p.page=1;this.buildpager();$(".pPageStat",this.pDiv).html(p.nomsg);if(p.onSuccess){p.onSuccess(this)}return false}p.pages=Math.ceil(p.total/p.rp);if(p.dataType=="xml"){p.page=+$("rows page",data).text()}else{p.page=data.page}this.buildpager();var tbody=document.createElement("tbody");if(p.dataType=="json"){$.each(data.rows,function(i,row){var tr=document.createElement("tr");var jtr=$(tr);if(row.name){tr.name=row.name}if(row.color){jtr.css("background",row.color)}else{if(i%2&&p.striped){tr.className="erow"}}if(row[p.idProperty]){tr.id="row"+row[p.idProperty];jtr.attr("data-id",row[p.idProperty])}$("thead tr:first th",g.hDiv).each(function(){var td=document.createElement("td");var idx=$(this).attr("axis").substr(3);td.align=this.align;if(typeof row.cell=="undefined"){td.innerHTML=row[p.colModel[idx].name]}else{var iHTML="";if(typeof row.cell[idx]!="undefined"){iHTML=(row.cell[idx]!==null)?row.cell[idx]:""}else{iHTML=row.cell[p.colModel[idx].name]}td.innerHTML=p.__mw.datacol(p,$(this).attr("abbr"),iHTML)}var offs=td.innerHTML.indexOf("<BGCOLOR=");if(offs>0){$(td).css("background",text.substr(offs+7,7))}$(td).attr("abbr",$(this).attr("abbr"));$(tr).append(td);td=null});if($("thead",this.gDiv).length<1){for(idx=0;idx<row.cell.length;idx++){var td=document.createElement("td");if(typeof row.cell[idx]!="undefined"){td.innerHTML=(row.cell[idx]!=null)?row.cell[idx]:""}else{td.innerHTML=row.cell[p.colModel[idx].name]}$(tr).append(td);td=null}}$(tbody).append(tr);tr=null})}else{if(p.dataType=="xml"){var i=1;$("rows row",data).each(function(){i++;var tr=document.createElement("tr");if($(this).attr("name")){tr.name=$(this).attr("name")}if($(this).attr("color")){$(tr).css("background",$(this).attr("id"))}else{if(i%2&&p.striped){tr.className="erow"}}var nid=$(this).attr("id");if(nid){tr.id="row"+nid}nid=null;var robj=this;$("thead tr:first th",g.hDiv).each(function(){var td=document.createElement("td");var idx=$(this).attr("axis").substr(3);td.align=this.align;var text=$("cell:eq("+idx+")",robj).text();var offs=text.indexOf("<BGCOLOR=");if(offs>0){$(td).css("background",text.substr(offs+7,7))}td.innerHTML=p.__mw.datacol(p,$(this).attr("abbr"),text);$(td).attr("abbr",$(this).attr("abbr"));$(tr).append(td);td=null});if($("thead",this.gDiv).length<1){$("cell",this).each(function(){var td=document.createElement("td");td.innerHTML=$(this).text();$(tr).append(td);td=null})}$(tbody).append(tr);tr=null;robj=null})}}$("tr",t).unbind();$(t).empty();$(t).append(tbody);this.addCellProp();this.addRowProp();this.rePosDrag();tbody=null;data=null;i=null;if(p.onSuccess){p.onSuccess(this)}if(p.hideOnSubmit){$(g.block).remove()}this.hDiv.scrollLeft=this.bDiv.scrollLeft;if(browser.opera){$(t).css("visibility","visible")}},changeSort:function(th){if(this.loading){return true}$(g.nDiv).hide();$(g.nBtn).hide();if(p.sortname==$(th).attr("abbr")){if(p.sortorder=="asc"){p.sortorder="desc"}else{p.sortorder="asc"}}$(th).addClass("sorted").siblings().removeClass("sorted");$(".sdesc",this.hDiv).removeClass("sdesc");$(".sasc",this.hDiv).removeClass("sasc");$("div",th).addClass("s"+p.sortorder);p.sortname=$(th).attr("abbr");if(p.onChangeSort){p.onChangeSort(p.sortname,p.sortorder)}else{this.populate()}},buildpager:function(){$(".pcontrol input",this.pDiv).val(p.page);$(".pcontrol span",this.pDiv).html(p.pages);var r1=(p.page-1)*p.rp+1;var r2=r1+p.rp-1;if(p.total<r2){r2=p.total}var stat=p.pagestat;stat=stat.replace(/{from}/,r1);stat=stat.replace(/{to}/,r2);stat=stat.replace(/{total}/,p.total);$(".pPageStat",this.pDiv).html(stat)},populate:function(){if(this.loading){return true}if(p.onSubmit){var gh=p.onSubmit();if(!gh){return false}}this.loading=true;if(!p.url){return false}$(".pPageStat",this.pDiv).html(p.procmsg);$(".pReload",this.pDiv).addClass("loading");$(g.block).css({top:g.bDiv.offsetTop});if(p.hideOnSubmit){$(this.gDiv).prepend(g.block)}if(browser.opera){$(t).css("visibility","hidden")}if(!p.newp){p.newp=1}if(p.page>p.pages){p.page=p.pages}var param=[{name:"page",value:p.newp},{name:"rp",value:p.rp},{name:"sortname",value:p.sortname},{name:"sortorder",value:p.sortorder},{name:"query",value:p.query},{name:"qtype",value:p.qtype}];if(p.params.length){for(var pi=0;pi<p.params.length;pi++){param[param.length]=p.params[pi]}}$.ajax({type:p.method,url:p.url,data:param,dataType:p.dataType,success:function(data){g.addData(data)},error:function(XMLHttpRequest,textStatus,errorThrown){try{if(p.onError){p.onError(XMLHttpRequest,textStatus,errorThrown)}}catch(e){}}})},doSearch:function(){p.query=$("input[name=q]",g.sDiv).val();p.qtype=$("select[name=qtype]",g.sDiv).val();p.newp=1;this.populate()},changePage:function(ctype){if(this.loading){return true}switch(ctype){case"first":p.newp=1;break;case"prev":if(p.page>1){p.newp=parseInt(p.page,10)-1}break;case"next":if(p.page<p.pages){p.newp=parseInt(p.page,10)+1}break;case"last":p.newp=p.pages;break;case"input":var nv=parseInt($(".pcontrol input",this.pDiv).val(),10);if(isNaN(nv)){nv=1}if(nv<1){nv=1}else{if(nv>p.pages){nv=p.pages}}$(".pcontrol input",this.pDiv).val(nv);p.newp=nv;break}if(p.newp==p.page){return false}if(p.onChangePage){p.onChangePage(p.newp)}else{this.populate()}},addCellProp:function(){$("tbody tr td",g.bDiv).each(function(){var tdDiv=document.createElement("div");var n=$("td",$(this).parent()).index(this);var pth=$("th:eq("+n+")",g.hDiv).get(0);if(pth!=null){if(p.sortname==$(pth).attr("abbr")&&p.sortname){this.className="sorted"}$(tdDiv).css({textAlign:pth.align,width:$("div:first",pth)[0].style.width});if(pth.hidden){$(this).css("display","none")}}if(p.nowrap==false){$(tdDiv).css("white-space","normal")}if(this.innerHTML==""){this.innerHTML="&nbsp;"}tdDiv.innerHTML=this.innerHTML;var prnt=$(this).parent()[0];var pid=false;if(prnt.id){pid=prnt.id.substr(3)}if(pth!=null){if(pth.process){pth.process(tdDiv,pid)}}$(this).empty().append(tdDiv).removeAttr("width");g.addTitleToCell(tdDiv)})},getCellDim:function(obj){var ht=parseInt($(obj).height(),10);var pht=parseInt($(obj).parent().height(),10);var wt=parseInt(obj.style.width,10);var pwt=parseInt($(obj).parent().width(),10);var top=obj.offsetParent.offsetTop;var left=obj.offsetParent.offsetLeft;var pdl=parseInt($(obj).css("paddingLeft"),10);var pdt=parseInt($(obj).css("paddingTop"),10);return{ht:ht,wt:wt,top:top,left:left,pdl:pdl,pdt:pdt,pht:pht,pwt:pwt}},addRowProp:function(){$("tbody tr",g.bDiv).on("click",function(e){var obj=(e.target||e.srcElement);if(obj.href||obj.type){return true}if(e.ctrlKey||e.metaKey){return}$(this).toggleClass("trSelected");if(p.singleSelect&&!g.multisel){$(this).siblings().removeClass("trSelected")}}).on("mousedown",function(e){if(e.shiftKey){$(this).toggleClass("trSelected");g.multisel=true;this.focus();$(g.gDiv).noSelect()}if(e.ctrlKey||e.metaKey){$(this).toggleClass("trSelected");g.multisel=true;this.focus()}}).on("mouseup",function(e){if(g.multisel&&!(e.ctrlKey||e.metaKey)){g.multisel=false;$(g.gDiv).noSelect(false)}}).on("dblclick",function(){if(p.onDoubleClick){p.onDoubleClick(this,g,p)}}).hover(function(e){if(g.multisel&&e.shiftKey){$(this).toggleClass("trSelected")}},function(){});if(browser.msie&&browser.version<7){$(this).hover(function(){$(this).addClass("trOver")},function(){$(this).removeClass("trOver")})}},combo_flag:true,combo_resetIndex:function(selObj){if(this.combo_flag){selObj.selectedIndex=0}this.combo_flag=true},combo_doSelectAction:function(selObj){eval(selObj.options[selObj.selectedIndex].value);selObj.selectedIndex=0;this.combo_flag=false},addTitleToCell:function(tdDiv){if(p.addTitleToCell){var $span=$("<span />").css("display","none"),$div=(tdDiv instanceof jQuery)?tdDiv:$(tdDiv),div_w=$div.outerWidth(),span_w=0;$("body").children(":first").before($span);$span.html($div.html());$span.css("font-size",""+$div.css("font-size"));$span.css("padding-left",""+$div.css("padding-left"));span_w=$span.innerWidth();$span.remove();if(span_w>div_w){$div.attr("title",$div.text())}else{$div.removeAttr("title")}}},autoResizeColumn:function(obj){if(!p.dblClickResize){return}var n=$("div",this.cDrag).index(obj),$th=$("th:visible div:eq("+n+")",this.hDiv),ol=parseInt(obj.style.left,10),ow=$th.width(),nw=0,nl=0,$span=$("<span />");$("body").children(":first").before($span);$span.html($th.html());$span.css("font-size",""+$th.css("font-size"));$span.css("padding-left",""+$th.css("padding-left"));$span.css("padding-right",""+$th.css("padding-right"));nw=$span.width();$("tr",this.bDiv).each(function(){var $tdDiv=$("td:visible div:eq("+n+")",this),spanW=0;$span.html($tdDiv.html());$span.css("font-size",""+$tdDiv.css("font-size"));$span.css("padding-left",""+$tdDiv.css("padding-left"));$span.css("padding-right",""+$tdDiv.css("padding-right"));spanW=$span.width();nw=(spanW>nw)?spanW:nw});$span.remove();nw=(p.minWidth>nw)?p.minWidth:nw;nl=ol+(nw-ow);$("div:eq("+n+")",this.cDrag).css("left",nl);this.colresize={nw:nw,n:n};g.dragEnd()},pager:0};g=p.getGridClass(g);if(p.colModel){thead=document.createElement("thead");var tr=document.createElement("tr");for(var i=0;i<p.colModel.length;i++){var cm=p.colModel[i];var th=document.createElement("th");$(th).attr("axis","col"+i);if(cm){if($.cookies){var cookie_width="flexiwidths/"+cm.name;if($.cookie(cookie_width)!=undefined){cm.width=$.cookie(cookie_width)}}if(cm.display!=undefined){th.innerHTML=cm.display}if(cm.name&&cm.sortable){$(th).attr("abbr",cm.name)}if(cm.align){th.align=cm.align}if(cm.width){$(th).attr("width",cm.width)}if($(cm).attr("hide")){th.hidden=true}if(cm.process){th.process=cm.process}}else{th.innerHTML="";$(th).attr("width",30)}$(tr).append(th)}$(thead).append(tr);$(t).prepend(thead)}g.gDiv=document.createElement("div");g.mDiv=document.createElement("div");g.hDiv=document.createElement("div");g.bDiv=document.createElement("div");g.vDiv=document.createElement("div");g.rDiv=document.createElement("div");g.cDrag=document.createElement("div");g.block=document.createElement("div");g.nDiv=document.createElement("div");g.nBtn=document.createElement("div");g.iDiv=document.createElement("div");g.tDiv=document.createElement("div");g.sDiv=document.createElement("div");g.pDiv=document.createElement("div");if(p.colResize===false){$(g.cDrag).css("display","none")}if(!p.usepager){g.pDiv.style.display="none"}g.hTable=document.createElement("table");g.gDiv.className="flexigrid";if(p.width!="auto"){g.gDiv.style.width=p.width+(isNaN(p.width)?"":"px")}if(browser.msie){$(g.gDiv).addClass("ie")}if(p.novstripe){$(g.gDiv).addClass("novstripe")}$(t).before(g.gDiv);$(g.gDiv).append(t);if(p.buttons){g.tDiv.className="tDiv";var tDiv2=document.createElement("div");tDiv2.className="tDiv2";for(var i=0;i<p.buttons.length;i++){var btn=p.buttons[i];if(!btn.separator){var btnDiv=document.createElement("div");btnDiv.className="fbutton";btnDiv.innerHTML=("<div><span>")+(btn.hidename?"&nbsp;":btn.name)+("</span></div>");if(btn.bclass){$("span",btnDiv).addClass(btn.bclass).css({paddingLeft:20})}if(btn.bimage){$("span",btnDiv).css("background","url("+btn.bimage+") no-repeat center left")}$("span",btnDiv).css("paddingLeft",20);if(btn.tooltip){$("span",btnDiv)[0].title=btn.tooltip}btnDiv.onpress=btn.onpress;btnDiv.name=btn.name;if(btn.id){btnDiv.id=btn.id}if(btn.onpress){$(btnDiv).click(function(){this.onpress(this.id||this.name,g.gDiv)})}$(tDiv2).append(btnDiv);if(browser.msie&&browser.version<7){$(btnDiv).hover(function(){$(this).addClass("fbOver")},function(){$(this).removeClass("fbOver")})}}else{$(tDiv2).append("<div class='btnseparator'></div>")}}$(g.tDiv).append(tDiv2);$(g.tDiv).append("<div style='clear:both'></div>");$(g.gDiv).prepend(g.tDiv)}g.hDiv.className="hDiv";if(p.combobuttons&&$(g.tDiv2)){var btnDiv=document.createElement("div");btnDiv.className="fbutton";var tSelect=document.createElement("select");$(tSelect).change(function(){g.combo_doSelectAction(tSelect)});$(tSelect).click(function(){g.combo_resetIndex(tSelect)});tSelect.className="cselect";$(btnDiv).append(tSelect);for(i=0;i<p.combobuttons.length;i++){var btn=p.combobuttons[i];if(!btn.separator){var btnOpt=document.createElement("option");btnOpt.innerHTML=btn.name;if(btn.bclass){$(btnOpt).addClass(btn.bclass).css({paddingLeft:20})}if(btn.bimage){$(btnOpt).css("background","url("+btn.bimage+") no-repeat center left")}$(btnOpt).css("paddingLeft",20);if(btn.tooltip){$(btnOpt)[0].title=btn.tooltip}if(btn.onpress){btnOpt.value=btn.onpress}$(tSelect).append(btnOpt)}}$(".tDiv2").append(btnDiv)}$(t).before(g.hDiv);g.hTable.cellPadding=0;g.hTable.cellSpacing=0;$(g.hDiv).append('<div class="hDivBox"></div>');$("div",g.hDiv).append(g.hTable);var thead=$("thead:first",t).get(0);if(thead){$(g.hTable).append(thead)}thead=null;if(!p.colmodel){var ci=0}$("thead tr:first th",g.hDiv).each(function(){var thdiv=document.createElement("div");if($(this).attr("abbr")){$(this).click(function(e){if(!$(this).hasClass("thOver")){return false}var obj=(e.target||e.srcElement);if(obj.href||obj.type){return true}g.changeSort(this)});if($(this).attr("abbr")==p.sortname){this.className="sorted";thdiv.className="s"+p.sortorder}}if(this.hidden){$(this).hide()}if(!p.colmodel){$(this).attr("axis","col"+ci++)}if(this.width==""){this.width=100}$(thdiv).css({textAlign:this.align,width:this.width+"px"});thdiv.innerHTML=this.innerHTML;$(this).empty().append(thdiv).removeAttr("width").mousedown(function(e){g.dragStart("colMove",e,this)}).hover(function(){if(!g.colresize&&!$(this).hasClass("thMove")&&!g.colCopy){$(this).addClass("thOver")}if($(this).attr("abbr")!=p.sortname&&!g.colCopy&&!g.colresize&&$(this).attr("abbr")){$("div",this).addClass("s"+p.sortorder)}else{if($(this).attr("abbr")==p.sortname&&!g.colCopy&&!g.colresize&&$(this).attr("abbr")){var no=(p.sortorder=="asc")?"desc":"asc";$("div",this).removeClass("s"+p.sortorder).addClass("s"+no)}}if(g.colCopy){var n=$("th",g.hDiv).index(this);if(n==g.dcoln){return false}if(n<g.dcoln){$(this).append(g.cdropleft)}else{$(this).append(g.cdropright)}g.dcolt=n}else{if(!g.colresize){var nv=$("th:visible",g.hDiv).index(this);var onl=parseInt($("div:eq("+nv+")",g.cDrag).css("left"),10);var nw=jQuery(g.nBtn).outerWidth();var nl=onl-nw+Math.floor(p.cgwidth/2);$(g.nDiv).hide();$(g.nBtn).hide();$(g.nBtn).css({left:nl,top:g.hDiv.offsetTop}).show();var ndw=parseInt($(g.nDiv).width(),10);$(g.nDiv).css({top:g.bDiv.offsetTop});if((nl+ndw)>$(g.gDiv).width()){$(g.nDiv).css("left",onl-ndw+1)}else{$(g.nDiv).css("left",nl)}if($(this).hasClass("sorted")){$(g.nBtn).addClass("srtd")}else{$(g.nBtn).removeClass("srtd")}}}},function(){$(this).removeClass("thOver");if($(this).attr("abbr")!=p.sortname){$("div",this).removeClass("s"+p.sortorder)}else{if($(this).attr("abbr")==p.sortname){var no=(p.sortorder=="asc")?"desc":"asc";$("div",this).addClass("s"+p.sortorder).removeClass("s"+no)}}if(g.colCopy){$(g.cdropleft).remove();$(g.cdropright).remove();g.dcolt=null}})});g.bDiv.className="bDiv";$(t).before(g.bDiv);$(g.bDiv).css({height:(p.height=="auto")?"auto":p.height+"px"}).scroll(function(e){g.scroll()}).append(t);if(p.height=="auto"){$("table",g.bDiv).addClass("autoht")}g.addCellProp();g.addRowProp();if(p.colResize===true){var cdcol=$("thead tr:first th:first",g.hDiv).get(0);if(cdcol!==null){g.cDrag.className="cDrag";g.cdpad=0;g.cdpad+=(isNaN(parseInt($("div",cdcol).css("borderLeftWidth"),10))?0:parseInt($("div",cdcol).css("borderLeftWidth"),10));g.cdpad+=(isNaN(parseInt($("div",cdcol).css("borderRightWidth"),10))?0:parseInt($("div",cdcol).css("borderRightWidth"),10));g.cdpad+=(isNaN(parseInt($("div",cdcol).css("paddingLeft"),10))?0:parseInt($("div",cdcol).css("paddingLeft"),10));g.cdpad+=(isNaN(parseInt($("div",cdcol).css("paddingRight"),10))?0:parseInt($("div",cdcol).css("paddingRight"),10));g.cdpad+=(isNaN(parseInt($(cdcol).css("borderLeftWidth"),10))?0:parseInt($(cdcol).css("borderLeftWidth"),10));g.cdpad+=(isNaN(parseInt($(cdcol).css("borderRightWidth"),10))?0:parseInt($(cdcol).css("borderRightWidth"),10));g.cdpad+=(isNaN(parseInt($(cdcol).css("paddingLeft"),10))?0:parseInt($(cdcol).css("paddingLeft"),10));g.cdpad+=(isNaN(parseInt($(cdcol).css("paddingRight"),10))?0:parseInt($(cdcol).css("paddingRight"),10));$(g.bDiv).before(g.cDrag);var cdheight=$(g.bDiv).height();var hdheight=$(g.hDiv).height();$(g.cDrag).css({top:-hdheight+"px"});$("thead tr:first th",g.hDiv).each(function(){var cgDiv=document.createElement("div");$(g.cDrag).append(cgDiv);if(!p.cgwidth){p.cgwidth=$(cgDiv).width()}$(cgDiv).css({height:cdheight+hdheight}).mousedown(function(e){g.dragStart("colresize",e,this)}).dblclick(function(e){g.autoResizeColumn(this)});if(browser.msie&&browser.version<7){g.fixHeight($(g.gDiv).height());$(cgDiv).hover(function(){g.fixHeight();$(this).addClass("dragging")},function(){if(!g.colresize){$(this).removeClass("dragging")}})}})}}if(p.striped){$("tbody tr:odd",g.bDiv).addClass("erow")}if(p.resizable&&p.height!="auto"){g.vDiv.className="vGrip";$(g.vDiv).mousedown(function(e){g.dragStart("vresize",e)}).html("<span></span>");$(g.bDiv).after(g.vDiv)}if(p.resizable&&p.width!="auto"&&!p.nohresize){g.rDiv.className="hGrip";$(g.rDiv).mousedown(function(e){g.dragStart("vresize",e,true)}).html("<span></span>").css("height",$(g.gDiv).height());if(browser.msie&&browser.version<7){$(g.rDiv).hover(function(){$(this).addClass("hgOver")},function(){$(this).removeClass("hgOver")})}$(g.gDiv).append(g.rDiv)}if(p.usepager){g.pDiv.className="pDiv";g.pDiv.innerHTML='<div class="pDiv2"></div>';$(g.bDiv).after(g.pDiv);var html=' <div class="pGroup"> <div class="pFirst pButton"><span></span></div><div class="pPrev pButton"><span></span></div> </div> <div class="btnseparator"></div> <div class="pGroup"><span class="pcontrol">'+p.pagetext+' <input type="text" size="4" value="1" /> '+p.outof+' <span> 1 </span></span></div> <div class="btnseparator"></div> <div class="pGroup"> <div class="pNext pButton"><span></span></div><div class="pLast pButton"><span></span></div> </div> <div class="btnseparator"></div> <div class="pGroup"> <div class="pReload pButton"><span></span></div> </div> <div class="btnseparator"></div> <div class="pGroup"><span class="pPageStat"></span></div>';$("div",g.pDiv).html(html);$(".pReload",g.pDiv).click(function(){g.populate()});$(".pFirst",g.pDiv).click(function(){g.changePage("first")});$(".pPrev",g.pDiv).click(function(){g.changePage("prev")});$(".pNext",g.pDiv).click(function(){g.changePage("next")});$(".pLast",g.pDiv).click(function(){g.changePage("last")});$(".pcontrol input",g.pDiv).keydown(function(e){if(e.keyCode==13){g.changePage("input")}});if(browser.msie&&browser.version<7){$(".pButton",g.pDiv).hover(function(){$(this).addClass("pBtnOver")},function(){$(this).removeClass("pBtnOver")})}if(p.useRp){var opt="",sel="";for(var nx=0;nx<p.rpOptions.length;nx++){if(p.rp==p.rpOptions[nx]){sel='selected="selected"'}else{sel=""}opt+="<option value='"+p.rpOptions[nx]+"' "+sel+" >"+p.rpOptions[nx]+"&nbsp;&nbsp;</option>"}$(".pDiv2",g.pDiv).prepend("<div class='pGroup'><select name='rp'>"+opt+"</select></div> <div class='btnseparator'></div>");$("select",g.pDiv).change(function(){if(p.onRpChange){p.onRpChange(+this.value)}else{p.newp=1;p.rp=+this.value;g.populate()}})}if(p.searchitems){$(".pDiv2",g.pDiv).prepend("<div class='pGroup'> <div class='pSearch pButton'><span></span></div> </div>  <div class='btnseparator'></div>");$(".pSearch",g.pDiv).click(function(){$(g.sDiv).slideToggle("fast",function(){$(".sDiv:visible input:first",g.gDiv).trigger("focus")})});g.sDiv.className="sDiv";var sitems=p.searchitems;var sopt="",sel="";for(var s=0;s<sitems.length;s++){if(p.qtype===""&&sitems[s].isdefault===true){p.qtype=sitems[s].name;sel='selected="selected"'}else{sel=""}sopt+="<option value='"+sitems[s].name+"' "+sel+" >"+sitems[s].display+"&nbsp;&nbsp;</option>"}if(p.qtype===""){p.qtype=sitems[0].name}$(g.sDiv).append("<div class='sDiv2'>"+p.findtext+" <input type='text' value='"+p.query+"' size='30' name='q' class='qsbox' />  <select name='qtype'>"+sopt+"</select></div>");$("input[name=q]",g.sDiv).keydown(function(e){if(e.keyCode==13){g.doSearch()}});$("select[name=qtype]",g.sDiv).keydown(function(e){if(e.keyCode==13){g.doSearch()}});$("input[value=Clear]",g.sDiv).click(function(){$("input[name=q]",g.sDiv).val("");p.query="";g.doSearch()});$(g.bDiv).after(g.sDiv)}}$(g.pDiv,g.sDiv).append("<div style='clear:both'></div>");if(p.title){g.mDiv.className="mDiv";g.mDiv.innerHTML='<div class="ftitle">'+p.title+"</div>";$(g.gDiv).prepend(g.mDiv);if(p.showTableToggleBtn){$(g.mDiv).append('<div class="ptogtitle" title="Minimize/Maximize Table"><span></span></div>');$("div.ptogtitle",g.mDiv).click(function(){$(g.gDiv).toggleClass("hideBody");$(this).toggleClass("vsble")})}}g.cdropleft=document.createElement("span");g.cdropleft.className="cdropleft";g.cdropright=document.createElement("span");g.cdropright.className="cdropright";g.block.className="gBlock";var gh=$(g.bDiv).height();var gtop=g.bDiv.offsetTop;$(g.block).css({width:g.bDiv.style.width,height:gh,background:"white",position:"relative",marginBottom:(gh*-1),zIndex:1,top:gtop,left:"0px"});$(g.block).fadeTo(0,p.blockOpacity);if($("th",g.hDiv).length){g.nDiv.className="nDiv";g.nDiv.innerHTML="<table cellpadding='0' cellspacing='0'><tbody></tbody></table>";$(g.nDiv).css({marginBottom:(gh*-1),display:"none",top:gtop}).noSelect();var cn=0;$("th div",g.hDiv).each(function(){var kcol=$("th[axis='col"+cn+"']",g.hDiv)[0];var chk='checked="checked"';if(kcol.style.display=="none"){chk=""}$("tbody",g.nDiv).append('<tr><td class="ndcol1"><input type="checkbox" '+chk+' class="togCol" value="'+cn+'" /></td><td class="ndcol2">'+this.innerHTML+"</td></tr>");cn++});if(browser.msie&&browser.version<7){$("tr",g.nDiv).hover(function(){$(this).addClass("ndcolover")},function(){$(this).removeClass("ndcolover")})}$("td.ndcol2",g.nDiv).click(function(){if($("input:checked",g.nDiv).length<=p.minColToggle&&$(this).prev().find("input")[0].checked){return false}return g.toggleCol($(this).prev().find("input").val())});$("input.togCol",g.nDiv).click(function(){if($("input:checked",g.nDiv).length<p.minColToggle&&this.checked===false){return false}$(this).parent().next().trigger("click")});$(g.gDiv).prepend(g.nDiv);$(g.nBtn).addClass("nBtn").html("<div></div>").attr("title","Hide/Show Columns").click(function(){$(g.nDiv).toggle();return true});if(p.showToggleBtn){$(g.gDiv).prepend(g.nBtn)}}$(g.iDiv).addClass("iDiv").css({display:"none"});$(g.bDiv).append(g.iDiv);$(g.bDiv).hover(function(){$(g.nDiv).hide();$(g.nBtn).hide()},function(){if(g.multisel){g.multisel=false}});$(g.gDiv).hover(function(){},function(){$(g.nDiv).hide();$(g.nBtn).hide()});$(document).mousemove(function(e){g.dragMove(e)}).mouseup(function(e){g.dragEnd()}).hover(function(){},function(){g.dragEnd()});if(browser.msie&&browser.version<7){$(".hDiv,.bDiv,.mDiv,.pDiv,.vGrip,.tDiv, .sDiv",g.gDiv).css({width:"100%"});$(g.gDiv).addClass("ie6");if(p.width!="auto"){$(g.gDiv).addClass("ie6fullwidthbug")}}g.rePosDrag();g.fixHeight();t.p=p;t.grid=g;if(p.url&&p.autoload){g.populate()}return t};var docloaded=false;$(document).ready(function(){docloaded=true});$.fn.flexigrid=function(p){return this.each(function(){if(!docloaded){$(this).hide();var t=this;$(document).ready(function(){$.addFlex(t,p)})}else{$.addFlex(this,p)}})};$.fn.flexReload=function(p){return this.each(function(){if(this.grid&&this.p.url){this.grid.populate()}})};$.fn.flexOptions=function(p){return this.each(function(){if(this.grid){$.extend(this.p,p)}})};$.fn.flexToggleCol=function(cid,visible){return this.each(function(){if(this.grid){this.grid.toggleCol(cid,visible)}})};$.fn.flexAddData=function(data){return this.each(function(){if(this.grid){this.grid.addData(data)}})};$.fn.noSelect=function(p){var prevent=(p===null)?true:p;if(prevent){return this.each(function(){if(browser.msie||browser.safari){$(this).bind("selectstart",function(){return false})}else{if(browser.mozilla){$(this).css("MozUserSelect","none");$("body").trigger("focus")}else{if(browser.opera){$(this).bind("mousedown",function(){return false})}else{$(this).attr("unselectable","on")}}}})}else{return this.each(function(){if(browser.msie||browser.safari){$(this).unbind("selectstart")}else{if(browser.mozilla){$(this).css("MozUserSelect","inherit")}else{if(browser.opera){$(this).unbind("mousedown")}else{$(this).removeAttr("unselectable","on")}}}})}};$.fn.flexSearch=function(p){return this.each(function(){if(this.grid&&this.p.searchitems){this.grid.doSearch()}})};$.fn.selectedRows=function(p){var arReturn=[];var arRow=[];var selector=$(this.selector+" .trSelected");$(selector).each(function(i,row){arRow=[];var idr=$(row).data("id");$.each(row.cells,function(c,cell){var col=cell.abbr;var val=cell.firstChild.innerHTML;if(val=="&nbsp;"){val=""}var idx=cell.cellIndex;arRow.push({Column:col,Value:val,CellIndex:idx,RowIdentifier:idr})});arReturn.push(arRow)});return arReturn}})(jQuery);
var timeout;(function(a){if(typeof a.fn.each2=="undefined"){a.extend(a.fn,{each2:function(f){var d=a([0]),e=-1,b=this.length;while(++e<b&&(d.context=d[0]=this[e])&&f.call(d[0],e,d)!==false){}return this}})}})(jQuery);(function(D,m){if(window.Select2!==m){return}var K,N,x,c,a,p,o={x:0,y:0},v,w,K={TAB:9,ENTER:13,ESC:27,SPACE:32,LEFT:37,UP:38,RIGHT:39,DOWN:40,SHIFT:16,CTRL:17,ALT:18,PAGE_UP:33,PAGE_DOWN:34,HOME:36,END:35,BACKSPACE:8,DELETE:46,isArrow:function(O){O=O.which?O.which:O;switch(O){case K.LEFT:case K.RIGHT:case K.UP:case K.DOWN:return true}return false},isControl:function(P){var O=P.which;switch(O){case K.SHIFT:case K.CTRL:case K.ALT:return true}if(P.metaKey){return true}return false},isFunctionKey:function(O){O=O.which?O.which:O;return O>=112&&O<=123}},B="<div class='select2-measure-scrollbar'></div>",d={"\u24B6":"A","\uFF21":"A","\u00C0":"A","\u00C1":"A","\u00C2":"A","\u1EA6":"A","\u1EA4":"A","\u1EAA":"A","\u1EA8":"A","\u00C3":"A","\u0100":"A","\u0102":"A","\u1EB0":"A","\u1EAE":"A","\u1EB4":"A","\u1EB2":"A","\u0226":"A","\u01E0":"A","\u00C4":"A","\u01DE":"A","\u1EA2":"A","\u00C5":"A","\u01FA":"A","\u01CD":"A","\u0200":"A","\u0202":"A","\u1EA0":"A","\u1EAC":"A","\u1EB6":"A","\u1E00":"A","\u0104":"A","\u023A":"A","\u2C6F":"A","\uA732":"AA","\u00C6":"AE","\u01FC":"AE","\u01E2":"AE","\uA734":"AO","\uA736":"AU","\uA738":"AV","\uA73A":"AV","\uA73C":"AY","\u24B7":"B","\uFF22":"B","\u1E02":"B","\u1E04":"B","\u1E06":"B","\u0243":"B","\u0182":"B","\u0181":"B","\u24B8":"C","\uFF23":"C","\u0106":"C","\u0108":"C","\u010A":"C","\u010C":"C","\u00C7":"C","\u1E08":"C","\u0187":"C","\u023B":"C","\uA73E":"C","\u24B9":"D","\uFF24":"D","\u1E0A":"D","\u010E":"D","\u1E0C":"D","\u1E10":"D","\u1E12":"D","\u1E0E":"D","\u0110":"D","\u018B":"D","\u018A":"D","\u0189":"D","\uA779":"D","\u01F1":"DZ","\u01C4":"DZ","\u01F2":"Dz","\u01C5":"Dz","\u24BA":"E","\uFF25":"E","\u00C8":"E","\u00C9":"E","\u00CA":"E","\u1EC0":"E","\u1EBE":"E","\u1EC4":"E","\u1EC2":"E","\u1EBC":"E","\u0112":"E","\u1E14":"E","\u1E16":"E","\u0114":"E","\u0116":"E","\u00CB":"E","\u1EBA":"E","\u011A":"E","\u0204":"E","\u0206":"E","\u1EB8":"E","\u1EC6":"E","\u0228":"E","\u1E1C":"E","\u0118":"E","\u1E18":"E","\u1E1A":"E","\u0190":"E","\u018E":"E","\u24BB":"F","\uFF26":"F","\u1E1E":"F","\u0191":"F","\uA77B":"F","\u24BC":"G","\uFF27":"G","\u01F4":"G","\u011C":"G","\u1E20":"G","\u011E":"G","\u0120":"G","\u01E6":"G","\u0122":"G","\u01E4":"G","\u0193":"G","\uA7A0":"G","\uA77D":"G","\uA77E":"G","\u24BD":"H","\uFF28":"H","\u0124":"H","\u1E22":"H","\u1E26":"H","\u021E":"H","\u1E24":"H","\u1E28":"H","\u1E2A":"H","\u0126":"H","\u2C67":"H","\u2C75":"H","\uA78D":"H","\u24BE":"I","\uFF29":"I","\u00CC":"I","\u00CD":"I","\u00CE":"I","\u0128":"I","\u012A":"I","\u012C":"I","\u0130":"I","\u00CF":"I","\u1E2E":"I","\u1EC8":"I","\u01CF":"I","\u0208":"I","\u020A":"I","\u1ECA":"I","\u012E":"I","\u1E2C":"I","\u0197":"I","\u24BF":"J","\uFF2A":"J","\u0134":"J","\u0248":"J","\u24C0":"K","\uFF2B":"K","\u1E30":"K","\u01E8":"K","\u1E32":"K","\u0136":"K","\u1E34":"K","\u0198":"K","\u2C69":"K","\uA740":"K","\uA742":"K","\uA744":"K","\uA7A2":"K","\u24C1":"L","\uFF2C":"L","\u013F":"L","\u0139":"L","\u013D":"L","\u1E36":"L","\u1E38":"L","\u013B":"L","\u1E3C":"L","\u1E3A":"L","\u0141":"L","\u023D":"L","\u2C62":"L","\u2C60":"L","\uA748":"L","\uA746":"L","\uA780":"L","\u01C7":"LJ","\u01C8":"Lj","\u24C2":"M","\uFF2D":"M","\u1E3E":"M","\u1E40":"M","\u1E42":"M","\u2C6E":"M","\u019C":"M","\u24C3":"N","\uFF2E":"N","\u01F8":"N","\u0143":"N","\u00D1":"N","\u1E44":"N","\u0147":"N","\u1E46":"N","\u0145":"N","\u1E4A":"N","\u1E48":"N","\u0220":"N","\u019D":"N","\uA790":"N","\uA7A4":"N","\u01CA":"NJ","\u01CB":"Nj","\u24C4":"O","\uFF2F":"O","\u00D2":"O","\u00D3":"O","\u00D4":"O","\u1ED2":"O","\u1ED0":"O","\u1ED6":"O","\u1ED4":"O","\u00D5":"O","\u1E4C":"O","\u022C":"O","\u1E4E":"O","\u014C":"O","\u1E50":"O","\u1E52":"O","\u014E":"O","\u022E":"O","\u0230":"O","\u00D6":"O","\u022A":"O","\u1ECE":"O","\u0150":"O","\u01D1":"O","\u020C":"O","\u020E":"O","\u01A0":"O","\u1EDC":"O","\u1EDA":"O","\u1EE0":"O","\u1EDE":"O","\u1EE2":"O","\u1ECC":"O","\u1ED8":"O","\u01EA":"O","\u01EC":"O","\u00D8":"O","\u01FE":"O","\u0186":"O","\u019F":"O","\uA74A":"O","\uA74C":"O","\u01A2":"OI","\uA74E":"OO","\u0222":"OU","\u24C5":"P","\uFF30":"P","\u1E54":"P","\u1E56":"P","\u01A4":"P","\u2C63":"P","\uA750":"P","\uA752":"P","\uA754":"P","\u24C6":"Q","\uFF31":"Q","\uA756":"Q","\uA758":"Q","\u024A":"Q","\u24C7":"R","\uFF32":"R","\u0154":"R","\u1E58":"R","\u0158":"R","\u0210":"R","\u0212":"R","\u1E5A":"R","\u1E5C":"R","\u0156":"R","\u1E5E":"R","\u024C":"R","\u2C64":"R","\uA75A":"R","\uA7A6":"R","\uA782":"R","\u24C8":"S","\uFF33":"S","\u1E9E":"S","\u015A":"S","\u1E64":"S","\u015C":"S","\u1E60":"S","\u0160":"S","\u1E66":"S","\u1E62":"S","\u1E68":"S","\u0218":"S","\u015E":"S","\u2C7E":"S","\uA7A8":"S","\uA784":"S","\u24C9":"T","\uFF34":"T","\u1E6A":"T","\u0164":"T","\u1E6C":"T","\u021A":"T","\u0162":"T","\u1E70":"T","\u1E6E":"T","\u0166":"T","\u01AC":"T","\u01AE":"T","\u023E":"T","\uA786":"T","\uA728":"TZ","\u24CA":"U","\uFF35":"U","\u00D9":"U","\u00DA":"U","\u00DB":"U","\u0168":"U","\u1E78":"U","\u016A":"U","\u1E7A":"U","\u016C":"U","\u00DC":"U","\u01DB":"U","\u01D7":"U","\u01D5":"U","\u01D9":"U","\u1EE6":"U","\u016E":"U","\u0170":"U","\u01D3":"U","\u0214":"U","\u0216":"U","\u01AF":"U","\u1EEA":"U","\u1EE8":"U","\u1EEE":"U","\u1EEC":"U","\u1EF0":"U","\u1EE4":"U","\u1E72":"U","\u0172":"U","\u1E76":"U","\u1E74":"U","\u0244":"U","\u24CB":"V","\uFF36":"V","\u1E7C":"V","\u1E7E":"V","\u01B2":"V","\uA75E":"V","\u0245":"V","\uA760":"VY","\u24CC":"W","\uFF37":"W","\u1E80":"W","\u1E82":"W","\u0174":"W","\u1E86":"W","\u1E84":"W","\u1E88":"W","\u2C72":"W","\u24CD":"X","\uFF38":"X","\u1E8A":"X","\u1E8C":"X","\u24CE":"Y","\uFF39":"Y","\u1EF2":"Y","\u00DD":"Y","\u0176":"Y","\u1EF8":"Y","\u0232":"Y","\u1E8E":"Y","\u0178":"Y","\u1EF6":"Y","\u1EF4":"Y","\u01B3":"Y","\u024E":"Y","\u1EFE":"Y","\u24CF":"Z","\uFF3A":"Z","\u0179":"Z","\u1E90":"Z","\u017B":"Z","\u017D":"Z","\u1E92":"Z","\u1E94":"Z","\u01B5":"Z","\u0224":"Z","\u2C7F":"Z","\u2C6B":"Z","\uA762":"Z","\u24D0":"a","\uFF41":"a","\u1E9A":"a","\u00E0":"a","\u00E1":"a","\u00E2":"a","\u1EA7":"a","\u1EA5":"a","\u1EAB":"a","\u1EA9":"a","\u00E3":"a","\u0101":"a","\u0103":"a","\u1EB1":"a","\u1EAF":"a","\u1EB5":"a","\u1EB3":"a","\u0227":"a","\u01E1":"a","\u00E4":"a","\u01DF":"a","\u1EA3":"a","\u00E5":"a","\u01FB":"a","\u01CE":"a","\u0201":"a","\u0203":"a","\u1EA1":"a","\u1EAD":"a","\u1EB7":"a","\u1E01":"a","\u0105":"a","\u2C65":"a","\u0250":"a","\uA733":"aa","\u00E6":"ae","\u01FD":"ae","\u01E3":"ae","\uA735":"ao","\uA737":"au","\uA739":"av","\uA73B":"av","\uA73D":"ay","\u24D1":"b","\uFF42":"b","\u1E03":"b","\u1E05":"b","\u1E07":"b","\u0180":"b","\u0183":"b","\u0253":"b","\u24D2":"c","\uFF43":"c","\u0107":"c","\u0109":"c","\u010B":"c","\u010D":"c","\u00E7":"c","\u1E09":"c","\u0188":"c","\u023C":"c","\uA73F":"c","\u2184":"c","\u24D3":"d","\uFF44":"d","\u1E0B":"d","\u010F":"d","\u1E0D":"d","\u1E11":"d","\u1E13":"d","\u1E0F":"d","\u0111":"d","\u018C":"d","\u0256":"d","\u0257":"d","\uA77A":"d","\u01F3":"dz","\u01C6":"dz","\u24D4":"e","\uFF45":"e","\u00E8":"e","\u00E9":"e","\u00EA":"e","\u1EC1":"e","\u1EBF":"e","\u1EC5":"e","\u1EC3":"e","\u1EBD":"e","\u0113":"e","\u1E15":"e","\u1E17":"e","\u0115":"e","\u0117":"e","\u00EB":"e","\u1EBB":"e","\u011B":"e","\u0205":"e","\u0207":"e","\u1EB9":"e","\u1EC7":"e","\u0229":"e","\u1E1D":"e","\u0119":"e","\u1E19":"e","\u1E1B":"e","\u0247":"e","\u025B":"e","\u01DD":"e","\u24D5":"f","\uFF46":"f","\u1E1F":"f","\u0192":"f","\uA77C":"f","\u24D6":"g","\uFF47":"g","\u01F5":"g","\u011D":"g","\u1E21":"g","\u011F":"g","\u0121":"g","\u01E7":"g","\u0123":"g","\u01E5":"g","\u0260":"g","\uA7A1":"g","\u1D79":"g","\uA77F":"g","\u24D7":"h","\uFF48":"h","\u0125":"h","\u1E23":"h","\u1E27":"h","\u021F":"h","\u1E25":"h","\u1E29":"h","\u1E2B":"h","\u1E96":"h","\u0127":"h","\u2C68":"h","\u2C76":"h","\u0265":"h","\u0195":"hv","\u24D8":"i","\uFF49":"i","\u00EC":"i","\u00ED":"i","\u00EE":"i","\u0129":"i","\u012B":"i","\u012D":"i","\u00EF":"i","\u1E2F":"i","\u1EC9":"i","\u01D0":"i","\u0209":"i","\u020B":"i","\u1ECB":"i","\u012F":"i","\u1E2D":"i","\u0268":"i","\u0131":"i","\u24D9":"j","\uFF4A":"j","\u0135":"j","\u01F0":"j","\u0249":"j","\u24DA":"k","\uFF4B":"k","\u1E31":"k","\u01E9":"k","\u1E33":"k","\u0137":"k","\u1E35":"k","\u0199":"k","\u2C6A":"k","\uA741":"k","\uA743":"k","\uA745":"k","\uA7A3":"k","\u24DB":"l","\uFF4C":"l","\u0140":"l","\u013A":"l","\u013E":"l","\u1E37":"l","\u1E39":"l","\u013C":"l","\u1E3D":"l","\u1E3B":"l","\u017F":"l","\u0142":"l","\u019A":"l","\u026B":"l","\u2C61":"l","\uA749":"l","\uA781":"l","\uA747":"l","\u01C9":"lj","\u24DC":"m","\uFF4D":"m","\u1E3F":"m","\u1E41":"m","\u1E43":"m","\u0271":"m","\u026F":"m","\u24DD":"n","\uFF4E":"n","\u01F9":"n","\u0144":"n","\u00F1":"n","\u1E45":"n","\u0148":"n","\u1E47":"n","\u0146":"n","\u1E4B":"n","\u1E49":"n","\u019E":"n","\u0272":"n","\u0149":"n","\uA791":"n","\uA7A5":"n","\u01CC":"nj","\u24DE":"o","\uFF4F":"o","\u00F2":"o","\u00F3":"o","\u00F4":"o","\u1ED3":"o","\u1ED1":"o","\u1ED7":"o","\u1ED5":"o","\u00F5":"o","\u1E4D":"o","\u022D":"o","\u1E4F":"o","\u014D":"o","\u1E51":"o","\u1E53":"o","\u014F":"o","\u022F":"o","\u0231":"o","\u00F6":"o","\u022B":"o","\u1ECF":"o","\u0151":"o","\u01D2":"o","\u020D":"o","\u020F":"o","\u01A1":"o","\u1EDD":"o","\u1EDB":"o","\u1EE1":"o","\u1EDF":"o","\u1EE3":"o","\u1ECD":"o","\u1ED9":"o","\u01EB":"o","\u01ED":"o","\u00F8":"o","\u01FF":"o","\u0254":"o","\uA74B":"o","\uA74D":"o","\u0275":"o","\u01A3":"oi","\u0223":"ou","\uA74F":"oo","\u24DF":"p","\uFF50":"p","\u1E55":"p","\u1E57":"p","\u01A5":"p","\u1D7D":"p","\uA751":"p","\uA753":"p","\uA755":"p","\u24E0":"q","\uFF51":"q","\u024B":"q","\uA757":"q","\uA759":"q","\u24E1":"r","\uFF52":"r","\u0155":"r","\u1E59":"r","\u0159":"r","\u0211":"r","\u0213":"r","\u1E5B":"r","\u1E5D":"r","\u0157":"r","\u1E5F":"r","\u024D":"r","\u027D":"r","\uA75B":"r","\uA7A7":"r","\uA783":"r","\u24E2":"s","\uFF53":"s","\u00DF":"s","\u015B":"s","\u1E65":"s","\u015D":"s","\u1E61":"s","\u0161":"s","\u1E67":"s","\u1E63":"s","\u1E69":"s","\u0219":"s","\u015F":"s","\u023F":"s","\uA7A9":"s","\uA785":"s","\u1E9B":"s","\u24E3":"t","\uFF54":"t","\u1E6B":"t","\u1E97":"t","\u0165":"t","\u1E6D":"t","\u021B":"t","\u0163":"t","\u1E71":"t","\u1E6F":"t","\u0167":"t","\u01AD":"t","\u0288":"t","\u2C66":"t","\uA787":"t","\uA729":"tz","\u24E4":"u","\uFF55":"u","\u00F9":"u","\u00FA":"u","\u00FB":"u","\u0169":"u","\u1E79":"u","\u016B":"u","\u1E7B":"u","\u016D":"u","\u00FC":"u","\u01DC":"u","\u01D8":"u","\u01D6":"u","\u01DA":"u","\u1EE7":"u","\u016F":"u","\u0171":"u","\u01D4":"u","\u0215":"u","\u0217":"u","\u01B0":"u","\u1EEB":"u","\u1EE9":"u","\u1EEF":"u","\u1EED":"u","\u1EF1":"u","\u1EE5":"u","\u1E73":"u","\u0173":"u","\u1E77":"u","\u1E75":"u","\u0289":"u","\u24E5":"v","\uFF56":"v","\u1E7D":"v","\u1E7F":"v","\u028B":"v","\uA75F":"v","\u028C":"v","\uA761":"vy","\u24E6":"w","\uFF57":"w","\u1E81":"w","\u1E83":"w","\u0175":"w","\u1E87":"w","\u1E85":"w","\u1E98":"w","\u1E89":"w","\u2C73":"w","\u24E7":"x","\uFF58":"x","\u1E8B":"x","\u1E8D":"x","\u24E8":"y","\uFF59":"y","\u1EF3":"y","\u00FD":"y","\u0177":"y","\u1EF9":"y","\u0233":"y","\u1E8F":"y","\u00FF":"y","\u1EF7":"y","\u1E99":"y","\u1EF5":"y","\u01B4":"y","\u024F":"y","\u1EFF":"y","\u24E9":"z","\uFF5A":"z","\u017A":"z","\u1E91":"z","\u017C":"z","\u017E":"z","\u1E93":"z","\u1E95":"z","\u01B6":"z","\u0225":"z","\u0240":"z","\u2C6C":"z","\uA763":"z"};v=D(document);a=(function(){var O=1;return function(){return O++}}());function e(R){var P,Q,O,S;if(!R||R.length<1){return R}P="";for(Q=0,O=R.length;Q<O;Q++){S=R.charAt(Q);P+=d[S]||S}return P}function q(Q,R){var P=0,O=R.length;for(;P<O;P=P+1){if(t(Q,R[P])){return P}}return -1}function M(){var O=D(B);O.appendTo("body");var P={width:O.width()-O[0].clientWidth,height:O.height()-O[0].clientHeight};O.remove();return P}function t(P,O){if(P===O){return true}if(P===m||O===m){return false}if(P===null||O===null){return false}if(P.constructor===String){return P+""===O+""}if(O.constructor===String){return O+""===P+""}return false}function i(P,R){var S,Q,O;if(P===null||P.length<1){return[]}S=P.split(R);for(Q=0,O=S.length;Q<O;Q=Q+1){S[Q]=D.trim(S[Q])}return S}function h(O){return O.outerWidth(false)-O.width()}function F(P){var O="keyup-change-value";P.on("keydown",function(){if(D.data(P,O)===m){D.data(P,O,P.val())}});P.on("keyup",function(){var Q=D.data(P,O);if(Q!==m&&P.val()!==Q){D.removeData(P,O);P.trigger("keyup-change")}})}v.on("mousemove",function(O){o.x=O.pageX;o.y=O.pageY});function J(O){O.on("mousemove",function(Q){var P=o;if(P===m||P.x!==Q.pageX||P.y!==Q.pageY){D(Q.target).trigger("mousemove-filtered",Q)}})}function k(R,P,O){O=O||m;var Q;return function(){var S=arguments;window.clearTimeout(Q);Q=window.setTimeout(function(){P.apply(O,S)},R)}}function s(Q){var O=false,P;return function(){if(O===false){P=Q();O=true}return P}}function l(O,Q){var P=k(O,function(R){Q.trigger("scroll-debounced",R)});Q.on("scroll",function(R){if(q(R.target,Q.get())>=0){P(R)}})}function I(O){if(O[0]===document.activeElement){return}window.setTimeout(function(){var Q=O[0],R=O.val().length,P;O.focus();if(O.is(":visible")&&Q===document.activeElement){if(Q.setSelectionRange){Q.setSelectionRange(R,R)}else{if(Q.createTextRange){P=Q.createTextRange();P.collapse(false);P.select()}}}},0)}function f(O){O=D(O)[0];var R=0;var P=0;if("selectionStart" in O){R=O.selectionStart;P=O.selectionEnd-R}else{if("selection" in document){O.focus();var Q=document.selection.createRange();P=document.selection.createRange().text.length;Q.moveStart("character",-O.value.length);R=Q.text.length-P}}return{offset:R,length:P}}function A(O){O.preventDefault();O.stopPropagation()}function b(O){O.preventDefault();O.stopImmediatePropagation()}function n(P){if(!p){var O=P[0].currentStyle||window.getComputedStyle(P[0],null);p=D(document.createElement("div")).css({position:"absolute",left:"-10000px",top:"-10000px",display:"none",fontSize:O.fontSize,fontFamily:O.fontFamily,fontStyle:O.fontStyle,fontWeight:O.fontWeight,letterSpacing:O.letterSpacing,textTransform:O.textTransform,whiteSpace:"nowrap"});p.attr("class","select2-sizer");D("body").append(p)}p.text(P.val());return p.width()}function j(P,T,O){var R,S=[],Q;R=P.attr("class");if(R){R=""+R;D(R.split(" ")).each2(function(){if(this.indexOf("select2-")===0){S.push(this)}})}R=T.attr("class");if(R){R=""+R;D(R.split(" ")).each2(function(){if(this.indexOf("select2-")!==0){Q=O(this);if(Q){S.push(Q)}}})}P.attr("class",S.join(" "))}function u(T,S,Q,O){var R=e(T.toUpperCase()).indexOf(e(S.toUpperCase())),P=S.length;if(R<0){Q.push(O(T));return}Q.push(O(T.substring(0,R)));Q.push("<span class='select2-match'>");Q.push(O(T.substring(R,R+P)));Q.push("</span>");Q.push(O(T.substring(R+P,T.length)))}function G(O){var P={"\\":"&#92;","&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#47;"};return String(O).replace(/[&<>"'\/\\]/g,function(Q){return P[Q]})}function E(P){var S,Q=null,T=P.quietMillis||100,R=P.url,O=this;return function(U){window.clearTimeout(S);S=window.setTimeout(function(){var X=P.data,W=R,Z=P.transport||D.fn.select2.ajaxDefaults.transport,V={type:P.type||"GET",cache:P.cache||false,jsonpCallback:P.jsonpCallback||m,dataType:P.dataType||"json"},Y=D.extend({},D.fn.select2.ajaxDefaults.params,V);X=X?X.call(O,U.term,U.page,U.context):null;W=(typeof W==="function")?W.call(O,U.term,U.page,U.context):W;if(Q&&typeof Q.abort==="function"){Q.abort()}if(P.params){if(D.isFunction(P.params)){D.extend(Y,P.params.call(O))}else{D.extend(Y,P.params)}}D.extend(Y,{url:W,dataType:P.dataType,data:X,success:function(ab){var aa=P.results(ab,U.page);U.callback(aa)}});Q=Z.call(O,Y)},T)}}function H(P){var S=P,R,Q,T=function(U){return""+U.text};if(D.isArray(S)){Q=S;S={results:Q}}if(D.isFunction(S)===false){Q=S;S=function(){return Q}}var O=S();if(O.text){T=O.text;if(!D.isFunction(T)){R=O.text;T=function(U){return U[R]}}}return function(W){var V=W.term,U={results:[]},X;if(V===""){W.callback(S());return}X=function(Z,ab){var aa,Y;Z=Z[0];if(Z.children){aa={};for(Y in Z){if(Z.hasOwnProperty(Y)){aa[Y]=Z[Y]}}aa.children=[];D(Z.children).each2(function(ac,ad){X(ad,aa.children)});if(aa.children.length||W.matcher(V,T(aa),Z)){ab.push(aa)}}else{if(W.matcher(V,T(Z),Z)){ab.push(Z)}}};D(S().results).each2(function(Z,Y){X(Y,U.results)});W.callback(U)}}function z(P){var O=D.isFunction(P);return function(S){var R=S.term,Q={results:[]};D(O?P():P).each(function(){var T=this.text!==m,U=T?this.text:this;if(R===""||S.matcher(R,U)){Q.results.push(T?this:{id:this,text:this})}});S.callback(Q)}}function y(O,P){if(D.isFunction(O)){return true}if(!O){return false}throw new Error(P+" must be a function or a falsy value")}function C(O){return D.isFunction(O)?O():O}function r(O){var P=0;D.each(O,function(Q,R){if(R.children){P+=r(R.children)}else{P++}});return P}function g(W,X,U,O){var P=W,Y=false,R,V,S,Q,T;if(!O.createSearchChoice||!O.tokenSeparators||O.tokenSeparators.length<1){return m}while(true){V=-1;for(S=0,Q=O.tokenSeparators.length;S<Q;S++){T=O.tokenSeparators[S];V=W.indexOf(T);if(V>=0){break}}if(V<0){break}R=W.substring(0,V);W=W.substring(V+T.length);if(R.length>0){R=O.createSearchChoice.call(this,R,X);if(R!==m&&R!==null&&O.id(R)!==m&&O.id(R)!==null){Y=false;for(S=0,Q=X.length;S<Q;S++){if(t(O.id(R),O.id(X[S]))){Y=true;break}}if(!Y){U(R)}}}}if(P!==W){return W}}function L(O,P){var Q=function(){};Q.prototype=new O;Q.prototype.constructor=Q;Q.prototype.parent=O.prototype;Q.prototype=D.extend(Q.prototype,P);return Q}N=L(Object,{bind:function(P){var O=this;return function(){P.apply(O,arguments)}},init:function(S){var Q,P,T=".select2-results";this.opts=S=this.prepareOpts(S);this.id=S.id;if(S.element.data("select2")!==m&&S.element.data("select2")!==null){S.element.data("select2").destroy()}this.container=this.createContainer();this.containerId="s2id_"+(S.element.attr("id")||"autogen"+a()).replace(/([;&,\-\.\+\*\~':"\!\^#$%@\[\]\(\)=>\|])/g,"\\$1");this.containerSelector="#"+this.containerId;this.container.attr("id",this.containerId);this.body=s(function(){return S.element.closest("body")});j(this.container,this.opts.element,this.opts.adaptContainerCssClass);this.container.attr("style",S.element.attr("style"));this.container.css(C(S.containerCss));this.container.addClass(C(S.containerCssClass));this.elementTabIndex=this.opts.element.attr("tabindex");this.opts.element.data("select2",this).attr("tabindex","-1").before(this.container).on("click.select2",A);this.container.data("select2",this);this.dropdown=this.container.find(".select2-drop");j(this.dropdown,this.opts.element,this.opts.adaptDropdownCssClass);this.dropdown.addClass(C(S.dropdownCssClass));this.dropdown.data("select2",this);this.dropdown.on("click",A);this.results=Q=this.container.find(T);this.search=P=this.container.find("input.select2-input");this.queryCount=0;this.resultsPage=0;this.context=null;this.initContainer();this.container.on("click",A);J(this.results);this.dropdown.on("mousemove-filtered touchstart touchmove touchend",T,this.bind(this.highlightUnderEvent));l(80,this.results);this.dropdown.on("scroll-debounced",T,this.bind(this.loadMoreIfNeeded));D(this.container).on("change",".select2-input",function(U){U.stopPropagation()});D(this.dropdown).on("change",".select2-input",function(U){U.stopPropagation()});if(D.fn.mousewheel){Q.mousewheel(function(X,Y,V,U){var W=Q.scrollTop();if(U>0&&W-U<=0){Q.scrollTop(0);A(X)}else{if(U<0&&Q.get(0).scrollHeight-Q.scrollTop()+U<=Q.height()){Q.scrollTop(Q.get(0).scrollHeight-Q.height());A(X)}}})}F(P);P.on("keyup-change input paste",this.bind(this.updateResultsTimeout));P.on("focus",function(){P.addClass("select2-focused")});P.on("blur",function(){P.removeClass("select2-focused")});this.dropdown.on("mouseup",T,this.bind(function(U){if(D(U.target).closest(".select2-result-selectable").length>0){this.highlightUnderEvent(U);this.selectHighlighted(U)}}));this.dropdown.on("click mouseup mousedown",function(U){U.stopPropagation()});if(D.isFunction(this.opts.initSelection)){this.initSelection();this.monitorSource()}if(S.maximumInputLength!==null){this.search.attr("maxlength",S.maximumInputLength)}var R=S.element.prop("disabled");if(R===m){R=false}this.enable(!R);var O=S.element.prop("readonly");if(O===m){O=false}this.readonly(O);w=w||M();this.autofocus=S.element.prop("autofocus");S.element.prop("autofocus",false);if(this.autofocus){this.focus()}this.nextSearchTerm=m},destroy:function(){var P=this.opts.element,O=P.data("select2");this.close();if(this.propertyObserver){delete this.propertyObserver;this.propertyObserver=null}if(O!==m){O.container.remove();O.dropdown.remove();P.removeClass("select2-offscreen").removeData("select2").off(".select2").prop("autofocus",this.autofocus||false);if(this.elementTabIndex){P.attr({tabindex:this.elementTabIndex})}else{P.removeAttr("tabindex")}P.show()}},optionToData:function(O){if(O.is("option")){return{id:O.prop("value"),text:O.text(),element:O.get(),css:O.attr("class"),disabled:O.prop("disabled"),locked:t(O.attr("locked"),"locked")||t(O.data("locked"),true)}}else{if(O.is("optgroup")){return{text:O.attr("label"),children:[],element:O.get(),css:O.attr("class")}}}},prepareOpts:function(T){var R,P,O,S,Q=this;R=T.element;if(R.get(0).tagName.toLowerCase()==="select"){this.select=P=T.element}if(P){D.each(["id","multiple","ajax","query","createSearchChoice","initSelection","data","tags"],function(){if(this in T){throw new Error("Option '"+this+"' is not allowed for Select2 when attached to a <select> element.")}})}T=D.extend({},{populateResults:function(U,V,X){var W,Y=this.opts.id;W=function(af,Z,ae){var ag,ab,al,ai,ac,ak,aa,aj,ah,ad;af=T.sortResults(af,Z,X);for(ag=0,ab=af.length;ag<ab;ag=ag+1){al=af[ag];ac=(al.disabled===true);ai=(!ac)&&(Y(al)!==m);ak=al.children&&al.children.length>0;aa=D("<li></li>");aa.addClass("select2-results-dept-"+ae);aa.addClass("select2-result");aa.addClass(ai?"select2-result-selectable":"select2-result-unselectable");if(ac){aa.addClass("select2-disabled")}if(ak){aa.addClass("select2-result-with-children")}aa.addClass(Q.opts.formatResultCssClass(al));aa.attr("role","presentation");aj=D(document.createElement("div"));aj.addClass("select2-result-label");aj.attr("id","select2-result-label-"+a());aj.attr("role","option");ad=T.formatResult(al,aj,X,Q.opts.escapeMarkup);if(ad!==m){aj.html(ad)}aa.append(aj);if(ak){ah=D("<ul></ul>");ah.addClass("select2-result-sub");W(al.children,ah,ae+1);aa.append(ah)}aa.data("select2-data",al);Z.append(aa)}};W(V,U,0)}},D.fn.select2.defaults,T);if(typeof(T.id)!=="function"){O=T.id;T.id=function(U){return U[O]}}if(D.isArray(T.element.data("select2Tags"))){if("tags" in T){throw"tags specified as both an attribute 'data-select2-tags' and in options of Select2 "+T.element.attr("id")}T.tags=T.element.data("select2Tags")}if(P){T.query=this.bind(function(Y){var X={results:[],more:false},W=Y.term,V,U,Z;Z=function(aa,ac){var ab;if(aa.is("option")){if(Y.matcher(W,aa.text(),aa)){ac.push(Q.optionToData(aa))}}else{if(aa.is("optgroup")){ab=Q.optionToData(aa);aa.children().each2(function(ad,ae){Z(ae,ab.children)});if(ab.children.length>0){ac.push(ab)}}}};V=R.children();if(this.getPlaceholder()!==m&&V.length>0){U=this.getPlaceholderOption();if(U){V=V.not(U)}}V.each2(function(aa,ab){Z(ab,X.results)});Y.callback(X)});T.id=function(U){return U.id}}else{if(!("query" in T)){if("ajax" in T){S=T.element.data("ajax-url");if(S&&S.length>0){T.ajax.url=S}T.query=E.call(T.element,T.ajax)}else{if("data" in T){T.query=H(T.data)}else{if("tags" in T){T.query=z(T.tags);if(T.createSearchChoice===m){T.createSearchChoice=function(U){return{id:D.trim(U),text:D.trim(U)}}}if(T.initSelection===m){T.initSelection=function(U,W){var V=[];D(i(U.val(),T.separator)).each(function(){var Y={id:this,text:this},X=T.tags;if(D.isFunction(X)){X=X()}D(X).each(function(){if(t(this.id,Y.id)){Y=this;return false}});V.push(Y)});W(V)}}}}}}}if(typeof(T.query)!=="function"){throw"query function not defined for Select2 "+T.element.attr("id")}return T},monitorSource:function(){var P=this.opts.element,Q,O;P.on("change.select2",this.bind(function(R){if(this.opts.element.data("select2-change-triggered")!==true){this.initSelection()}}));Q=this.bind(function(){var S=P.prop("disabled");if(S===m){S=false}this.enable(!S);var R=P.prop("readonly");if(R===m){R=false}this.readonly(R);j(this.container,this.opts.element,this.opts.adaptContainerCssClass);this.container.addClass(C(this.opts.containerCssClass));j(this.dropdown,this.opts.element,this.opts.adaptDropdownCssClass);this.dropdown.addClass(C(this.opts.dropdownCssClass))});P.on("propertychange.select2",Q);if(this.mutationCallback===m){this.mutationCallback=function(R){R.forEach(Q)}}O=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver;if(O!==m){if(this.propertyObserver){delete this.propertyObserver;this.propertyObserver=null}this.propertyObserver=new O(this.mutationCallback);this.propertyObserver.observe(P.get(0),{attributes:true,subtree:false})}},triggerSelect:function(P){var O=D.Event("select2-selecting",{val:this.id(P),object:P});this.opts.element.trigger(O);return !O.isDefaultPrevented()},triggerChange:function(O){O=O||{};O=D.extend({},O,{type:"change",val:this.val()});this.opts.element.data("select2-change-triggered",true);this.opts.element.trigger(O);this.opts.element.data("select2-change-triggered",false);this.opts.element.click();if(this.opts.blurOnChange){this.opts.element.blur()}},isInterfaceEnabled:function(){return this.enabledInterface===true},enableInterface:function(){var O=this._enabled&&!this._readonly,P=!O;if(O===this.enabledInterface){return false}this.container.toggleClass("select2-container-disabled",P);this.close();this.enabledInterface=O;return true},enable:function(O){if(O===m){O=true}if(this._enabled===O){return}this._enabled=O;this.opts.element.prop("disabled",!O);this.enableInterface()},disable:function(){this.enable(false)},readonly:function(O){if(O===m){O=false}if(this._readonly===O){return false}this._readonly=O;this.opts.element.prop("readonly",O);this.enableInterface();return true},opened:function(){return this.container.hasClass("select2-dropdown-open")},positionDropdown:function(){var Q=this.dropdown,T=this.container.offset(),ac=this.container.outerHeight(false),ad=this.container.outerWidth(false),Y=Q.outerHeight(false),aa=D(window),ah=aa.width(),W=aa.height(),P=aa.scrollLeft()+ah,ag=aa.scrollTop()+W,R=T.top+ac,ae=T.left,O=R+Y<=ag,V=(T.top-Y)>=this.body().scrollTop(),Z=Q.outerWidth(false),aj=ae+Z<=P,ai=Q.hasClass("select2-drop-above"),U,af,S,X,ab;if(ai){af=true;if(!V&&O){S=true;af=false}}else{af=false;if(!O&&V){S=true;af=true}}if(S){Q.hide();T=this.container.offset();ac=this.container.outerHeight(false);ad=this.container.outerWidth(false);Y=Q.outerHeight(false);P=aa.scrollLeft()+ah;ag=aa.scrollTop()+W;R=T.top+ac;ae=T.left;Z=Q.outerWidth(false);aj=ae+Z<=P;Q.show()}if(this.opts.dropdownAutoWidth){ab=D(".select2-results",Q)[0];Q.addClass("select2-drop-auto-width");Q.css("width","");Z=Q.outerWidth(false)+(ab.scrollHeight===ab.clientHeight?0:w.width);Z>ad?ad=Z:Z=ad;aj=ae+Z<=P}else{this.container.removeClass("select2-drop-auto-width")}if(this.body().css("position")!=="static"){U=this.body().offset();R-=U.top;ae-=U.left}if(!aj){ae-=(ae+Z)-P}X={left:ae,width:ad};if(af){X.top=T.top-Y;X.bottom="auto";this.container.addClass("select2-drop-above");Q.addClass("select2-drop-above")}else{X.top=R;X.bottom="auto";this.container.removeClass("select2-drop-above");Q.removeClass("select2-drop-above")}X=D.extend(X,C(this.opts.dropdownCss));Q.css(X)},shouldOpen:function(){var O;if(this.opened()){return false}if(this._enabled===false||this._readonly===true){return false}O=D.Event("select2-opening");this.opts.element.trigger(O);return !O.isDefaultPrevented()},clearDropdownAlignmentPreference:function(){this.container.removeClass("select2-drop-above");this.dropdown.removeClass("select2-drop-above")},open:function(){if(!this.shouldOpen()){return false}this.opening();return true},opening:function(){var T=this.containerId,O="scroll."+T,R="resize."+T,Q="orientationchange."+T,P;this.container.addClass("select2-dropdown-open").addClass("select2-container-active");this.clearDropdownAlignmentPreference();if(this.dropdown[0]!==this.body().children().last()[0]){this.dropdown.detach().appendTo(this.body())}P=D("#select2-drop-mask");if(P.length==0){P=D(document.createElement("div"));P.attr("id","select2-drop-mask").attr("class","select2-drop-mask");P.hide();P.appendTo(this.body());P.on("mousedown touchstart click",function(V){var W=D("#select2-drop"),U;if(W.length>0){U=W.data("select2");if(U.opts.selectOnBlur){U.selectHighlighted({noFocus:true})}U.close({focus:true});V.preventDefault();V.stopPropagation()}})}if(this.dropdown.prev()[0]!==P[0]){this.dropdown.before(P)}D("#select2-drop").removeAttr("id");this.dropdown.attr("id","select2-drop");P.show();this.positionDropdown();this.dropdown.show();this.positionDropdown();this.dropdown.addClass("select2-drop-active");var S=this;this.container.parents().add(window).each(function(){D(this).on(R+" "+O+" "+Q,function(U){S.positionDropdown()})})},close:function(){if(!this.opened()){return}var R=this.containerId,O="scroll."+R,Q="resize."+R,P="orientationchange."+R;this.container.parents().add(window).each(function(){D(this).off(O).off(Q).off(P)});this.clearDropdownAlignmentPreference();D("#select2-drop-mask").hide();this.dropdown.removeAttr("id");this.dropdown.hide();this.container.removeClass("select2-dropdown-open").removeClass("select2-container-active");this.results.empty();this.clearSearch();this.search.removeClass("select2-active");this.opts.element.trigger(D.Event("select2-close"))},externalSearch:function(O){this.open();this.search.val(O);this.updateResults(false)},clearSearch:function(){},getMaximumSelectionSize:function(){return C(this.opts.maximumSelectionSize)},ensureHighlightVisible:function(){var R=this.results,Q,O,V,U,S,T,P;O=this.highlight();if(O<0){return}if(O==0){R.scrollTop(0);return}Q=this.findHighlightableChoices().find(".select2-result-label");V=D(Q[O]);U=V.offset().top+V.outerHeight(true);if(O===Q.length-1){P=R.find("li.select2-more-results");if(P.length>0){U=P.offset().top+P.outerHeight(true)}}S=R.offset().top+R.outerHeight(true);if(U>S){R.scrollTop(R.scrollTop()+(U-S))}T=V.offset().top-R.offset().top;if(T<0&&V.css("display")!="none"){R.scrollTop(R.scrollTop()+T)}},findHighlightableChoices:function(){return this.results.find(".select2-result-selectable:not(.select2-disabled, .select2-selected)")},moveHighlight:function(R){var Q=this.findHighlightableChoices(),P=this.highlight();while(P>-1&&P<Q.length){P+=R;var O=D(Q[P]);if(O.hasClass("select2-result-selectable")&&!O.hasClass("select2-disabled")&&!O.hasClass("select2-selected")){this.highlight(P);break}}},highlight:function(P){var R=this.findHighlightableChoices(),O,Q;if(arguments.length===0){return q(R.filter(".select2-highlighted")[0],R.get())}if(P>=R.length){P=R.length-1}if(P<0){P=0}this.removeHighlight();O=D(R[P]);O.addClass("select2-highlighted");this.search.attr("aria-activedescendant",O.find(".select2-result-label").attr("id"));this.ensureHighlightVisible();Q=O.data("select2-data");if(Q){this.opts.element.trigger({type:"select2-highlight",val:this.id(Q),choice:Q})}},removeHighlight:function(){this.results.find(".select2-highlighted").removeClass("select2-highlighted")},countSelectableResults:function(){return this.findHighlightableChoices().length},highlightUnderEvent:function(P){var O=D(P.target).closest(".select2-result-selectable");if(O.length>0&&!O.is(".select2-highlighted")){var Q=this.findHighlightableChoices();this.highlight(Q.index(O))}else{if(O.length==0){this.removeHighlight()}}},loadMoreIfNeeded:function(){var S=this.results,R=S.find("li.select2-more-results"),U,T=this.resultsPage+1,O=this,Q=this.search.val(),P=this.context;if(R.length===0){return}U=R.offset().top-S.offset().top-S.height();if(U<=this.opts.loadMorePadding){R.addClass("select2-active");this.opts.query({element:this.opts.element,term:Q,page:T,context:P,matcher:this.opts.matcher,callback:this.bind(function(V){if(!O.opened()){return}O.opts.populateResults.call(this,S,V.results,{term:Q,page:T,context:P});O.postprocessResults(V,false,false);if(V.more===true){R.detach().appendTo(S).text(O.opts.formatLoadMore(T+1));window.setTimeout(function(){O.loadMoreIfNeeded()},10)}else{R.remove()}O.positionDropdown();O.resultsPage=T;O.context=V.context;this.opts.element.trigger({type:"select2-loaded",items:V})})})}},tokenize:function(){},updateResultsTimeout:function(){var O=this;clearTimeout(timeout);timeout=setTimeout(function(){O.updateResults()},700)},updateResults:function(W){var aa=this.search,U=this.results,O=this.opts,T,Z=this,X,S=aa.val(),Q=D.data(this.container,"select2-last-term"),Y;if(W!==true&&Q&&t(S,Q)){return}D.data(this.container,"select2-last-term",S);if(W!==true&&(this.showSearchInput===false||!this.opened())){return}function V(){aa.removeClass("select2-active");Z.positionDropdown()}function P(ab){U.html(ab);V()}Y=++this.queryCount;var R=this.getMaximumSelectionSize();if(R>=1){T=this.data();if(D.isArray(T)&&T.length>=R&&y(O.formatSelectionTooBig,"formatSelectionTooBig")){P("<li class='select2-selection-limit'>"+O.formatSelectionTooBig(R)+"</li>");return}}if(aa.val().length<O.minimumInputLength){if(y(O.formatInputTooShort,"formatInputTooShort")){P("<li class='select2-no-results'>"+O.formatInputTooShort(aa.val(),O.minimumInputLength)+"</li>")}else{P("")}if(W&&this.showSearch){this.showSearch(true)}return}if(O.maximumInputLength&&aa.val().length>O.maximumInputLength){if(y(O.formatInputTooLong,"formatInputTooLong")){P("<li class='select2-no-results'>"+O.formatInputTooLong(aa.val(),O.maximumInputLength)+"</li>")}else{P("")}return}if(O.formatSearching&&this.findHighlightableChoices().length===0){P("<li class='select2-searching'>"+O.formatSearching()+"</li>")}aa.addClass("select2-active");this.removeHighlight();X=this.tokenize();if(X!=m&&X!=null){aa.val(X)}this.resultsPage=1;O.query({element:O.element,term:aa.val(),page:this.resultsPage,context:null,matcher:O.matcher,callback:this.bind(function(ac){var ab;if(Y!=this.queryCount){return}if(!this.opened()){this.search.removeClass("select2-active");return}this.context=(ac.context===m)?null:ac.context;if(this.opts.createSearchChoice&&aa.val()!==""){ab=this.opts.createSearchChoice.call(Z,aa.val(),ac.results);if(ab!==m&&ab!==null&&Z.id(ab)!==m&&Z.id(ab)!==null){if(D(ac.results).filter(function(){return t(Z.id(this),Z.id(ab))}).length===0){ac.results.unshift(ab)}}}if(ac.results.length===0&&y(O.formatNoMatches,"formatNoMatches")){P("<li class='select2-no-results'>"+O.formatNoMatches(aa.val())+"</li>");return}U.empty();Z.opts.populateResults.call(this,U,ac.results,{term:aa.val(),page:this.resultsPage,context:null});if(ac.more===true&&y(O.formatLoadMore,"formatLoadMore")){U.append("<li class='select2-more-results'>"+Z.opts.escapeMarkup(O.formatLoadMore(this.resultsPage))+"</li>");window.setTimeout(function(){Z.loadMoreIfNeeded()},10)}this.postprocessResults(ac,W);V();this.opts.element.trigger({type:"select2-loaded",items:ac})})})},cancel:function(){this.close()},blur:function(){if(this.opts.selectOnBlur){this.selectHighlighted({noFocus:true})}this.close();this.container.removeClass("select2-container-active");if(this.search[0]===document.activeElement){this.search.blur()}this.clearSearch();this.selection.find(".select2-search-choice-focus").removeClass("select2-search-choice-focus")},focusSearch:function(){I(this.search)},selectHighlighted:function(P){var O=this.highlight(),Q=this.results.find(".select2-highlighted"),R=Q.closest(".select2-result").data("select2-data");if(R){this.highlight(O);this.onSelect(R,P)}else{if(P&&P.noFocus){this.close()}}},getPlaceholder:function(){var O;return this.opts.element.attr("placeholder")||this.opts.element.attr("data-placeholder")||this.opts.element.data("placeholder")||this.opts.placeholder||((O=this.getPlaceholderOption())!==m?O.text():m)},getPlaceholderOption:function(){if(this.select){var O=this.select.children("option").first();if(this.opts.placeholderOption!==m){return(this.opts.placeholderOption==="first"&&O)||(typeof this.opts.placeholderOption==="function"&&this.opts.placeholderOption(this.select))}else{if(O.text()===""&&O.val()===""){return O}}}},initContainerWidth:function(){function P(){var U,S,V,T,R,Q;if(this.opts.width==="off"){return null}else{if(this.opts.width==="element"){return this.opts.element.outerWidth(false)===0?"auto":this.opts.element.outerWidth(false)+"px"}else{if(this.opts.width==="copy"||this.opts.width==="resolve"){U=this.opts.element.attr("style");if(U!==m){S=U.split(";");for(T=0,R=S.length;T<R;T=T+1){Q=S[T].replace(/\s/g,"");V=Q.match(/^width:(([-+]?([0-9]*\.)?[0-9]+)(px|em|ex|%|in|cm|mm|pt|pc))/i);if(V!==null&&V.length>=1){return V[1]}}}if(this.opts.width==="resolve"){U=this.opts.element.css("width");if(U.indexOf("%")>0){return U}return(this.opts.element.outerWidth(false)===0?"auto":this.opts.element.outerWidth(false)+"px")}return null}else{if(D.isFunction(this.opts.width)){return this.opts.width()}else{return this.opts.width}}}}}var O=P.call(this);if(O!==null){this.container.css("width",O)}}});x=L(N,{createContainer:function(){var O=D(document.createElement("div")).attr({"class":"select2-container"}).html(["<a href='javascript:void(0)' onclick='return false;' class='select2-choice' tabindex='-1'>","   <span class='select2-chosen'>&nbsp;</span><abbr class='select2-search-choice-close'></abbr>","   <span class='select2-arrow' role='presentation'><b role='presentation'></b></span>","</a>","<input class='select2-focusser select2-offscreen' type='text' aria-haspopup='true' role='button' />","<div class='select2-drop select2-display-none'>","   <div class='select2-search'>","       <input type='text' autocomplete='off' autocorrect='off' autocapitalize='off' spellcheck='false' class='select2-input' role='combobox' aria-expanded='true'","       aria-autocomplete='list' title='Search field' />","   </div>","   <ul class='select2-results' role='listbox'>","   </ul>","</div>"].join(""));return O},enableInterface:function(){if(this.parent.enableInterface.apply(this,arguments)){this.focusser.prop("disabled",!this.isInterfaceEnabled())}},opening:function(){var Q,P,O;if(this.opts.minimumResultsForSearch>=0){this.showSearch(true)}this.parent.opening.apply(this,arguments);if(this.showSearchInput!==false){this.search.val(this.focusser.val())}this.search.focus();Q=this.search.get(0);if(Q.createTextRange){P=Q.createTextRange();P.collapse(false);P.select()}else{if(Q.setSelectionRange){O=this.search.val().length;Q.setSelectionRange(O,O)}}if(this.search.val()===""){if(this.nextSearchTerm!=m){this.search.val(this.nextSearchTerm);this.search.select()}}this.focusser.prop("disabled",true).val("");this.updateResults(true);this.opts.element.trigger(D.Event("select2-open"))},close:function(O){if(!this.opened()){return}this.parent.close.apply(this,arguments);O=O||{focus:true};this.focusser.prop("disabled",false);if(O.focus){this.focusser.focus()}},focus:function(){if(this.opened()){this.close()}else{this.focusser.prop("disabled",false);this.focusser.focus()}},isFocused:function(){return this.container.hasClass("select2-container-active")},cancel:function(){this.parent.cancel.apply(this,arguments);this.focusser.prop("disabled",false);this.focusser.focus()},destroy:function(){D("label[for='"+this.focusser.attr("id")+"']").attr("for",this.opts.element.attr("id"));this.parent.destroy.apply(this,arguments)},initContainer:function(){var R,O=this.container,T=this.dropdown,S=a(),Q;if(this.opts.minimumResultsForSearch<0){this.showSearch(false)}else{this.showSearch(true)}this.selection=R=O.find(".select2-choice");this.focusser=O.find(".select2-focusser");R.find(".select2-chosen").attr("id","select2-chosen-"+S);this.focusser.attr("aria-labelledby","select2-chosen-"+S);this.results.attr("id","select2-results-"+S);this.search.attr("aria-owns","select2-results-"+S);this.focusser.attr("id","s2id_autogen"+S);Q=D("label[for='"+this.opts.element.attr("id")+"']").attr("for",this.focusser.attr("id"));var P=this.opts.element.attr("title");this.opts.element.attr("title",(P||Q.text()));this.focusser.attr("tabindex",this.elementTabIndex);this.search.on("keydown",this.bind(function(U){if(!this.isInterfaceEnabled()){return}if(U.which===K.PAGE_UP||U.which===K.PAGE_DOWN){A(U);return}switch(U.which){case K.UP:case K.DOWN:this.moveHighlight((U.which===K.UP)?-1:1);A(U);return;case K.ENTER:this.selectHighlighted();A(U);return;case K.TAB:this.selectHighlighted({noFocus:true});return;case K.ESC:this.cancel(U);A(U);return}}));this.search.on("blur",this.bind(function(U){if(document.activeElement===this.body().get(0)){window.setTimeout(this.bind(function(){if(this.opened()){this.search.focus()}}),0)}}));this.focusser.on("keydown",this.bind(function(U){if(!this.isInterfaceEnabled()){return}if(U.which===K.TAB||K.isControl(U)||K.isFunctionKey(U)||U.which===K.ESC){return}if(this.opts.openOnEnter===false&&U.which===K.ENTER){A(U);return}if(U.which==K.DOWN||U.which==K.UP||(U.which==K.ENTER&&this.opts.openOnEnter)){if(U.altKey||U.ctrlKey||U.shiftKey||U.metaKey){return}this.open();A(U);return}if(U.which==K.DELETE||U.which==K.BACKSPACE){if(this.opts.allowClear){this.clear()}A(U);return}}));F(this.focusser);this.focusser.on("keyup-change input",this.bind(function(U){if(this.opts.minimumResultsForSearch>=0){U.stopPropagation();if(this.opened()){return}this.open()}}));R.on("mousedown touchstart","abbr",this.bind(function(U){if(!this.isInterfaceEnabled()){return}this.clear();b(U);this.close();this.selection.focus()}));R.on("mousedown touchstart",this.bind(function(U){if(!this.container.hasClass("select2-container-active")){this.opts.element.trigger(D.Event("select2-focus"))}if(this.opened()){this.close()}else{if(this.isInterfaceEnabled()){this.open()}}A(U)}));T.on("mousedown touchstart",this.bind(function(){this.search.focus()}));R.on("focus",this.bind(function(U){A(U)}));this.focusser.on("focus",this.bind(function(){if(!this.container.hasClass("select2-container-active")){this.opts.element.trigger(D.Event("select2-focus"))}this.container.addClass("select2-container-active")})).on("blur",this.bind(function(){if(!this.opened()){this.container.removeClass("select2-container-active");this.opts.element.trigger(D.Event("select2-blur"))}}));this.search.on("focus",this.bind(function(){if(!this.container.hasClass("select2-container-active")){this.opts.element.trigger(D.Event("select2-focus"))}this.container.addClass("select2-container-active")}));this.initContainerWidth();this.opts.element.addClass("select2-offscreen");this.setPlaceholder()},clear:function(Q){var R=this.selection.data("select2-data");if(R){var P=D.Event("select2-clearing");this.opts.element.trigger(P);if(P.isDefaultPrevented()){return}var O=this.getPlaceholderOption();this.opts.element.val(O?O.val():"");this.selection.find(".select2-chosen").empty();this.selection.removeData("select2-data");this.setPlaceholder();if(Q!==false){this.opts.element.trigger({type:"select2-removed",val:this.id(R),choice:R});this.triggerChange({removed:R})}}},initSelection:function(){var P;if(this.isPlaceholderOptionSelected()){this.updateSelection(null);this.close();this.setPlaceholder()}else{var O=this;this.opts.initSelection.call(null,this.opts.element,function(Q){if(Q!==m&&Q!==null){O.updateSelection(Q);O.close();O.setPlaceholder()}})}},isPlaceholderOptionSelected:function(){var O;if(!this.getPlaceholder()){return false}return((O=this.getPlaceholderOption())!==m&&O.prop("selected"))||(this.opts.element.val()==="")||(this.opts.element.val()===m)||(this.opts.element.val()===null)},prepareOpts:function(){var P=this.parent.prepareOpts.apply(this,arguments),O=this;if(P.element.get(0).tagName.toLowerCase()==="select"){P.initSelection=function(Q,S){var R=Q.find("option").filter(function(){return this.selected});S(O.optionToData(R))}}else{if("data" in P){P.initSelection=P.initSelection||function(R,T){var S=R.val();var Q=null;P.query({matcher:function(U,X,V){var W=t(S,P.id(V));if(W){Q=V}return W},callback:!D.isFunction(T)?D.noop:function(){T(Q)}})}}}return P},getPlaceholder:function(){if(this.select){if(this.getPlaceholderOption()===m){return m}}return this.parent.getPlaceholder.apply(this,arguments)},setPlaceholder:function(){var O=this.getPlaceholder();if(this.isPlaceholderOptionSelected()&&O!==m){if(this.select&&this.getPlaceholderOption()===m){return}this.selection.find(".select2-chosen").html(this.opts.escapeMarkup(O));this.selection.addClass("select2-default");this.container.removeClass("select2-allowclear")}},postprocessResults:function(T,P,S){var R=0,O=this,U=true;this.findHighlightableChoices().each2(function(V,W){if(t(O.id(W.data("select2-data")),O.opts.element.val())){R=V;return false}});if(S!==false){if(P===true&&R>=0){this.highlight(R)}else{this.highlight(0)}}if(P===true){var Q=this.opts.minimumResultsForSearch;if(Q>=0){this.showSearch(r(T.results)>=Q)}}},showSearch:function(O){if(this.showSearchInput===O){return}this.showSearchInput=O;this.dropdown.find(".select2-search").toggleClass("select2-search-hidden",!O);this.dropdown.find(".select2-search").toggleClass("select2-offscreen",!O);D(this.dropdown,this.container).toggleClass("select2-with-searchbox",O)},onSelect:function(Q,P){if(!this.triggerSelect(Q)){return}var O=this.opts.element.val(),R=this.data();this.opts.element.val(this.id(Q));this.updateSelection(Q);this.opts.element.trigger({type:"select2-selected",val:this.id(Q),choice:Q});this.nextSearchTerm=this.opts.nextSearchTerm(Q,this.search.val());this.close();if(!P||!P.noFocus){this.focusser.focus()}if(!t(O,this.id(Q))){this.triggerChange({added:Q,removed:R})}},updateSelection:function(R){var P=this.selection.find(".select2-chosen"),Q,O;this.selection.data("select2-data",R);P.empty();if(R!==null){Q=this.opts.formatSelection(R,P,this.opts.escapeMarkup)}if(Q!==m){P.append(Q)}O=this.opts.formatSelectionCssClass(R,P);if(O!==m){P.addClass(O)}this.selection.removeClass("select2-default");if(this.opts.allowClear&&this.getPlaceholder()!==m){this.container.addClass("select2-allowclear")}},val:function(){var S,P=false,Q=null,O=this,R=this.data();if(arguments.length===0){return this.opts.element.val()}S=arguments[0];if(arguments.length>1){P=arguments[1]}if(this.select){this.select.val(S).find("option").filter(function(){return this.selected}).each2(function(T,U){Q=O.optionToData(U);return false});this.updateSelection(Q);this.setPlaceholder();if(P){this.triggerChange({added:Q,removed:R})}}else{if(!S&&S!==0){this.clear(P);return}if(this.opts.initSelection===m){throw new Error("cannot call val() if initSelection() is not defined")}this.opts.element.val(S);this.opts.initSelection(this.opts.element,function(T){O.opts.element.val(!T?"":O.id(T));O.updateSelection(T);O.setPlaceholder();if(P){O.triggerChange({added:T,removed:R})}})}},clearSearch:function(){this.search.val("");this.focusser.val("")},data:function(Q){var P,O=false;if(arguments.length===0){P=this.selection.data("select2-data");if(P==m){P=null}return P}else{if(arguments.length>1){O=arguments[1]}if(!Q){this.clear(O)}else{P=this.data();this.opts.element.val(!Q?"":this.id(Q));this.updateSelection(Q);if(O){this.triggerChange({added:Q,removed:P})}}}}});c=L(N,{createContainer:function(){var O=D(document.createElement("div")).attr({"class":"select2-container select2-container-multi"}).html(["<ul class='select2-choices'>","  <li class='select2-search-field'>","    <input type='text' autocomplete='off' autocorrect='off' autocapitalize='off' spellcheck='false' class='select2-input'>","  </li>","</ul>","<div class='select2-drop select2-drop-multi select2-display-none'>","   <ul class='select2-results'>","   </ul>","</div>"].join(""));return O},prepareOpts:function(){var P=this.parent.prepareOpts.apply(this,arguments),O=this;if(P.element.get(0).tagName.toLowerCase()==="select"){P.initSelection=function(Q,S){var R=[];Q.find("option").filter(function(){return this.selected}).each2(function(T,U){R.push(O.optionToData(U))});S(R)}}else{if("data" in P){P.initSelection=P.initSelection||function(Q,T){var R=i(Q.val(),P.separator);var S=[];P.query({matcher:function(U,X,V){var W=D.grep(R,function(Y){return t(Y,P.id(V))}).length;if(W){S.push(V)}return W},callback:!D.isFunction(T)?D.noop:function(){var U=[];for(var X=0;X<R.length;X++){var Y=R[X];for(var W=0;W<S.length;W++){var V=S[W];if(t(Y,P.id(V))){U.push(V);S.splice(W,1);break}}}T(U)}})}}}return P},selectChoice:function(O){var P=this.container.find(".select2-search-choice-focus");if(P.length&&O&&O[0]==P[0]){}else{if(P.length){this.opts.element.trigger("choice-deselected",P)}P.removeClass("select2-search-choice-focus");if(O&&O.length){this.close();O.addClass("select2-search-choice-focus");this.opts.element.trigger("choice-selected",O)}}},destroy:function(){D("label[for='"+this.search.attr("id")+"']").attr("for",this.opts.element.attr("id"));this.parent.destroy.apply(this,arguments)},initContainer:function(){var O=".select2-choices",P;this.searchContainer=this.container.find(".select2-search-field");this.selection=P=this.container.find(O);var Q=this;this.selection.on("click",".select2-search-choice:not(.select2-locked)",function(R){Q.search[0].focus();Q.selectChoice(D(this))});this.search.attr("id","s2id_autogen"+a());D("label[for='"+this.opts.element.attr("id")+"']").attr("for",this.search.attr("id"));this.search.on("input paste",this.bind(function(){if(!this.isInterfaceEnabled()){return}if(!this.opened()){this.open()}}));this.search.attr("tabindex",this.elementTabIndex);this.keydowns=0;this.search.on("keydown",this.bind(function(V){if(!this.isInterfaceEnabled()){return}++this.keydowns;var T=P.find(".select2-search-choice-focus");var U=T.prev(".select2-search-choice:not(.select2-locked)");var S=T.next(".select2-search-choice:not(.select2-locked)");var W=f(this.search);if(T.length&&(V.which==K.LEFT||V.which==K.RIGHT||V.which==K.BACKSPACE||V.which==K.DELETE||V.which==K.ENTER)){var R=T;if(V.which==K.LEFT&&U.length){R=U}else{if(V.which==K.RIGHT){R=S.length?S:null}else{if(V.which===K.BACKSPACE){this.unselect(T.first());this.search.width(10);R=U.length?U:S}else{if(V.which==K.DELETE){this.unselect(T.first());this.search.width(10);R=S.length?S:null}else{if(V.which==K.ENTER){R=null}}}}}this.selectChoice(R);A(V);if(!R||!R.length){this.open()}return}else{if(((V.which===K.BACKSPACE&&this.keydowns==1)||V.which==K.LEFT)&&(W.offset==0&&!W.length)){this.selectChoice(P.find(".select2-search-choice:not(.select2-locked)").last());A(V);return}else{this.selectChoice(null)}}if(this.opened()){switch(V.which){case K.UP:case K.DOWN:this.moveHighlight((V.which===K.UP)?-1:1);A(V);return;case K.ENTER:this.selectHighlighted();A(V);return;case K.TAB:this.selectHighlighted({noFocus:true});this.close();return;case K.ESC:this.cancel(V);A(V);return}}if(V.which===K.TAB||K.isControl(V)||K.isFunctionKey(V)||V.which===K.BACKSPACE||V.which===K.ESC){return}if(V.which===K.ENTER){if(this.opts.openOnEnter===false){return}else{if(V.altKey||V.ctrlKey||V.shiftKey||V.metaKey){return}}}this.open();if(V.which===K.PAGE_UP||V.which===K.PAGE_DOWN){A(V)}if(V.which===K.ENTER){A(V)}}));this.search.on("keyup",this.bind(function(R){this.keydowns=0;this.resizeSearch()}));this.search.on("blur",this.bind(function(R){this.container.removeClass("select2-container-active");this.search.removeClass("select2-focused");this.selectChoice(null);if(!this.opened()){this.clearSearch()}R.stopImmediatePropagation();this.opts.element.trigger(D.Event("select2-blur"))}));this.container.on("click",O,this.bind(function(R){if(!this.isInterfaceEnabled()){return}if(D(R.target).closest(".select2-search-choice").length>0){return}this.selectChoice(null);this.clearPlaceholder();if(!this.container.hasClass("select2-container-active")){this.opts.element.trigger(D.Event("select2-focus"))}this.open();this.focusSearch();R.preventDefault()}));this.container.on("focus",O,this.bind(function(){if(!this.isInterfaceEnabled()){return}if(!this.container.hasClass("select2-container-active")){this.opts.element.trigger(D.Event("select2-focus"))}this.container.addClass("select2-container-active");this.dropdown.addClass("select2-drop-active");this.clearPlaceholder()}));this.initContainerWidth();this.opts.element.addClass("select2-offscreen");this.clearSearch()},enableInterface:function(){if(this.parent.enableInterface.apply(this,arguments)){this.search.prop("disabled",!this.isInterfaceEnabled())}},initSelection:function(){var P;if(this.opts.element.val()===""&&this.opts.element.text()===""){this.updateSelection([]);this.close();this.clearSearch()}if(this.select||this.opts.element.val()!==""){var O=this;this.opts.initSelection.call(null,this.opts.element,function(Q){if(Q!==m&&Q!==null){O.updateSelection(Q);O.close();O.clearSearch()}})}},clearSearch:function(){var P=this.getPlaceholder(),O=this.getMaxSearchWidth();if(P!==m&&this.getVal().length===0&&this.search.hasClass("select2-focused")===false){this.search.val(P).addClass("select2-default");this.search.width(O>0?O:this.container.css("width"))}else{this.search.val("").width(10)}},clearPlaceholder:function(){if(this.search.hasClass("select2-default")){this.search.val("").removeClass("select2-default")}},opening:function(){this.clearPlaceholder();this.resizeSearch();this.parent.opening.apply(this,arguments);this.focusSearch();this.updateResults(true);this.search.focus();this.opts.element.trigger(D.Event("select2-open"))},close:function(){if(!this.opened()){return}this.parent.close.apply(this,arguments)},focus:function(){this.close();this.search.focus()},isFocused:function(){return this.search.hasClass("select2-focused")},updateSelection:function(R){var Q=[],P=[],O=this;D(R).each(function(){if(q(O.id(this),Q)<0){Q.push(O.id(this));P.push(this)}});R=P;this.selection.find(".select2-search-choice").remove();D(R).each(function(){O.addSelectedChoice(this)});O.postprocessResults()},tokenize:function(){var O=this.search.val();O=this.opts.tokenizer.call(this,O,this.data(),this.bind(this.onSelect),this.opts);if(O!=null&&O!=m){this.search.val(O);if(O.length>0){this.open()}}},onSelect:function(P,O){if(!this.triggerSelect(P)){return}this.addSelectedChoice(P);this.opts.element.trigger({type:"selected",val:this.id(P),choice:P});this.clearSearch();this.updateResults();if(this.select||!this.opts.closeOnSelect){this.postprocessResults(P,false,this.opts.closeOnSelect===true)}if(this.opts.closeOnSelect){this.close();this.search.width(10)}else{if(this.countSelectableResults()>0){this.search.width(10);this.resizeSearch();if(this.getMaximumSelectionSize()>0&&this.val().length>=this.getMaximumSelectionSize()){this.updateResults(true)}this.positionDropdown()}else{this.close();this.search.width(10)}}this.triggerChange({added:P});if(!O||!O.noFocus){this.focusSearch()}},cancel:function(){this.close();this.focusSearch()},addSelectedChoice:function(S){var U=!S.locked,Q=D("<li class='select2-search-choice'>    <div></div>    <a href='#' onclick='return false;' class='select2-search-choice-close' tabindex='-1'></a></li>"),V=D("<li class='select2-search-choice select2-locked'><div></div></li>");var R=U?Q:V,O=this.id(S),P=this.getVal(),T,W;T=this.opts.formatSelection(S,R.find("div"),this.opts.escapeMarkup);if(T!=m){R.find("div").replaceWith("<div>"+T+"</div>")}W=this.opts.formatSelectionCssClass(S,R.find("div"));if(W!=m){R.addClass(W)}if(U){R.find(".select2-search-choice-close").on("mousedown",A).on("click dblclick",this.bind(function(X){if(!this.isInterfaceEnabled()){return}D(X.target).closest(".select2-search-choice").fadeOut("fast",this.bind(function(){this.unselect(D(X.target));this.selection.find(".select2-search-choice-focus").removeClass("select2-search-choice-focus");this.close();this.focusSearch()})).dequeue();A(X)})).on("focus",this.bind(function(){if(!this.isInterfaceEnabled()){return}this.container.addClass("select2-container-active");this.dropdown.addClass("select2-drop-active")}))}R.data("select2-data",S);R.insertBefore(this.searchContainer);P.push(O);this.setVal(P)},unselect:function(Q){var S=this.getVal(),R,P;Q=Q.closest(".select2-search-choice");if(Q.length===0){throw"Invalid argument: "+Q+". Must be .select2-search-choice"}R=Q.data("select2-data");if(!R){return}while((P=q(this.id(R),S))>=0){S.splice(P,1);this.setVal(S);if(this.select){this.postprocessResults()}}var O=D.Event("select2-removing");O.val=this.id(R);O.choice=R;this.opts.element.trigger(O);if(O.isDefaultPrevented()){return}Q.remove();this.opts.element.trigger({type:"select2-removed",val:this.id(R),choice:R});this.triggerChange({removed:R})},postprocessResults:function(S,P,R){var T=this.getVal(),U=this.results.find(".select2-result"),Q=this.results.find(".select2-result-with-children"),O=this;U.each2(function(W,V){var X=O.id(V.data("select2-data"));if(q(X,T)>=0){V.addClass("select2-selected");V.find(".select2-result-selectable").addClass("select2-selected")}});Q.each2(function(W,V){if(!V.is(".select2-result-selectable")&&V.find(".select2-result-selectable:not(.select2-selected)").length===0){V.addClass("select2-selected")}});if(this.highlight()==-1&&R!==false){O.highlight(0)}if(!this.opts.createSearchChoice&&!U.filter(".select2-result:not(.select2-selected)").length>0){if(!S||S&&!S.more&&this.results.find(".select2-no-results").length===0){if(y(O.opts.formatNoMatches,"formatNoMatches")){this.results.append("<li class='select2-no-results'>"+O.opts.formatNoMatches(O.search.val())+"</li>")}}}},getMaxSearchWidth:function(){return this.selection.width()-h(this.search)},resizeSearch:function(){var T,R,Q,O,P,S=h(this.search);T=n(this.search)+10;R=this.search.offset().left;Q=this.selection.width();O=this.selection.offset().left;P=Q-(R-O)-S;if(P<T){P=Q-S}if(P<40){P=Q-S}if(P<=0){P=T}this.search.width(Math.floor(P))},getVal:function(){var O;if(this.select){O=this.select.val();return O===null?[]:O}else{O=this.opts.element.val();return i(O,this.opts.separator)}},setVal:function(P){var O;if(this.select){this.select.val(P)}else{O=[];D(P).each(function(){if(q(this,O)<0){O.push(this)}});this.opts.element.val(O.length===0?"":O.join(this.opts.separator))}},buildChangeDetails:function(O,R){var R=R.slice(0),O=O.slice(0);for(var Q=0;Q<R.length;Q++){for(var P=0;P<O.length;P++){if(t(this.opts.id(R[Q]),this.opts.id(O[P]))){R.splice(Q,1);if(Q>0){Q--}O.splice(P,1);P--}}}return{added:R,removed:O}},val:function(R,P){var Q,O=this;if(arguments.length===0){return this.getVal()}Q=this.data();if(!Q.length){Q=[]}if(!R&&R!==0){this.opts.element.val("");this.updateSelection([]);this.clearSearch();if(P){this.triggerChange({added:this.data(),removed:Q})}return}this.setVal(R);if(this.select){this.opts.initSelection(this.select,this.bind(this.updateSelection));if(P){this.triggerChange(this.buildChangeDetails(Q,this.data()))}}else{if(this.opts.initSelection===m){throw new Error("val() cannot be called if initSelection() is not defined")}this.opts.initSelection(this.opts.element,function(T){var S=D.map(T,O.id);O.setVal(S);O.updateSelection(T);O.clearSearch();if(P){O.triggerChange(O.buildChangeDetails(Q,O.data()))}})}this.clearSearch()},onSortStart:function(){if(this.select){throw new Error("Sorting of elements is not supported when attached to <select>. Attach to <input type='hidden'/> instead.")}this.search.width(0);this.searchContainer.hide()},onSortEnd:function(){var P=[],O=this;this.searchContainer.show();this.searchContainer.appendTo(this.searchContainer.parent());this.resizeSearch();this.selection.find(".select2-search-choice").each(function(){P.push(O.opts.id(D(this).data("select2-data")))});this.setVal(P);this.triggerChange()},data:function(Q,R){var P=this,S,O;if(arguments.length===0){return this.selection.children(".select2-search-choice").map(function(){return D(this).data("select2-data")}).get()}else{O=this.data();if(!Q){Q=[]}S=D.map(Q,function(T){return P.opts.id(T)});this.setVal(S);this.updateSelection(Q);this.clearSearch();if(R){this.triggerChange(this.buildChangeDetails(O,this.data()))}}}});D.fn.select2=function(){var T=Array.prototype.slice.call(arguments,0),P,S,O,V,X,W=["val","destroy","opened","open","close","focus","isFocused","container","dropdown","onSortStart","onSortEnd","enable","disable","readonly","positionDropdown","data","search"],U=["opened","isFocused","container","dropdown"],Q=["val","data"],R={search:"externalSearch"};this.each(function(){if(T.length===0||typeof(T[0])==="object"){P=T.length===0?{}:D.extend({},T[0]);P.element=D(this);if(P.element.get(0).tagName.toLowerCase()==="select"){X=P.element.prop("multiple")}else{X=P.multiple||false;if("tags" in P){P.multiple=X=true}}S=X?new c():new x();S.init(P)}else{if(typeof(T[0])==="string"){if(q(T[0],W)<0){throw"Unknown method: "+T[0]}V=m;S=D(this).data("select2");if(S===m){return}O=T[0];if(O==="container"){V=S.container}else{if(O==="dropdown"){V=S.dropdown}else{if(R[O]){O=R[O]}V=S[O].apply(S,T.slice(1))}}if(q(T[0],U)>=0||(q(T[0],Q)&&T.length==1)){return false}}else{throw"Invalid arguments to select2 plugin: "+T}}});return(V===m)?this:V};D.fn.select2.defaults={width:"copy",loadMorePadding:0,closeOnSelect:true,openOnEnter:true,containerCss:{},dropdownCss:{},containerCssClass:"",dropdownCssClass:"",formatResult:function(P,Q,S,O){var R=[];u(P.text,S.term,R,O);return R.join("")},formatSelection:function(Q,P,O){return Q?O(Q.text):m},sortResults:function(P,O,Q){return P},formatResultCssClass:function(O){return O.css},formatSelectionCssClass:function(P,O){return m},formatNoMatches:function(){return"No matches found"},formatInputTooShort:function(O,P){var Q=P-O.length;return"Please enter "+Q+" more character"+(Q==1?"":"s")},formatInputTooLong:function(P,O){var Q=P.length-O;return"Please delete "+Q+" character"+(Q==1?"":"s")},formatSelectionTooBig:function(O){return"You can only select "+O+" item"+(O==1?"":"s")},formatLoadMore:function(O){return"Loading more results..."},formatSearching:function(){return"Searching..."},minimumResultsForSearch:0,minimumInputLength:0,maximumInputLength:null,maximumSelectionSize:0,id:function(O){return O==m?null:O.id},matcher:function(O,P){return e(""+P).toUpperCase().indexOf(e(""+O).toUpperCase())>=0},separator:",",tokenSeparators:[],tokenizer:g,escapeMarkup:G,blurOnChange:false,selectOnBlur:false,adaptContainerCssClass:function(O){return O},adaptDropdownCssClass:function(O){return null},nextSearchTerm:function(O,P){return m}};D.fn.select2.ajaxDefaults={transport:D.ajax,params:{type:"GET",cache:false,dataType:"json"}};window.Select2={query:{ajax:E,local:H,tags:z},util:{debounce:k,markMatch:u,escapeMarkup:G,stripDiacritics:e},"class":{"abstract":N,single:x,multi:c}}}(jQuery));
(function(a){a.extend(a.fn.select2.defaults,{formatNoMatches:function(){return"No se encontraron resultados"},formatInputTooShort:function(b,c){var d=c-b.length;return"Por favor, introduzca "+d+" car"+(d==1?"á":"a")+"cter"+(d==1?"":"es")},formatInputTooLong:function(c,b){var d=c.length-b;return"Por favor, elimine "+d+" car"+(d==1?"á":"a")+"cter"+(d==1?"":"es")},formatSelectionTooBig:function(b){return"Sólo puede seleccionar "+b+" elemento"+(b==1?"":"s")},formatLoadMore:function(b){return"Cargando más resultados..."},formatSearching:function(){return"Buscando..."}})})(jQuery);
/*!
 * jQuery Validation Plugin 1.11.1
 *
 * http://bassistance.de/jquery-plugins/jquery-plugin-validation/
 * http://docs.jquery.com/Plugins/Validation
 *
 * Copyright 2013 Jörn Zaefferer
 * Released under the MIT license:
 *   http://www.opensource.org/licenses/mit-license.php
 */
(function(a){a.extend(a.fn,{validate:function(b){if(!this.length){if(b&&b.debug&&window.console){console.warn("Nothing selected, can't validate, returning nothing.")}return}var c=a.data(this[0],"validator");if(c){return c}this.attr("novalidate","novalidate");c=new a.validator(b,this[0]);a.data(this[0],"validator",c);if(c.settings.onsubmit){this.validateDelegate(":submit","click",function(d){if(c.settings.submitHandler){c.submitButton=d.target}if(a(d.target).hasClass("cancel")){c.cancelSubmit=true}if(a(d.target).attr("formnovalidate")!==undefined){c.cancelSubmit=true}});this.submit(function(d){if(c.settings.debug){d.preventDefault()}function e(){var f;if(c.settings.submitHandler){if(c.submitButton){f=a("<input type='hidden'/>").attr("name",c.submitButton.name).val(a(c.submitButton).val()).appendTo(c.currentForm)}c.settings.submitHandler.call(c,c.currentForm,d);if(c.submitButton){f.remove()}return false}return true}if(c.cancelSubmit){c.cancelSubmit=false;return e()}if(c.form()){if(c.pendingRequest){c.formSubmitted=true;return false}return e()}else{c.focusInvalid();return false}})}return c},valid:function(){if(a(this[0]).is("form")){return this.validate().form()}else{var c=true;var b=a(this[0].form).validate();this.each(function(){c=c&&b.element(this)});return c}},removeAttrs:function(d){var b={},c=this;a.each(d.split(/\s/),function(e,f){b[f]=c.attr(f);c.removeAttr(f)});return b},rules:function(e,b){var g=this[0];if(e){var d=a.data(g.form,"validator").settings;var i=d.rules;var j=a.validator.staticRules(g);switch(e){case"add":a.extend(j,a.validator.normalizeRule(b));delete j.messages;i[g.name]=j;if(b.messages){d.messages[g.name]=a.extend(d.messages[g.name],b.messages)}break;case"remove":if(!b){delete i[g.name];return j}var h={};a.each(b.split(/\s/),function(k,l){h[l]=j[l];delete j[l]});return h}}var f=a.validator.normalizeRules(a.extend({},a.validator.classRules(g),a.validator.attributeRules(g),a.validator.dataRules(g),a.validator.staticRules(g)),g);if(f.required){var c=f.required;delete f.required;f=a.extend({required:c},f)}return f}});a.extend(a.expr[":"],{blank:function(b){return !a.trim(""+a(b).val())},filled:function(b){return !!a.trim(""+a(b).val())},unchecked:function(b){return !a(b).prop("checked")}});a.validator=function(b,c){this.settings=a.extend(true,{},a.validator.defaults,b);this.currentForm=c;this.init()};a.validator.format=function(b,c){if(arguments.length===1){return function(){var d=a.makeArray(arguments);d.unshift(b);return a.validator.format.apply(this,d)}}if(arguments.length>2&&c.constructor!==Array){c=a.makeArray(arguments).slice(1)}if(c.constructor!==Array){c=[c]}a.each(c,function(d,e){b=b.replace(new RegExp("\\{"+d+"\\}","g"),function(){return e})});return b};a.extend(a.validator,{defaults:{messages:{},groups:{},rules:{},errorClass:"error",validClass:"valid",errorElement:"label",focusInvalid:true,errorContainer:a([]),errorLabelContainer:a([]),onsubmit:true,ignore:":hidden",ignoreTitle:false,onfocusin:function(b,c){this.lastActive=b;if(this.settings.focusCleanup&&!this.blockFocusCleanup){if(this.settings.unhighlight){this.settings.unhighlight.call(this,b,this.settings.errorClass,this.settings.validClass)}this.addWrapper(this.errorsFor(b)).hide()}},onfocusout:function(b,c){if(!this.checkable(b)&&(b.name in this.submitted||!this.optional(b))){this.element(b)}},onkeyup:function(b,c){if(c.which===9&&this.elementValue(b)===""){return}else{if(b.name in this.submitted||b===this.lastElement){this.element(b)}}},onclick:function(b,c){if(b.name in this.submitted){this.element(b)}else{if(b.parentNode.name in this.submitted){this.element(b.parentNode)}}},highlight:function(d,b,c){if(d.type==="radio"){this.findByName(d.name).addClass(b).removeClass(c)}else{a(d).addClass(b).removeClass(c)}},unhighlight:function(d,b,c){if(d.type==="radio"){this.findByName(d.name).removeClass(b).addClass(c)}else{a(d).removeClass(b).addClass(c)}}},setDefaults:function(b){a.extend(a.validator.defaults,b)},messages:{required:"This field is required.",remote:"Please fix this field.",email:"Please enter a valid email address.",url:"Please enter a valid URL.",date:"Please enter a valid date.",dateISO:"Please enter a valid date (ISO).",number:"Please enter a valid number.",digits:"Please enter only digits.",creditcard:"Please enter a valid credit card number.",equalTo:"Please enter the same value again.",maxlength:a.validator.format("Please enter no more than {0} characters."),minlength:a.validator.format("Please enter at least {0} characters."),rangelength:a.validator.format("Please enter a value between {0} and {1} characters long."),range:a.validator.format("Please enter a value between {0} and {1}."),max:a.validator.format("Please enter a value less than or equal to {0}."),min:a.validator.format("Please enter a value greater than or equal to {0}.")},autoCreateRanges:false,prototype:{init:function(){this.labelContainer=a(this.settings.errorLabelContainer);this.errorContext=this.labelContainer.length&&this.labelContainer||a(this.currentForm);this.containers=a(this.settings.errorContainer).add(this.settings.errorLabelContainer);this.submitted={};this.valueCache={};this.pendingRequest=0;this.pending={};this.invalid={};this.reset();var b=(this.groups={});a.each(this.settings.groups,function(e,f){if(typeof f==="string"){f=f.split(/\s/)}a.each(f,function(h,g){b[g]=e})});var d=this.settings.rules;a.each(d,function(e,f){d[e]=a.validator.normalizeRule(f)});function c(g){var f=a.data(this[0].form,"validator"),e="on"+g.type.replace(/^validate/,"");if(f.settings[e]){f.settings[e].call(f,this[0],g)}}a(this.currentForm).validateDelegate(":text, [type='password'], [type='file'], select, textarea, [type='number'], [type='search'] ,[type='tel'], [type='url'], [type='email'], [type='datetime'], [type='date'], [type='month'], [type='week'], [type='time'], [type='datetime-local'], [type='range'], [type='color'] ","focusin focusout keyup",c).validateDelegate("[type='radio'], [type='checkbox'], select, option","click",c);if(this.settings.invalidHandler){a(this.currentForm).bind("invalid-form.validate",this.settings.invalidHandler)}},form:function(){this.checkForm();a.extend(this.submitted,this.errorMap);this.invalid=a.extend({},this.errorMap);if(!this.valid()){a(this.currentForm).triggerHandler("invalid-form",[this])}this.showErrors();return this.valid()},checkForm:function(){this.prepareForm();for(var b=0,c=(this.currentElements=this.elements());c[b];b++){this.check(c[b])}return this.valid()},element:function(c){c=this.validationTargetFor(this.clean(c));this.lastElement=c;this.prepareElement(c);this.currentElements=a(c);var b=this.check(c)!==false;if(b){delete this.invalid[c.name]}else{this.invalid[c.name]=true}if(!this.numberOfInvalids()){this.toHide=this.toHide.add(this.containers)}this.showErrors();return b},showErrors:function(c){console.debug(c);if(c){a.extend(this.errorMap,c);this.errorList=[];for(var b in c){this.errorList.push({message:c[b],element:this.findByName(b)[0]})}this.successList=a.grep(this.successList,function(d){return !(d.name in c)})}if(this.settings.showErrors){this.settings.showErrors.call(this,this.errorMap,this.errorList)}else{this.defaultShowErrors()}},resetForm:function(){if(a.fn.resetForm){a(this.currentForm).resetForm()}this.submitted={};this.lastElement=null;this.prepareForm();this.hideErrors();this.elements().removeClass(this.settings.errorClass).removeData("previousValue")},numberOfInvalids:function(){return this.objectLength(this.invalid)},objectLength:function(d){var c=0;for(var b in d){c++}return c},hideErrors:function(){this.addWrapper(this.toHide).hide()},valid:function(){return this.size()===0},size:function(){return this.errorList.length},focusInvalid:function(){if(this.settings.focusInvalid){try{a(this.findLastActive()||this.errorList.length&&this.errorList[0].element||[]).filter(":visible").focus().trigger("focusin")}catch(b){}}},findLastActive:function(){var b=this.lastActive;return b&&a.grep(this.errorList,function(c){return c.element.name===b.name}).length===1&&b},elements:function(){var c=this,b={};return a(this.currentForm).find("input, select, textarea").not(":submit, :reset, :image, [disabled]").not(this.settings.ignore).filter(function(){if(!this.name&&c.settings.debug&&window.console){console.error("%o has no name assigned",this)}if(this.name in b||!c.objectLength(a(this).rules())){return false}b[this.name]=true;return true})},clean:function(b){return a(b)[0]},errors:function(){var b=this.settings.errorClass.replace(" ",".");return a(this.settings.errorElement+"."+b,this.errorContext)},reset:function(){this.successList=[];this.errorList=[];this.errorMap={};this.toShow=a([]);this.toHide=a([]);this.currentElements=a([])},prepareForm:function(){this.reset();this.toHide=this.errors().add(this.containers)},prepareElement:function(b){this.reset();this.toHide=this.errorsFor(b)},elementValue:function(b){var c=a(b).attr("type"),d=a(b).val();if(c==="radio"||c==="checkbox"){return a("input[name='"+a(b).attr("name")+"']:checked").val()}if(typeof d==="string"){return d.replace(/\r/g,"")}return d},check:function(c){c=this.validationTargetFor(this.clean(c));var i=a(c).rules();var d=false;var h=this.elementValue(c);var b;for(var j in i){var g={method:j,parameters:i[j]};try{b=a.validator.methods[j].call(this,h,c,g.parameters);if(b==="dependency-mismatch"){d=true;continue}d=false;if(b==="pending"){this.toHide=this.toHide.not(this.errorsFor(c));return}if(!b){this.formatAndAdd(c,g);return false}}catch(f){if(this.settings.debug&&window.console){console.log("Exception occurred when checking element "+c.id+", check the '"+g.method+"' method.",f)}throw f}}if(d){return}if(this.objectLength(i)){this.successList.push(c)}return true},customDataMessage:function(b,c){return a(b).data("msg-"+c.toLowerCase())||(b.attributes&&a(b).attr("data-msg-"+c.toLowerCase()))},customMessage:function(c,d){var b=this.settings.messages[c];return b&&(b.constructor===String?b:b[d])},findDefined:function(){for(var b=0;b<arguments.length;b++){if(arguments[b]!==undefined){return arguments[b]}}return undefined},defaultMessage:function(b,c){return this.findDefined(this.customMessage(b.name,c),this.customDataMessage(b,c),!this.settings.ignoreTitle&&b.title||undefined,a.validator.messages[c],"<strong>Warning: No message defined for "+b.name+"</strong>")},formatAndAdd:function(c,e){var d=this.defaultMessage(c,e.method),b=/\$?\{(\d+)\}/g;if(typeof d==="function"){d=d.call(this,e.parameters,c)}else{if(b.test(d)){d=a.validator.format(d.replace(b,"{$1}"),e.parameters)}}this.errorList.push({message:d,element:c});this.errorMap[c.name]=d;this.submitted[c.name]=d},addWrapper:function(b){if(this.settings.wrapper){b=b.add(b.parent(this.settings.wrapper))}return b},defaultShowErrors:function(){var c,d;for(c=0;this.errorList[c];c++){var b=this.errorList[c];if(this.settings.highlight){this.settings.highlight.call(this,b.element,this.settings.errorClass,this.settings.validClass)}this.showLabel(b.element,b.message)}if(this.errorList.length){this.toShow=this.toShow.add(this.containers)}if(this.settings.success){for(c=0;this.successList[c];c++){this.showLabel(this.successList[c])}}if(this.settings.unhighlight){for(c=0,d=this.validElements();d[c];c++){this.settings.unhighlight.call(this,d[c],this.settings.errorClass,this.settings.validClass)}}this.toHide=this.toHide.not(this.toShow);this.hideErrors();this.addWrapper(this.toShow).show()},validElements:function(){return this.currentElements.not(this.invalidElements())},invalidElements:function(){return a(this.errorList).map(function(){return this.element})},showLabel:function(c,d){var b=this.errorsFor(c);if(b.length){b.removeClass(this.settings.validClass).addClass(this.settings.errorClass);b.html(d)}else{b=a("<"+this.settings.errorElement+">").attr("for",this.idOrName(c)).addClass(this.settings.errorClass).html(d||"");if(this.settings.wrapper){b=b.hide().show().wrap("<"+this.settings.wrapper+"/>").parent()}if(!this.labelContainer.append(b).length){if(this.settings.errorPlacement){this.settings.errorPlacement(b,a(c))}else{b.insertAfter(c)}}}if(!d&&this.settings.success){b.text("");if(typeof this.settings.success==="string"){b.addClass(this.settings.success)}else{this.settings.success(b,c)}}this.toShow=this.toShow.add(b)},errorsFor:function(c){var b=this.idOrName(c);return this.errors().filter(function(){return a(this).attr("for")===b})},idOrName:function(b){return this.groups[b.name]||(this.checkable(b)?b.name:b.id||b.name)},validationTargetFor:function(b){if(this.checkable(b)){b=this.findByName(b.name).not(this.settings.ignore)[0]}return b},checkable:function(b){return(/radio|checkbox/i).test(b.type)},findByName:function(b){return a(this.currentForm).find("[name='"+b+"']")},getLength:function(c,b){switch(b.nodeName.toLowerCase()){case"select":return a("option:selected",b).length;case"input":if(this.checkable(b)){return this.findByName(b.name).filter(":checked").length}}return c.length},depend:function(c,b){return this.dependTypes[typeof c]?this.dependTypes[typeof c](c,b):true},dependTypes:{"boolean":function(c,b){return c},string:function(c,b){return !!a(c,b.form).length},"function":function(c,b){return c(b)}},optional:function(b){var c=this.elementValue(b);return !a.validator.methods.required.call(this,c,b)&&"dependency-mismatch"},startRequest:function(b){if(!this.pending[b.name]){this.pendingRequest++;this.pending[b.name]=true}},stopRequest:function(b,c){this.pendingRequest--;if(this.pendingRequest<0){this.pendingRequest=0}delete this.pending[b.name];if(c&&this.pendingRequest===0&&this.formSubmitted&&this.form()){a(this.currentForm).submit();this.formSubmitted=false}else{if(!c&&this.pendingRequest===0&&this.formSubmitted){a(this.currentForm).triggerHandler("invalid-form",[this]);this.formSubmitted=false}}},previousValue:function(b){return a.data(b,"previousValue")||a.data(b,"previousValue",{old:null,valid:true,message:this.defaultMessage(b,"remote")})}},classRuleSettings:{required:{required:true},email:{email:true},url:{url:true},date:{date:true},dateISO:{dateISO:true},number:{number:true},digits:{digits:true},creditcard:{creditcard:true}},addClassRules:function(b,c){if(b.constructor===String){this.classRuleSettings[b]=c}else{a.extend(this.classRuleSettings,b)}},classRules:function(c){var d={};var b=a(c).attr("class");if(b){a.each(b.split(" "),function(){if(this in a.validator.classRuleSettings){a.extend(d,a.validator.classRuleSettings[this])}})}return d},attributeRules:function(c){var f={};var b=a(c);var d=b[0].getAttribute("type");for(var g in a.validator.methods){var e;if(g==="required"){e=b.get(0).getAttribute(g);if(e===""){e=true}e=!!e}else{e=b.attr(g)}if(/min|max/.test(g)&&(d===null||/number|range|text/.test(d))){e=Number(e)}if(e){f[g]=e}else{if(d===g&&d!=="range"){f[g]=true}}}if(f.maxlength&&/-1|2147483647|524288/.test(f.maxlength)){delete f.maxlength}return f},dataRules:function(c){var f,d,e={},b=a(c);for(f in a.validator.methods){d=b.data("rule-"+f.toLowerCase());if(d!==undefined){e[f]=d}}return e},staticRules:function(c){var d={};var b=a.data(c.form,"validator");if(b.settings.rules){d=a.validator.normalizeRule(b.settings.rules[c.name])||{}}return d},normalizeRules:function(c,b){a.each(c,function(f,e){if(e===false){delete c[f];return}if(e.param||e.depends){var d=true;switch(typeof e.depends){case"string":d=!!a(e.depends,b.form).length;break;case"function":d=e.depends.call(b,b);break}if(d){c[f]=e.param!==undefined?e.param:true}else{delete c[f]}}});a.each(c,function(d,e){c[d]=a.isFunction(e)?e(b):e});a.each(["minlength","maxlength"],function(){if(c[this]){c[this]=Number(c[this])}});a.each(["rangelength","range"],function(){var d;if(c[this]){if(a.isArray(c[this])){c[this]=[Number(c[this][0]),Number(c[this][1])]}else{if(typeof c[this]==="string"){d=c[this].split(/[\s,]+/);c[this]=[Number(d[0]),Number(d[1])]}}}});if(a.validator.autoCreateRanges){if(c.min&&c.max){c.range=[c.min,c.max];delete c.min;delete c.max}if(c.minlength&&c.maxlength){c.rangelength=[c.minlength,c.maxlength];delete c.minlength;delete c.maxlength}}return c},normalizeRule:function(c){if(typeof c==="string"){var b={};a.each(c.split(/\s/),function(){b[this]=true});c=b}return c},addMethod:function(b,d,c){a.validator.methods[b]=d;a.validator.messages[b]=c!==undefined?c:a.validator.messages[b];if(d.length<3){a.validator.addClassRules(b,a.validator.normalizeRule(b))}},methods:{required:function(c,b,e){if(!this.depend(e,b)){return"dependency-mismatch"}if(b.nodeName.toLowerCase()==="select"){var d=a(b).val();return d&&d.length>0}if(this.checkable(b)){return this.getLength(c,b)>0}return a.trim(c).length>0},email:function(c,b){return this.optional(b)||/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))$/i.test(c)},url:function(c,b){return this.optional(b)||/^(https?|s?ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i.test(c)},date:function(c,b){return this.optional(b)||!/Invalid|NaN/.test(new Date(c).toString())},dateISO:function(c,b){return this.optional(b)||/^\d{4}[\/\-]\d{1,2}[\/\-]\d{1,2}$/.test(c)},number:function(c,b){return this.optional(b)||/^-?(?:\d+|\d{1,3}(?:,\d{3})+)?(?:\.\d+)?$/.test(c)},digits:function(c,b){return this.optional(b)||/^\d+$/.test(c)},creditcard:function(f,c){if(this.optional(c)){return"dependency-mismatch"}if(/[^0-9 \-]+/.test(f)){return false}var g=0,e=0,b=false;f=f.replace(/\D/g,"");for(var h=f.length-1;h>=0;h--){var d=f.charAt(h);e=parseInt(d,10);if(b){if((e*=2)>9){e-=9}}g+=e;b=!b}return(g%10)===0},minlength:function(d,b,e){var c=a.isArray(d)?d.length:this.getLength(a.trim(d),b);return this.optional(b)||c>=e},maxlength:function(d,b,e){var c=a.isArray(d)?d.length:this.getLength(a.trim(d),b);return this.optional(b)||c<=e},rangelength:function(d,b,e){var c=a.isArray(d)?d.length:this.getLength(a.trim(d),b);return this.optional(b)||(c>=e[0]&&c<=e[1])},min:function(c,b,d){return this.optional(b)||c>=d},max:function(c,b,d){return this.optional(b)||c<=d},range:function(c,b,d){return this.optional(b)||(c>=d[0]&&c<=d[1])},equalTo:function(c,b,e){var d=a(e);if(this.settings.onfocusout){d.unbind(".validate-equalTo").bind("blur.validate-equalTo",function(){a(b).valid()})}return c===d.val()},remote:function(f,c,g){if(this.optional(c)){return"dependency-mismatch"}var d=this.previousValue(c);if(!this.settings.messages[c.name]){this.settings.messages[c.name]={}}d.originalMessage=this.settings.messages[c.name].remote;this.settings.messages[c.name].remote=d.message;g=typeof g==="string"&&{url:g}||g;if(d.old===f){return d.valid}d.old=f;var b=this;this.startRequest(c);var e={};e[c.name]=f;a.ajax(a.extend(true,{url:g,mode:"abort",port:"validate"+c.name,dataType:"json",data:e,success:function(i){b.settings.messages[c.name].remote=d.originalMessage;var k=i===true||i==="true";if(k){var h=b.formSubmitted;b.prepareElement(c);b.formSubmitted=h;b.successList.push(c);delete b.invalid[c.name];b.showErrors()}else{var l={};var j=i||b.defaultMessage(c,"remote");l[c.name]=d.message=a.isFunction(j)?j(f):j;b.invalid[c.name]=true;b.showErrors(l)}d.valid=k;b.stopRequest(c,k)}},g));return"pending"}}});a.format=a.validator.format}(jQuery));(function(c){var a={};if(c.ajaxPrefilter){c.ajaxPrefilter(function(f,e,g){var d=f.port;if(f.mode==="abort"){if(a[d]){a[d].abort()}a[d]=g}})}else{var b=c.ajax;c.ajax=function(e){var f=("mode" in e?e:c.ajaxSettings).mode,d=("port" in e?e:c.ajaxSettings).port;if(f==="abort"){if(a[d]){a[d].abort()}a[d]=b.apply(this,arguments);return a[d]}return b.apply(this,arguments)}}}(jQuery));(function(a){a.extend(a.fn,{validateDelegate:function(d,c,b){return this.bind(c,function(e){var f=a(e.target);if(f.is(d)){return b.apply(f,arguments)}})}})}(jQuery));
/*!
 * jQuery Validation Plugin 1.11.1
 *
 * http://bassistance.de/jquery-plugins/jquery-plugin-validation/
 * http://docs.jquery.com/Plugins/Validation
 *
 * Copyright 2013 Jörn Zaefferer
 * Released under the MIT license:
 *   http://www.opensource.org/licenses/mit-license.php
 */
(function(){function a(b){return b.replace(/<.[^<>]*?>/g," ").replace(/&nbsp;|&#160;/gi," ").replace(/[.(),;:!?%#$'"_+=\/\-]*/g,"")}jQuery.validator.addMethod("maxWords",function(c,b,d){return this.optional(b)||a(c).match(/\b\w+\b/g).length<=d},jQuery.validator.format("Please enter {0} words or less."));jQuery.validator.addMethod("minWords",function(c,b,d){return this.optional(b)||a(c).match(/\b\w+\b/g).length>=d},jQuery.validator.format("Please enter at least {0} words."));jQuery.validator.addMethod("rangeWords",function(e,b,f){var d=a(e);var c=/\b\w+\b/g;return this.optional(b)||d.match(c).length>=f[0]&&d.match(c).length<=f[1]},jQuery.validator.format("Please enter between {0} and {1} words."))}());jQuery.validator.addMethod("letterswithbasicpunc",function(b,a){return this.optional(a)||/^[a-z\-.,()'"\s]+$/i.test(b)},"Letters or punctuation only please");jQuery.validator.addMethod("alphanumeric",function(b,a){return this.optional(a)||/^\w+$/i.test(b)},"Letters, numbers, and underscores only please");jQuery.validator.addMethod("lettersonly",function(b,a){return this.optional(a)||/^[a-z]+$/i.test(b)},"Letters only please");jQuery.validator.addMethod("nowhitespace",function(b,a){return this.optional(a)||/^\S+$/i.test(b)},"No white space please");jQuery.validator.addMethod("ziprange",function(b,a){return this.optional(a)||/^90[2-5]\d\{2\}-\d{4}$/.test(b)},"Your ZIP-code must be in the range 902xx-xxxx to 905-xx-xxxx");jQuery.validator.addMethod("zipcodeUS",function(b,a){return this.optional(a)||/\d{5}-\d{4}$|^\d{5}$/.test(b)},"The specified US ZIP Code is invalid");jQuery.validator.addMethod("integer",function(b,a){return this.optional(a)||/^-?\d+$/.test(b)},"A positive or negative non-decimal number please");jQuery.validator.addMethod("vinUS",function(o){if(o.length!==17){return false}var h,a,l,j,b,k;var c=["A","B","C","D","E","F","G","H","J","K","L","M","N","P","R","S","T","U","V","W","X","Y","Z"];var m=[1,2,3,4,5,6,7,8,1,2,3,4,5,7,9,2,3,4,5,6,7,8,9];var g=[8,7,6,5,4,3,2,10,0,9,8,7,6,5,4,3,2];var e=0;for(h=0;h<17;h++){j=g[h];l=o.slice(h,h+1);if(h===8){k=l}if(!isNaN(l)){l*=j}else{for(a=0;a<c.length;a++){if(l.toUpperCase()===c[a]){l=m[a];l*=j;if(isNaN(k)&&a===8){k=c[a]}break}}}e+=l}b=e%11;if(b===10){b="X"}if(b===k){return true}return false},"The specified vehicle identification number (VIN) is invalid.");jQuery.validator.addMethod("dateITA",function(e,c){var a=false;var g=/^\d{1,2}\/\d{1,2}\/\d{4}$/;if(g.test(e)){var i=e.split("/");var d=parseInt(i[0],10);var b=parseInt(i[1],10);var f=parseInt(i[2],10);var h=new Date(f,b-1,d);if((h.getFullYear()===f)&&(h.getMonth()===b-1)&&(h.getDate()===d)){a=true}else{a=false}}else{a=false}return this.optional(c)||a},"Please enter a correct date");jQuery.validator.addMethod("iban",function(q,j){if(this.optional(j)){return true}if(!(/^([a-zA-Z0-9]{4} ){2,8}[a-zA-Z0-9]{1,4}|[a-zA-Z0-9]{12,34}$/.test(q))){return false}var g=q.replace(/ /g,"").toUpperCase();var c=g.substring(0,2);var a={AL:"\\d{8}[\\dA-Z]{16}",AD:"\\d{8}[\\dA-Z]{12}",AT:"\\d{16}",AZ:"[\\dA-Z]{4}\\d{20}",BE:"\\d{12}",BH:"[A-Z]{4}[\\dA-Z]{14}",BA:"\\d{16}",BR:"\\d{23}[A-Z][\\dA-Z]",BG:"[A-Z]{4}\\d{6}[\\dA-Z]{8}",CR:"\\d{17}",HR:"\\d{17}",CY:"\\d{8}[\\dA-Z]{16}",CZ:"\\d{20}",DK:"\\d{14}",DO:"[A-Z]{4}\\d{20}",EE:"\\d{16}",FO:"\\d{14}",FI:"\\d{14}",FR:"\\d{10}[\\dA-Z]{11}\\d{2}",GE:"[\\dA-Z]{2}\\d{16}",DE:"\\d{18}",GI:"[A-Z]{4}[\\dA-Z]{15}",GR:"\\d{7}[\\dA-Z]{16}",GL:"\\d{14}",GT:"[\\dA-Z]{4}[\\dA-Z]{20}",HU:"\\d{24}",IS:"\\d{22}",IE:"[\\dA-Z]{4}\\d{14}",IL:"\\d{19}",IT:"[A-Z]\\d{10}[\\dA-Z]{12}",KZ:"\\d{3}[\\dA-Z]{13}",KW:"[A-Z]{4}[\\dA-Z]{22}",LV:"[A-Z]{4}[\\dA-Z]{13}",LB:"\\d{4}[\\dA-Z]{20}",LI:"\\d{5}[\\dA-Z]{12}",LT:"\\d{16}",LU:"\\d{3}[\\dA-Z]{13}",MK:"\\d{3}[\\dA-Z]{10}\\d{2}",MT:"[A-Z]{4}\\d{5}[\\dA-Z]{18}",MR:"\\d{23}",MU:"[A-Z]{4}\\d{19}[A-Z]{3}",MC:"\\d{10}[\\dA-Z]{11}\\d{2}",MD:"[\\dA-Z]{2}\\d{18}",ME:"\\d{18}",NL:"[A-Z]{4}\\d{10}",NO:"\\d{11}",PK:"[\\dA-Z]{4}\\d{16}",PS:"[\\dA-Z]{4}\\d{21}",PL:"\\d{24}",PT:"\\d{21}",RO:"[A-Z]{4}[\\dA-Z]{16}",SM:"[A-Z]\\d{10}[\\dA-Z]{12}",SA:"\\d{2}[\\dA-Z]{18}",RS:"\\d{18}",SK:"\\d{20}",SI:"\\d{15}",ES:"\\d{20}",SE:"\\d{20}",CH:"\\d{5}[\\dA-Z]{12}",TN:"\\d{20}",TR:"\\d{5}[\\dA-Z]{17}",AE:"\\d{3}\\d{16}",GB:"[A-Z]{4}\\d{14}",VG:"[\\dA-Z]{4}\\d{16}"};var m=a[c];if(typeof m!=="undefined"){var k=new RegExp("^[A-Z]{2}\\d{2}"+m+"$","");if(!(k.test(g))){return false}}var e=g.substring(4,g.length)+g.substring(0,4);var f="";var l=true;var d;for(var h=0;h<e.length;h++){d=e.charAt(h);if(d!=="0"){l=false}if(!l){f+="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ".indexOf(d)}}var r="";var o="";for(var b=0;b<f.length;b++){var n=f.charAt(b);o=""+r+""+n;r=o%97}return r===1},"Please specify a valid IBAN");jQuery.validator.addMethod("dateNL",function(b,a){return this.optional(a)||/^(0?[1-9]|[12]\d|3[01])[\.\/\-](0?[1-9]|1[012])[\.\/\-]([12]\d)?(\d\d)$/.test(b)},"Please enter a correct date");jQuery.validator.addMethod("phoneNL",function(b,a){return this.optional(a)||/^((\+|00(\s|\s?\-\s?)?)31(\s|\s?\-\s?)?(\(0\)[\-\s]?)?|0)[1-9]((\s|\s?\-\s?)?[0-9]){8}$/.test(b)},"Please specify a valid phone number.");jQuery.validator.addMethod("mobileNL",function(b,a){return this.optional(a)||/^((\+|00(\s|\s?\-\s?)?)31(\s|\s?\-\s?)?(\(0\)[\-\s]?)?|0)6((\s|\s?\-\s?)?[0-9]){8}$/.test(b)},"Please specify a valid mobile number");jQuery.validator.addMethod("postalcodeNL",function(b,a){return this.optional(a)||/^[1-9][0-9]{3}\s?[a-zA-Z]{2}$/.test(b)},"Please specify a valid postal code");jQuery.validator.addMethod("bankaccountNL",function(f,c){if(this.optional(c)){return true}if(!(/^[0-9]{9}|([0-9]{2} ){3}[0-9]{3}$/.test(f))){return false}var e=f.replace(/ /g,"");var d=0;var a=e.length;for(var h=0;h<a;h++){var b=a-h;var g=e.substring(h,h+1);d=d+b*g}return d%11===0},"Please specify a valid bank account number");jQuery.validator.addMethod("giroaccountNL",function(b,a){return this.optional(a)||/^[0-9]{1,7}$/.test(b)},"Please specify a valid giro account number");jQuery.validator.addMethod("bankorgiroaccountNL",function(b,a){return this.optional(a)||($.validator.methods.bankaccountNL.call(this,b,a))||($.validator.methods.giroaccountNL.call(this,b,a))},"Please specify a valid bank or giro account number");jQuery.validator.addMethod("time",function(b,a){return this.optional(a)||/^([01]\d|2[0-3])(:[0-5]\d){1,2}$/.test(b)},"Please enter a valid time, between 00:00 and 23:59");jQuery.validator.addMethod("time12h",function(b,a){return this.optional(a)||/^((0?[1-9]|1[012])(:[0-5]\d){1,2}(\ ?[AP]M))$/i.test(b)},"Please enter a valid time in 12-hour am/pm format");jQuery.validator.addMethod("phoneUS",function(a,b){a=a.replace(/\s+/g,"");return this.optional(b)||a.length>9&&a.match(/^(\+?1-?)?(\([2-9]\d{2}\)|[2-9]\d{2})-?[2-9]\d{2}-?\d{4}$/)},"Please specify a valid phone number");jQuery.validator.addMethod("phoneUK",function(a,b){a=a.replace(/\(|\)|\s+|-/g,"");return this.optional(b)||a.length>9&&a.match(/^(?:(?:(?:00\s?|\+)44\s?)|(?:\(?0))(?:\d{2}\)?\s?\d{4}\s?\d{4}|\d{3}\)?\s?\d{3}\s?\d{3,4}|\d{4}\)?\s?(?:\d{5}|\d{3}\s?\d{3})|\d{5}\)?\s?\d{4,5})$/)},"Please specify a valid phone number");jQuery.validator.addMethod("mobileUK",function(a,b){a=a.replace(/\(|\)|\s+|-/g,"");return this.optional(b)||a.length>9&&a.match(/^(?:(?:(?:00\s?|\+)44\s?|0)7(?:[45789]\d{2}|624)\s?\d{3}\s?\d{3})$/)},"Please specify a valid mobile number");jQuery.validator.addMethod("phonesUK",function(a,b){a=a.replace(/\(|\)|\s+|-/g,"");return this.optional(b)||a.length>9&&a.match(/^(?:(?:(?:00\s?|\+)44\s?|0)(?:1\d{8,9}|[23]\d{9}|7(?:[45789]\d{8}|624\d{6})))$/)},"Please specify a valid uk phone number");jQuery.validator.addMethod("postcodeUK",function(b,a){return this.optional(a)||/^((([A-PR-UWYZ][0-9])|([A-PR-UWYZ][0-9][0-9])|([A-PR-UWYZ][A-HK-Y][0-9])|([A-PR-UWYZ][A-HK-Y][0-9][0-9])|([A-PR-UWYZ][0-9][A-HJKSTUW])|([A-PR-UWYZ][A-HK-Y][0-9][ABEHMNPRVWXY]))\s?([0-9][ABD-HJLNP-UW-Z]{2})|(GIR)\s?(0AA))$/i.test(b)},"Please specify a valid UK postcode");jQuery.validator.addMethod("strippedminlength",function(b,a,c){return jQuery(b).text().length>=c},jQuery.validator.format("Please enter at least {0} characters"));jQuery.validator.addMethod("email2",function(b,a,c){return this.optional(a)||/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)*(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?$/i.test(b)},jQuery.validator.messages.email);jQuery.validator.addMethod("url2",function(b,a,c){return this.optional(a)||/^(https?|ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)*(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i.test(b)},jQuery.validator.messages.url);jQuery.validator.addMethod("creditcardtypes",function(b,a,c){if(/[^0-9\-]+/.test(b)){return false}b=b.replace(/\D/g,"");var d=0;if(c.mastercard){d|=1}if(c.visa){d|=2}if(c.amex){d|=4}if(c.dinersclub){d|=8}if(c.enroute){d|=16}if(c.discover){d|=32}if(c.jcb){d|=64}if(c.unknown){d|=128}if(c.all){d=1|2|4|8|16|32|64|128}if(d&1&&/^(5[12345])/.test(b)){return b.length===16}if(d&2&&/^(4)/.test(b)){return b.length===16}if(d&4&&/^(3[47])/.test(b)){return b.length===15}if(d&8&&/^(3(0[012345]|[68]))/.test(b)){return b.length===14}if(d&16&&/^(2(014|149))/.test(b)){return b.length===15}if(d&32&&/^(6011)/.test(b)){return b.length===16}if(d&64&&/^(3)/.test(b)){return b.length===16}if(d&64&&/^(2131|1800)/.test(b)){return b.length===15}if(d&128){return true}return false},"Please enter a valid credit card number.");jQuery.validator.addMethod("ipv4",function(b,a,c){return this.optional(a)||/^(25[0-5]|2[0-4]\d|[01]?\d\d?)\.(25[0-5]|2[0-4]\d|[01]?\d\d?)\.(25[0-5]|2[0-4]\d|[01]?\d\d?)\.(25[0-5]|2[0-4]\d|[01]?\d\d?)$/i.test(b)},"Please enter a valid IP v4 address.");jQuery.validator.addMethod("ipv6",function(b,a,c){return this.optional(a)||/^((([0-9A-Fa-f]{1,4}:){7}[0-9A-Fa-f]{1,4})|(([0-9A-Fa-f]{1,4}:){6}:[0-9A-Fa-f]{1,4})|(([0-9A-Fa-f]{1,4}:){5}:([0-9A-Fa-f]{1,4}:)?[0-9A-Fa-f]{1,4})|(([0-9A-Fa-f]{1,4}:){4}:([0-9A-Fa-f]{1,4}:){0,2}[0-9A-Fa-f]{1,4})|(([0-9A-Fa-f]{1,4}:){3}:([0-9A-Fa-f]{1,4}:){0,3}[0-9A-Fa-f]{1,4})|(([0-9A-Fa-f]{1,4}:){2}:([0-9A-Fa-f]{1,4}:){0,4}[0-9A-Fa-f]{1,4})|(([0-9A-Fa-f]{1,4}:){6}((\b((25[0-5])|(1\d{2})|(2[0-4]\d)|(\d{1,2}))\b)\.){3}(\b((25[0-5])|(1\d{2})|(2[0-4]\d)|(\d{1,2}))\b))|(([0-9A-Fa-f]{1,4}:){0,5}:((\b((25[0-5])|(1\d{2})|(2[0-4]\d)|(\d{1,2}))\b)\.){3}(\b((25[0-5])|(1\d{2})|(2[0-4]\d)|(\d{1,2}))\b))|(::([0-9A-Fa-f]{1,4}:){0,5}((\b((25[0-5])|(1\d{2})|(2[0-4]\d)|(\d{1,2}))\b)\.){3}(\b((25[0-5])|(1\d{2})|(2[0-4]\d)|(\d{1,2}))\b))|([0-9A-Fa-f]{1,4}::([0-9A-Fa-f]{1,4}:){0,5}[0-9A-Fa-f]{1,4})|(::([0-9A-Fa-f]{1,4}:){0,6}[0-9A-Fa-f]{1,4})|(([0-9A-Fa-f]{1,4}:){1,7}:))$/i.test(b)},"Please enter a valid IP v6 address.");jQuery.validator.addMethod("pattern",function(b,a,c){if(this.optional(a)){return true}if(typeof c==="string"){c=new RegExp("^(?:"+c+")$")}return c.test(b)},"Invalid format.");jQuery.validator.addMethod("require_from_group",function(g,f,d){var e=this;var b=d[1];var c=$(b,f.form).filter(function(){return e.elementValue(this)}).length>=d[0];if(!$(f).data("being_validated")){var a=$(b,f.form);a.data("being_validated",true);a.valid();a.data("being_validated",false)}return c},jQuery.format("Please fill at least {0} of these fields."));jQuery.validator.addMethod("skip_or_fill_minimum",function(h,e,i){var b=this,c=i[0],d=i[1];var g=$(d,e.form).filter(function(){return b.elementValue(this)}).length;var a=g>=c||g===0;if(!$(e).data("being_validated")){var f=$(d,e.form);f.data("being_validated",true);f.valid();f.data("being_validated",false)}return a},jQuery.format("Please either skip these fields or fill at least {0} of them."));jQuery.validator.addMethod("accept",function(e,c,g){var f=typeof g==="string"?g.replace(/\s/g,"").replace(/,/g,"|"):"image/*",d=this.optional(c),b,a;if(d){return d}if($(c).attr("type")==="file"){f=f.replace(/\*/g,".*");if(c.files&&c.files.length){for(b=0;b<c.files.length;b++){a=c.files[b];if(!a.type.match(new RegExp(".?("+f+")$","i"))){return false}}}}return true},jQuery.format("Please enter a value with a valid mimetype."));jQuery.validator.addMethod("extension",function(b,a,c){c=typeof c==="string"?c.replace(/,/g,"|"):"png|jpe?g|gif";return this.optional(a)||b.match(new RegExp(".("+c+")$","i"))},jQuery.format("Please enter a value with a valid extension."));
/*!
 * Pause jQuery plugin v0.1
 *
 * Copyright 2010 by Tobia Conforto <tobia.conforto@gmail.com>
 *
 * Based on Pause-resume-animation jQuery plugin by Joe Weitzel
 *
 * This program is free software; you can redistribute it and/or modify it
 * under the terms of the GNU General Public License as published by the Free
 * Software Foundation; either version 2 of the License, or(at your option)
 * any later version.
 *
 * This program is distributed in the hope that it will be useful, but WITHOUT
 * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
 * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for
 * more details.
 *
 * You should have received a copy of the GNU General Public License along with
 * this program; if not, write to the Free Software Foundation, Inc., 51
 * Franklin Street, Fifth Floor, Boston, MA 02110-1301, USA.
 */
(function(){var e=jQuery,f="jQuery.pause",d=1,b=e.fn.animate,a={};function c(){return new Date().getTime()}e.fn.animate=function(k,h,j,i){var g=e.speed(h,j,i);g.complete=g.old;return this.each(function(){if(!this[f]){this[f]=d++}var l=e.extend({},g);b.apply(e(this),[k,e.extend({},l)]);a[this[f]]={run:true,prop:k,opt:l,start:c(),done:0}})};e.fn.pause=function(){return this.each(function(){if(!this[f]){this[f]=d++}var g=a[this[f]];if(g&&g.run){g.done+=c()-g.start;if(g.done>g.opt.duration){delete a[this[f]]}else{e(this).stop();g.run=false}}})};e.fn.resume=function(){return this.each(function(){if(!this[f]){this[f]=d++}var g=a[this[f]];if(g&&!g.run){g.opt.duration-=g.done;g.done=0;g.run=true;g.start=c();b.apply(e(this),[g.prop,e.extend({},g.opt)])}})}})();
(function(a){a.extend(a.validator.messages,{required:"Este campo es obligatorio.",remote:"Por favor, rellena este campo.",email:"Por favor, escribe una dirección de correo válida",url:"Por favor, escribe una URL válida.",date:"Por favor, escribe una fecha válida.",dateISO:"Por favor, escribe una fecha (ISO) válida.",number:"Por favor, escribe un número entero válido.",digits:"Por favor, escribe sólo dígitos.",creditcard:"Por favor, escribe un número de tarjeta válido.",equalTo:"Por favor, escribe el mismo valor de nuevo.",accept:"Por favor, escribe un valor con una extensión aceptada.",maxlength:a.validator.format("Por favor, no escribas más de {0} caracteres."),minlength:a.validator.format("Por favor, no escribas menos de {0} caracteres."),rangelength:a.validator.format("Por favor, escribe un valor entre {0} y {1} caracteres."),range:a.validator.format("Por favor, escribe un valor entre {0} y {1}."),max:a.validator.format("Por favor, escribe un valor menor o igual a {0}."),min:a.validator.format("Por favor, escribe un valor mayor o igual a {0}.")})}(jQuery));
/*!
 * jQuery Print Previw Plugin v1.0.1
 *
 * Copyright 2011, Tim Connell
 * Licensed under the GPL Version 2 license
 * http://www.gnu.org/licenses/gpl-2.0.html
 *
 * Date: Wed Jan 25 00:00:00 2012 -000
 */
(function(e){e.fn.printPreview=function(){this.each(function(){e(this).bind("click",function(f){f.preventDefault();if(!e("#print-modal").length){e.printPreview.loadPrintPreview()}})});return this};var b,c,a,d;e.printPreview={loadPrintPreview:function(){a=e('<div id="print-modal"></div>');d=e('<div id="print-modal-controls"><a href="#" class="print" title="Print page">Print page</a><a href="#" class="close" title="Close print preview">Close</a>').hide();var f=e('<iframe id="print-modal-content" scrolling="no" border="0" frameborder="0" name="print-frame" />');a.hide().append(d).append(f).appendTo("body");for(var j=0;j<window.frames.length;j++){if(window.frames[j].name=="print-frame"){var l=window.frames[j].document;break}}l.open();l.write('<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en"><head><title>'+document.title+"</title></head><body></body></html>");l.close();var k=e("head link[media*=print], head link[media=all]").clone(),g=e("body > *:not(#print-modal):not(script)").clone();k.each(function(){e(this).attr("media","all")});if(!e.browser.msie&&!(e.browser.version<7)){e("head",l).append(k);e("body",l).append(g)}else{e("body > *:not(#print-modal):not(script)").clone().each(function(){e("body",l).append(this.outerHTML)});e("head link[media*=print], head link[media=all]").each(function(){e("head",l).append(e(this).clone().attr("media","all")[0].outerHTML)})}e("a",l).bind("click.printPreview",function(i){i.preventDefault()});e("head").append('<style type="text/css">@media print {/* -- Print Preview --*/#print-modal-mask,#print-modal {display: none !important;}}</style>');e.printPreview.loadMask();e("body").css({overflowY:"hidden",height:"100%"});e("img",l).load(function(){f.height(e("body",f.contents())[0].scrollHeight)});starting_position=e(window).height()+e(window).scrollTop();var h={top:starting_position,height:"100%",overflowY:"auto",zIndex:10000,display:"block"};a.css(h).animate({top:e(window).scrollTop()},400,"linear",function(){d.fadeIn("slow").focus()});f.height(e("body",f.contents())[0].scrollHeight);e("a",d).bind("click",function(i){i.preventDefault();if(e(this).hasClass("print")){window.print()}else{e.printPreview.distroyPrintPreview()}})},distroyPrintPreview:function(){d.fadeOut(100);a.animate({top:e(window).scrollTop()-e(window).height(),opacity:1},400,"linear",function(){a.remove();e("body").css({overflowY:"auto",height:"auto"})});b.fadeOut("slow",function(){b.remove()});e(document).unbind("keydown.printPreview.mask");b.unbind("click.printPreview.mask");e(window).unbind("resize.printPreview.mask")},loadMask:function(){c=e.printPreview.sizeUpMask();b=e('<div id="print-modal-mask" />').appendTo(e("body"));b.css({position:"absolute",top:0,left:0,width:c[0],height:c[1],display:"none",opacity:0,zIndex:9999,backgroundColor:"#000"});b.css({display:"block"}).fadeTo("400",0.75);e(window).bind("resize..printPreview.mask",function(){e.printPreview.updateMaskSize()});b.bind("click.printPreview.mask",function(f){e.printPreview.distroyPrintPreview()});e(document).bind("keydown.printPreview.mask",function(f){if(f.keyCode==27){e.printPreview.distroyPrintPreview()}})},sizeUpMask:function(){if(e.browser.msie){var g=e(document).height(),f=e(window).height();return[window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,g-f<20?f:g]}else{return[e(document).width(),e(document).height()]}},updateMaskSize:function(){var f=e.printPreview.sizeUpMask();b.css({width:f[0],height:f[1]})}}})(jQuery);
(function(a){a.fn.printPage=function(c){var h={attr:"href",url:false,message:"Please wait while we create your document"};a.extend(h,c);this.on("click",function(){g(this,h);return false});function g(i,j){a("body").append(f.messageBox(j.message));a("#printMessageBox").css("opacity",0);a("#printMessageBox").animate({opacity:1},300,function(){e(i,j)})}function e(j,k){var i=(k.url)?k.url:a(j).attr(k.attr);if(!a("#printPage")[0]){a("body").append(f.iframe(i));a("#printPage").on("load",function(){b()})}else{a("#printPage").attr("src",i)}}function b(){frames.printPage.focus();frames.printPage.print();d()}function d(){a("#printMessageBox").delay(1000).animate({opacity:0},700,function(){a(this).remove()})}var f={iframe:function(i){return'<iframe id="printPage" name="printPage" src='+i+' style="position:absolute;top:0px; left:0px;width:0px; height:0px;border:0px;overfow:none; z-index:-1"></iframe>'},messageBox:function(i){return"<div id='printMessageBox' style='          position:fixed;          top:50%; left:50%;          text-align:center;          margin: -60px 0 0 -155px;          width:310px; height:120px; font-size:16px; padding:10px; color:#222; font-family:helvetica, arial;          opacity:0;          background:#fff url(data:image/gif;base64,R0lGODlhZABkAOYAACsrK0xMTIiIiKurq56enrW1ta6urh4eHpycnJSUlNLS0ry8vIODg7m5ucLCwsbGxo+Pj7a2tqysrHNzc2lpaVlZWTg4OF1dXW5uboqKigICAmRkZLq6uhEREYaGhnV1dWFhYQsLC0FBQVNTU8nJyYyMjFRUVCEhIaCgoM7OztDQ0Hx8fHh4eISEhEhISICAgKioqDU1NT4+PpCQkLCwsJiYmL6+vsDAwJKSknBwcDs7O2ZmZnZ2dpaWlrKysnp6emxsbEVFRUpKSjAwMCYmJlBQUBgYGPX19d/f3/n5+ff39/Hx8dfX1+bm5vT09N3d3fLy8ujo6PDw8Pr6+u3t7f39/fj4+Pv7+39/f/b29svLy+/v7+Pj46Ojo+Dg4Pz8/NjY2Nvb2+rq6tXV1eXl5cTExOzs7Nra2u7u7qWlpenp6c3NzaSkpJqamtbW1uLi4qKiovPz85ubm6enp8zMzNzc3NnZ2eTk5Kampufn597e3uHh4crKyv7+/gAAAP///yH/C1hNUCBEYXRhWE1QPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNS4wLWMwNjAgNjEuMTM0Nzc3LCAyMDEwLzAyLzEyLTE3OjMyOjAwICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtbG5zOnhtcE1NPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvbW0vIiB4bWxuczpzdFJlZj0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL3NUeXBlL1Jlc291cmNlUmVmIyIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ1M1IE1hY2ludG9zaCIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDpFNTU4MDk0RDA3MDgxMUUwQjhCQUQ2QUUxM0I4NDA5MSIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDpFNTU4MDk0RTA3MDgxMUUwQjhCQUQ2QUUxM0I4NDA5MSI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOkU1NTgwOTRCMDcwODExRTBCOEJBRDZBRTEzQjg0MDkxIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOkU1NTgwOTRDMDcwODExRTBCOEJBRDZBRTEzQjg0MDkxIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+Af/+/fz7+vn49/b19PPy8fDv7u3s6+rp6Ofm5eTj4uHg397d3Nva2djX1tXU09LR0M/OzczLysnIx8bFxMPCwcC/vr28u7q5uLe2tbSzsrGwr66trKuqqainpqWko6KhoJ+enZybmpmYl5aVlJOSkZCPjo2Mi4qJiIeGhYSDgoGAf359fHt6eXh3dnV0c3JxcG9ubWxramloZ2ZlZGNiYWBfXl1cW1pZWFdWVVRTUlFQT05NTEtKSUhHRkVEQ0JBQD8+PTw7Ojk4NzY1NDMyMTAvLi0sKyopKCcmJSQjIiEgHx4dHBsaGRgXFhUUExIREA8ODQwLCgkIBwYFBAMCAQAAIfkEAAAAAAAsAAAAAGQAZAAAB/+Af4KDhIWGh4iJiouMjY6PkJGSk5SVlpeYmZqbnJ2en55QanlRpaanqKmqq6akUaRQoJF9fX9nY09Iuru8vb6/wLxeSHpMZ7KTenHIilZIzJF6W1VX1dbX2Nna29lfVE/QjX1Vf15SU0np6uvs7e7v61ZJX1te4Yy1f3lUVkr+/wADChxI8F86JVbE5LnHaEqGGv6ySJxIsaLFixgpHrEyRUkbBln+jGNoCI4fCl+sHFnJsqXLlzBjsgR4BYifBH+u0CJJKIcGCBKdCB1KtKjRo0iHxlmyJMuRGRqA/Pmyk6cgDBoyWGHKtavXr2DDeoVyZIkTKBA0TBA5xarIPzn//JQ4IqWu3bt48+rde3eLFDRxspTwg0FkVatYM0BZsqWx48eQI0ue7PgvlThQSmgoTCsfYg0lpGyhQrq06dOoU6s2LYbKFjSDc7gthLXEazO4c+vezbu3b91izFCBTXg2IQxyqYhZzry58+fQozuPstxMhuLGr/rJIEYNq+/gv7sSc71wdrh+BLxqwr69+/fw48t3T4Y9eezZ46qfz79/fzJ3NKFGeeehJ0ATZHCh4IIMNujggxA2eMcdeQiAn3HICXAHF1506OGHIIYo4oge7vGGgk1YaF52GXKxRzAwxhhMh3vsQYaKBWa4xzAy9tijHkDqwQWO52XohR5PJKnk/5JMNunkk06+QWQn5DwyQXpIPBHGllx26eWXYIbJZR1h2BHGHhau9UiVhx3ShxhrkKDFnHTWqQUfCoCggQB1MAHGn4AGKuighBYKqB1/kilACCAooAUdfNj5KB13ktCEYW0aMgUBLGDh6aegfurBEBp48AQTqKaq6qqstuqqqn8ygYsHGgzBABYvrBBqqCxA9JZnh3CBhQAzQGDsschCkAAWJ4QgwBtIQinttE/W8USHUoZgxA89lJAsssWWgIUegwBLSC02eAAHAey26y67eFCggQZGEHHCAfjmq+++/Pbrb773niCwEfNWkAYC7yZMgAcFCGJuIX30gMAAEkgwwP/FGGMsQQQX+KGBHyCHLPLIJJds8skjB2CAARlrbPEABhAwAzlVIoJmAwU0oPPOPDfAwQIVaNBBCEQXbfTRSCet9NJHB1HAAj1HzUEEAhyTKSEcoBDGq6na4cYEFogggwhiyzC22WinLYMObLfNttk6qJ122XKbLYIOIKTgNddMhJGGAYYlMkcKfVyRxBVTJK644l9kkQAGOUzwweQfsGC55Stk/gKuLzDQQgseeCDA6BmMHroHL2z+aeY/XM7DBxPEPgEQDKBR+OK4J24LArXUXMgVNYThxBJ81RWHGC1UUAEIIOxAAQUYQD4BC5lj4bkHGZQwQwIJ1NAGASgQgED/DQngAEEJJQjgAQO5Zs7CBDlgAAQFGzBfARBcKBFH8VJA8UQNTlAEFAjghdeMBg0ITGAClxCFHFhgbCJwgRACMALlXWADO3Be9HJQuRWkjgECyICx0tcCLKzAcvCT3w7qd4EKjCAAAXBBEMimAxPoAQrDUaAOAaMHAqDhLYfYAgrecISlLAEKSExiEo8gBgoMIQZQhKIF4jY2FxShgs2jABAiRz0Peo59JmQB7DCwgwuY4IUuEJsOLBDFKA4hAERU4hEXo8Q4qAEFXAhcuQTBBRSY4QhZiIMTZGIFNGzgBABIpCIXyUgADOGJU3Rb3NhmgUo+spGYVCQRRHCHKQBS/ycdOYISBKGELFhBiOAA1heq5AU4TMMKWZiCFWZJS1peYQkXMAK+BMbLXvryXv7q5S5/SUxhWiAPhvsCHQhQhiN8QQoSwMMb+jBLOIBhKuWqmR3mIAiqYKoznflDFooQgg6Y85zoTKc618nOdqYzBABQgyDWMIE0ZIAEwMsAGzwQiz9IgA5AJAQ5xoACvywBDX7hixoq0IED8PJfwRQmRCeKLyNYoA5xQEMbEGAGB8yBBC9QABlQoIUlxIEGNvhDFYC10j/QAQV1OEMYzhDTM9j0pjatwxhYMIKeFuGMPQ2qUIVqgqIO9ahITWpPTVCEDZBgD3XoggDoAAM8KMADBv/QAg5I8AQubCygDhPJAhbQhy+YtQpoTata0ZqFf8ijlnCN6yzhkQS52jWuq+zDHQiwAjjc4QoOyEAGOHCElZahAQEN5x9+lpNqmPWxkH3sSjszWXBa9rJrXetlN7vZKpw1CWLYgxisUAUoJGgL2FSBAR5WpQZEoA+Jo6tsZ0vb2tL1C+jILeKqkYRRUvUKhsiHDxZwhYgU5LjITa5yl9vWUkZklqUMyQMG4DvP9EECN7CCEwQpk+5697vgDa9EjjDIl2ShCmUwwCqD+4cBLOAISAQLHb8yX7HY9774Hcsc5zhfQUohMHwYwBfc5M8GYIZ4klmCa44oyKWcRYkQjrD/hCdM4Qg3WAoHrQxTRINhu6yBAG1h7wAK8BrVmEENpFkOEvjA4jhJ6sUwjrGM7fQAOuwhDqs5DRr40IYQQ6y9NFDDctRA5CITOTivKMAFJhgAJsPwyVCOspSnTOUqx/ACBuiOkbdcZDE8AAE+Ppc/aRCgPNTnPXlowh3EYAMLoOzNcI6zyYawADX4pwk3kEOY9ygBGiDhDXc40RsGPWguIAFAWADZx+bF6EY7+tGQjrSkHw2yCQCI0JgmtIsWgIAkELhiZ0DCMHi0iz08YdDIcbTHJs3qVrv6Y0VowotmhIQGyMHT5aoFLQwAgzGUCac3LVMYvHClVc/L2K9OtrL9/1AELtQU2MEGQwHkYAVEXBcGKXDDGGTlhm53ewzb1sOVlE3ucjPaDyNAAhO8zW5vj0EBNGADcAdBjnxEkwQqUIC+981vBYThA6tGtrkHHmk/mOAJ/U64AtYwhwEUYsDdHAAbyvCoFNBhDRjPOKWYMG6Ce3zSfqjAEzJOcpKngA8okAB7VUoDAjjgATCPecxJQIIHjIEHApezznWu6grYQeZAh3nNCTAAc1VlATVYgAOWfoOlO93pCmCBBkLAaBkIwQVYz7rWt871rns961d3QQBkQPWp++ECbni62p1uA6JX1zMLSEAEOGADuo/17jYYKx9YUM6yV2CFGwi84AdP+P/CG/7wgc/gBihwgQ7My/EXUMDP7k75uzegBj5AKyG8+Ye4R6AAn4+A6Ecv+gKQYAUdIJjQdgA72bn+9bCPvexfz0HJYeAAHjNCCC6QAtCT/vcF8EECFqBHlebjARnwgQFosPyVOZ8GzH/AChz6MSOwYH0MyL72t8/97nv/+9pfnwBWQASPHcAIIFiD89fP/gLggPhifosCWlCxl7WsYjBwwAoQGQI/AAAC5MM9AjiABFiABniAA4gDM0A+OuAHIUAEBwACWgADLXN/BpABD6BHwAIGHpAGA1BVMDAHIiiCMAADbHADKwAAMdB/OgAHbNAFMBiDMjiDNFiDNhiDbJD/BmnABgNQBA6YSE7FBiM4hEToAQqQWFVhBxnQBXiQg3igg1CIB3PQBQuwAkOgA/0XAKVXAFzYhV74hWAYhmL4hT7gADvgMTEwBBvwAHAAhW7ohl3gAWMQXFVSBwJAAC7YBSgAB3zIhy+IAjbAAGHTfxuQAg5QBoiYiIq4iIzYiI6oiIdYBirAAh6zRjtAAnjYh5rIh3roAUzwMLr2BCVQA3gYPu8SPnKwAC8gAkLQAX7AAlGgbeA2i7RYi7Z4i7hIi92mAEiQAPMiAkGwhnKgMO7SBgJgB5wXUFeABMoiB20gB9AYjc5IADXQAC/gAiZAdQkABQhCBt74jeAYjuI4/47k6I1c0B5LgAdUB0NAUAY1II3wKAcIkAAlUAfVNQhXcAczMAME4Ixt8I8A+Y840AAeUASNFwKrpQThtZDd5QRZsARH8AcPgHsjYAJA8AA9EJAa+T3mUwe4ZgjekAArIELFkiz7WAJ4gAEVsAHm5ADfxFkwGZMxqVKCUAfl93cVYADe8i3GUixYAAF3cI8icQVHkAIGwAZIWYNPaAAthAEhcABz+DDIMA61gAZudgFAIAQ0gINp0AUuiJRsQABZtQUQF1bdRJRn8AB8YHF00JZtiXEpAAYfsAEs0AFDkEdSiQwDNg4icBIfUAFnYHEZlwIqcHFrYIhjEAdToHluUv8FUWADMKCDYDmZeEADF4ABL9ABOtBPJDESwOWDGLACLuADafCEO7iDbAADcIACC8AFnlZW1tYHSjAGcFACpTM6uHmbMpADAtABQpCXshBOtSAvLJABQ0A6t4mbo0MAfCAFewmcVTAFTvAGZ2AHfhIobqAANjACLJAAIVABxWcVK6ABWJAAMrAAYwAGZ4Aq1mmdbnAHUFCWsalSuFVXFVFKRwAGFbACNdABHwBW4bBetdADIeABbSACYwAFpiRKKtFWU3AFA1ZZlmAFXlABAjAHRiAAAMoTA9ABMzAHQWAH1cYM5GAFdVABEyAAB0AAZukWDtABxSkCClBtugYKtLD/jCMgAwHQAQ0DnOHABEYQQSLgBjS6oZyQBHVwAS5wAUQAUFfDEFRABAFQAS6gAKNUo59QC0lgB/SzAjJQBwWiBCKAATxQAWPwmka6CUnABQzwAV2wA1KQpveQBSyAAizAA2eQBDvho5ZAC95gAB+ABxngBGVVWTJ5qIhqWX8QByVgABPQBVGwXi36CUnwBDDQOa+ZqJq6qTkhkm1QB4VlXTYqEkhKAC8wb+eRAALgBnGgE3yaCbpWBVvQAAgAGIKUFLiaq7pKFAOAB2igBK/aCWZ1BgQgANajOruSrMq6rMz6KS1QAyqgBJ7FE7TgBHmwNW7AN9q6rVxzBnngBMAVOaye4Fl1lQS5c67omq7qmjvmKp9WIa4FEg75QAu+Q62KVSCbmq+JGq+5ZhxPyq8AG7ACO7AEKwiBAAA7) center 40px no-repeat;          border: 6px solid #555;          border-radius:8px; -webkit-border-radius:8px; -moz-border-radius:8px;          box-shadow:0px 0px 10px #888; -webkit-box-shadow:0px 0px 10px #888; -moz-box-shadow:0px 0px 10px #888'>          "+i+"</div>"}}}})(jQuery);
!function(b){var a=function(d,c){this.element=b(d);this.picker=b('<div class="slider"><div class="slider-track"><div class="slider-selection"></div><div class="slider-handle"></div><div class="slider-handle"></div></div><div class="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div></div>').insertBefore(this.element).append(this.element);this.id=this.element.data("slider-id")||c.id;if(this.id){this.picker[0].id=this.id}if(typeof Modernizr!=="undefined"&&Modernizr.touch){this.touchCapable=true}var f=this.element.data("slider-tooltip")||c.tooltip;this.tooltip=this.picker.find(".tooltip");this.tooltipInner=this.tooltip.find("div.tooltip-inner");this.orientation=this.element.data("slider-orientation")||c.orientation;switch(this.orientation){case"vertical":this.picker.addClass("slider-vertical");this.stylePos="top";this.mousePos="pageY";this.sizePos="offsetHeight";this.tooltip.addClass("right")[0].style.left="100%";break;default:this.picker.addClass("slider-horizontal").css("width",this.element.outerWidth());this.orientation="horizontal";this.stylePos="left";this.mousePos="pageX";this.sizePos="offsetWidth";this.tooltip.addClass("top")[0].style.top=-this.tooltip.outerHeight()-14+"px";break}this.min=this.element.data("slider-min")||c.min;this.max=this.element.data("slider-max")||c.max;this.step=this.element.data("slider-step")||c.step;this.value=this.element.data("slider-value")||c.value;if(this.value[1]){this.range=true}this.selection=this.element.data("slider-selection")||c.selection;this.selectionEl=this.picker.find(".slider-selection");if(this.selection==="none"){this.selectionEl.addClass("hide")}this.selectionElStyle=this.selectionEl[0].style;this.handle1=this.picker.find(".slider-handle:first");this.handle1Stype=this.handle1[0].style;this.handle2=this.picker.find(".slider-handle:last");this.handle2Stype=this.handle2[0].style;var e=this.element.data("slider-handle")||c.handle;switch(e){case"round":this.handle1.addClass("round");this.handle2.addClass("round");break;case"triangle":this.handle1.addClass("triangle");this.handle2.addClass("triangle");break}if(this.range){this.value[0]=Math.max(this.min,Math.min(this.max,this.value[0]));this.value[1]=Math.max(this.min,Math.min(this.max,this.value[1]))}else{this.value=[Math.max(this.min,Math.min(this.max,this.value))];this.handle2.addClass("hide");if(this.selection=="after"){this.value[1]=this.max}else{this.value[1]=this.min}}this.diff=this.max-this.min;this.percentage=[(this.value[0]-this.min)*100/this.diff,(this.value[1]-this.min)*100/this.diff,this.step*100/this.diff];this.offset=this.picker.offset();this.size=this.picker[0][this.sizePos];this.formater=c.formater;this.layout();if(this.touchCapable){this.picker.on({touchstart:b.proxy(this.mousedown,this)})}else{this.picker.on({mousedown:b.proxy(this.mousedown,this)})}if(f==="show"){this.picker.on({mouseenter:b.proxy(this.showTooltip,this),mouseleave:b.proxy(this.hideTooltip,this)})}else{this.tooltip.addClass("hide")}};a.prototype={constructor:a,over:false,inDrag:false,showTooltip:function(){this.tooltip.addClass("in");this.over=true},hideTooltip:function(){if(this.inDrag===false){this.tooltip.removeClass("in")}this.over=false},layout:function(){this.handle1Stype[this.stylePos]=this.percentage[0]+"%";this.handle2Stype[this.stylePos]=this.percentage[1]+"%";if(this.orientation=="vertical"){this.selectionElStyle.top=Math.min(this.percentage[0],this.percentage[1])+"%";this.selectionElStyle.height=Math.abs(this.percentage[0]-this.percentage[1])+"%"}else{this.selectionElStyle.left=Math.min(this.percentage[0],this.percentage[1])+"%";this.selectionElStyle.width=Math.abs(this.percentage[0]-this.percentage[1])+"%"}if(this.range){this.tooltipInner.text(this.formater(this.value[0])+" : "+this.formater(this.value[1]));this.tooltip[0].style[this.stylePos]=this.size*(this.percentage[0]+(this.percentage[1]-this.percentage[0])/2)/100-(this.orientation==="vertical"?this.tooltip.outerHeight()/2:this.tooltip.outerWidth()/2)+"px"}else{this.tooltipInner.text(this.formater(this.value[0]));this.tooltip[0].style[this.stylePos]=this.size*this.percentage[0]/100-(this.orientation==="vertical"?this.tooltip.outerHeight()/2:this.tooltip.outerWidth()/2)+"px"}},mousedown:function(d){if(this.touchCapable&&d.type==="touchstart"){d=d.originalEvent}this.offset=this.picker.offset();this.size=this.picker[0][this.sizePos];var c=this.getPercentage(d);if(this.range){var g=Math.abs(this.percentage[0]-c);var e=Math.abs(this.percentage[1]-c);this.dragged=(g<e)?0:1}else{this.dragged=0}this.percentage[this.dragged]=c;this.layout();if(this.touchCapable){b(document).on({touchmove:b.proxy(this.mousemove,this),touchend:b.proxy(this.mouseup,this)})}else{b(document).on({mousemove:b.proxy(this.mousemove,this),mouseup:b.proxy(this.mouseup,this)})}this.inDrag=true;var f=this.calculateValue();this.element.trigger({type:"slideStart",value:f}).trigger({type:"slide",value:f});return false},mousemove:function(d){if(this.touchCapable&&d.type==="touchmove"){d=d.originalEvent}var c=this.getPercentage(d);if(this.range){if(this.dragged===0&&this.percentage[1]<c){this.percentage[0]=this.percentage[1];this.dragged=1}else{if(this.dragged===1&&this.percentage[0]>c){this.percentage[1]=this.percentage[0];this.dragged=0}}}this.percentage[this.dragged]=c;this.layout();var e=this.calculateValue();this.element.trigger({type:"slide",value:e}).data("value",e).prop("value",e);return false},mouseup:function(c){if(this.touchCapable){b(document).off({touchmove:this.mousemove,touchend:this.mouseup})}else{b(document).off({mousemove:this.mousemove,mouseup:this.mouseup})}this.inDrag=false;if(this.over==false){this.hideTooltip()}this.element;var d=this.calculateValue();this.element.trigger({type:"slideStop",value:d}).data("value",d).prop("value",d);return false},calculateValue:function(){var c;if(this.range){c=[(this.min+Math.round((this.diff*this.percentage[0]/100)/this.step)*this.step),(this.min+Math.round((this.diff*this.percentage[1]/100)/this.step)*this.step)];this.value=c}else{c=(this.min+Math.round((this.diff*this.percentage[0]/100)/this.step)*this.step);this.value=[c,this.value[1]]}return c},getPercentage:function(d){if(this.touchCapable){d=d.touches[0]}var c=(d[this.mousePos]-this.offset[this.stylePos])*100/this.size;c=Math.round(c/this.percentage[2])*this.percentage[2];return Math.max(0,Math.min(100,c))},getValue:function(){if(this.range){return this.value}return this.value[0]},setValue:function(c){this.value=c;if(this.range){this.value[0]=Math.max(this.min,Math.min(this.max,this.value[0]));this.value[1]=Math.max(this.min,Math.min(this.max,this.value[1]))}else{this.value=[Math.max(this.min,Math.min(this.max,this.value))];this.handle2.addClass("hide");if(this.selection=="after"){this.value[1]=this.max}else{this.value[1]=this.min}}this.diff=this.max-this.min;this.percentage=[(this.value[0]-this.min)*100/this.diff,(this.value[1]-this.min)*100/this.diff,this.step*100/this.diff];this.layout()}};b.fn.slider=function(c,d){return this.each(function(){var g=b(this),f=g.data("slider"),e=typeof c==="object"&&c;if(!f){g.data("slider",(f=new a(this,b.extend({},b.fn.slider.defaults,e))))}if(typeof c=="string"){f[c](d)}})};b.fn.slider.defaults={min:0,max:10,step:1,orientation:"horizontal",value:5,selection:"before",tooltip:"show",handle:"round",formater:function(c){return c}};b.fn.slider.Constructor=a}(window.jQuery);
(function(){(function(a){a.fn.bootstrapSwitch=function(c){var b;b={init:function(){return this.each(function(){var f,e,g,d,i,k,j,h;e=a(this);i=a("<span>",{"class":"switch-left",html:function(){var m,l;m="ON";l=e.data("on-label");if(l!=null){m=l}return m}});k=a("<span>",{"class":"switch-right",html:function(){var m,l;m="OFF";l=e.data("off-label");if(l!=null){m=l}return m}});d=a("<label>",{"for":e.attr("id"),html:function(){var m,n,l;m="&nbsp;";n=e.data("label-icon");l=e.data("text-label");if(n!=null){m='<i class="icon '+n+'"></i>'}if(l!=null){m=l}return m}});f=a("<div>");j=a("<div>",{"class":"has-switch",tabindex:0});g=e.closest("form");h=function(){if(d.hasClass("label-change-switch")){return}return d.trigger("mousedown").trigger("mouseup").trigger("click")};e.data("bootstrap-switch",true);if(e.attr("class")){a.each(["switch-mini","switch-small","switch-large"],function(m,l){if(e.attr("class").indexOf(l)>=0){i.addClass(l);d.addClass(l);return k.addClass(l)}})}if(e.data("on")!=null){i.addClass("switch-"+e.data("on"))}if(e.data("off")!=null){k.addClass("switch-"+e.data("off"))}f.data("animated",false);if(e.data("animated")!==false){f.addClass("switch-animate").data("animated",true)}f=e.wrap(f).parent();j=f.wrap(j).parent();e.before(i).before(d).before(k);f.addClass(e.is(":checked")?"switch-on":"switch-off");if(e.is(":disabled")||e.is("[readonly]")){j.addClass("disabled")}e.on("keydown",function(l){if(l.keyCode!==32){return}l.stopImmediatePropagation();l.preventDefault();return h()}).on("change",function(n,l){var o,m;o=e.is(":checked");m=f.hasClass("switch-off");n.preventDefault();f.css("left","");if(m!==o){return}if(o){f.removeClass("switch-off").addClass("switch-on")}else{f.removeClass("switch-on").addClass("switch-off")}if(f.data("animated")!==false){f.addClass("switch-animate")}if(typeof l==="boolean"&&l){return}return e.trigger("switch-change",{el:e,value:o})});j.on("keydown",function(l){if(!l.which||e.is(":disabled")||e.is("[readonly]")){return}switch(l.which){case 32:l.preventDefault();return h();case 37:l.preventDefault();if(e.is(":checked")){return h()}break;case 39:l.preventDefault();if(!e.is(":checked")){return h()}}});i.on("click",function(){return h()});k.on("click",function(){return h()});d.on("mousedown touchstart",function(m){var l;l=false;m.preventDefault();m.stopImmediatePropagation();f.removeClass("switch-animate");if(e.is(":disabled")||e.is("[readonly]")||e.hasClass("radio-no-uncheck")){return d.unbind("click")}return d.on("mousemove touchmove",function(r){var q,p,o,n;o=(r.pageX||r.originalEvent.targetTouches[0].pageX)-j.offset().left;p=(o/j.width())*100;q=25;n=75;l=true;if(p<q){p=q}else{if(p>n){p=n}}return f.css("left",(p-n)+"%")}).on("click touchend",function(n){n.stopImmediatePropagation();n.preventDefault();d.unbind("mouseleave");if(l){e.prop("checked",parseInt(d.parent().css("left"),10)>-25)}else{e.prop("checked",!e.is(":checked"))}l=false;return e.trigger("change")}).on("mouseleave",function(n){n.preventDefault();n.stopImmediatePropagation();d.unbind("mouseleave mousemove").trigger("mouseup");return e.prop("checked",parseInt(d.parent().css("left"),10)>-25).trigger("change")}).on("mouseup",function(n){n.stopImmediatePropagation();n.preventDefault();return d.trigger("mouseleave")})});if(!g.data("bootstrap-switch")){return g.bind("reset",function(){return window.setTimeout(function(){return g.find(".has-switch").each(function(){var l;l=a(this).find("input");return l.prop("checked",l.is(":checked")).trigger("change")})},1)}).data("bootstrap-switch",true)}})},setDisabled:function(e){var d,f;d=a(this);f=d.parents(".has-switch");if(e){f.addClass("disabled");d.prop("disabled",true)}else{f.removeClass("disabled");d.prop("disabled",false)}return d},toggleDisabled:function(){var d;d=a(this);d.prop("disabled",!d.is(":disabled")).parents(".has-switch").toggleClass("disabled");return d},isDisabled:function(){return a(this).is(":disabled")},setReadOnly:function(e){var d,f;d=a(this);f=d.parents(".has-switch");if(e){f.addClass("disabled");d.prop("readonly",true)}else{f.removeClass("disabled");d.prop("readonly",false)}return d},toggleReadOnly:function(){var d;d=a(this);d.prop("readonly",!d.is("[readonly]")).parents(".has-switch").toggleClass("disabled");return d},isReadOnly:function(){return a(this).is("[readonly]")},toggleState:function(e){var d;d=a(this);d.prop("checked",!d.is(":checked")).trigger("change",e);return d},toggleRadioState:function(e){var d;d=a(this);d.not(":checked").prop("checked",!d.is(":checked")).trigger("change",e);return d},toggleRadioStateAllowUncheck:function(e,f){var d;d=a(this);if(e){d.not(":checked").trigger("change",f)}else{d.not(":checked").prop("checked",!d.is(":checked")).trigger("change",f)}return d},setState:function(f,e){var d;d=a(this);d.prop("checked",f).trigger("change",e);return d},setOnLabel:function(e){var d;d=a(this);d.siblings(".switch-left").html(e);return d},setOffLabel:function(e){var d;d=a(this);d.siblings(".switch-right").html(e);return d},setOnClass:function(g){var e,f,d;e=a(this);f=e.siblings(".switch-left");d=e.attr("data-on");if(g==null){return}if(d!=null){f.removeClass("switch-"+d)}f.addClass("switch-"+g);return e},setOffClass:function(f){var e,g,d;e=a(this);g=e.siblings(".switch-right");d=e.attr("data-off");if(f==null){return}if(d!=null){g.removeClass("switch-"+d)}g.addClass("switch-"+f);return e},setAnimated:function(f){var e,d;d=a(this);e=d.parent();if(f==null){f=false}e.data("animated",f).attr("data-animated",f)[e.data("animated")!==false?"addClass":"removeClass"]("switch-animate");return d},setSizeClass:function(g){var e,d,f,h;e=a(this);f=e.siblings(".switch-left");d=e.siblings("label");h=e.siblings(".switch-right");a.each(["switch-mini","switch-small","switch-large"],function(k,j){if(j!==g){f.removeClass(j);d.removeClass(j);return h.removeClass(j)}else{f.addClass(j);d.addClass(j);return h.addClass(j)}});return e},setTextLabel:function(e){var d;d=a(this);d.siblings("label").html(e||"&nbsp");return d},setTextIcon:function(e){var d;d=a(this);d.siblings("label").html(e?'<i class="icon '+e+'"></i>':"&nbsp;");return d},state:function(){return a(this).is(":checked")},destroy:function(){var e,d,f;d=a(this);e=d.parent();f=e.closest("form");e.children().not(d).remove();d.unwrap().unwrap().unbind("change");if(f.length){f.unbind("reset").removeData("bootstrapSwitch")}return d}};if(b[c]){return b[c].apply(this,Array.prototype.slice.call(arguments,1))}if(typeof c==="object"||!c){return b.init.apply(this,arguments)}return a.error("Method "+c+" does not exist!")};return this})(jQuery)}).call(this);
!function(d){function g(){return new Date(Date.UTC.apply(Date,arguments))}function b(){var h=new Date();return g(h.getUTCFullYear(),h.getUTCMonth(),h.getUTCDate(),h.getUTCHours(),h.getUTCMinutes(),h.getUTCSeconds(),0)}var f=function(j,i){var l=this;this.element=d(j);this.container=i.container||"body";this.language=i.language||this.element.data("date-language")||"en";this.language=this.language in e?this.language:"en";this.isRTL=e[this.language].rtl||false;this.formatType=i.formatType||this.element.data("format-type")||"standard";this.format=c.parseFormat(i.format||this.element.data("date-format")||e[this.language].format||c.getDefaultFormat(this.formatType,"input"),this.formatType);this.isInline=false;this.isVisible=false;this.isInput=this.element.is("input");this.fontAwesome=i.fontAwesome||this.element.data("font-awesome")||false;this.bootcssVer=i.bootcssVer||(this.isInput?(this.element.is(".form-control")?3:2):(this.bootcssVer=this.element.is(".input-group")?3:2));this.component=this.element.is(".date")?(this.bootcssVer==3?this.element.find(".input-group-addon .glyphicon-th, .input-group-addon .glyphicon-time, .input-group-addon .glyphicon-calendar, .input-group-addon .glyphicon-calendar, .input-group-addon .fa-calendar, .input-group-addon .fa-clock-o").parent():this.element.find(".add-on .icon-th, .add-on .icon-time, .add-on .icon-calendar .fa-calendar .fa-clock-o").parent()):false;this.componentReset=this.element.is(".date")?(this.bootcssVer==3?this.element.find(".input-group-addon .glyphicon-remove, .input-group-addon .fa-times").parent():this.element.find(".add-on .icon-remove, .add-on .fa-times").parent()):false;this.hasInput=this.component&&this.element.find("input").length;if(this.component&&this.component.length===0){this.component=false}this.linkField=i.linkField||this.element.data("link-field")||false;this.linkFormat=c.parseFormat(i.linkFormat||this.element.data("link-format")||c.getDefaultFormat(this.formatType,"link"),this.formatType);this.minuteStep=i.minuteStep||this.element.data("minute-step")||5;this.pickerPosition=i.pickerPosition||this.element.data("picker-position")||"bottom-right";this.showMeridian=i.showMeridian||this.element.data("show-meridian")||false;this.initialDate=i.initialDate||new Date();this.zIndex=i.zIndex||this.element.data("z-index")||undefined;this.icons={leftArrow:this.fontAwesome?"fa-arrow-left":(this.bootcssVer===3?"glyphicon-arrow-left":"icon-arrow-left"),rightArrow:this.fontAwesome?"fa-arrow-right":(this.bootcssVer===3?"glyphicon-arrow-right":"icon-arrow-right")};this.icontype=this.fontAwesome?"fa":"glyphicon";this._attachEvents();this.formatViewType="datetime";if("formatViewType" in i){this.formatViewType=i.formatViewType}else{if("formatViewType" in this.element.data()){this.formatViewType=this.element.data("formatViewType")}}this.minView=0;if("minView" in i){this.minView=i.minView}else{if("minView" in this.element.data()){this.minView=this.element.data("min-view")}}this.minView=c.convertViewMode(this.minView);this.maxView=c.modes.length-1;if("maxView" in i){this.maxView=i.maxView}else{if("maxView" in this.element.data()){this.maxView=this.element.data("max-view")}}this.maxView=c.convertViewMode(this.maxView);this.wheelViewModeNavigation=false;if("wheelViewModeNavigation" in i){this.wheelViewModeNavigation=i.wheelViewModeNavigation}else{if("wheelViewModeNavigation" in this.element.data()){this.wheelViewModeNavigation=this.element.data("view-mode-wheel-navigation")}}this.wheelViewModeNavigationInverseDirection=false;if("wheelViewModeNavigationInverseDirection" in i){this.wheelViewModeNavigationInverseDirection=i.wheelViewModeNavigationInverseDirection}else{if("wheelViewModeNavigationInverseDirection" in this.element.data()){this.wheelViewModeNavigationInverseDirection=this.element.data("view-mode-wheel-navigation-inverse-dir")}}this.wheelViewModeNavigationDelay=100;if("wheelViewModeNavigationDelay" in i){this.wheelViewModeNavigationDelay=i.wheelViewModeNavigationDelay}else{if("wheelViewModeNavigationDelay" in this.element.data()){this.wheelViewModeNavigationDelay=this.element.data("view-mode-wheel-navigation-delay")}}this.startViewMode=2;if("startView" in i){this.startViewMode=i.startView}else{if("startView" in this.element.data()){this.startViewMode=this.element.data("start-view")}}this.startViewMode=c.convertViewMode(this.startViewMode);this.viewMode=this.startViewMode;this.viewSelect=this.minView;if("viewSelect" in i){this.viewSelect=i.viewSelect}else{if("viewSelect" in this.element.data()){this.viewSelect=this.element.data("view-select")}}this.viewSelect=c.convertViewMode(this.viewSelect);this.forceParse=true;if("forceParse" in i){this.forceParse=i.forceParse}else{if("dateForceParse" in this.element.data()){this.forceParse=this.element.data("date-force-parse")}}var k=this.bootcssVer===3?c.templateV3:c.template;while(k.indexOf("{iconType}")!==-1){k=k.replace("{iconType}",this.icontype)}while(k.indexOf("{leftArrow}")!==-1){k=k.replace("{leftArrow}",this.icons.leftArrow)}while(k.indexOf("{rightArrow}")!==-1){k=k.replace("{rightArrow}",this.icons.rightArrow)}this.picker=d(k).appendTo(this.isInline?this.element:this.container).on({click:d.proxy(this.click,this),mousedown:d.proxy(this.mousedown,this)});if(this.wheelViewModeNavigation){if(d.fn.mousewheel){this.picker.on({mousewheel:d.proxy(this.mousewheel,this)})}else{console.log("Mouse Wheel event is not supported. Please include the jQuery Mouse Wheel plugin before enabling this option")}}if(this.isInline){this.picker.addClass("datetimepicker-inline")}else{this.picker.addClass("datetimepicker-dropdown-"+this.pickerPosition+" dropdown-menu")}if(this.isRTL){this.picker.addClass("datetimepicker-rtl");var h=this.bootcssVer===3?".prev span, .next span":".prev i, .next i";this.picker.find(h).toggleClass(this.icons.leftArrow+" "+this.icons.rightArrow)}d(document).on("mousedown",function(m){if(d(m.target).closest(".datetimepicker").length===0){l.hide()}});this.autoclose=false;if("autoclose" in i){this.autoclose=i.autoclose}else{if("dateAutoclose" in this.element.data()){this.autoclose=this.element.data("date-autoclose")}}this.keyboardNavigation=true;if("keyboardNavigation" in i){this.keyboardNavigation=i.keyboardNavigation}else{if("dateKeyboardNavigation" in this.element.data()){this.keyboardNavigation=this.element.data("date-keyboard-navigation")}}this.todayBtn=(i.todayBtn||this.element.data("date-today-btn")||false);this.todayHighlight=(i.todayHighlight||this.element.data("date-today-highlight")||false);this.weekStart=((i.weekStart||this.element.data("date-weekstart")||e[this.language].weekStart||0)%7);this.weekEnd=((this.weekStart+6)%7);this.startDate=-Infinity;this.endDate=Infinity;this.daysOfWeekDisabled=[];this.setStartDate(i.startDate||this.element.data("date-startdate"));this.setEndDate(i.endDate||this.element.data("date-enddate"));this.setDaysOfWeekDisabled(i.daysOfWeekDisabled||this.element.data("date-days-of-week-disabled"));this.setMinutesDisabled(i.minutesDisabled||this.element.data("date-minute-disabled"));this.setHoursDisabled(i.hoursDisabled||this.element.data("date-hour-disabled"));this.fillDow();this.fillMonths();this.update();this.showMode();if(this.isInline){this.show()}};f.prototype={constructor:f,_events:[],_attachEvents:function(){this._detachEvents();if(this.isInput){this._events=[[this.element,{focus:d.proxy(this.show,this),keyup:d.proxy(this.update,this),keydown:d.proxy(this.keydown,this)}]]}else{if(this.component&&this.hasInput){this._events=[[this.element.find("input"),{focus:d.proxy(this.show,this),keyup:d.proxy(this.update,this),keydown:d.proxy(this.keydown,this)}],[this.component,{click:d.proxy(this.show,this)}]];if(this.componentReset){this._events.push([this.componentReset,{click:d.proxy(this.reset,this)}])}}else{if(this.element.is("div")){this.isInline=true}else{this._events=[[this.element,{click:d.proxy(this.show,this)}]]}}}for(var h=0,j,k;h<this._events.length;h++){j=this._events[h][0];k=this._events[h][1];j.on(k)}},_detachEvents:function(){for(var h=0,j,k;h<this._events.length;h++){j=this._events[h][0];k=this._events[h][1];j.off(k)}this._events=[]},show:function(h){this.picker.show();this.height=this.component?this.component.outerHeight():this.element.outerHeight();if(this.forceParse){this.update()}this.place();d(window).on("resize",d.proxy(this.place,this));if(h){h.stopPropagation();h.preventDefault()}this.isVisible=true;this.element.trigger({type:"show",date:this.date})},hide:function(h){if(!this.isVisible){return}if(this.isInline){return}this.picker.hide();d(window).off("resize",this.place);this.viewMode=this.startViewMode;this.showMode();if(!this.isInput){d(document).off("mousedown",this.hide)}if(this.forceParse&&(this.isInput&&this.element.val()||this.hasInput&&this.element.find("input").val())){this.setValue()}this.isVisible=false;this.element.trigger({type:"hide",date:this.date})},remove:function(){this._detachEvents();this.picker.remove();delete this.picker;delete this.element.data().datetimepicker},getDate:function(){var h=this.getUTCDate();return new Date(h.getTime()+(h.getTimezoneOffset()*60000))},getUTCDate:function(){return this.date},setDate:function(h){this.setUTCDate(new Date(h.getTime()-(h.getTimezoneOffset()*60000)))},setUTCDate:function(h){if(h>=this.startDate&&h<=this.endDate){this.date=h;this.setValue();this.viewDate=this.date;this.fill()}else{this.element.trigger({type:"outOfRange",date:h,startDate:this.startDate,endDate:this.endDate})}},setFormat:function(i){this.format=c.parseFormat(i,this.formatType);var h;if(this.isInput){h=this.element}else{if(this.component){h=this.element.find("input")}}if(h&&h.val()){this.setValue()}},setValue:function(){var h=this.getFormattedDate();if(!this.isInput){if(this.component){this.element.find("input").val(h)}this.element.data("date",h)}else{this.element.val(h)}if(this.linkField){d("#"+this.linkField).val(this.getFormattedDate(this.linkFormat))}},getFormattedDate:function(h){if(h==undefined){h=this.format}return c.formatDate(this.date,h,this.language,this.formatType)},setStartDate:function(h){this.startDate=h||-Infinity;if(this.startDate!==-Infinity){this.startDate=c.parseDate(this.startDate,this.format,this.language,this.formatType)}this.update();this.updateNavArrows()},setEndDate:function(h){this.endDate=h||Infinity;if(this.endDate!==Infinity){this.endDate=c.parseDate(this.endDate,this.format,this.language,this.formatType)}this.update();this.updateNavArrows()},setDaysOfWeekDisabled:function(h){this.daysOfWeekDisabled=h||[];if(!d.isArray(this.daysOfWeekDisabled)){this.daysOfWeekDisabled=this.daysOfWeekDisabled.split(/,\s*/)}this.daysOfWeekDisabled=d.map(this.daysOfWeekDisabled,function(i){return parseInt(i,10)});this.update();this.updateNavArrows()},setMinutesDisabled:function(h){this.minutesDisabled=h||[];if(!d.isArray(this.minutesDisabled)){this.minutesDisabled=this.minutesDisabled.split(/,\s*/)}this.minutesDisabled=d.map(this.minutesDisabled,function(i){return parseInt(i,10)});this.update();this.updateNavArrows()},setHoursDisabled:function(h){this.hoursDisabled=h||[];if(!d.isArray(this.hoursDisabled)){this.hoursDisabled=this.hoursDisabled.split(/,\s*/)}this.hoursDisabled=d.map(this.hoursDisabled,function(i){return parseInt(i,10)});this.update();this.updateNavArrows()},place:function(){if(this.isInline){return}if(!this.zIndex){var h=0;d("div").each(function(){var m=parseInt(d(this).css("zIndex"),10);if(m>h){h=m}});this.zIndex=h+10}var l,k,j,i;if(this.container instanceof d){i=this.container.offset()}else{i=d(this.container).offset()}if(this.component){l=this.component.offset();j=l.left;if(this.pickerPosition=="bottom-left"||this.pickerPosition=="top-left"){j+=this.component.outerWidth()-this.picker.outerWidth()}}else{l=this.element.offset();j=l.left}if(j+220>document.body.clientWidth){j=document.body.clientWidth-220}if(this.pickerPosition=="top-left"||this.pickerPosition=="top-right"){k=l.top-this.picker.outerHeight()}else{k=l.top+this.height}k=k-i.top;j=j-i.left;if(this.container!="body"){k=k+document.body.scrollTop}this.picker.css({top:k,left:j,zIndex:this.zIndex})},update:function(){var h,i=false;if(arguments&&arguments.length&&(typeof arguments[0]==="string"||arguments[0] instanceof Date)){h=arguments[0];i=true}else{h=(this.isInput?this.element.val():this.element.find("input").val())||this.element.data("date")||this.initialDate;if(typeof h=="string"||h instanceof String){h=h.replace(/^\s+|\s+$/g,"")}}if(!h){h=new Date();i=false}this.date=c.parseDate(h,this.format,this.language,this.formatType);if(i){this.setValue()}if(this.date<this.startDate){this.viewDate=new Date(this.startDate)}else{if(this.date>this.endDate){this.viewDate=new Date(this.endDate)}else{this.viewDate=new Date(this.date)}}this.fill()},fillDow:function(){var h=this.weekStart,i="<tr>";while(h<this.weekStart+7){i+='<th class="dow">'+e[this.language].daysMin[(h++)%7]+"</th>"}i+="</tr>";this.picker.find(".datetimepicker-days thead").append(i)},fillMonths:function(){var j="",h=0;while(h<12){j+='<span class="month">'+e[this.language].monthsShort[h++]+"</span>"}this.picker.find(".datetimepicker-months td").html(j)},fill:function(){if(this.date==null||this.viewDate==null){return}var F=new Date(this.viewDate),s=F.getUTCFullYear(),G=F.getUTCMonth(),m=F.getUTCDate(),B=F.getUTCHours(),w=F.getUTCMinutes(),x=this.startDate!==-Infinity?this.startDate.getUTCFullYear():-Infinity,C=this.startDate!==-Infinity?this.startDate.getUTCMonth()+1:-Infinity,o=this.endDate!==Infinity?this.endDate.getUTCFullYear():Infinity,y=this.endDate!==Infinity?this.endDate.getUTCMonth()+1:Infinity,p=(new g(this.date.getUTCFullYear(),this.date.getUTCMonth(),this.date.getUTCDate())).valueOf(),E=new Date();this.picker.find(".datetimepicker-days thead th:eq(1)").text(e[this.language].months[G]+" "+s);if(this.formatViewType=="time"){var j=this.getFormattedDate();this.picker.find(".datetimepicker-hours thead th:eq(1)").text(j);this.picker.find(".datetimepicker-minutes thead th:eq(1)").text(j)}else{this.picker.find(".datetimepicker-hours thead th:eq(1)").text(m+" "+e[this.language].months[G]+" "+s);this.picker.find(".datetimepicker-minutes thead th:eq(1)").text(m+" "+e[this.language].months[G]+" "+s)}this.picker.find("tfoot th.today").text(e[this.language].today).toggle(this.todayBtn!==false);this.updateNavArrows();this.fillMonths();var I=g(s,G-1,28,0,0,0,0),A=c.getDaysInMonth(I.getUTCFullYear(),I.getUTCMonth());I.setUTCDate(A);I.setUTCDate(A-(I.getUTCDay()-this.weekStart+7)%7);var h=new Date(I);h.setUTCDate(h.getUTCDate()+42);h=h.valueOf();var q=[];var t;while(I.valueOf()<h){if(I.getUTCDay()==this.weekStart){q.push("<tr>")}t="";if(I.getUTCFullYear()<s||(I.getUTCFullYear()==s&&I.getUTCMonth()<G)){t+=" old"}else{if(I.getUTCFullYear()>s||(I.getUTCFullYear()==s&&I.getUTCMonth()>G)){t+=" new"}}if(this.todayHighlight&&I.getUTCFullYear()==E.getFullYear()&&I.getUTCMonth()==E.getMonth()&&I.getUTCDate()==E.getDate()){t+=" today"}if(I.valueOf()==p){t+=" active"}if((I.valueOf()+86400000)<=this.startDate||I.valueOf()>this.endDate||d.inArray(I.getUTCDay(),this.daysOfWeekDisabled)!==-1){t+=" disabled"}q.push('<td class="day'+t+'">'+I.getUTCDate()+"</td>");if(I.getUTCDay()==this.weekEnd){q.push("</tr>")}I.setUTCDate(I.getUTCDate()+1)}this.picker.find(".datetimepicker-days tbody").empty().append(q.join(""));q=[];var u="",D="",r="";var k=this.hoursDisabled||[];for(var z=0;z<24;z++){if(k.indexOf(z)!==-1){continue}var v=g(s,G,m,z);t="";if((v.valueOf()+3600000)<=this.startDate||v.valueOf()>this.endDate){t+=" disabled"}else{if(B==z){t+=" active"}}if(this.showMeridian&&e[this.language].meridiem.length==2){D=(z<12?e[this.language].meridiem[0]:e[this.language].meridiem[1]);if(D!=r){if(r!=""){q.push("</fieldset>")}q.push('<fieldset class="hour"><legend>'+D.toUpperCase()+"</legend>")}r=D;u=(z%12?z%12:12);q.push('<span class="hour'+t+" hour_"+(z<12?"am":"pm")+'">'+u+"</span>");if(z==23){q.push("</fieldset>")}}else{u=z+":00";q.push('<span class="hour'+t+'">'+u+"</span>")}}this.picker.find(".datetimepicker-hours td").html(q.join(""));q=[];u="",D="",r="";var l=this.minutesDisabled||[];for(var z=0;z<60;z+=this.minuteStep){if(l.indexOf(z)!==-1){continue}var v=g(s,G,m,B,z,0);t="";if(v.valueOf()<this.startDate||v.valueOf()>this.endDate){t+=" disabled"}else{if(Math.floor(w/this.minuteStep)==Math.floor(z/this.minuteStep)){t+=" active"}}if(this.showMeridian&&e[this.language].meridiem.length==2){D=(B<12?e[this.language].meridiem[0]:e[this.language].meridiem[1]);if(D!=r){if(r!=""){q.push("</fieldset>")}q.push('<fieldset class="minute"><legend>'+D.toUpperCase()+"</legend>")}r=D;u=(B%12?B%12:12);q.push('<span class="minute'+t+'">'+u+":"+(z<10?"0"+z:z)+"</span>");if(z==59){q.push("</fieldset>")}}else{u=z+":00";q.push('<span class="minute'+t+'">'+B+":"+(z<10?"0"+z:z)+"</span>")}}this.picker.find(".datetimepicker-minutes td").html(q.join(""));var J=this.date.getUTCFullYear();var n=this.picker.find(".datetimepicker-months").find("th:eq(1)").text(s).end().find("span").removeClass("active");if(J==s){n.eq(this.date.getUTCMonth()+2).addClass("active")}if(s<x||s>o){n.addClass("disabled")}if(s==x){n.slice(0,C+1).addClass("disabled")}if(s==o){n.slice(y).addClass("disabled")}q="";s=parseInt(s/10,10)*10;var H=this.picker.find(".datetimepicker-years").find("th:eq(1)").text(s+"-"+(s+9)).end().find("td");s-=1;for(var z=-1;z<11;z++){q+='<span class="year'+(z==-1||z==10?" old":"")+(J==s?" active":"")+(s<x||s>o?" disabled":"")+'">'+s+"</span>";s+=1}H.html(q);this.place()},updateNavArrows:function(){var l=new Date(this.viewDate),j=l.getUTCFullYear(),k=l.getUTCMonth(),i=l.getUTCDate(),h=l.getUTCHours();switch(this.viewMode){case 0:if(this.startDate!==-Infinity&&j<=this.startDate.getUTCFullYear()&&k<=this.startDate.getUTCMonth()&&i<=this.startDate.getUTCDate()&&h<=this.startDate.getUTCHours()){this.picker.find(".prev").css({visibility:"hidden"})}else{this.picker.find(".prev").css({visibility:"visible"})}if(this.endDate!==Infinity&&j>=this.endDate.getUTCFullYear()&&k>=this.endDate.getUTCMonth()&&i>=this.endDate.getUTCDate()&&h>=this.endDate.getUTCHours()){this.picker.find(".next").css({visibility:"hidden"})}else{this.picker.find(".next").css({visibility:"visible"})}break;case 1:if(this.startDate!==-Infinity&&j<=this.startDate.getUTCFullYear()&&k<=this.startDate.getUTCMonth()&&i<=this.startDate.getUTCDate()){this.picker.find(".prev").css({visibility:"hidden"})}else{this.picker.find(".prev").css({visibility:"visible"})}if(this.endDate!==Infinity&&j>=this.endDate.getUTCFullYear()&&k>=this.endDate.getUTCMonth()&&i>=this.endDate.getUTCDate()){this.picker.find(".next").css({visibility:"hidden"})}else{this.picker.find(".next").css({visibility:"visible"})}break;case 2:if(this.startDate!==-Infinity&&j<=this.startDate.getUTCFullYear()&&k<=this.startDate.getUTCMonth()){this.picker.find(".prev").css({visibility:"hidden"})}else{this.picker.find(".prev").css({visibility:"visible"})}if(this.endDate!==Infinity&&j>=this.endDate.getUTCFullYear()&&k>=this.endDate.getUTCMonth()){this.picker.find(".next").css({visibility:"hidden"})}else{this.picker.find(".next").css({visibility:"visible"})}break;case 3:case 4:if(this.startDate!==-Infinity&&j<=this.startDate.getUTCFullYear()){this.picker.find(".prev").css({visibility:"hidden"})}else{this.picker.find(".prev").css({visibility:"visible"})}if(this.endDate!==Infinity&&j>=this.endDate.getUTCFullYear()){this.picker.find(".next").css({visibility:"hidden"})}else{this.picker.find(".next").css({visibility:"visible"})}break}},mousewheel:function(i){i.preventDefault();i.stopPropagation();if(this.wheelPause){return}this.wheelPause=true;var h=i.originalEvent;var k=h.wheelDelta;var j=k>0?1:(k===0)?0:-1;if(this.wheelViewModeNavigationInverseDirection){j=-j}this.showMode(j);setTimeout(d.proxy(function(){this.wheelPause=false},this),this.wheelViewModeNavigationDelay)},click:function(l){l.stopPropagation();l.preventDefault();var m=d(l.target).closest("span, td, th, legend");if(m.is("."+this.icontype)){m=d(m).parent().closest("span, td, th, legend")}if(m.length==1){if(m.is(".disabled")){this.element.trigger({type:"outOfRange",date:this.viewDate,startDate:this.startDate,endDate:this.endDate});return}switch(m[0].nodeName.toLowerCase()){case"th":switch(m[0].className){case"switch":this.showMode(1);break;case"prev":case"next":var h=c.modes[this.viewMode].navStep*(m[0].className=="prev"?-1:1);switch(this.viewMode){case 0:this.viewDate=this.moveHour(this.viewDate,h);break;case 1:this.viewDate=this.moveDate(this.viewDate,h);break;case 2:this.viewDate=this.moveMonth(this.viewDate,h);break;case 3:case 4:this.viewDate=this.moveYear(this.viewDate,h);break}this.fill();this.element.trigger({type:m[0].className+":"+this.convertViewModeText(this.viewMode),date:this.viewDate,startDate:this.startDate,endDate:this.endDate});break;case"today":var i=new Date();i=g(i.getFullYear(),i.getMonth(),i.getDate(),i.getHours(),i.getMinutes(),i.getSeconds(),0);if(i<this.startDate){i=this.startDate}else{if(i>this.endDate){i=this.endDate}}this.viewMode=this.startViewMode;this.showMode(0);this._setDate(i);this.fill();if(this.autoclose){this.hide()}break}break;case"span":if(!m.is(".disabled")){var o=this.viewDate.getUTCFullYear(),n=this.viewDate.getUTCMonth(),p=this.viewDate.getUTCDate(),q=this.viewDate.getUTCHours(),j=this.viewDate.getUTCMinutes(),r=this.viewDate.getUTCSeconds();if(m.is(".month")){this.viewDate.setUTCDate(1);n=m.parent().find("span").index(m);p=this.viewDate.getUTCDate();this.viewDate.setUTCMonth(n);this.element.trigger({type:"changeMonth",date:this.viewDate});if(this.viewSelect>=3){this._setDate(g(o,n,p,q,j,r,0))}}else{if(m.is(".year")){this.viewDate.setUTCDate(1);o=parseInt(m.text(),10)||0;this.viewDate.setUTCFullYear(o);this.element.trigger({type:"changeYear",date:this.viewDate});if(this.viewSelect>=4){this._setDate(g(o,n,p,q,j,r,0))}}else{if(m.is(".hour")){q=parseInt(m.text(),10)||0;if(m.hasClass("hour_am")||m.hasClass("hour_pm")){if(q==12&&m.hasClass("hour_am")){q=0}else{if(q!=12&&m.hasClass("hour_pm")){q+=12}}}this.viewDate.setUTCHours(q);this.element.trigger({type:"changeHour",date:this.viewDate});if(this.viewSelect>=1){this._setDate(g(o,n,p,q,j,r,0))}}else{if(m.is(".minute")){j=parseInt(m.text().substr(m.text().indexOf(":")+1),10)||0;this.viewDate.setUTCMinutes(j);this.element.trigger({type:"changeMinute",date:this.viewDate});if(this.viewSelect>=0){this._setDate(g(o,n,p,q,j,r,0))}}}}}if(this.viewMode!=0){var k=this.viewMode;this.showMode(-1);this.fill();if(k==this.viewMode&&this.autoclose){this.hide()}}else{this.fill();if(this.autoclose){this.hide()}}}break;case"td":if(m.is(".day")&&!m.is(".disabled")){var p=parseInt(m.text(),10)||1;var o=this.viewDate.getUTCFullYear(),n=this.viewDate.getUTCMonth(),q=this.viewDate.getUTCHours(),j=this.viewDate.getUTCMinutes(),r=this.viewDate.getUTCSeconds();if(m.is(".old")){if(n===0){n=11;o-=1}else{n-=1}}else{if(m.is(".new")){if(n==11){n=0;o+=1}else{n+=1}}}this.viewDate.setUTCFullYear(o);this.viewDate.setUTCMonth(n,p);this.element.trigger({type:"changeDay",date:this.viewDate});if(this.viewSelect>=2){this._setDate(g(o,n,p,q,j,r,0))}}var k=this.viewMode;this.showMode(-1);this.fill();if(k==this.viewMode&&this.autoclose){this.hide()}break}}},_setDate:function(h,j){if(!j||j=="date"){this.date=h}if(!j||j=="view"){this.viewDate=h}this.fill();this.setValue();var i;if(this.isInput){i=this.element}else{if(this.component){i=this.element.find("input")}}if(i){i.change();if(this.autoclose&&(!j||j=="date")){}}this.element.trigger({type:"changeDate",date:this.date})},moveMinute:function(i,h){if(!h){return i}var j=new Date(i.valueOf());j.setUTCMinutes(j.getUTCMinutes()+(h*this.minuteStep));return j},moveHour:function(i,h){if(!h){return i}var j=new Date(i.valueOf());j.setUTCHours(j.getUTCHours()+h);return j},moveDate:function(i,h){if(!h){return i}var j=new Date(i.valueOf());j.setUTCDate(j.getUTCDate()+h);return j},moveMonth:function(h,j){if(!j){return h}var m=new Date(h.valueOf()),q=m.getUTCDate(),n=m.getUTCMonth(),l=Math.abs(j),p,o;j=j>0?1:-1;if(l==1){o=j==-1?function(){return m.getUTCMonth()==n}:function(){return m.getUTCMonth()!=p};p=n+j;m.setUTCMonth(p);if(p<0||p>11){p=(p+12)%12}}else{for(var k=0;k<l;k++){m=this.moveMonth(m,j)}p=m.getUTCMonth();m.setUTCDate(q);o=function(){return p!=m.getUTCMonth()}}while(o()){m.setUTCDate(--q);m.setUTCMonth(p)}return m},moveYear:function(i,h){return this.moveMonth(i,h*12)},dateWithinRange:function(h){return h>=this.startDate&&h<=this.endDate},keydown:function(l){if(this.picker.is(":not(:visible)")){if(l.keyCode==27){this.show()}return}var n=false,i,o,m,p,h;switch(l.keyCode){case 27:this.hide();l.preventDefault();break;case 37:case 39:if(!this.keyboardNavigation){break}i=l.keyCode==37?-1:1;viewMode=this.viewMode;if(l.ctrlKey){viewMode+=2}else{if(l.shiftKey){viewMode+=1}}if(viewMode==4){p=this.moveYear(this.date,i);h=this.moveYear(this.viewDate,i)}else{if(viewMode==3){p=this.moveMonth(this.date,i);h=this.moveMonth(this.viewDate,i)}else{if(viewMode==2){p=this.moveDate(this.date,i);h=this.moveDate(this.viewDate,i)}else{if(viewMode==1){p=this.moveHour(this.date,i);h=this.moveHour(this.viewDate,i)}else{if(viewMode==0){p=this.moveMinute(this.date,i);h=this.moveMinute(this.viewDate,i)}}}}}if(this.dateWithinRange(p)){this.date=p;this.viewDate=h;this.setValue();this.update();l.preventDefault();n=true}break;case 38:case 40:if(!this.keyboardNavigation){break}i=l.keyCode==38?-1:1;viewMode=this.viewMode;if(l.ctrlKey){viewMode+=2}else{if(l.shiftKey){viewMode+=1}}if(viewMode==4){p=this.moveYear(this.date,i);h=this.moveYear(this.viewDate,i)}else{if(viewMode==3){p=this.moveMonth(this.date,i);h=this.moveMonth(this.viewDate,i)}else{if(viewMode==2){p=this.moveDate(this.date,i*7);h=this.moveDate(this.viewDate,i*7)}else{if(viewMode==1){if(this.showMeridian){p=this.moveHour(this.date,i*6);h=this.moveHour(this.viewDate,i*6)}else{p=this.moveHour(this.date,i*4);h=this.moveHour(this.viewDate,i*4)}}else{if(viewMode==0){p=this.moveMinute(this.date,i*4);h=this.moveMinute(this.viewDate,i*4)}}}}}if(this.dateWithinRange(p)){this.date=p;this.viewDate=h;this.setValue();this.update();l.preventDefault();n=true}break;case 13:if(this.viewMode!=0){var k=this.viewMode;this.showMode(-1);this.fill();if(k==this.viewMode&&this.autoclose){this.hide()}}else{this.fill();if(this.autoclose){this.hide()}}l.preventDefault();break;case 9:this.hide();break}if(n){var j;if(this.isInput){j=this.element}else{if(this.component){j=this.element.find("input")}}if(j){j.change()}this.element.trigger({type:"changeDate",date:this.date})}},showMode:function(h){if(h){var i=Math.max(0,Math.min(c.modes.length-1,this.viewMode+h));if(i>=this.minView&&i<=this.maxView){this.element.trigger({type:"changeMode",date:this.viewDate,oldViewMode:this.viewMode,newViewMode:i});this.viewMode=i}}this.picker.find(">div").hide().filter(".datetimepicker-"+c.modes[this.viewMode].clsName).css("display","block");this.updateNavArrows()},reset:function(h){this._setDate(null,"date")},convertViewModeText:function(h){switch(h){case 4:return"decade";case 3:return"year";case 2:return"month";case 1:return"day";case 0:return"hour"}}};var a=d.fn.datetimepicker;d.fn.datetimepicker=function(j){var h=Array.apply(null,arguments);h.shift();var i;this.each(function(){var m=d(this),l=m.data("datetimepicker"),k=typeof j=="object"&&j;if(!l){m.data("datetimepicker",(l=new f(this,d.extend({},d.fn.datetimepicker.defaults,k))))}if(typeof j=="string"&&typeof l[j]=="function"){i=l[j].apply(l,h);if(i!==undefined){return false}}});if(i!==undefined){return i}else{return this}};d.fn.datetimepicker.defaults={};d.fn.datetimepicker.Constructor=f;var e=d.fn.datetimepicker.dates={en:{days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],daysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sun"],daysMin:["Su","Mo","Tu","We","Th","Fr","Sa","Su"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],meridiem:["am","pm"],suffix:["st","nd","rd","th"],today:"Today"}};var c={modes:[{clsName:"minutes",navFnc:"Hours",navStep:1},{clsName:"hours",navFnc:"Date",navStep:1},{clsName:"days",navFnc:"Month",navStep:1},{clsName:"months",navFnc:"FullYear",navStep:1},{clsName:"years",navFnc:"FullYear",navStep:10}],isLeapYear:function(h){return(((h%4===0)&&(h%100!==0))||(h%400===0))},getDaysInMonth:function(h,i){return[31,(c.isLeapYear(h)?29:28),31,30,31,30,31,31,30,31,30,31][i]},getDefaultFormat:function(h,i){if(h=="standard"){if(i=="input"){return"yyyy-mm-dd hh:ii"}else{return"yyyy-mm-dd hh:ii:ss"}}else{if(h=="php"){if(i=="input"){return"Y-m-d H:i"}else{return"Y-m-d H:i:s"}}else{throw new Error("Invalid format type.")}}},validParts:function(h){if(h=="standard"){return/hh?|HH?|p|P|ii?|ss?|dd?|DD?|mm?|MM?|yy(?:yy)?/g}else{if(h=="php"){return/[dDjlNwzFmMnStyYaABgGhHis]/g}else{throw new Error("Invalid format type.")}}},nonpunctuation:/[^ -\/:-@\[-`{-~\t\n\rTZ]+/g,parseFormat:function(k,i){var h=k.replace(this.validParts(i),"\0").split("\0"),j=k.match(this.validParts(i));if(!h||!h.length||!j||j.length==0){throw new Error("Invalid date format.")}return{separators:h,parts:j}},parseDate:function(m,v,p,t){if(m instanceof Date){var x=new Date(m.valueOf()-m.getTimezoneOffset()*60000);x.setMilliseconds(0);return x}if(/^\d{4}\-\d{1,2}\-\d{1,2}$/.test(m)){v=this.parseFormat("yyyy-mm-dd",t)}if(/^\d{4}\-\d{1,2}\-\d{1,2}[T ]\d{1,2}\:\d{1,2}$/.test(m)){v=this.parseFormat("yyyy-mm-dd hh:ii",t)}if(/^\d{4}\-\d{1,2}\-\d{1,2}[T ]\d{1,2}\:\d{1,2}\:\d{1,2}[Z]{0,1}$/.test(m)){v=this.parseFormat("yyyy-mm-dd hh:ii:ss",t)}if(/^[-+]\d+[dmwy]([\s,]+[-+]\d+[dmwy])*$/.test(m)){var y=/([-+]\d+)([dmwy])/,n=m.match(/([-+]\d+)([dmwy])/g),h,l;m=new Date();for(var o=0;o<n.length;o++){h=y.exec(n[o]);l=parseInt(h[1]);switch(h[2]){case"d":m.setUTCDate(m.getUTCDate()+l);break;case"m":m=f.prototype.moveMonth.call(f.prototype,m,l);break;case"w":m.setUTCDate(m.getUTCDate()+l*7);break;case"y":m=f.prototype.moveYear.call(f.prototype,m,l);break}}return g(m.getUTCFullYear(),m.getUTCMonth(),m.getUTCDate(),m.getUTCHours(),m.getUTCMinutes(),m.getUTCSeconds(),0)}var n=m&&m.toString().match(this.nonpunctuation)||[],m=new Date(0,0,0,0,0,0,0),r={},u=["hh","h","ii","i","ss","s","yyyy","yy","M","MM","m","mm","D","DD","d","dd","H","HH","p","P"],w={hh:function(s,i){return s.setUTCHours(i)},h:function(s,i){return s.setUTCHours(i)},HH:function(s,i){return s.setUTCHours(i==12?0:i)},H:function(s,i){return s.setUTCHours(i==12?0:i)},ii:function(s,i){return s.setUTCMinutes(i)},i:function(s,i){return s.setUTCMinutes(i)},ss:function(s,i){return s.setUTCSeconds(i)},s:function(s,i){return s.setUTCSeconds(i)},yyyy:function(s,i){return s.setUTCFullYear(i)},yy:function(s,i){return s.setUTCFullYear(2000+i)},m:function(s,i){i-=1;while(i<0){i+=12}i%=12;s.setUTCMonth(i);while(s.getUTCMonth()!=i){if(isNaN(s.getUTCMonth())){return s}else{s.setUTCDate(s.getUTCDate()-1)}}return s},d:function(s,i){return s.setUTCDate(i)},p:function(s,i){return s.setUTCHours(i==1?s.getUTCHours()+12:s.getUTCHours())}},k,q,h;w.M=w.MM=w.mm=w.m;w.dd=w.d;w.P=w.p;m=g(m.getFullYear(),m.getMonth(),m.getDate(),m.getHours(),m.getMinutes(),m.getSeconds());if(n.length==v.parts.length){for(var o=0,j=v.parts.length;o<j;o++){k=parseInt(n[o],10);h=v.parts[o];if(isNaN(k)){switch(h){case"MM":q=d(e[p].months).filter(function(){var i=this.slice(0,n[o].length),s=n[o].slice(0,i.length);return i==s});k=d.inArray(q[0],e[p].months)+1;break;case"M":q=d(e[p].monthsShort).filter(function(){var i=this.slice(0,n[o].length),s=n[o].slice(0,i.length);return i.toLowerCase()==s.toLowerCase()});k=d.inArray(q[0],e[p].monthsShort)+1;break;case"p":case"P":k=d.inArray(n[o].toLowerCase(),e[p].meridiem);break}}r[h]=k}for(var o=0,z;o<u.length;o++){z=u[o];if(z in r&&!isNaN(r[z])){w[z](m,r[z])}}}return m},formatDate:function(h,n,p,l){if(h==null){return""}var o;if(l=="standard"){o={yy:h.getUTCFullYear().toString().substring(2),yyyy:h.getUTCFullYear(),m:h.getUTCMonth()+1,M:e[p].monthsShort[h.getUTCMonth()],MM:e[p].months[h.getUTCMonth()],d:h.getUTCDate(),D:e[p].daysShort[h.getUTCDay()],DD:e[p].days[h.getUTCDay()],p:(e[p].meridiem.length==2?e[p].meridiem[h.getUTCHours()<12?0:1]:""),h:h.getUTCHours(),i:h.getUTCMinutes(),s:h.getUTCSeconds()};if(e[p].meridiem.length==2){o.H=(o.h%12==0?12:o.h%12)}else{o.H=o.h}o.HH=(o.H<10?"0":"")+o.H;o.P=o.p.toUpperCase();o.hh=(o.h<10?"0":"")+o.h;o.ii=(o.i<10?"0":"")+o.i;o.ss=(o.s<10?"0":"")+o.s;o.dd=(o.d<10?"0":"")+o.d;o.mm=(o.m<10?"0":"")+o.m}else{if(l=="php"){o={y:h.getUTCFullYear().toString().substring(2),Y:h.getUTCFullYear(),F:e[p].months[h.getUTCMonth()],M:e[p].monthsShort[h.getUTCMonth()],n:h.getUTCMonth()+1,t:c.getDaysInMonth(h.getUTCFullYear(),h.getUTCMonth()),j:h.getUTCDate(),l:e[p].days[h.getUTCDay()],D:e[p].daysShort[h.getUTCDay()],w:h.getUTCDay(),N:(h.getUTCDay()==0?7:h.getUTCDay()),S:(h.getUTCDate()%10<=e[p].suffix.length?e[p].suffix[h.getUTCDate()%10-1]:""),a:(e[p].meridiem.length==2?e[p].meridiem[h.getUTCHours()<12?0:1]:""),g:(h.getUTCHours()%12==0?12:h.getUTCHours()%12),G:h.getUTCHours(),i:h.getUTCMinutes(),s:h.getUTCSeconds()};o.m=(o.n<10?"0":"")+o.n;o.d=(o.j<10?"0":"")+o.j;o.A=o.a.toString().toUpperCase();o.h=(o.g<10?"0":"")+o.g;o.H=(o.G<10?"0":"")+o.G;o.i=(o.i<10?"0":"")+o.i;o.s=(o.s<10?"0":"")+o.s}else{throw new Error("Invalid format type.")}}var h=[],m=d.extend([],n.separators);for(var k=0,j=n.parts.length;k<j;k++){if(m.length){h.push(m.shift())}h.push(o[n.parts[k]])}if(m.length){h.push(m.shift())}return h.join("")},convertViewMode:function(h){switch(h){case 4:case"decade":h=4;break;case 3:case"year":h=3;break;case 2:case"month":h=2;break;case 1:case"day":h=1;break;case 0:case"hour":h=0;break}return h},headTemplate:'<thead><tr><th class="prev"><i class="{leftArrow}"/></th><th colspan="5" class="switch"></th><th class="next"><i class="{rightArrow}"/></th></tr></thead>',headTemplateV3:'<thead><tr><th class="prev"><span class="{iconType} {leftArrow}"></span> </th><th colspan="5" class="switch"></th><th class="next"><span class="{iconType} {rightArrow}"></span> </th></tr></thead>',contTemplate:'<tbody><tr><td colspan="7"></td></tr></tbody>',footTemplate:'<tfoot><tr><th colspan="7" class="today"></th></tr></tfoot>'};c.template='<div class="datetimepicker"><div class="datetimepicker-minutes"><table class=" table-condensed">'+c.headTemplate+c.contTemplate+c.footTemplate+'</table></div><div class="datetimepicker-hours"><table class=" table-condensed">'+c.headTemplate+c.contTemplate+c.footTemplate+'</table></div><div class="datetimepicker-days"><table class=" table-condensed">'+c.headTemplate+"<tbody></tbody>"+c.footTemplate+'</table></div><div class="datetimepicker-months"><table class="table-condensed">'+c.headTemplate+c.contTemplate+c.footTemplate+'</table></div><div class="datetimepicker-years"><table class="table-condensed">'+c.headTemplate+c.contTemplate+c.footTemplate+"</table></div></div>";c.templateV3='<div class="datetimepicker"><div class="datetimepicker-minutes"><table class=" table-condensed">'+c.headTemplateV3+c.contTemplate+c.footTemplate+'</table></div><div class="datetimepicker-hours"><table class=" table-condensed">'+c.headTemplateV3+c.contTemplate+c.footTemplate+'</table></div><div class="datetimepicker-days"><table class=" table-condensed">'+c.headTemplateV3+"<tbody></tbody>"+c.footTemplate+'</table></div><div class="datetimepicker-months"><table class="table-condensed">'+c.headTemplateV3+c.contTemplate+c.footTemplate+'</table></div><div class="datetimepicker-years"><table class="table-condensed">'+c.headTemplateV3+c.contTemplate+c.footTemplate+"</table></div></div>";d.fn.datetimepicker.DPGlobal=c;d.fn.datetimepicker.noConflict=function(){d.fn.datetimepicker=a;return this};d(document).on("focus.datetimepicker.data-api click.datetimepicker.data-api",'[data-provide="datetimepicker"]',function(i){var h=d(this);if(h.data("datetimepicker")){return}i.preventDefault();h.datetimepicker("show")});d(function(){d('[data-provide="datetimepicker-inline"]').datetimepicker()})}(window.jQuery);
/*!
 * Timepicker Component for Twitter Bootstrap
 *
 * Copyright 2013 Joris de Wit
 *
 * Contributors https://github.com/jdewit/bootstrap-timepicker/graphs/contributors
 *
 * For the full copyright and license information, please view the LICENSE
 * file that was distributed with this source code.
 */
(function(d,c,a,e){var b=function(g,f){this.widget="";this.$element=d(g);this.defaultTime=f.defaultTime;this.disableFocus=f.disableFocus;this.disableMousewheel=f.disableMousewheel;this.isOpen=f.isOpen;this.minuteStep=f.minuteStep;this.modalBackdrop=f.modalBackdrop;this.orientation=f.orientation;this.secondStep=f.secondStep;this.showInputs=f.showInputs;this.showMeridian=f.showMeridian;this.showSeconds=f.showSeconds;this.template=f.template;this.appendWidgetTo=f.appendWidgetTo;this.showWidgetOnAddonClick=f.showWidgetOnAddonClick;this._init()};b.prototype={constructor:b,_init:function(){var f=this;if(this.showWidgetOnAddonClick&&(this.$element.parent().hasClass("input-append")||this.$element.parent().hasClass("input-prepend"))){this.$element.parent(".input-append, .input-prepend").find(".add-on").on({"click.timepicker":d.proxy(this.showWidget,this)});this.$element.on({"focus.timepicker":d.proxy(this.highlightUnit,this),"click.timepicker":d.proxy(this.highlightUnit,this),"keydown.timepicker":d.proxy(this.elementKeydown,this),"blur.timepicker":d.proxy(this.blurElement,this),"mousewheel.timepicker DOMMouseScroll.timepicker":d.proxy(this.mousewheel,this)})}else{if(this.template){this.$element.on({"focus.timepicker":d.proxy(this.showWidget,this),"click.timepicker":d.proxy(this.showWidget,this),"blur.timepicker":d.proxy(this.blurElement,this),"mousewheel.timepicker DOMMouseScroll.timepicker":d.proxy(this.mousewheel,this)})}else{this.$element.on({"focus.timepicker":d.proxy(this.highlightUnit,this),"click.timepicker":d.proxy(this.highlightUnit,this),"keydown.timepicker":d.proxy(this.elementKeydown,this),"blur.timepicker":d.proxy(this.blurElement,this),"mousewheel.timepicker DOMMouseScroll.timepicker":d.proxy(this.mousewheel,this)})}}if(this.template!==false){this.$widget=d(this.getTemplate()).on("click",d.proxy(this.widgetClick,this))}else{this.$widget=false}if(this.showInputs&&this.$widget!==false){this.$widget.find("input").each(function(){d(this).on({"click.timepicker":function(){d(this).select()},"keydown.timepicker":d.proxy(f.widgetKeydown,f),"keyup.timepicker":d.proxy(f.widgetKeyup,f)})})}this.setDefaultTime(this.defaultTime)},blurElement:function(){this.highlightedUnit=null;this.updateFromElementVal()},clear:function(){this.hour="";this.minute="";this.second="";this.meridian="";this.$element.val("")},decrementHour:function(){if(this.showMeridian){if(this.hour===1){this.hour=12}else{if(this.hour===12){this.hour--;return this.toggleMeridian()}else{if(this.hour===0){this.hour=11;return this.toggleMeridian()}else{this.hour--}}}}else{if(this.hour<=0){this.hour=23}else{this.hour--}}},decrementMinute:function(g){var f;if(g){f=this.minute-g}else{f=this.minute-this.minuteStep}if(f<0){this.decrementHour();this.minute=f+60}else{this.minute=f}},decrementSecond:function(){var f=this.second-this.secondStep;if(f<0){this.decrementMinute(true);this.second=f+60}else{this.second=f}},elementKeydown:function(f){switch(f.keyCode){case 9:case 27:this.updateFromElementVal();break;case 37:f.preventDefault();this.highlightPrevUnit();break;case 38:f.preventDefault();switch(this.highlightedUnit){case"hour":this.incrementHour();this.highlightHour();break;case"minute":this.incrementMinute();this.highlightMinute();break;case"second":this.incrementSecond();this.highlightSecond();break;case"meridian":this.toggleMeridian();this.highlightMeridian();break}this.update();break;case 39:f.preventDefault();this.highlightNextUnit();break;case 40:f.preventDefault();switch(this.highlightedUnit){case"hour":this.decrementHour();this.highlightHour();break;case"minute":this.decrementMinute();this.highlightMinute();break;case"second":this.decrementSecond();this.highlightSecond();break;case"meridian":this.toggleMeridian();this.highlightMeridian();break}this.update();break}},getCursorPosition:function(){var g=this.$element.get(0);if("selectionStart" in g){return g.selectionStart}else{if(a.selection){g.focus();var h=a.selection.createRange(),f=a.selection.createRange().text.length;h.moveStart("character",-g.value.length);return h.text.length-f}}},getTemplate:function(){var h,j,g,f,i,k;if(this.showInputs){j='<input type="text" class="bootstrap-timepicker-hour" maxlength="2"/>';g='<input type="text" class="bootstrap-timepicker-minute" maxlength="2"/>';f='<input type="text" class="bootstrap-timepicker-second" maxlength="2"/>';i='<input type="text" class="bootstrap-timepicker-meridian" maxlength="2"/>'}else{j='<span class="bootstrap-timepicker-hour"></span>';g='<span class="bootstrap-timepicker-minute"></span>';f='<span class="bootstrap-timepicker-second"></span>';i='<span class="bootstrap-timepicker-meridian"></span>'}k='<table><tr><td><a href="#" data-action="incrementHour"><i class="icon-chevron-up"></i></a></td><td class="separator">&nbsp;</td><td><a href="#" data-action="incrementMinute"><i class="icon-chevron-up"></i></a></td>'+(this.showSeconds?'<td class="separator">&nbsp;</td><td><a href="#" data-action="incrementSecond"><i class="icon-chevron-up"></i></a></td>':"")+(this.showMeridian?'<td class="separator">&nbsp;</td><td class="meridian-column"><a href="#" data-action="toggleMeridian"><i class="icon-chevron-up"></i></a></td>':"")+"</tr><tr><td>"+j+'</td> <td class="separator">:</td><td>'+g+"</td> "+(this.showSeconds?'<td class="separator">:</td><td>'+f+"</td>":"")+(this.showMeridian?'<td class="separator">&nbsp;</td><td>'+i+"</td>":"")+'</tr><tr><td><a href="#" data-action="decrementHour"><i class="icon-chevron-down"></i></a></td><td class="separator"></td><td><a href="#" data-action="decrementMinute"><i class="icon-chevron-down"></i></a></td>'+(this.showSeconds?'<td class="separator">&nbsp;</td><td><a href="#" data-action="decrementSecond"><i class="icon-chevron-down"></i></a></td>':"")+(this.showMeridian?'<td class="separator">&nbsp;</td><td><a href="#" data-action="toggleMeridian"><i class="icon-chevron-down"></i></a></td>':"")+"</tr></table>";switch(this.template){case"modal":h='<div class="bootstrap-timepicker-widget modal hide fade in" data-backdrop="'+(this.modalBackdrop?"true":"false")+'"><div class="modal-header"><a href="#" class="close" data-dismiss="modal">×</a><h3>Pick a Time</h3></div><div class="modal-content">'+k+'</div><div class="modal-footer"><a href="#" class="btn btn-primary" data-dismiss="modal">OK</a></div></div>';break;case"dropdown":h='<div class="bootstrap-timepicker-widget dropdown-menu">'+k+"</div>";break}return h},getTime:function(){if(this.hour===""){return""}return this.hour+":"+(this.minute.toString().length===1?"0"+this.minute:this.minute)+(this.showSeconds?":"+(this.second.toString().length===1?"0"+this.second:this.second):"")+(this.showMeridian?" "+this.meridian:"")},hideWidget:function(){if(this.isOpen===false){return}this.$element.trigger({type:"hide.timepicker",time:{value:this.getTime(),hours:this.hour,minutes:this.minute,seconds:this.second,meridian:this.meridian}});if(this.template==="modal"&&this.$widget.modal){this.$widget.modal("hide")}else{this.$widget.removeClass("open")}d(a).off("mousedown.timepicker, touchend.timepicker");this.isOpen=false;this.$widget.detach()},highlightUnit:function(){this.position=this.getCursorPosition();if(this.position>=0&&this.position<=2){this.highlightHour()}else{if(this.position>=3&&this.position<=5){this.highlightMinute()}else{if(this.position>=6&&this.position<=8){if(this.showSeconds){this.highlightSecond()}else{this.highlightMeridian()}}else{if(this.position>=9&&this.position<=11){this.highlightMeridian()}}}}},highlightNextUnit:function(){switch(this.highlightedUnit){case"hour":this.highlightMinute();break;case"minute":if(this.showSeconds){this.highlightSecond()}else{if(this.showMeridian){this.highlightMeridian()}else{this.highlightHour()}}break;case"second":if(this.showMeridian){this.highlightMeridian()}else{this.highlightHour()}break;case"meridian":this.highlightHour();break}},highlightPrevUnit:function(){switch(this.highlightedUnit){case"hour":if(this.showMeridian){this.highlightMeridian()}else{if(this.showSeconds){this.highlightSecond()}else{this.highlightMinute()}}break;case"minute":this.highlightHour();break;case"second":this.highlightMinute();break;case"meridian":if(this.showSeconds){this.highlightSecond()}else{this.highlightMinute()}break}},highlightHour:function(){var f=this.$element.get(0),g=this;this.highlightedUnit="hour";if(f.setSelectionRange){setTimeout(function(){if(g.hour<10){f.setSelectionRange(0,1)}else{f.setSelectionRange(0,2)}},0)}},highlightMinute:function(){var f=this.$element.get(0),g=this;this.highlightedUnit="minute";if(f.setSelectionRange){setTimeout(function(){if(g.hour<10){f.setSelectionRange(2,4)}else{f.setSelectionRange(3,5)}},0)}},highlightSecond:function(){var f=this.$element.get(0),g=this;this.highlightedUnit="second";if(f.setSelectionRange){setTimeout(function(){if(g.hour<10){f.setSelectionRange(5,7)}else{f.setSelectionRange(6,8)}},0)}},highlightMeridian:function(){var f=this.$element.get(0),g=this;this.highlightedUnit="meridian";if(f.setSelectionRange){if(this.showSeconds){setTimeout(function(){if(g.hour<10){f.setSelectionRange(8,10)}else{f.setSelectionRange(9,11)}},0)}else{setTimeout(function(){if(g.hour<10){f.setSelectionRange(5,7)}else{f.setSelectionRange(6,8)}},0)}}},incrementHour:function(){if(this.showMeridian){if(this.hour===11){this.hour++;return this.toggleMeridian()}else{if(this.hour===12){this.hour=0}}}if(this.hour===23){this.hour=0;return}this.hour++},incrementMinute:function(g){var f;if(g){f=this.minute+g}else{f=this.minute+this.minuteStep-(this.minute%this.minuteStep)}if(f>59){this.incrementHour();this.minute=f-60}else{this.minute=f}},incrementSecond:function(){var f=this.second+this.secondStep-(this.second%this.secondStep);if(f>59){this.incrementMinute(true);this.second=f-60}else{this.second=f}},mousewheel:function(g){if(this.disableMousewheel){return}g.preventDefault();g.stopPropagation();var h=g.originalEvent.wheelDelta||-g.originalEvent.detail,f=null;if(g.type==="mousewheel"){f=(g.originalEvent.wheelDelta*-1)}else{if(g.type==="DOMMouseScroll"){f=40*g.originalEvent.detail}}if(f){g.preventDefault();d(this).scrollTop(f+d(this).scrollTop())}switch(this.highlightedUnit){case"minute":if(h>0){this.incrementMinute()}else{this.decrementMinute()}this.highlightMinute();break;case"second":if(h>0){this.incrementSecond()}else{this.decrementSecond()}this.highlightSecond();break;case"meridian":this.toggleMeridian();this.highlightMeridian();break;default:if(h>0){this.incrementHour()}else{this.decrementHour()}this.highlightHour();break}return false},place:function(){if(this.isInline){return}var h=this.$widget.outerWidth(),o=this.$widget.outerHeight(),j=10,l=d(c).width(),g=d(c).height(),k=d(c).scrollTop();var r=parseInt(this.$element.parents().filter(function(){}).first().css("z-index"),10)+10;var n=this.component?this.component.parent().offset():this.$element.offset();var s=this.component?this.component.outerHeight(true):this.$element.outerHeight(false);var i=this.component?this.component.outerWidth(true):this.$element.outerWidth(false);var m=n.left,q=n.top;this.$widget.removeClass("timepicker-orient-top timepicker-orient-bottom timepicker-orient-right timepicker-orient-left");if(this.orientation.x!=="auto"){this.picker.addClass("datepicker-orient-"+this.orientation.x);if(this.orientation.x==="right"){m-=h-i}}else{this.$widget.addClass("timepicker-orient-left");if(n.left<0){m-=n.left-j}else{if(n.left+h>l){m=l-h-j}}}var f=this.orientation.y,p,t;if(f==="auto"){p=-k+n.top-o;t=k+g-(n.top+s+o);if(Math.max(p,t)===t){f="top"}else{f="bottom"}}this.$widget.addClass("timepicker-orient-"+f);if(f==="top"){q+=s}else{q-=o+parseInt(this.$widget.css("padding-top"),10)}this.$widget.css({top:q,left:m,zIndex:r})},remove:function(){d("document").off(".timepicker");if(this.$widget){this.$widget.remove()}delete this.$element.data().timepicker},setDefaultTime:function(h){if(!this.$element.val()){if(h==="current"){var f=new Date(),g=f.getHours(),j=f.getMinutes(),k=f.getSeconds(),i="AM";if(k!==0){k=Math.ceil(f.getSeconds()/this.secondStep)*this.secondStep;if(k===60){j+=1;k=0}}if(j!==0){j=Math.ceil(f.getMinutes()/this.minuteStep)*this.minuteStep;if(j===60){g+=1;j=0}}if(this.showMeridian){if(g===0){g=12}else{if(g>=12){if(g>12){g=g-12}i="PM"}else{i="AM"}}}this.hour=g;this.minute=j;this.second=k;this.meridian=i;this.update()}else{if(h===false){this.hour=0;this.minute=0;this.second=0;this.meridian="AM"}else{this.setTime(h)}}}else{this.updateFromElementVal()}},setTime:function(k,i){if(!k){this.clear();return}var j,f,l,g,h;if(typeof k==="object"&&k.getMonth){f=k.getHours();l=k.getMinutes();g=k.getSeconds();if(this.showMeridian){h="AM";if(f>12){h="PM";f=f%12}if(f===12){h="PM"}}}else{if(k.match(/p/i)!==null){h="PM"}else{h="AM"}k=k.replace(/[^0-9\:]/g,"");j=k.split(":");f=j[0]?j[0].toString():j.toString();l=j[1]?j[1].toString():"";g=j[2]?j[2].toString():"";if(f.length>4){g=f.substr(4,2)}if(f.length>2){l=f.substr(2,2);f=f.substr(0,2)}if(l.length>2){g=l.substr(2,2);l=l.substr(0,2)}if(g.length>2){g=g.substr(2,2)}f=parseInt(f,10);l=parseInt(l,10);g=parseInt(g,10);if(isNaN(f)){f=0}if(isNaN(l)){l=0}if(isNaN(g)){g=0}if(this.showMeridian){if(f<1){f=1}else{if(f>12){f=12}}}else{if(f>=24){f=23}else{if(f<0){f=0}}if(f<13&&h==="PM"){f=f+12}}if(l<0){l=0}else{if(l>=60){l=59}}if(this.showSeconds){if(isNaN(g)){g=0}else{if(g<0){g=0}else{if(g>=60){g=59}}}}}this.hour=f;this.minute=l;this.second=g;this.meridian=h;this.update(i)},showWidget:function(){if(this.isOpen){return}if(this.$element.is(":disabled")){return}this.$widget.appendTo(this.appendWidgetTo);var f=this;d(a).on("mousedown.timepicker, touchend.timepicker",function(g){if(!(f.$element.parent().find(g.target).length||f.$widget.is(g.target)||f.$widget.find(g.target).length)){f.hideWidget()}});this.$element.trigger({type:"show.timepicker",time:{value:this.getTime(),hours:this.hour,minutes:this.minute,seconds:this.second,meridian:this.meridian}});this.place();if(this.disableFocus){this.$element.blur()}if(this.hour===""){if(this.defaultTime){this.setDefaultTime(this.defaultTime)}else{this.setTime("0:0:0")}}if(this.template==="modal"&&this.$widget.modal){this.$widget.modal("show").on("hidden",d.proxy(this.hideWidget,this))}else{if(this.isOpen===false){this.$widget.addClass("open")}}this.isOpen=true},toggleMeridian:function(){this.meridian=this.meridian==="AM"?"PM":"AM"},update:function(f){this.updateElement();if(!f){this.updateWidget()}this.$element.trigger({type:"changeTime.timepicker",time:{value:this.getTime(),hours:this.hour,minutes:this.minute,seconds:this.second,meridian:this.meridian}})},updateElement:function(){this.$element.val(this.getTime()).change()},updateFromElementVal:function(){this.setTime(this.$element.val())},updateWidget:function(){if(this.$widget===false){return}var f=this.hour,h=this.minute.toString().length===1?"0"+this.minute:this.minute,g=this.second.toString().length===1?"0"+this.second:this.second;if(this.showInputs){this.$widget.find("input.bootstrap-timepicker-hour").val(f);this.$widget.find("input.bootstrap-timepicker-minute").val(h);if(this.showSeconds){this.$widget.find("input.bootstrap-timepicker-second").val(g)}if(this.showMeridian){this.$widget.find("input.bootstrap-timepicker-meridian").val(this.meridian)}}else{this.$widget.find("span.bootstrap-timepicker-hour").text(f);this.$widget.find("span.bootstrap-timepicker-minute").text(h);if(this.showSeconds){this.$widget.find("span.bootstrap-timepicker-second").text(g)}if(this.showMeridian){this.$widget.find("span.bootstrap-timepicker-meridian").text(this.meridian)}}},updateFromWidgetInputs:function(){if(this.$widget===false){return}var f=this.$widget.find("input.bootstrap-timepicker-hour").val()+":"+this.$widget.find("input.bootstrap-timepicker-minute").val()+(this.showSeconds?":"+this.$widget.find("input.bootstrap-timepicker-second").val():"")+(this.showMeridian?this.$widget.find("input.bootstrap-timepicker-meridian").val():"");this.setTime(f,true)},widgetClick:function(g){g.stopPropagation();g.preventDefault();var h=d(g.target),f=h.closest("a").data("action");if(f){this[f]()}this.update();if(h.is("input")){h.get(0).setSelectionRange(0,2)}},widgetKeydown:function(g){var h=d(g.target),f=h.attr("class").replace("bootstrap-timepicker-","");switch(g.keyCode){case 9:if((this.showMeridian&&f==="meridian")||(this.showSeconds&&f==="second")||(!this.showMeridian&&!this.showSeconds&&f==="minute")){return this.hideWidget()}break;case 27:this.hideWidget();break;case 38:g.preventDefault();switch(f){case"hour":this.incrementHour();break;case"minute":this.incrementMinute();break;case"second":this.incrementSecond();break;case"meridian":this.toggleMeridian();break}this.setTime(this.getTime());h.get(0).setSelectionRange(0,2);break;case 40:g.preventDefault();switch(f){case"hour":this.decrementHour();break;case"minute":this.decrementMinute();break;case"second":this.decrementSecond();break;case"meridian":this.toggleMeridian();break}this.setTime(this.getTime());h.get(0).setSelectionRange(0,2);break}},widgetKeyup:function(f){if((f.keyCode===65)||(f.keyCode===77)||(f.keyCode===80)||(f.keyCode===46)||(f.keyCode===8)||(f.keyCode>=46&&f.keyCode<=57)){this.updateFromWidgetInputs()}}};d.fn.timepicker=function(g){var f=Array.apply(null,arguments);f.shift();return this.each(function(){var j=d(this),i=j.data("timepicker"),h=typeof g==="object"&&g;if(!i){j.data("timepicker",(i=new b(this,d.extend({},d.fn.timepicker.defaults,h,d(this).data()))))}if(typeof g==="string"){i[g].apply(i,f)}})};d.fn.timepicker.defaults={defaultTime:"current",disableFocus:false,disableMousewheel:false,isOpen:false,minuteStep:15,modalBackdrop:false,orientation:{x:"auto",y:"auto"},secondStep:15,showSeconds:false,showInputs:true,showMeridian:true,template:"dropdown",appendWidgetTo:"body",showWidgetOnAddonClick:true};d.fn.timepicker.Constructor=b})(jQuery,window,document);
/*!
 * fancyBox - jQuery Plugin
 * version: 2.1.5 (Fri, 14 Jun 2013)
 * requires jQuery v1.6 or later
 *
 * Examples at http://fancyapps.com/fancybox/
 * License: www.fancyapps.com/fancybox/#license
 *
 * Copyright 2012 Janis Skarnelis - janis@fancyapps.com
 *
 */
(function(l,o,i,e){var p=i("html"),d=i(l),a=i(o),q=i.fancybox=function(){q.open.apply(this,arguments)},k=navigator.userAgent.match(/msie/i),c=null,f=o.createTouch!==e,j=function(r){return r&&r.hasOwnProperty&&r instanceof i},b=function(r){return r&&i.type(r)==="string"},m=function(r){return b(r)&&r.indexOf("%")>0},h=function(r){return(r&&!(r.style.overflow&&r.style.overflow==="hidden")&&((r.clientWidth&&r.scrollWidth>r.clientWidth)||(r.clientHeight&&r.scrollHeight>r.clientHeight)))},n=function(t,s){var r=parseInt(t,10)||0;if(s&&m(t)){r=q.getViewport()[s]/100*r}return Math.ceil(r)},g=function(r,s){return n(r,s)+"px"};i.extend(q,{version:"2.1.5",defaults:{padding:15,margin:20,width:800,height:600,minWidth:100,minHeight:100,maxWidth:9999,maxHeight:9999,pixelRatio:1,autoSize:true,autoHeight:false,autoWidth:false,autoResize:true,autoCenter:!f,fitToView:true,aspectRatio:false,topRatio:0.5,leftRatio:0.5,scrolling:"auto",wrapCSS:"",arrows:true,closeBtn:true,closeClick:false,nextClick:false,mouseWheel:true,autoPlay:false,playSpeed:3000,preload:3,modal:false,loop:true,ajax:{dataType:"html",headers:{"X-fancyBox":true}},iframe:{scrolling:"auto",preload:true},swf:{wmode:"transparent",allowfullscreen:"true",allowscriptaccess:"always"},keys:{next:{13:"left",34:"up",39:"left",40:"up"},prev:{8:"right",33:"down",37:"right",38:"down"},close:[27],play:[32],toggle:[70]},direction:{next:"left",prev:"right"},scrollOutside:true,index:0,type:null,href:null,content:null,title:null,tpl:{wrap:'<div class="fancybox-wrap" tabIndex="-1"><div class="fancybox-skin"><div class="fancybox-outer"><div class="fancybox-inner"></div></div></div></div>',image:'<img class="fancybox-image" src="{href}" alt="" />',iframe:'<iframe id="fancybox-frame{rnd}" name="fancybox-frame{rnd}" class="fancybox-iframe" frameborder="0" vspace="0" hspace="0" webkitAllowFullScreen mozallowfullscreen allowFullScreen'+(k?' allowtransparency="true"':"")+"></iframe>",error:'<p class="fancybox-error">The requested content cannot be loaded.<br/>Please try again later.</p>',closeBtn:'<a title="Close" class="fancybox-item fancybox-close" href="javascript:;"></a>',next:'<a title="Next" class="fancybox-nav fancybox-next" href="javascript:;"><span></span></a>',prev:'<a title="Previous" class="fancybox-nav fancybox-prev" href="javascript:;"><span></span></a>',loading:'<div id="fancybox-loading"><div></div></div>'},openEffect:"fade",openSpeed:250,openEasing:"swing",openOpacity:true,openMethod:"zoomIn",closeEffect:"fade",closeSpeed:250,closeEasing:"swing",closeOpacity:true,closeMethod:"zoomOut",nextEffect:"elastic",nextSpeed:250,nextEasing:"swing",nextMethod:"changeIn",prevEffect:"elastic",prevSpeed:250,prevEasing:"swing",prevMethod:"changeOut",helpers:{overlay:true,title:true},onCancel:i.noop,beforeLoad:i.noop,afterLoad:i.noop,beforeShow:i.noop,afterShow:i.noop,beforeChange:i.noop,beforeClose:i.noop,afterClose:i.noop},group:{},opts:{},previous:null,coming:null,current:null,isActive:false,isOpen:false,isOpened:false,wrap:null,skin:null,outer:null,inner:null,player:{timer:null,isActive:false},ajaxLoad:null,imgPreload:null,transitions:{},helpers:{},open:function(s,r){if(!s){return}if(!i.isPlainObject(r)){r={}}if(false===q.close(true)){return}if(!i.isArray(s)){s=j(s)?i(s).get():[s]}i.each(s,function(x,y){var w={},t,B,z,A,v,C,u;if(i.type(y)==="object"){if(y.nodeType){y=i(y)}if(j(y)){w={href:y.data("fancybox-href")||y.attr("href"),title:i("<div/>").text(y.data("fancybox-title")||y.attr("title")||"").html(),isDom:true,element:y};if(i.metadata){i.extend(true,w,y.metadata())}}else{w=y}}t=r.href||w.href||(b(y)?y:null);B=r.title!==e?r.title:w.title||"";z=r.content||w.content;A=z?"html":(r.type||w.type);if(!A&&w.isDom){A=y.data("fancybox-type");if(!A){v=y.prop("class").match(/fancybox\.(\w+)/);A=v?v[1]:null}}if(b(t)){if(!A){if(q.isImage(t)){A="image"}else{if(q.isSWF(t)){A="swf"}else{if(t.charAt(0)==="#"){A="inline"}else{if(b(y)){A="html";z=y}}}}}if(A==="ajax"){C=t.split(/\s+/,2);t=C.shift();u=C.shift()}}if(!z){if(A==="inline"){if(t){z=i(b(t)?t.replace(/.*(?=#[^\s]+$)/,""):t)}else{if(w.isDom){z=y}}}else{if(A==="html"){z=t}else{if(!A&&!t&&w.isDom){A="inline";z=y}}}}i.extend(w,{href:t,type:A,content:z,title:B,selector:u});s[x]=w});q.opts=i.extend(true,{},q.defaults,r);if(r.keys!==e){q.opts.keys=r.keys?i.extend({},q.defaults.keys,r.keys):false}q.group=s;return q._start(q.opts.index)},cancel:function(){var r=q.coming;if(r&&false===q.trigger("onCancel")){return}q.hideLoading();if(!r){return}if(q.ajaxLoad){q.ajaxLoad.abort()}q.ajaxLoad=null;if(q.imgPreload){q.imgPreload.onload=q.imgPreload.onerror=null}if(r.wrap){r.wrap.stop(true,true).trigger("onReset").remove()}q.coming=null;if(!q.current){q._afterZoomOut(r)}},close:function(r){q.cancel();if(false===q.trigger("beforeClose")){return}q.unbindEvents();if(!q.isActive){return}if(!q.isOpen||r===true){i(".fancybox-wrap").stop(true).trigger("onReset").remove();q._afterZoomOut()}else{q.isOpen=q.isOpened=false;q.isClosing=true;i(".fancybox-item, .fancybox-nav").remove();q.wrap.stop(true,true).removeClass("fancybox-opened");q.transitions[q.current.closeMethod]()}},play:function(t){var r=function(){clearTimeout(q.player.timer)},v=function(){r();if(q.current&&q.player.isActive){q.player.timer=setTimeout(q.next,q.current.playSpeed)}},s=function(){r();a.unbind(".player");q.player.isActive=false;q.trigger("onPlayEnd")},u=function(){if(q.current&&(q.current.loop||q.current.index<q.group.length-1)){q.player.isActive=true;a.bind({"onCancel.player beforeClose.player":s,"onUpdate.player":v,"beforeLoad.player":r});v();q.trigger("onPlayStart")}};if(t===true||(!q.player.isActive&&t!==false)){u()}else{s()}},next:function(s){var r=q.current;if(r){if(!b(s)){s=r.direction.next}q.jumpto(r.index+1,s,"next")}},prev:function(s){var r=q.current;if(r){if(!b(s)){s=r.direction.prev}q.jumpto(r.index-1,s,"prev")}},jumpto:function(s,u,r){var t=q.current;if(!t){return}s=n(s);q.direction=u||t.direction[(s>=t.index?"next":"prev")];q.router=r||"jumpto";if(t.loop){if(s<0){s=t.group.length+(s%t.group.length)}s=s%t.group.length}if(t.group[s]!==e){q.cancel();q._start(s)}},reposition:function(u,r){var t=q.current,s=t?t.wrap:null,v;if(s){v=q._getPosition(r);if(u&&u.type==="scroll"){delete v.position;s.stop(true,true).animate(v,200)}else{s.css(v);t.pos=i.extend({},t.dim,v)}}},update:function(t){var r=(t&&t.originalEvent&&t.originalEvent.type),s=!r||r==="orientationchange";if(s){clearTimeout(c);c=null}if(!q.isOpen||c){return}c=setTimeout(function(){var u=q.current;if(!u||q.isClosing){return}q.wrap.removeClass("fancybox-tmp");if(s||r==="load"||(r==="resize"&&u.autoResize)){q._setDimension()}if(!(r==="scroll"&&u.canShrink)){q.reposition(t)}q.trigger("onUpdate");c=null},(s&&!f?0:300))},toggle:function(r){if(q.isOpen){q.current.fitToView=i.type(r)==="boolean"?r:!q.current.fitToView;if(f){q.wrap.removeAttr("style").addClass("fancybox-tmp");q.trigger("onUpdate")}q.update()}},hideLoading:function(){a.unbind(".loading");i("#fancybox-loading").remove()},showLoading:function(){var s,r;q.hideLoading();s=i(q.opts.tpl.loading).click(q.cancel).appendTo("body");a.bind("keydown.loading",function(t){if((t.which||t.keyCode)===27){t.preventDefault();q.cancel()}});if(!q.defaults.fixed){r=q.getViewport();s.css({position:"absolute",top:(r.h*0.5)+r.y,left:(r.w*0.5)+r.x})}q.trigger("onLoading")},getViewport:function(){var r=(q.current&&q.current.locked)||false,s={x:d.scrollLeft(),y:d.scrollTop()};if(r&&r.length){s.w=r[0].clientWidth;s.h=r[0].clientHeight}else{s.w=f&&l.innerWidth?l.innerWidth:d.width();s.h=f&&l.innerHeight?l.innerHeight:d.height()}return s},unbindEvents:function(){if(q.wrap&&j(q.wrap)){q.wrap.unbind(".fb")}a.unbind(".fb");d.unbind(".fb")},bindEvents:function(){var s=q.current,r;if(!s){return}d.bind("orientationchange.fb"+(f?"":" resize.fb")+(s.autoCenter&&!s.locked?" scroll.fb":""),q.update);r=s.keys;if(r){a.bind("keydown.fb",function(v){var t=v.which||v.keyCode,u=v.target||v.srcElement;if(t===27&&q.coming){return false}if(!v.ctrlKey&&!v.altKey&&!v.shiftKey&&!v.metaKey&&!(u&&(u.type||i(u).is("[contenteditable]")))){i.each(r,function(w,x){if(s.group.length>1&&x[t]!==e){q[w](x[t]);v.preventDefault();return false}if(i.inArray(t,x)>-1){q[w]();v.preventDefault();return false}})}})}if(i.fn.mousewheel&&s.mouseWheel){q.wrap.bind("mousewheel.fb",function(y,z,u,t){var x=y.target||null,v=i(x),w=false;while(v.length){if(w||v.is(".fancybox-skin")||v.is(".fancybox-wrap")){break}w=h(v[0]);v=i(v).parent()}if(z!==0&&!w){if(q.group.length>1&&!s.canShrink){if(t>0||u>0){q.prev(t>0?"down":"left")}else{if(t<0||u<0){q.next(t<0?"up":"right")}}y.preventDefault()}}})}},trigger:function(s,u){var r,t=u||q.coming||q.current;if(t){if(i.isFunction(t[s])){r=t[s].apply(t,Array.prototype.slice.call(arguments,1))}if(r===false){return false}if(t.helpers){i.each(t.helpers,function(w,v){if(v&&q.helpers[w]&&i.isFunction(q.helpers[w][s])){q.helpers[w][s](i.extend(true,{},q.helpers[w].defaults,v),t)}})}}a.trigger(s)},isImage:function(r){return b(r)&&r.match(/(^data:image\/.*,)|(\.(jp(e|g|eg)|gif|png|bmp|webp|svg)((\?|#).*)?$)/i)},isSWF:function(r){return b(r)&&r.match(/\.(swf)((\?|#).*)?$/i)},_start:function(s){var t={},x,r,u,v,w;s=n(s);x=q.group[s]||null;if(!x){return false}t=i.extend(true,{},q.opts,x);v=t.margin;w=t.padding;if(i.type(v)==="number"){t.margin=[v,v,v,v]}if(i.type(w)==="number"){t.padding=[w,w,w,w]}if(t.modal){i.extend(true,t,{closeBtn:false,closeClick:false,nextClick:false,arrows:false,mouseWheel:false,keys:null,helpers:{overlay:{closeClick:false}}})}if(t.autoSize){t.autoWidth=t.autoHeight=true}if(t.width==="auto"){t.autoWidth=true}if(t.height==="auto"){t.autoHeight=true}t.group=q.group;t.index=s;q.coming=t;if(false===q.trigger("beforeLoad")){q.coming=null;return}u=t.type;r=t.href;if(!u){q.coming=null;if(q.current&&q.router&&q.router!=="jumpto"){q.current.index=s;return q[q.router](q.direction)}return false}q.isActive=true;if(u==="image"||u==="swf"){t.autoHeight=t.autoWidth=false;t.scrolling="visible"}if(u==="image"){t.aspectRatio=true}if(u==="iframe"&&f){t.scrolling="scroll"}t.wrap=i(t.tpl.wrap).addClass("fancybox-"+(f?"mobile":"desktop")+" fancybox-type-"+u+" fancybox-tmp "+t.wrapCSS).appendTo(t.parent||"body");i.extend(t,{skin:i(".fancybox-skin",t.wrap),outer:i(".fancybox-outer",t.wrap),inner:i(".fancybox-inner",t.wrap)});i.each(["Top","Right","Bottom","Left"],function(z,y){t.skin.css("padding"+y,g(t.padding[z]))});q.trigger("onReady");if(u==="inline"||u==="html"){if(!t.content||!t.content.length){return q._error("content")}}else{if(!r){return q._error("href")}}if(u==="image"){q._loadImage()}else{if(u==="ajax"){q._loadAjax()}else{if(u==="iframe"){q._loadIframe()}else{q._afterLoad()}}}},_error:function(r){i.extend(q.coming,{type:"html",autoWidth:true,autoHeight:true,minWidth:0,minHeight:0,scrolling:"no",hasError:r,content:q.coming.tpl.error});q._afterLoad()},_loadImage:function(){var r=q.imgPreload=new Image();r.onload=function(){this.onload=this.onerror=null;q.coming.width=this.width/q.opts.pixelRatio;q.coming.height=this.height/q.opts.pixelRatio;q._afterLoad()};r.onerror=function(){this.onload=this.onerror=null;q._error("image")};r.src=q.coming.href;if(r.complete!==true){q.showLoading()}},_loadAjax:function(){var r=q.coming;q.showLoading();q.ajaxLoad=i.ajax(i.extend({},r.ajax,{url:r.href,error:function(s,t){if(q.coming&&t!=="abort"){q._error("ajax",s)}else{q.hideLoading()}},success:function(s,t){if(t==="success"){r.content=s;q._afterLoad()}}}))},_loadIframe:function(){var r=q.coming,s=i(r.tpl.iframe.replace(/\{rnd\}/g,new Date().getTime())).attr("scrolling",f?"auto":r.iframe.scrolling).attr("src",r.href);i(r.wrap).bind("onReset",function(){try{i(this).find("iframe").hide().attr("src","//about:blank").end().empty()}catch(t){}});if(r.iframe.preload){q.showLoading();s.one("load",function(){i(this).data("ready",1);if(!f){i(this).bind("load.fb",q.update)}i(this).parents(".fancybox-wrap").width("100%").removeClass("fancybox-tmp").show();q._afterLoad()})}r.content=s.appendTo(r.inner);if(!r.iframe.preload){q._afterLoad()}},_preloadImages:function(){var w=q.group,v=q.current,r=w.length,t=v.preload?Math.min(v.preload,r-1):0,u,s;for(s=1;s<=t;s+=1){u=w[(v.index+s)%r];if(u.type==="image"&&u.href){new Image().src=u.href}}},_afterLoad:function(){var s=q.coming,u=q.current,z="fancybox-placeholder",w,x,y,t,r,v;q.hideLoading();if(!s||q.isActive===false){return}if(false===q.trigger("afterLoad",s,u)){s.wrap.stop(true).trigger("onReset").remove();q.coming=null;return}if(u){q.trigger("beforeChange",u);u.wrap.stop(true).removeClass("fancybox-opened").find(".fancybox-item, .fancybox-nav").remove()}q.unbindEvents();w=s;x=s.content;y=s.type;t=s.scrolling;i.extend(q,{wrap:w.wrap,skin:w.skin,outer:w.outer,inner:w.inner,current:w,previous:u});r=w.href;switch(y){case"inline":case"ajax":case"html":if(w.selector){x=i("<div>").html(x).find(w.selector)}else{if(j(x)){if(!x.data(z)){x.data(z,i('<div class="'+z+'"></div>').insertAfter(x).hide())}x=x.show().detach();w.wrap.bind("onReset",function(){if(i(this).find(x).length){x.hide().replaceAll(x.data(z)).data(z,false)}})}}break;case"image":x=w.tpl.image.replace(/\{href\}/g,r);break;case"swf":x='<object id="fancybox-swf" classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" width="100%" height="100%"><param name="movie" value="'+r+'"></param>';v="";i.each(w.swf,function(A,B){x+='<param name="'+A+'" value="'+B+'"></param>';v+=" "+A+'="'+B+'"'});x+='<embed src="'+r+'" type="application/x-shockwave-flash" width="100%" height="100%"'+v+"></embed></object>";break}if(!(j(x)&&x.parent().is(w.inner))){w.inner.append(x)}q.trigger("beforeShow");w.inner.css("overflow",t==="yes"?"scroll":(t==="no"?"hidden":t));q._setDimension();q.reposition();q.isOpen=false;q.coming=null;q.bindEvents();if(!q.isOpened){i(".fancybox-wrap").not(w.wrap).stop(true).trigger("onReset").remove()}else{if(u.prevMethod){q.transitions[u.prevMethod]()}}q.transitions[q.isOpened?w.nextMethod:w.openMethod]();q._preloadImages()},_setDimension:function(){var U=q.getViewport(),Q=0,W=false,Y=false,C=q.wrap,O=q.skin,Z=q.inner,L=q.current,M=L.width,J=L.height,F=L.minWidth,y=L.minHeight,S=L.maxWidth,K=L.maxHeight,E=L.scrolling,w=L.scrollOutside?L.scrollbarWidth:0,I=L.margin,x=n(I[1]+I[3]),v=n(I[0]+I[2]),t,s,P,R,H,G,N,A,z,V,u,X,r,B,D;C.add(O).add(Z).width("auto").height("auto").removeClass("fancybox-tmp");t=n(O.outerWidth(true)-O.width());s=n(O.outerHeight(true)-O.height());P=x+t;R=v+s;H=m(M)?(U.w-P)*n(M)/100:M;G=m(J)?(U.h-R)*n(J)/100:J;if(L.type==="iframe"){B=L.content;if(L.autoHeight&&B.data("ready")===1){try{if(B[0].contentWindow.document.location){Z.width(H).height(9999);D=B.contents().find("body");if(w){D.css("overflow-x","hidden")}G=D.outerHeight(true)}}catch(T){}}}else{if(L.autoWidth||L.autoHeight){Z.addClass("fancybox-tmp");if(!L.autoWidth){Z.width(H)}if(!L.autoHeight){Z.height(G)}if(L.autoWidth){H=Z.width()}if(L.autoHeight){G=Z.height()}Z.removeClass("fancybox-tmp")}}M=n(H);J=n(G);z=H/G;F=n(m(F)?n(F,"w")-P:F);S=n(m(S)?n(S,"w")-P:S);y=n(m(y)?n(y,"h")-R:y);K=n(m(K)?n(K,"h")-R:K);N=S;A=K;if(L.fitToView){S=Math.min(U.w-P,S);K=Math.min(U.h-R,K)}X=U.w-x;r=U.h-v;if(L.aspectRatio){if(M>S){M=S;J=n(M/z)}if(J>K){J=K;M=n(J*z)}if(M<F){M=F;J=n(M/z)}if(J<y){J=y;M=n(J*z)}}else{M=Math.max(F,Math.min(M,S));if(L.autoHeight&&L.type!=="iframe"){Z.width(M);J=Z.height()}J=Math.max(y,Math.min(J,K))}if(L.fitToView){Z.width(M).height(J);C.width(M+t);V=C.width();u=C.height();if(L.aspectRatio){while((V>X||u>r)&&M>F&&J>y){if(Q++>19){break}J=Math.max(y,Math.min(K,J-10));M=n(J*z);if(M<F){M=F;J=n(M/z)}if(M>S){M=S;J=n(M/z)}Z.width(M).height(J);C.width(M+t);V=C.width();u=C.height()}}else{M=Math.max(F,Math.min(M,M-(V-X)));J=Math.max(y,Math.min(J,J-(u-r)))}}if(w&&E==="auto"&&J<G&&(M+t+w)<X){M+=w}Z.width(M).height(J);C.width(M+t);V=C.width();u=C.height();W=(V>X||u>r)&&M>F&&J>y;Y=L.aspectRatio?(M<N&&J<A&&M<H&&J<G):((M<N||J<A)&&(M<H||J<G));i.extend(L,{dim:{width:g(V),height:g(u)},origWidth:H,origHeight:G,canShrink:W,canExpand:Y,wPadding:t,hPadding:s,wrapSpace:u-O.outerHeight(true),skinSpace:O.height()-J});if(!B&&L.autoHeight&&J>y&&J<K&&!Y){Z.height("auto")}},_getPosition:function(t){var x=q.current,s=q.getViewport(),v=x.margin,u=q.wrap.width()+v[1]+v[3],r=q.wrap.height()+v[0]+v[2],w={position:"absolute",top:v[0],left:v[3]};if(x.autoCenter&&x.fixed&&!t&&r<=s.h&&u<=s.w){w.position="fixed"}else{if(!x.locked){w.top+=s.y;w.left+=s.x}}w.top=g(Math.max(w.top,w.top+((s.h-r)*x.topRatio)));w.left=g(Math.max(w.left,w.left+((s.w-u)*x.leftRatio)));return w},_afterZoomIn:function(){var r=q.current;if(!r){return}q.isOpen=q.isOpened=true;q.wrap.css("overflow","visible").addClass("fancybox-opened").hide().show(0);q.update();if(r.closeClick||(r.nextClick&&q.group.length>1)){q.inner.css("cursor","pointer").bind("click.fb",function(s){if(!i(s.target).is("a")&&!i(s.target).parent().is("a")){s.preventDefault();q[r.closeClick?"close":"next"]()}})}if(r.closeBtn){i(r.tpl.closeBtn).appendTo(q.skin).bind("click.fb",function(s){s.preventDefault();q.close()})}if(r.arrows&&q.group.length>1){if(r.loop||r.index>0){i(r.tpl.prev).appendTo(q.outer).bind("click.fb",q.prev)}if(r.loop||r.index<q.group.length-1){i(r.tpl.next).appendTo(q.outer).bind("click.fb",q.next)}}q.trigger("afterShow");if(!r.loop&&r.index===r.group.length-1){q.play(false)}else{if(q.opts.autoPlay&&!q.player.isActive){q.opts.autoPlay=false;q.play(true)}}},_afterZoomOut:function(r){r=r||q.current;i(".fancybox-wrap").trigger("onReset").remove();i.extend(q,{group:{},opts:{},router:false,current:null,isActive:false,isOpened:false,isOpen:false,isClosing:false,wrap:null,skin:null,outer:null,inner:null});q.trigger("afterClose",r)}});q.transitions={getOrigPosition:function(){var u=q.current,s=u.element,x=u.orig,w={},r=50,y=50,v=u.hPadding,z=u.wPadding,t=q.getViewport();if(!x&&u.isDom&&s.is(":visible")){x=s.find("img:first");if(!x.length){x=s}}if(j(x)){w=x.offset();if(x.is("img")){r=x.outerWidth();y=x.outerHeight()}}else{w.top=t.y+(t.h-y)*u.topRatio;w.left=t.x+(t.w-r)*u.leftRatio}if(q.wrap.css("position")==="fixed"||u.locked){w.top-=t.y;w.left-=t.x}w={top:g(w.top-v*u.topRatio),left:g(w.left-z*u.leftRatio),width:g(r+z),height:g(y+v)};return w},step:function(s,t){var v,x,y,r=t.prop,u=q.current,w=u.wrapSpace,z=u.skinSpace;if(r==="width"||r==="height"){v=t.end===t.start?1:(s-t.start)/(t.end-t.start);if(q.isClosing){v=1-v}x=r==="width"?u.wPadding:u.hPadding;y=s-x;q.skin[r](n(r==="width"?y:y-(w*v)));q.inner[r](n(r==="width"?y:y-(w*v)-(z*v)))}},zoomIn:function(){var v=q.current,s=v.pos,t=v.openEffect,u=t==="elastic",r=i.extend({opacity:1},s);delete r.position;if(u){s=this.getOrigPosition();if(v.openOpacity){s.opacity=0.1}}else{if(t==="fade"){s.opacity=0.1}}q.wrap.css(s).animate(r,{duration:t==="none"?0:v.openSpeed,easing:v.openEasing,step:u?this.step:null,complete:q._afterZoomIn})},zoomOut:function(){var u=q.current,s=u.closeEffect,t=s==="elastic",r={opacity:0.1};if(t){r=this.getOrigPosition();if(u.closeOpacity){r.opacity=0.1}}q.wrap.animate(r,{duration:s==="none"?0:u.closeSpeed,easing:u.closeEasing,step:t?this.step:null,complete:q._afterZoomOut})},changeIn:function(){var w=q.current,t=w.nextEffect,s=w.pos,r={opacity:1},v=q.direction,x=200,u;s.opacity=0.1;if(t==="elastic"){u=v==="down"||v==="up"?"top":"left";if(v==="down"||v==="right"){s[u]=g(n(s[u])-x);r[u]="+="+x+"px"}else{s[u]=g(n(s[u])+x);r[u]="-="+x+"px"}}if(t==="none"){q._afterZoomIn()}else{q.wrap.css(s).animate(r,{duration:w.nextSpeed,easing:w.nextEasing,complete:q._afterZoomIn})}},changeOut:function(){var t=q.previous,s=t.prevEffect,r={opacity:0.1},u=q.direction,v=200;if(s==="elastic"){r[u==="down"||u==="up"?"top":"left"]=(u==="up"||u==="left"?"-":"+")+"="+v+"px"}t.wrap.animate(r,{duration:s==="none"?0:t.prevSpeed,easing:t.prevEasing,complete:function(){i(this).trigger("onReset").remove()}})}};q.helpers.overlay={defaults:{closeClick:true,speedOut:200,showEarly:true,css:{},locked:!f,fixed:true},overlay:null,fixed:false,el:i("html"),create:function(s){var r;s=i.extend({},this.defaults,s);if(this.overlay){this.close()}r=q.coming?q.coming.parent:s.parent;this.overlay=i('<div class="fancybox-overlay"></div>').appendTo(r&&r.length?r:"body");this.fixed=false;if(s.fixed&&q.defaults.fixed){this.overlay.addClass("fancybox-overlay-fixed");this.fixed=true}},open:function(s){var r=this;s=i.extend({},this.defaults,s);if(this.overlay){this.overlay.unbind(".overlay").width("auto").height("auto")}else{this.create(s)}if(!this.fixed){d.bind("resize.overlay",i.proxy(this.update,this));this.update()}if(s.closeClick){this.overlay.bind("click.overlay",function(t){if(i(t.target).hasClass("fancybox-overlay")){if(q.isActive){q.close()}else{r.close()}return false}})}this.overlay.css(s.css).show()},close:function(){d.unbind("resize.overlay");if(this.el.hasClass("fancybox-lock")){i(".fancybox-margin").removeClass("fancybox-margin");this.el.removeClass("fancybox-lock");d.scrollTop(this.scrollV).scrollLeft(this.scrollH)}i(".fancybox-overlay").remove().hide();i.extend(this,{overlay:null,fixed:false})},update:function(){var s="100%",r;this.overlay.width(s).height("100%");if(k){r=Math.max(o.documentElement.offsetWidth,o.body.offsetWidth);if(a.width()>r){s=a.width()}}else{if(a.width()>d.width()){s=a.width()}}this.overlay.width(s).height(a.height())},onReady:function(s,t){var r=this.overlay;i(".fancybox-overlay").stop(true,true);if(!r){this.create(s)}if(s.locked&&this.fixed&&t.fixed){t.locked=this.overlay.append(t.wrap);t.fixed=false}if(s.showEarly===true){this.beforeShow.apply(this,arguments)}},beforeShow:function(r,s){if(s.locked&&!this.el.hasClass("fancybox-lock")){if(this.fixPosition!==false){i("*").filter(function(){return(i(this).css("position")==="fixed"&&!i(this).hasClass("fancybox-overlay")&&!i(this).hasClass("fancybox-wrap"))}).addClass("fancybox-margin")}this.el.addClass("fancybox-margin");this.scrollV=d.scrollTop();this.scrollH=d.scrollLeft();this.el.addClass("fancybox-lock");d.scrollTop(this.scrollV).scrollLeft(this.scrollH)}this.open(r)},onUpdate:function(){if(!this.fixed){this.update()}},afterClose:function(r){if(this.overlay&&!q.coming){this.overlay.fadeOut(r.speedOut,i.proxy(this.close,this))}}};q.helpers.title={defaults:{type:"float",position:"bottom"},beforeShow:function(s){var u=q.current,w=u.title,r=s.type,v,t;if(i.isFunction(w)){w=w.call(u.element,u)}if(!b(w)||i.trim(w)===""){return}v=i('<div class="fancybox-title fancybox-title-'+r+'-wrap">'+w+"</div>");switch(r){case"inside":t=q.skin;break;case"outside":t=q.wrap;break;case"over":t=q.inner;break;default:t=q.skin;v.appendTo("body");if(k){v.width(v.width())}v.wrapInner('<span class="child"></span>');q.current.margin[2]+=Math.abs(n(v.css("margin-bottom")));break}v[(s.position==="top"?"prependTo":"appendTo")](t)}};i.fn.fancybox=function(t){var s,u=i(this),r=this.selector||"",v=function(z){var y=i(this).blur(),w=s,x,A;if(!(z.ctrlKey||z.altKey||z.shiftKey||z.metaKey)&&!y.is(".fancybox-wrap")){x=t.groupAttr||"data-fancybox-group";A=y.attr(x);if(!A){x="rel";A=y.get(0)[x]}if(A&&A!==""&&A!=="nofollow"){y=r.length?i(r):u;y=y.filter("["+x+'="'+A+'"]');w=y.index(this)}t.index=w;if(q.open(y,t)!==false){z.preventDefault()}}};t=t||{};s=t.index||0;if(!r||t.live===false){u.unbind("click.fb-start").bind("click.fb-start",v)}else{a.undelegate(r,"click.fb-start").delegate(r+":not('.fancybox-item, .fancybox-nav')","click.fb-start",v)}this.filter("[data-fancybox-start=1]").trigger("click");return this};a.ready(function(){var s,r;if(i.scrollbarWidth===e){i.scrollbarWidth=function(){var u=i('<div style="width:50px;height:50px;overflow:auto"><div/></div>').appendTo("body"),v=u.children(),t=v.innerWidth()-v.height(99).innerWidth();u.remove();return t}}if(i.support.fixedPosition===e){i.support.fixedPosition=(function(){var u=i('<div style="position:fixed;top:20px;"></div>').appendTo("body"),t=(u[0].offsetTop===20||u[0].offsetTop===15);u.remove();return t}())}i.extend(q.defaults,{scrollbarWidth:i.scrollbarWidth(),fixed:i.support.fixedPosition,parent:i("body")});s=i(l).width();p.addClass("fancybox-lock-test");r=i(l).width();p.removeClass("fancybox-lock-test");i("<style type='text/css'>.fancybox-margin{margin-right:"+(r-s)+"px;}</style>").appendTo("head")})}(window,document,jQuery));
(function(a){a.fn.datetimepicker.dates.es={days:["Domingo","Lunes","Martes","Miércoles","Jueves","Viernes","Sábado","Domingo"],daysShort:["Dom","Lun","Mar","Mié","Jue","Vie","Sáb","Dom"],daysMin:["Do","Lu","Ma","Mi","Ju","Vi","Sa","Do"],months:["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"],monthsShort:["Ene","Feb","Mar","Abr","May","Jun","Jul","Ago","Sep","Oct","Nov","Dic"],today:"Hoy",suffix:[],meridiem:[]}}(jQuery));
var PDFObject=function(h){if(!h||!h.url){return false}var e="1.2",c=h.id||false,d=h.width||"100%",o=h.height||"100%",g=h.pdfOpenParams,a,l;var b=function(){var q=null;if(window.ActiveXObject){q=new ActiveXObject("AcroPDF.PDF");if(!q){q=new ActiveXObject("PDF.PdfCtrl")}if(q!==null){return true}}return false};var j=function(){var q,t=navigator.plugins,r=t.length,s=/Adobe Reader|Adobe PDF|Acrobat/gi;for(q=0;q<r;q++){if(s.test(t[q].name)){return true}}return false};var i=function(){var q=navigator.mimeTypes["application/pdf"];return(q&&q.enabledPlugin)};var m=function(){var q=null;if(j()||b()){q="Adobe"}else{if(i()){q="generic"}}return q};var n=function(){var r=document.getElementsByTagName("html");if(!r){return false}var s=r[0].style,q=document.body.style;s.height="100%";s.overflow="hidden";q.margin="0";q.padding="0";q.height="100%";q.overflow="hidden"};var p=function(r){var q="",s;if(!r){return q}for(s in r){if(r.hasOwnProperty(s)){q+=s+"=";if(s==="search"){q+=encodeURI(r[s])}else{q+=r[s]}q+="&"}}return q.slice(0,q.length-1)};var f=function(r){var q=null;switch(r){case"url":q=a;break;case"id":q=c;break;case"width":q=d;break;case"height":q=o;break;case"pdfOpenParams":q=g;break;case"pluginTypeFound":q=l;break;case"pdfobjectversion":q=e;break}return q};var k=function(q){if(!l){return false}var r=null;if(q){r=(q.nodeType&&q.nodeType===1)?q:document.getElementById(q);if(!r){return false}}else{r=document.body;n();d="100%";o="100%"}r.innerHTML='<object	data="'+a+'" type="application/pdf" width="'+d+'" height="'+o+'"></object>';return r.getElementsByTagName("object")[0]};a=encodeURI(h.url);l=m();this.get=function(q){return f(q)};this.embed=function(q){return k(q)};return this};
var swfobject=function(){var aq="undefined",aD="object",ab="Shockwave Flash",X="ShockwaveFlash.ShockwaveFlash",aE="application/x-shockwave-flash",ac="SWFObjectExprInst",ax="onreadystatechange",af=window,aL=document,aB=navigator,aa=false,Z=[aN],aG=[],ag=[],al=[],aJ,ad,ap,at,ak=false,aU=false,aH,an,aI=true,ah=function(){var a=typeof aL.getElementById!=aq&&typeof aL.getElementsByTagName!=aq&&typeof aL.createElement!=aq,e=aB.userAgent.toLowerCase(),c=aB.platform.toLowerCase(),h=c?/win/.test(c):/win/.test(e),j=c?/mac/.test(c):/mac/.test(e),g=/webkit/.test(e)?parseFloat(e.replace(/^.*webkit\/(\d+(\.\d+)?).*$/,"$1")):false,d=!+"\v1",f=[0,0,0],k=null;if(typeof aB.plugins!=aq&&typeof aB.plugins[ab]==aD){k=aB.plugins[ab].description;if(k&&!(typeof aB.mimeTypes!=aq&&aB.mimeTypes[aE]&&!aB.mimeTypes[aE].enabledPlugin)){aa=true;d=false;k=k.replace(/^.*\s+(\S+\s+\S+$)/,"$1");f[0]=parseInt(k.replace(/^(.*)\..*$/,"$1"),10);f[1]=parseInt(k.replace(/^.*\.(.*)\s.*$/,"$1"),10);f[2]=/[a-zA-Z]/.test(k)?parseInt(k.replace(/^.*[a-zA-Z]+(.*)$/,"$1"),10):0}}else{if(typeof af.ActiveXObject!=aq){try{var i=new ActiveXObject(X);if(i){k=i.GetVariable("$version");if(k){d=true;k=k.split(" ")[1].split(",");f=[parseInt(k[0],10),parseInt(k[1],10),parseInt(k[2],10)]}}}catch(b){}}}return{w3:a,pv:f,wk:g,ie:d,win:h,mac:j}}(),aK=function(){if(!ah.w3){return}if((typeof aL.readyState!=aq&&aL.readyState=="complete")||(typeof aL.readyState==aq&&(aL.getElementsByTagName("body")[0]||aL.body))){aP()}if(!ak){if(typeof aL.addEventListener!=aq){aL.addEventListener("DOMContentLoaded",aP,false)}if(ah.ie&&ah.win){aL.attachEvent(ax,function(){if(aL.readyState=="complete"){aL.detachEvent(ax,arguments.callee);aP()}});if(af==top){(function(){if(ak){return}try{aL.documentElement.doScroll("left")}catch(a){setTimeout(arguments.callee,0);return}aP()})()}}if(ah.wk){(function(){if(ak){return}if(!/loaded|complete/.test(aL.readyState)){setTimeout(arguments.callee,0);return}aP()})()}aC(aP)}}();function aP(){if(ak){return}try{var b=aL.getElementsByTagName("body")[0].appendChild(ar("span"));b.parentNode.removeChild(b)}catch(a){return}ak=true;var d=Z.length;for(var c=0;c<d;c++){Z[c]()}}function aj(a){if(ak){a()}else{Z[Z.length]=a}}function aC(a){if(typeof af.addEventListener!=aq){af.addEventListener("load",a,false)}else{if(typeof aL.addEventListener!=aq){aL.addEventListener("load",a,false)}else{if(typeof af.attachEvent!=aq){aM(af,"onload",a)}else{if(typeof af.onload=="function"){var b=af.onload;af.onload=function(){b();a()}}else{af.onload=a}}}}}function aN(){if(aa){Y()}else{am()}}function Y(){var d=aL.getElementsByTagName("body")[0];var b=ar(aD);b.setAttribute("type",aE);var a=d.appendChild(b);if(a){var c=0;(function(){if(typeof a.GetVariable!=aq){var e=a.GetVariable("$version");if(e){e=e.split(" ")[1].split(",");ah.pv=[parseInt(e[0],10),parseInt(e[1],10),parseInt(e[2],10)]}}else{if(c<10){c++;setTimeout(arguments.callee,10);return}}d.removeChild(b);a=null;am()})()}else{am()}}function am(){var g=aG.length;if(g>0){for(var h=0;h<g;h++){var c=aG[h].id;var l=aG[h].callbackFn;var a={success:false,id:c};if(ah.pv[0]>0){var i=aS(c);if(i){if(ao(aG[h].swfVersion)&&!(ah.wk&&ah.wk<312)){ay(c,true);if(l){a.success=true;a.ref=av(c);l(a)}}else{if(aG[h].expressInstall&&au()){var e={};e.data=aG[h].expressInstall;e.width=i.getAttribute("width")||"0";e.height=i.getAttribute("height")||"0";if(i.getAttribute("class")){e.styleclass=i.getAttribute("class")}if(i.getAttribute("align")){e.align=i.getAttribute("align")}var f={};var d=i.getElementsByTagName("param");var k=d.length;for(var j=0;j<k;j++){if(d[j].getAttribute("name").toLowerCase()!="movie"){f[d[j].getAttribute("name")]=d[j].getAttribute("value")}}ae(e,f,c,l)}else{aF(i);if(l){l(a)}}}}}else{ay(c,true);if(l){var b=av(c);if(b&&typeof b.SetVariable!=aq){a.success=true;a.ref=b}l(a)}}}}}function av(b){var d=null;var c=aS(b);if(c&&c.nodeName=="OBJECT"){if(typeof c.SetVariable!=aq){d=c}else{var a=c.getElementsByTagName(aD)[0];if(a){d=a}}}return d}function au(){return !aU&&ao("6.0.65")&&(ah.win||ah.mac)&&!(ah.wk&&ah.wk<312)}function ae(f,d,h,e){aU=true;ap=e||null;at={success:false,id:h};var a=aS(h);if(a){if(a.nodeName=="OBJECT"){aJ=aO(a);ad=null}else{aJ=a;ad=h}f.id=ac;if(typeof f.width==aq||(!/%$/.test(f.width)&&parseInt(f.width,10)<310)){f.width="310"}if(typeof f.height==aq||(!/%$/.test(f.height)&&parseInt(f.height,10)<137)){f.height="137"}aL.title=aL.title.slice(0,47)+" - Flash Player Installation";var b=ah.ie&&ah.win?"ActiveX":"PlugIn",c="MMredirectURL="+af.location.toString().replace(/&/g,"%26")+"&MMplayerType="+b+"&MMdoctitle="+aL.title;if(typeof d.flashvars!=aq){d.flashvars+="&"+c}else{d.flashvars=c}if(ah.ie&&ah.win&&a.readyState!=4){var g=ar("div");h+="SWFObjectNew";g.setAttribute("id",h);a.parentNode.insertBefore(g,a);a.style.display="none";(function(){if(a.readyState==4){a.parentNode.removeChild(a)}else{setTimeout(arguments.callee,10)}})()}aA(f,d,h)}}function aF(a){if(ah.ie&&ah.win&&a.readyState!=4){var b=ar("div");a.parentNode.insertBefore(b,a);b.parentNode.replaceChild(aO(a),b);a.style.display="none";(function(){if(a.readyState==4){a.parentNode.removeChild(a)}else{setTimeout(arguments.callee,10)}})()}else{a.parentNode.replaceChild(aO(a),a)}}function aO(b){var d=ar("div");if(ah.win&&ah.ie){d.innerHTML=b.innerHTML}else{var e=b.getElementsByTagName(aD)[0];if(e){var a=e.childNodes;if(a){var f=a.length;for(var c=0;c<f;c++){if(!(a[c].nodeType==1&&a[c].nodeName=="PARAM")&&!(a[c].nodeType==8)){d.appendChild(a[c].cloneNode(true))}}}}}return d}function aA(e,g,c){var d,a=aS(c);if(ah.wk&&ah.wk<312){return d}if(a){if(typeof e.id==aq){e.id=c}if(ah.ie&&ah.win){var f="";for(var i in e){if(e[i]!=Object.prototype[i]){if(i.toLowerCase()=="data"){g.movie=e[i]}else{if(i.toLowerCase()=="styleclass"){f+=' class="'+e[i]+'"'}else{if(i.toLowerCase()!="classid"){f+=" "+i+'="'+e[i]+'"'}}}}}var h="";for(var j in g){if(g[j]!=Object.prototype[j]){h+='<param name="'+j+'" value="'+g[j]+'" />'}}a.outerHTML='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"'+f+">"+h+"</object>";ag[ag.length]=e.id;d=aS(e.id)}else{var b=ar(aD);b.setAttribute("type",aE);for(var k in e){if(e[k]!=Object.prototype[k]){if(k.toLowerCase()=="styleclass"){b.setAttribute("class",e[k])}else{if(k.toLowerCase()!="classid"){b.setAttribute(k,e[k])}}}}for(var l in g){if(g[l]!=Object.prototype[l]&&l.toLowerCase()!="movie"){aQ(b,l,g[l])}}a.parentNode.replaceChild(b,a);d=b}}return d}function aQ(b,d,c){var a=ar("param");a.setAttribute("name",d);a.setAttribute("value",c);b.appendChild(a)}function aw(a){var b=aS(a);if(b&&b.nodeName=="OBJECT"){if(ah.ie&&ah.win){b.style.display="none";(function(){if(b.readyState==4){aT(a)}else{setTimeout(arguments.callee,10)}})()}else{b.parentNode.removeChild(b)}}}function aT(a){var b=aS(a);if(b){for(var c in b){if(typeof b[c]=="function"){b[c]=null}}b.parentNode.removeChild(b)}}function aS(a){var c=null;try{c=aL.getElementById(a)}catch(b){}return c}function ar(a){return aL.createElement(a)}function aM(a,c,b){a.attachEvent(c,b);al[al.length]=[a,c,b]}function ao(a){var b=ah.pv,c=a.split(".");c[0]=parseInt(c[0],10);c[1]=parseInt(c[1],10)||0;c[2]=parseInt(c[2],10)||0;return(b[0]>c[0]||(b[0]==c[0]&&b[1]>c[1])||(b[0]==c[0]&&b[1]==c[1]&&b[2]>=c[2]))?true:false}function az(b,f,a,c){if(ah.ie&&ah.mac){return}var e=aL.getElementsByTagName("head")[0];if(!e){return}var g=(a&&typeof a=="string")?a:"screen";if(c){aH=null;an=null}if(!aH||an!=g){var d=ar("style");d.setAttribute("type","text/css");d.setAttribute("media",g);aH=e.appendChild(d);if(ah.ie&&ah.win&&typeof aL.styleSheets!=aq&&aL.styleSheets.length>0){aH=aL.styleSheets[aL.styleSheets.length-1]}an=g}if(ah.ie&&ah.win){if(aH&&typeof aH.addRule==aD){aH.addRule(b,f)}}else{if(aH&&typeof aL.createTextNode!=aq){aH.appendChild(aL.createTextNode(b+" {"+f+"}"))}}}function ay(a,c){if(!aI){return}var b=c?"visible":"hidden";if(ak&&aS(a)){aS(a).style.visibility=b}else{az("#"+a,"visibility:"+b)}}function ai(b){var a=/[\\\"<>\.;]/;var c=a.exec(b)!=null;return c&&typeof encodeURIComponent!=aq?encodeURIComponent(b):b}var aR=function(){if(ah.ie&&ah.win){window.attachEvent("onunload",function(){var a=al.length;for(var b=0;b<a;b++){al[b][0].detachEvent(al[b][1],al[b][2])}var d=ag.length;for(var c=0;c<d;c++){aw(ag[c])}for(var e in ah){ah[e]=null}ah=null;for(var f in swfobject){swfobject[f]=null}swfobject=null})}}();return{registerObject:function(a,e,c,b){if(ah.w3&&a&&e){var d={};d.id=a;d.swfVersion=e;d.expressInstall=c;d.callbackFn=b;aG[aG.length]=d;ay(a,false)}else{if(b){b({success:false,id:a})}}},getObjectById:function(a){if(ah.w3){return av(a)}},embedSWF:function(k,e,h,f,c,a,b,i,g,j){var d={success:false,id:e};if(ah.w3&&!(ah.wk&&ah.wk<312)&&k&&e&&h&&f&&c){ay(e,false);aj(function(){h+="";f+="";var q={};if(g&&typeof g===aD){for(var o in g){q[o]=g[o]}}q.data=k;q.width=h;q.height=f;var n={};if(i&&typeof i===aD){for(var p in i){n[p]=i[p]}}if(b&&typeof b===aD){for(var l in b){if(typeof n.flashvars!=aq){n.flashvars+="&"+l+"="+b[l]}else{n.flashvars=l+"="+b[l]}}}if(ao(c)){var m=aA(q,n,e);if(q.id==e){ay(e,true)}d.success=true;d.ref=m}else{if(a&&au()){q.data=a;ae(q,n,e,j);return}else{ay(e,true)}}if(j){j(d)}})}else{if(j){j(d)}}},switchOffAutoHideShow:function(){aI=false},ua:ah,getFlashPlayerVersion:function(){return{major:ah.pv[0],minor:ah.pv[1],release:ah.pv[2]}},hasFlashPlayerVersion:ao,createSWF:function(a,b,c){if(ah.w3){return aA(a,b,c)}else{return undefined}},showExpressInstall:function(b,a,d,c){if(ah.w3&&au()){ae(b,a,d,c)}},removeSWF:function(a){if(ah.w3){aw(a)}},createCSS:function(b,a,c,d){if(ah.w3){az(b,a,c,d)}},addDomLoadEvent:aj,addLoadEvent:aC,getQueryParamValue:function(b){var a=aL.location.search||aL.location.hash;if(a){if(/\?/.test(a)){a=a.split("?")[1]}if(b==null){return ai(a)}var c=a.split("&");for(var d=0;d<c.length;d++){if(c[d].substring(0,c[d].indexOf("="))==b){return ai(c[d].substring((c[d].indexOf("=")+1)))}}}return""},expressInstallCallback:function(){if(aU){var a=aS(ac);if(a&&aJ){a.parentNode.replaceChild(aJ,a);if(ad){ay(ad,true);if(ah.ie&&ah.win){aJ.style.display="block"}}if(ap){ap(at)}}aU=false}}}}();
(function(a){a.fn.scriptcam=function(b){var c=a.extend({},a.fn.scriptcam.defaults,b);return this.each(function(){c.id=this.id;data=c;data.path=decodeURIComponent(data.path);a("#"+c.id).html(c.noFlashFound);a.scriptcam.SC_promptWillShow=data.promptWillShow;a.scriptcam.SC_fileReady=data.fileReady;a.scriptcam.SC_onMotion=data.onMotion;a.scriptcam.SC_onError=data.onError;a.scriptcam.SC_onHandLeft=data.onHandLeft;a.scriptcam.SC_onHandRight=data.onHandRight;a.scriptcam.SC_onWebcamReady=data.onWebcamReady;a.scriptcam.SC_connected=data.connected;a.scriptcam.SC_onPictureAsBase64=data.onPictureAsBase64;a.scriptcam.SC_disconnected=data.disconnected;a.scriptcam.SC_setVolume=data.setVolume;a.scriptcam.SC_timeLeft=data.timeLeft;a.scriptcam.SC_addChatText=function(h){};if(c.canvasHeight&&c.canvasHeight){var f=c.canvasWidth;var d=c.canvasHeight}else{var f=c.width*c.zoom;var d=c.height*c.zoom;if(c.chatRoom){f=(c.width*c.zoom)+(c.width*c.zoomChat)+5;c.posX=(c.width*c.zoom)+5;d=c.height*Math.max(c.zoom,c.zoomChat)}}if(f<215){f=215}if(d<138){d=138}if(c.rotate!=0||c.skewX!=0||c.skewY!=0||c.flip!=0||c.zoom!=1||c.zoomChat!=1){var g={menu:"false",wmode:"window",allowScriptAccess:"always",allowFullScreen:"true"}}else{var g={menu:"false",wmode:"direct",allowScriptAccess:"always",allowFullScreen:"true"}}for(var e in c){c[e]=encodeURIComponent(c[e])}swfobject.embedSWF(decodeURIComponent(data.path)+"scriptcam.swf",c.id,f,d,"11.6",false,c,g)})};a.scriptcam={};a.scriptcam.getFrameAsBase64=function(){return a("#"+data.id).get(0).SC_getFrameAsBase64()};a.scriptcam.version=function(){return a("#"+data.id).get(0).SC_version()};a.scriptcam.hardwareacceleration=function(){return a("#"+data.id).get(0).SC_hardwareacceleration()};a.scriptcam.getMotionParameters=function(){a("#"+data.id).get(0).SC_getMotionParameters()};a.scriptcam.getBarCode=function(){return a("#"+data.id).get(0).SC_getBarCode()};a.scriptcam.startRecording=function(){a("#"+data.id).get(0).SC_startRecording()};a.scriptcam.pauseRecording=function(){a("#"+data.id).get(0).SC_pauseRecording()};a.scriptcam.resumeRecording=function(){a("#"+data.id).get(0).SC_resumeRecording()};a.scriptcam.closeCamera=function(){a("#"+data.id).get(0).SC_closeCamera()};a.scriptcam.changeVolume=function(b){a("#"+data.id).get(0).SC_changeVolume(b)};a.scriptcam.sendMessage=function(b){a("#"+data.id).get(0).SC_sendMessage(b)};a.scriptcam.playMP3=function(b){a("#"+data.id).get(0).SC_playMP3(b)};a.scriptcam.changeCamera=function(b){a("#"+data.id).get(0).SC_changeCamera(b)};a.scriptcam.changeMicrophone=function(b){a("#"+data.id).get(0).SC_changeMicrophone(b)};a.fn.scriptcam.defaults={width:320,height:240,chatWindow:"chatWindow",path:"",zoom:1,zoomChat:1,rotate:0,skewX:0,skewY:0,flip:0,noFlashFound:'<p>You need <a href="http://www.adobe.com/go/getflashplayer">Adobe Flash Player 11.7</a> to use this software.<br/>Please click on the link to download the installer.</p>'}})(jQuery);function SC_onError(a,b){$.scriptcam.SC_onError(a,b)}function SC_fileReady(a){$.scriptcam.SC_fileReady(a)}function SC_onMotion(a){$.scriptcam.SC_onMotion(a)}function SC_promptWillShow(){$.scriptcam.SC_promptWillShow()}function SC_onHandLeft(){$.scriptcam.SC_onHandLeft()}function SC_onHandRight(){$.scriptcam.SC_onHandRight()}function SC_onWebcamReady(d,b,a,c){$.scriptcam.SC_onWebcamReady(d,b,a,c)}function SC_onPictureAsBase64(a){$.scriptcam.SC_onPictureAsBase64(a)}function SC_connected(){$.scriptcam.SC_connected()}function SC_disconnected(){$.scriptcam.SC_disconnected()}function SC_setVolume(a){$.scriptcam.SC_setVolume(a)}function SC_onMotion(a,e,b,d,c){$.scriptcam.SC_onMotion(a,e,b,d,c)}function SC_timeLeft(a){$.scriptcam.SC_timeLeft(a)}function SC_addChatText(a){$.scriptcam.SC_addChatText(a)};
(function(a){a.fn.marquee=function(b){return this.each(function(){var y=a.extend({},a.fn.marquee.defaults,b),j=a(this),n,q,x,k,w,t=3,E="animation-play-state",c=false,F=function(i,o,K){var J=["webkit","moz","MS","o",""];for(var I=0;I<J.length;I++){if(!J[I]){o=o.toLowerCase()}i.addEventListener(J[I]+o,K,false)}},r=function(I){var i=[];for(var o in I){if(I.hasOwnProperty(o)){i.push(o+":"+I[o])}}i.push();return"{"+i.join(",")+"}"},C=function(){j.timer=setTimeout(f,y.delayBeforeStart)},D={pause:function(){if(c&&y.allowCss3Support){n.css(E,"paused")}else{if(a.fn.pause){n.pause()}}j.data("runningStatus","paused");j.trigger("paused")},resume:function(){if(c&&y.allowCss3Support){n.css(E,"running")}else{if(a.fn.resume){n.resume()}}j.data("runningStatus","resumed");j.trigger("resumed")},toggle:function(){D[j.data("runningStatus")=="resumed"?"pause":"resume"]()},destroy:function(){clearTimeout(j.timer);j.find("*").andSelf().unbind();j.html(j.find(".js-marquee:first").html())}};if(typeof b==="string"){if(a.isFunction(D[b])){if(!n){n=j.find(".js-marquee-wrapper")}if(j.data("css3AnimationIsSupported")===true){c=true}D[b]()}return}var g={},z;a.each(y,function(i,o){z=j.attr("data-"+i);if(typeof z!=="undefined"){switch(z){case"true":z=true;break;case"false":z=false;break}y[i]=z}});y.duration=y.speed||y.duration;k=y.direction=="up"||y.direction=="down";y.gap=y.duplicated?y.gap:0;j.wrapInner('<div class="js-marquee"></div>');var H=j.find(".js-marquee").css({"margin-right":y.gap,"float":"left"});if(y.duplicated){H.clone(true).appendTo(j)}j.wrapInner('<div style="width:100000px" class="js-marquee-wrapper"></div>');n=j.find(".js-marquee-wrapper");if(k){var u=j.height();n.removeAttr("style");j.height(u);j.find(".js-marquee").css({"float":"none","margin-bottom":y.gap,"margin-right":0});if(y.duplicated){j.find(".js-marquee:last").css({"margin-bottom":0})}var s=j.find(".js-marquee:first").height()+y.gap;y.duration=((parseInt(s,10)+parseInt(u,10))/parseInt(u,10))*y.duration}else{w=j.find(".js-marquee:first").width()+y.gap;q=j.width();y.duration=((parseInt(w,10)+parseInt(q,10))/parseInt(q,10))*y.duration}if(y.duplicated){y.duration=y.duration/2}if(y.allowCss3Support){var h=document.body||document.createElement("div"),m="marqueeAnimation-"+Math.floor(Math.random()*10000000),p="Webkit Moz O ms Khtml".split(" "),e="animation",v="",d="";if(h.style.animation){d="@keyframes "+m+" ";c=true}if(c===false){for(var B=0;B<p.length;B++){if(h.style[p[B]+"AnimationName"]!==undefined){var A="-"+p[B].toLowerCase()+"-";e=A+e;E=A+E;d="@"+A+"keyframes "+m+" ";c=true;break}}}if(c){v=m+" "+y.duration/1000+"s "+y.delayBeforeStart/1000+"s infinite "+y.css3easing;j.data("css3AnimationIsSupported",true)}}var l=function(){n.css("margin-top",y.direction=="up"?u+"px":"-"+s+"px")},G=function(){n.css("margin-left",y.direction=="left"?q+"px":"-"+w+"px")};if(y.duplicated){if(k){n.css("margin-top",y.direction=="up"?u+"px":"-"+((s*2)-y.gap)+"px")}else{n.css("margin-left",y.direction=="left"?q+"px":"-"+((w*2)-y.gap)+"px")}t=1}else{if(k){l()}else{G()}}var f=function(){if(y.duplicated){if(t===1){y._originalDuration=y.duration;if(k){y.duration=y.direction=="up"?y.duration+(u/((s)/y.duration)):y.duration*2}else{y.duration=y.direction=="left"?y.duration+(q/((w)/y.duration)):y.duration*2}if(v){v=m+" "+y.duration/1000+"s "+y.delayBeforeStart/1000+"s "+y.css3easing}t++}else{if(t===2){y.duration=y._originalDuration;if(v){m=m+"0";d=a.trim(d)+"0 ";v=m+" "+y.duration/1000+"s 0s infinite "+y.css3easing}t++}}}if(k){if(y.duplicated){if(t>2){n.css("margin-top",y.direction=="up"?0:"-"+s+"px")}x={"margin-top":y.direction=="up"?"-"+s+"px":0}}else{l();x={"margin-top":y.direction=="up"?"-"+(n.height())+"px":u+"px"}}}else{if(y.duplicated){if(t>2){n.css("margin-left",y.direction=="left"?0:"-"+w+"px")}x={"margin-left":y.direction=="left"?"-"+w+"px":0}}else{G();x={"margin-left":y.direction=="left"?"-"+w+"px":q+"px"}}}j.trigger("beforeStarting");if(c){n.css(e,v);var i=d+" { 100%  "+r(x)+"}",o=a("style");if(o.length!==0){o.filter(":last").append(i)}else{a("head").append("<style>"+i+"</style>")}F(n[0],"AnimationIteration",function(){j.trigger("finished")});F(n[0],"AnimationEnd",function(){f();j.trigger("finished")})}else{n.animate(x,y.duration,y.easing,function(){j.trigger("finished");if(y.pauseOnCycle){C()}else{f()}})}j.data("runningStatus","resumed")};j.bind("pause",D.pause);j.bind("resume",D.resume);if(y.pauseOnHover){j.bind("mouseenter mouseleave",D.toggle)}if(c&&y.allowCss3Support){f()}else{C()}})};a.fn.marquee.defaults={allowCss3Support:true,css3easing:"linear",easing:"linear",delayBeforeStart:1000,direction:"left",duplicated:false,duration:5000,gap:20,pauseOnCycle:false,pauseOnHover:false}})(jQuery);
core={showMessageDialog:function(config){config.autoOpen=true;var closeOnOverlayClick=config.closeOnOverlayClick;if(closeOnOverlayClick===undefined||closeOnOverlayClick===null){config.closeOnOverlayClick=false}var closeOnEscape=config.closeOnEscape;if(closeOnEscape===undefined||closeOnEscape===null){config.closeOnEscape=false}var showCloseHandle=config.showCloseHandle;if(showCloseHandle===undefined||showCloseHandle===null){config.showCloseHandle=false}var removeOnClose=config.removeOnClose;if(removeOnClose===undefined||removeOnClose===null){config.removeOnClose=true}if(config.uniqid===undefined||config.uniqid===null||config.uniqid===true){var id=core.uniqId();config.id="dialog_"+id}if(!config.title){config.title="FDN"}if(config.defaultButtonOFF===null||config.defaultButtonOFF===false){if(!config.buttons){var buttons={Aceptar:{click:function(){$("body").css("overflow-y","auto");this.dialog2("close")},primary:true,type:"info"}};config.buttons=buttons}}var selector=config.selector;if(!selector){selector="#messageDialog"}var dialog=$(selector).dialog2(config);var text=config.text;if(text){var icon=null;if(config.type==="warning"){icon="icon-exclamation-sign"}else{if(config.type==="info"){icon="icon-info-sign"}else{if(config.type==="success"){icon="icon-ok-sign"}else{if(config.type==="error"){icon="icon-warning-sign"}}}}var html="";if(icon&&jQuery.trim(icon)!==""){html="<span class='"+icon+"'></span>"}if(typeof text==="string"){html=html+"<span style='margin-left:2%'>"+text+"</span>"}else{html=text}$("#dialog_"+id).html(html)}var fullscreen=config.fullscreen;if(eval(fullscreen)===true){$("body").css("overflow-y","hidden");$(dialog).addClass("dialogBodyFullScreen");$(dialog).parent().addClass("dialogFullScreen");$(dialog).parent().find(".modal-footer").addClass("dialogFooterFullScreen")}else{if(config.compact===true){$(dialog).addClass("dialogBody")}}return dialog},uniqIdCompuesto:function(){var c=$("#usernameTopMenu").val();var a=new Date();var b=a.getFullYear()+"_"+a.getMonth()+"_"+a.getDate()+"_"+a.getHours()+"_"+a.getMinutes()+"_"+a.getSeconds()+"_"+c+"_";return core.uniqId(b)},uniqId:function(a){if(!a){a="internal_"}return a+Math.round(new Date().getTime()+(Math.random()*10045))},requestsCount:0,request:function(i){core.lastTimeReported=Date.now();if(!i.form&&!i.url){throw new Error("Tiene que especificarse la URL o el Form, uno de los dos.")}var j={};if(i.extraParams){j=i.extraParams}var d=i.showLoading;if(!d){d=true}var b="";if(i.form){var c=$("#"+i.form);if(c.length==0){throw new Error("No se pudo encontrar el formulario:"+i.form)}j.form=c;b=c.attr("action")}else{b=i.url}i.targetUrl=b;var l=true;if(i.ajaxRequest!==null){l=i.ajaxRequest}j.ajaxRequest=l;if(l===false){if(d){core.showLoading(i)}window.location.replace(b);return}var n=i.alwaysCallback;var e=i.successCallback;_successCallback=function(q,p,o){if(d){core.hideLoading(i)}if(core.procesarRespuestaServidor(q,i,o)){if(n){n(q,p,o)}return}if(e){return e(q,p,o)}else{core._defaulSuccessCallback(q,i)}if(n){n(q,p,o)}};var k=i.errorCallback;_errorCallback=function(q,r,o){if(d){core.hideLoading(i)}var p=i.hiddenError;if(!p){p=false}if(p===false){core.procesarRespuestaServidor(q,i)}if(k){k(q,r,o)}if(n){n(q,r,o)}};var h=i.beforeSendCallback;_beforeSendCallback=function(p,q,o){if(h){h(p,q,o)}};var m=i.dataType;if(!m){m="*"}var g=i.async;if(g){g=true}var a=i.method;if(!a){a="POST"}a=jQuery.trim(a).toUpperCase();if(a==="POST"||a==="GET"){if(d){core.showLoading(i)}var f={url:b,type:a,dataType:m,async:g,data:j,success:_successCallback,error:_errorCallback};if(i.cache!==null){f.cache=i.cache}return jQuery.ajax(f).done(function(o){return o})}else{throw new Error("La función request no soporta el método: "+a+".")}},elementWait:"waitDiv",hideLoading:function(c){var b=c.showLoading;b=(b===undefined)?true:b;if(b){core.requestsCount--;if(core.requestsCount===0){var a=$("#"+core.elementWait);if(a.length!==0){a.hide()}else{}}}},showLoading:function(d){var c=d.showLoading;c=(c===undefined)?true:c;if(c){var b=$("#"+core.elementWait);if(b.length===0){var a=document.createElement("div");a.setAttribute("id",core.elementWait);var e=document.createElement("img");e.setAttribute("id","loaderGif");e.setAttribute("src",$("#loader1").attr("href"));a.appendChild(e);$("body").append($(a))}b.show();core.requestsCount++}},_defaulSuccessCallback:function(d,b){var c=b.writeDocument;if(c){document.open();document.write(d);document.close();return}var e=b.nodeResponse?b.nodeResponse:"content";if(b.dataType!=="script"&&b.dataType!=="json"){var a=$("#"+e);if(a.length!==0){a.html($(d));core.moveTopBody();core.focus()}else{throw new Error("No se pudo encontrar el elemento HTML:"+e+" para setear la respuesta de la petición.")}}},focus:function(a){if(a){$(a).focus()}else{$(".focus-n1").focus();$(".focus-n2").focus()}},getJSON:function(b,c,a){return core.request({url:b,data:c,dataType:"json",successCallback:a})},htmlBase:"",getPageForMenu:function(a,b){console.log("request page menu.");core.clearAllDialogFromBody();if(b===undefined||b===null){b=false}if(b&&$(".btn.btn-navbar.menutop").css("display")!=="none"){console.log("request page menu.init");$("#content").html(core.htmlBase);$(".btn.btn-navbar.menutop").click();core.moveTopBody();console.log("request page menu.end")}return core.request({url:a,method:"GET",dataType:"html",async:true})},getValueFromResponse:function(a,b,d){var c=core.getElementFromResponse(a,b,d);if(c===undefined||c===null){return""}else{return c.value}},getElementFromResponse:function(a,c,d){var b=document;if(a!==null){b=document.createElement("div");b.innerHTML=a}if(!d){d="input"}var e=b.getElementsByTagName(d);return e[c]},procesarRespuestaServidor:function(a,b,h){if(!h){h=a}var f="";var d="";var g="";if(a.status&&a.status===401){window.location.replace(a.statusText)}else{if((a.status&&a.status===500)||(a.statusText&&a.statusText==="error")){f="m1";d=a.statusText.replace(f,"");if(d==="error"){d="Ha ocurrido un error en el sistema."}}else{if(a.status&&a.status===403){f="m3";d=a.statusText.replace(f,"")}else{g=document;if(a!==null){g=document.createElement("div");g.innerHTML=a}var e=g.getElementsByTagName("input");var c=e.mensajeServidor!==undefined&&e.mensajeServidor!==null?e.mensajeServidor.value:"";f=c.substring(0,2);d=c.substring(2)}}}switch(f){case"m0":return false;case"m1":var i=$('.modal[style^="display: block;"]');i.hide();core.showMessageDialog({title:"Error",text:d,type:"error",buttons:{Aceptar:{click:function(){this.dialog2("close");i.show()},primary:true,type:"info"}}});return true;case"m2":alert(d);return true;default:return false}},formatDate:function(b){items=b.split(/[\.\-\/]/);dia=items[0];mes=items[1];anho=items[2];a=anho+","+mes+","+dia;var a=new Date(a);if(!isNaN(a)){return a}else{throw new Error("No se pudo formatear a fecha el valor:"+b)}},dateComapreTo:function(b,a){return this.formatDate(b).getTime()-this.formatDate(a).getTime()},isDate:function(e){var c=e.split(/[\.\-\/]/);var f=parseInt(c[2],10);var d=parseInt(c[1],10);var a=parseInt(c[0],10);var b=new Date(f,d-1,a,0,0,0,0);return d===(b.getMonth()+1)&&a===b.getDate()&&f===b.getFullYear()},modDate:function(d,a){var b=new Date();if(a===undefined||a===null){a=new Date()}console.debug(a);var c=parseInt(d*24*60*60*1000);b.setTime(a.getTime()+c);console.log("Add day:"+d);console.debug(b);return b},areDateEquals:function(b,a){if(b.getFullYear()===a.getFullYear()&&b.getMonth()===a.getMonth()&&b.getDate()===a.getDate()){return true}else{return false}},getSelectedItemId:function(a){if(a===null){return $(".trSelected").data("id")}else{return $(a).find(".trSelected").data("id")}},ajustarPosicion:function(b){b=Math.abs(b);var a=parseInt(b/50);a=a*50;if(b%50>=25){a+=50}return a},removeItemArray:function(b,a){return $.grep(b,function(c){return c!==a})},customValidateForm:function(c,b){c=$(c);if(c.length===0){throw new Error("No se encontro el formulario. Selector:"+c)}if(b){b.parent().find("label.text-error").remove();b.parent().find("div.text-error, input.text-error").removeClass("text-error")}else{c.find("label.text-error").remove();c.find("div.text-error, input.text-error").removeClass("text-error")}var a=$(c).validate({ignoreTitle:true,errorClass:"text-error"});if(b){return a.element(b)}else{return a.form()}},hiddenDialog2:function(a){if(a){a.parent().hide()}},showDialog2:function(a){if(a){a.parent().show()}},clearAllDialogFromBody:function(){$("body>.modal, body>.modal-backdrop").remove()},printESCP:function(b,c,a){if(!b||$.trim(b)===""){throw new Error("Debe definir la url a imprimir.")}if(!c){c={}}if(customQZprint.isLoaded()===true){if(b.indexOf(".text")===-1){b=b+".text"}core.request({url:b,method:"POST",dataType:"html",async:false,extraParams:c,successCallback:function(d){if(!core.procesarRespuestaServidor(d)){customQZprint.printESCP(d,a)}}})}else{if(a&&$.isFunction(a)){a()}}},_printDataJavaPlugin:function(g,a){console.log("_printDataJavaPlugin....");var d=core.getValueFromResponse(g,"impresora");if(!d){if(a&&$.isFunction(a)){a(g)}return}var e=escape(frondend.listaImpresorasDisponibles);var c=escape(d).replace(new RegExp("%5C%5C","g"),"%5C");if(e.indexOf(c)==-1){var f=c.substr(c.indexOf("%5C",1)+3);if(e.indexOf(f)==-1){alert("La impresora: '"+d+"' no está configurada en su máquina.",function(){if(a&&$.isFunction(a)){a(g)}});return}}window.responseTextXX=g;var b=core.getElementFromResponse(g,"container","div");if(!b){throw new Error("No se pudo obtener los datos a imprimir del response.")}var h=b.innerHTML;if(h!==null&&$.trim(h)!==""){console.log("info.ok....");customQZprint.printESCP(g,a)}else{if(a&&$.isFunction(a)){a()}}},_printDataJsPrintSetup:function(g,m,d){console.log("_printDataJsPrintSetup....");var q=core.getValueFromResponse(m,"impresora");if(!q){if(d&&$.isFunction(d)){d(m)}return}var i=escape(frondend.listaImpresorasDisponibles);var r=escape(q).replace(new RegExp("%5C%5C","g"),"%5C");if(i.indexOf(r)==-1){var p=r.substr(r.indexOf("%5C",1)+3);if(i.indexOf(p)==-1){alert("La impresora: '"+q+"' no está configurada en su máquina.",function(){if(d&&$.isFunction(d)){d(m)}});return}}var n=core.getValueFromResponse(m,"silentPrint");if(!n){throw new Error("No se pudo obtener el tipo de impresion del response.")}var c=core.getValueFromResponse(m,"numCopies");if(!c){throw new Error("No se pudo obtener la cantidad de copias de impresion del response.")}var k=core.getValueFromResponse(m,"paperSizeData");if(!k){throw new Error("No se pudo obtener el tamaño del papel para la impresion del response.")}window.responseTextXX=m;var b=core.getElementFromResponse(m,"container","div");if(!b){throw new Error("No se pudo obtener los datos a imprimir del response.")}var f=b.innerHTML;if(f!==null&&$.trim(f)!==""){console.log("info.ok....");var j=g.contentWindow;var o=g.contentDocument||j.document;o.head.appendChild($("#frontendBase").clone()[0]);var a=o.createElement("div");o.body.appendChild(a);a.innerHTML=f;var h=o.body;$(g).css("position","absolute");$(h).css("padding","0px");$(h).css("margin","0px");$(a).css("position","absolute");$(a).css("padding","0px");$(a).css("margin","0px");console.log("x1");jsPrintSetup.setPrinter(q);jsPrintSetup.setSilentPrint(true);jsPrintSetup.setOption("orientation",jsPrintSetup.kPortraitOrientation);jsPrintSetup.setOption("marginTop",0);jsPrintSetup.setOption("marginBottom",0);jsPrintSetup.setOption("marginLeft",0);jsPrintSetup.setOption("marginRight",0);jsPrintSetup.setOption("headerStrCenter","");jsPrintSetup.setOption("headerStrLeft","");jsPrintSetup.setOption("headerStrRight","");jsPrintSetup.setOption("footerStrCenter","");jsPrintSetup.setOption("footerStrLeft","");jsPrintSetup.setOption("footerStrRight","");jsPrintSetup.setOption("shrinkToFit",false);jsPrintSetup.setOption("printBGColors",1);jsPrintSetup.setOption("printBGImages",1);jsPrintSetup.setOption("numCopies",c);console.log("x2");k=parseInt(k);core.definePaperSize(k,5,5);console.log("x3");jsPrintSetup.setPaperSizeData(k);console.log("x4");console.log("x5");console.log("x6");console.log("printWindow.ok..INIT..");try{jsPrintSetup.printWindow(j)}catch(l){console.debug(l)}console.log("printWindow.ok..END..");setTimeout(function(){if(d&&$.isFunction(d)){d()}document.body.removeChild(g)},100)}else{if(d&&$.isFunction(d)){d()}}},progressListener:{iframe:null,successCallback:null,stateIsRequest:false,QueryInterface:function(a){if(a.equals(Components.interfaces.nsIWebProgressListener)||a.equals(Components.interfaces.nsISupportsWeakReference)||a.equals(Components.interfaces.nsISupports)){return this}throw Components.results.NS_NOINTERFACE},onStateChange:function(d,b,c,f){console.debug("onStateChange: "+c+", aStatus:"+f);if(c===262160||c==="262160"){jsPrintSetup.setSilentPrint(false);var a=this.successCallback;var e=this.iframe;setTimeout(function(){if(a&&$.isFunction(a)){a()}document.body.removeChild(e)},3000)}return 0},onLocationChange:function(c,a,b){return 0},onProgressChange:function(c,a,e,f,d,b){},onStatusChange:function(c,a,b,d){},onSecurityChange:function(b,a,c){}},showConfigarationJsPrintSetup:function(){},checkInstalljsPrintSetup:function(){if(typeof(jsPrintSetup)==="undefined"){return false}else{return true}},checkInstallCustomQZprint:function(){if(typeof(customQZprint)==="undefined"){return false}else{return true}},installjsPrintSetup:function(a){if(!a||$.trim(a)===""){return}confirm("No esta instalado el plugin de impresión.\nDesea instalar el plugin ahora?",function(b){if(b===true){window.open(a)}})},definePaperSize:function(f,c,e){var b="CustomPaperLinux"+f;var d="custom_max_"+c+"x"+e+"mm";var a="Custom paper "+c+"x"+e+"mm";jsPrintSetup.setPaperSizeUnit(jsPrintSetup.kPaperSizeMillimeters);jsPrintSetup.definePaperSize(f,f,d,d,d,c,e,jsPrintSetup.kPaperSizeMillimeters);jsPrintSetup.setPaperSizeData(f)},isMovilInternal:null,isMovil:function(){if(core.isMovilInternal===null){try{var a=navigator.userAgent||navigator.vendor||window.opera;if(/android.+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|meego.+mobile|midp|mmp|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i.test(a)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(di|rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(a.substr(0,4))){core.isMovilInternal=true}else{core.isMovilInternal=false}}catch(b){core.isMovilInternal=true}}return core.isMovilInternal},lastTimeReported:null,reportActivity:function(){try{var c=Date.now();sessionStorage.setItem("lastActivity",c);if(core.lastTimeReported===null){core.lastTimeReported=c}else{var b=c-core.lastTimeReported;if(b>60000){core.lastTimeReported=c;console.debug("pathWorking")}}}catch(a){}},timeExpired:600000,checkInactivity:function(){try{var diff=Date.now()-eval(sessionStorage.getItem("lastActivity"));if(diff>core.timeExpired){$("a.logout").click()}}catch(e){$("a.logout").click()}},checkEstacion:function(){var b=localStorage.getItem("est-id");if(b!==null&&$.trim(b)!==""){var a=$("#idEstacionTopMenu").val();if(a!==null&&$.trim(a)!==""){if($.trim(a)!==$.trim(b)){var c=localStorage.getItem("est-name");var d=$("#nombreEstacionTopMenu").val();alert("Usted se encuentra en "+c+" pero está asignado en el sistema a la estación "+d+".",function(){$("a.logout").click()})}}}},addDiasAFecha:function(c,a){if(a===null||a===undefined){a=new Date()}if(c===null||a===undefined){c=0}c=parseInt(c);var b=a.getTime()+(86400000*c);return new Date(b)},checkExistError:function(a){if(a.status==="1"){return false}else{if(a.status==="4"){return"Código de barra incorecto"}else{if(a.status==="7"){return"El identificador de encomienda no existe."}else{if(a.status==="6"){return a.message}else{if(a.status==="2"){return"Ha ocurrido un error en el sistema."}else{if(a.status==="3"){return"Error con las credenciales."}else{return"Ha ocurrido un error en el sistema."}}}}}}},moveTopBody:function(){$("html,body").animate({scrollTop:$("body").offset().top},500)},isInt:function(a){return typeof a==="number"&&isFinite(a)&&a%1===0},customParseFloat:function(a){if(typeof a==="string"){return parseFloat(a.replace(/,/g,"."))}else{return parseFloat(a)}},showNotification:function(a){if(core.isMovil()){return}if(!a){a={}}if(a.text&&$.trim(a.text)!==""){if(!a.title){a.title="FDN"}if(!a.type){a.type="info"}a.styling="bootstrap2";a.delay=15000;new PNotify(a)}else{console.log("No se especifico el texto del mensaje.")}},};
frondend={listaImpresorasDisponibles:"",funcionesAddOnload:function(){this._init();this._conectEvents();core.htmlBase=$("#content").html();topMenu.funcionesAddOnload();$(document).keyup(frondend.checkKeyUp);frondend.checkEndLoading()},checkEndLoading:function(){console.log("checkEndLoading.init");var pja=$("#pja").val();if(eval(pja)){var qz=document.getElementById("qz");if(qz){qz.onLoad=function(){console.log("onLoadApplet.end");frondend.endLoad()};setTimeout(function(){frondend.endLoad()},5000)}else{frondend.endLoad()}}else{frondend.endLoad()}},_endLoaded:false,endLoad:function(){console.log("checkEndLoading.ok");if(frondend._endLoaded===false){frondend._endLoaded=true;var a=document.getElementById("loadingSystemDIV");if(a!==null){a.remove()}frondend.loadImpresorasDisponibles()}},timeCheckNotificaciones:300000,lastTimeMove:null,_init:function(){frondend.checkNotificaciones();setInterval(frondend.checkNotificaciones,frondend.timeCheckNotificaciones);$("body").click(function(){core.reportActivity()});$("body").mousemove(function(b){if(frondend.lastTimeMove===null){frondend.lastTimeMove=Date.now();core.reportActivity()}else{var a=Date.now()-frondend.lastTimeMove;if(a>1000){frondend.lastTimeMove=Date.now();core.reportActivity()}}});if(!core.isMovil()){console.log("seting checkInactivity");setInterval(core.checkInactivity,core.timeExpired)}core.checkEstacion()},_conectEvents:function(){$("li a.lateralIzq").click(function(a){a.preventDefault();a.stopPropagation();core.getPageForMenu($(this).attr("href"),true)});$(".linkHelpTopMenu").click(function(a){a.preventDefault();a.stopPropagation();core.getPageForMenu($(this).attr("href"),true)});$(".logout").click(function(a){a.preventDefault();a.stopPropagation();core.request({url:$(this).attr("href"),ajaxRequest:false,showLoading:true})});$("#cambiarContrasenaTopMenu").click(frondend.loadSubPage);$("#impresoraState").click(frondend.clicImpresoraState)},clicImpresoraState:function(b){b.preventDefault();b.stopPropagation();var a=frondend.listaImpresorasDisponibles;if($.trim(a)===""){a="No se han detectado impresoras."}else{a=a.replace(/,/g,"<BR>")}a+="<BR><BR>";var c='<div class="container-fluid"><div class="row-fluid"><div class="span12">'+a+"</div></div></div>";core.showMessageDialog({title:"IMPRESORAS DISPONIBLES",text:c,buttons:{Recargar:function(){frondend.loadImpresorasDisponibles()},Cerrar:function(){this.dialog2("close")}}})},loadImpresorasDisponibles:function(){console.log("loadImpresorasDisponibles-init");var pja=$("#pja").val();if(eval(pja)){if(core.checkInstallCustomQZprint()===true&&customQZprint.isLoaded()){console.log("loadImpresorasDisponibles from QZprint");core.showNotification({text:"Iniciando la detección de las impresoras."});customQZprint.findPrinters(function(listaImpresoras){frondend.listaImpresorasDisponibles=listaImpresoras;frondend.finishLoadImpresoras()})}else{console.log("No se pudo determinar el componente de impresión.");core.showNotification({text:"No se pudo determinar el componente de impresión (Java)."})}}else{if(core.checkInstalljsPrintSetup()===true){console.log("loadImpresorasDisponibles from jsPrintSetup");core.showNotification({text:"Iniciando la detección de las impresoras."});frondend.listaImpresorasDisponibles=jsPrintSetup.getPrintersList();frondend.finishLoadImpresoras()}else{core.showNotification({text:"No se pudo determinar la lista de impresoras."});console.log("No se pudo determinar el componente de impresión.")}}},finishLoadImpresoras:function(){$("#impresoraState").attr("src",$("#impresoraOnline").attr("href"));core.showNotification({text:"Finalizó la detección de las impresoras."})},checkKeyUp:function(b){if(b.shiftKey&&(b.which===49||b.which===50)){console.log("procesando-init");var c=$(".select2-input.select2-focused").val();c=c.replace(/!/g,"");c=c.replace(/@/g,"");c=c.replace(/#/g,"");c=c.replace(/$/g,"");c=c.replace(/"/g,"");$(".select2-input.select2-focused").val(c);console.debug(c);var a=$("input[id^='s2id']:disabled");$.each(a,function(e,f){var f=$(f);console.debug(f);var d=f.parent().parent().find(".autocheck");console.debug(d);if(d.length!==0){d.select2("close");console.log("clicc...");if(b.which===49){sessionStorage.setItem("temp_value_key1",c)}else{if(b.which===50){sessionStorage.setItem("temp_value_key2",c)}}f.parent().parent().find(".btn.add").click()}});return false}},checkExpiredPassword:function(a){core.request({url:$("#pathCheckExpiredPassword").val(),method:"GET",dataType:"json",async:true,showLoading:false,successCallback:function(b){if(b.dias<=1){alert("Su contraseña expira hoy, debe cambiarla.",function(){$("#cambiarContrasenaTopMenu").click()})}else{if(b.dias<20){confirm("Su contraseña expira en "+b.dias+" días. Desea cambiarla ahora?",function(c){if(c===true){$("#cambiarContrasenaTopMenu").click()}})}}if(a&&$.isFunction(a)){a()}}})},totalNotificaciones:0,notificacionActual:0,notificaciones:[],chekingProgress:false,checkNotificaciones:function(a){console.log("checkNotificaciones.init");if(!core.isMovil()){if(frondend.chekingProgress===false){frondend.chekingProgress=true;core.request({url:$("#pathCheckNotificaciones").val(),method:"GET",dataType:"json",async:true,hiddenError:true,showLoading:false,successCallback:function(d){var b=d.items;if(b!==undefined&&b!==null&&b.length!==0){frondend.notificacionActual=0;frondend.totalNotificaciones=b.length;frondend.notificaciones=b;var c=b[0];$(".notificacionDiv").removeClass("hidden");console.log("show item: "+frondend.notificacionActual);var e="Info "+(frondend.notificacionActual+1)+" de "+frondend.totalNotificaciones+". "+c.text;$(".notificacionText").html(e);$(".notificacionText").marquee({duration:c.time,pauseOnHover:false}).unbind("finished").bind("finished",function(){$(".notificacionText").html("&nbsp;");setTimeout(function(){frondend.notificacionActual++;console.log("show item: "+frondend.notificacionActual);if(frondend.notificacionActual>=frondend.totalNotificaciones){frondend.notificacionActual=0}var f=b[frondend.notificacionActual];var g="Info "+(frondend.notificacionActual+1)+" de "+frondend.totalNotificaciones+". "+f.text;$(".notificacionText").html(g);$(".notificacionText").marquee({duration:f.time,pauseOnHover:false})},500)})}else{frondend.notificaciones=[];$(".notificacionText").text("");$(".notificacionDiv").addClass("hidden")}if(a&&$.isFunction(a)){a()}frondend.chekingProgress=false},errorCallback:function(c,d,b){console.log("Ocurrio un error cargando las notificaciones.")}})}}else{console.log("checkNotificaciones.No se muestra en celulares")}},loadPage:function(){$("#clouseContentModal").click(function(a){a.preventDefault();a.stopPropagation();core.request({url:$(this).attr("href"),dataType:"html",method:"GET",async:true})})},linkFilter:function(h,g,d,f,b){h.preventDefault();h.stopPropagation();if(!g){g=$(this)}if(!d){d=$("#grid")}if(!f){f=$("#filtersForm")}var c=f.formSerialize();var a=f.find('input[type="checkbox"]');$.each(a,function(e,i){i=$(i);if(i.prop("checked")===false){c+="&"+i.prop("name")+"=0"}});d.flexOptions({newp:1,query:c}).flexReload();if(b&&$.isFunction(b)){b()}},loadSubPage:function(e,link,successCallback,options){console.log("loadSubPage-init");e.preventDefault();e.stopPropagation();if(options===undefined||options===null){options={}}var data={};if(!link){link=$(this)}var index=link.data("index");if(index){var selected=null;if(eval(index)===true||$.trim(index)===""){selected=core.getSelectedItemId($("#grid"))}else{if(eval(index)===false){}else{selected=$("#"+index).val()}}if(eval(index)!==false){if(selected===null||$.trim(selected)===""){var message=link.data("index-message");if(!message||message===null||$.trim(message)===""){message="Debe seleccionar un elemento."}alert(message);return}else{data.id=selected}}}var name=link.data("title");if(!name){name=link.text()}var print=link.data("print");var email=link.data("email");var printesc=link.data("printesc");var autoOpenFile=link.data("autoopenfile");var showDialog=link.data("dialog");if(eval(showDialog)===false){console.log("loadSubPage-showDialog-init");core.request({url:link.attr("href"),method:"GET",extraParams:data,dataType:"html",async:true})}else{if(print&&$.trim(print)!==""){console.log("loadSubPage-print-init");if(print==="method1"){frondend.printFactura(link.attr("href"),{ids:data.id})}else{if(print==="method2"){frondend.printVoucherBoleto(link.attr("href"),{ids:data.id})}else{if(print==="method3"){frondend.printFactura(link.attr("href"),{ids:data.id})}else{if(print==="method4"){frondend.printDataEncomienda(link.attr("href"),{ids:data.id})}else{}}}}}else{if(eval(printesc)===true){console.log("loadSubPage-printesc-init");core.printESCP(link.attr("href"),{ids:data.id})}else{if(eval(email)===true){console.log("loadSubPage-email-init");core.request({url:link.attr("href"),method:"POST",dataType:"html",async:false,extraParams:{ids:data.id},successCallback:function(responseText){if(!core.procesarRespuestaServidor(responseText)){alert("Operación realizada satisfactoriamente.")}}})}else{if(autoOpenFile!==null&&$.trim(autoOpenFile)!==""){console.log("loadSubPage-autoOpenFile-init");core.request({url:link.attr("href"),method:"POST",dataType:"html",async:false,extraParams:{id:data.id,type:autoOpenFile},successCallback:function(responseText){if(!core.procesarRespuestaServidor(responseText)){if(typeof(jsPrintSetup)!=="undefined"){jsPrintSetup.setSilentPrint(false)}var urlPDF=core.getValueFromResponse(responseText,"data");window.open(urlPDF)}}})}else{console.debug("loadSubPage-default-init");var dialog=core.request({url:link.attr("href"),method:"GET",extraParams:data,dataType:"html",async:true,successCallback:function(success){console.debug("loadSubPage-default-successCallback-init");console.debug(success);var component=document.createElement("div");component.innerHTML=success;var existForms=component.getElementsByTagName("form").length!==0;var buttons={};var fullscreen=$(link).data("fullscreen");if(existForms===true){buttons.Aceptar={primary:true,type:"info",click:function(){if(eval(link.data("find"))===true){var selectGrid=link.data("grid");if(!selectGrid){throw new Error("La subpage está en modalidad de buscador, debe especificar la propiedad data-grid en el link.")}var selected=core.getSelectedItemId(selectGrid);if(selected===null||$.trim(selected)===""){var message=link.data("find-message");if(!message||message===null||$.trim(message)===""){message="Debe seleccionar un elemento."}alert(message);return}else{if(successCallback&&$.isFunction(successCallback)){successCallback(selected);if(eval(fullscreen)===true){$("body").css("overflow-y","auto")}$("div[id*='dialog_internal']").dialog2("close")}else{throw new Error("La subpage está en modalidad de buscador, debe especificar una successCallback.")}}}else{var form=$("div[id*='dialog_internal']").find("form");if(form.length===0){throw new Error("No se encontro el formulario en el dialogo.")}var nit=form.find(".inputNIT").val();if(nit===null||$.trim(nit)===""){form.find(".inputNIT").val("CF")}var validator=$(form).validate({ignoreTitle:true,errorClass:"text-error"});if(validator.form()===true){var url=form.attr("action");$(form).ajaxSubmit({target:url,type:"POST",dataType:"html",cache:false,async:false,beforeSubmit:function(arr,$form,options){core.showLoading({showLoading:true})},error:function(){core.hideLoading({showLoading:true})},success:function(responseText){core.hideLoading({showLoading:true});if(!core.procesarRespuestaServidor(responseText)){if(eval(fullscreen)===true){$("body").css("overflow-y","auto")}$("div[id*='dialog_internal']").dialog2("close");$("#grid").flexReload();var confirmarOperacion=options.confirmarOperacion;if(confirmarOperacion===undefined||confirmarOperacion===null){confirmarOperacion=true}if(confirmarOperacion){alert("Operación realizada satisfactoriamente.",function(){var data=core.getValueFromResponse(responseText,"data");if(successCallback&&$.isFunction(successCallback)){successCallback(data)}})}else{var data=core.getValueFromResponse(responseText,"data");if(successCallback&&$.isFunction(successCallback)){successCallback(data)}}}}})}}}};buttons.Cancelar={click:function(){var modal=this;modal.parent().hide();confirm("¿Está seguro que desea cancelar?",function(confirmed){if(confirmed===true){$("body").css("overflow-y","auto");modal.dialog2("close")}else{modal.parent().show()}})}}}else{buttons.Cancelar={primary:true,type:"info",click:function(){$("body").css("overflow-y","auto");this.dialog2("close")}}}core.showMessageDialog({title:name,fullscreen:fullscreen,compact:true,text:success,defaultButtonOFF:true,buttons:buttons});core.focus()}})}}}}}},printFactura:function(b,c,a){if(!b||$.trim(b)===""){throw new Error("Debe definir la url a imprimir.")}if(!c){c={}}if(!(core.checkInstalljsPrintSetup()===true||core.checkInstallCustomQZprint()===true)){alert("No se detecto ningun componente para imprimir facturas.",function(){if(a&&$.isFunction(a)){a()}})}else{core.request({url:b,method:"POST",dataType:"html",async:false,extraParams:c,successCallback:function(d){frondend.printFacturaInternal(d,a)}})}},printFacturaInternal:function(responseText,successCallback){if(!core.procesarRespuestaServidor(responseText)){var pluginJava=core.getValueFromResponse(responseText,"pluginJava");pluginJava=eval(pluginJava);if(pluginJava===1||pluginJava===true){core._printDataJavaPlugin(responseText,successCallback)}else{var iframe=document.createElement("iframe");iframe.setAttribute("src","about:blank");iframe.onload=function(){core._printDataJsPrintSetup(iframe,responseText,successCallback)};document.body.appendChild(iframe)}}else{if(successCallback&&$.isFunction(successCallback)){successCallback(responseText)}}},printVoucherBoleto:function(c,d,a){if(!c||$.trim(c)===""){throw new Error("Debe definir la url a imprimir.")}if(!d){d={}}var b=$("#idEstacionTopMenu").val();if(d.pdf===true||$.trim(b)===""||$.trim(frondend.listaImpresorasDisponibles)===""||core.checkInstalljsPrintSetup()===false){if(c.indexOf(".pdf")===-1){c=c+".pdf"}core.request({url:c,method:"POST",dataType:"html",async:false,extraParams:d,successCallback:function(e){if(!core.procesarRespuestaServidor(e)){setTimeout(function(){var f=core.getValueFromResponse(e,"data");window.open(f)},500)}if(a&&$.isFunction(a)){a(e)}}})}else{core.request({url:c,method:"POST",dataType:"html",async:false,extraParams:d,successCallback:function(f){if(!core.procesarRespuestaServidor(f)){var e=document.createElement("iframe");e.setAttribute("src","about:blank");e.onload=function(){core._printDataJsPrintSetup(e,f,a)};document.body.appendChild(e)}else{if(a&&$.isFunction(a)){a(f)}}}})}},printDataEncomienda:function(c,d,a){if(!c||$.trim(c)===""){throw new Error("Debe definir la url a imprimir.")}if(!d){d={}}var b=$("#idEstacionTopMenu").val();if(d.pdf===true||$.trim(b)===""||$.trim(frondend.listaImpresorasDisponibles)===""||core.checkInstalljsPrintSetup()===false){if(c.indexOf(".pdf")===-1){c=c+".pdf"}core.request({url:c,method:"POST",dataType:"html",async:false,extraParams:d,successCallback:function(e){if(!core.procesarRespuestaServidor(e)){setTimeout(function(){var f=core.getValueFromResponse(e,"data");window.open(f)},500)}if(a&&$.isFunction(a)){a(e)}}})}else{core.request({url:c,method:"POST",dataType:"html",async:false,extraParams:d,successCallback:function(f){if(!core.procesarRespuestaServidor(f)){var e=document.createElement("iframe");e.setAttribute("src","about:blank");e.onload=function(){core._printDataJsPrintSetup(e,f,a)};document.body.appendChild(e)}else{if(a&&$.isFunction(a)){a(f)}}}})}}};
topMenu={funcionesAddOnload:function(){this._init();this._conectEvents()},_init:function(){},_conectEvents:function(){$("#consultarTarifaBoleto").click(topMenu.clickConsultarTarifaBoleto);$("#consultarTarifaEncomienda").click(topMenu.clickConsultarTarifaEncomienda)},clickConsultarTarifaBoleto:function(a){a.preventDefault();a.stopPropagation();core.request({url:$(this).attr("href"),method:"GET",async:false,successCallback:function(b){core.showMessageDialog({title:"Consultar Tarifa de Boleto",text:$(b),removeOnClose:true,showCloseHandle:true});topMenu._initBoleto()}})},_initBoleto:function(){$("#consultarTarifaBoletoEstacionOrigen").select2({allowClear:true,data:[]});$("#consultarTarifaBoletoEstacionOrigen").on("change",topMenu.getTarifaBoleto);$("#consultarTarifaBoletoEstacionDestino").select2({allowClear:true,data:[]});$("#consultarTarifaBoletoEstacionDestino").on("change",topMenu.getTarifaBoleto);$("#consultarTarifaBoletoClaseBus").select2({allowClear:true,data:[]});$("#consultarTarifaBoletoClaseBus").on("change",topMenu.getTarifaBoleto);$("#consultarTarifaBoletoClaseAsiento").select2({allowClear:true,data:[]});$("#consultarTarifaBoletoClaseAsiento").on("change",topMenu.getTarifaBoleto);$("#consultarTarifaBoletoTipoPago").select2({allowClear:true,data:[]});$("#consultarTarifaBoletoTipoPago").on("change",topMenu.getTarifaBoleto);$("#consultarTarifaBoletoHoraInicialSalida").timepicker({minuteStep:1,showInputs:true,template:"modal",});$("#consultarTarifaBoletoHoraInicialSalida").on("hide.timepicker",topMenu.getTarifaBoleto);topMenu.loadDatosConsultarTarifaBoleto()},loadDatosConsultarTarifaBoleto:function(){core.request({url:$("#pathLoadDatosConsultarTarifaBoletoTopMenu").prop("value"),method:"GET",dataType:"json",async:true,showLoading:false,successCallback:function(a){$("#consultarTarifaBoletoEstacionOrigen").select2({allowClear:true,data:{results:a.optionEstaciones}});$("#consultarTarifaBoletoEstacionDestino").select2({allowClear:true,data:{results:a.optionEstaciones}});$("#consultarTarifaBoletoClaseBus").select2({allowClear:true,data:{results:a.optionsClasesBus}});$("#consultarTarifaBoletoClaseAsiento").select2({allowClear:true,data:{results:a.optionClasesAsiento}});$("#consultarTarifaBoletoTipoPago").select2({allowClear:true,data:{results:a.optionsTipoPago}});$("#consultarTarifaBoletoTipoPago").select2("val",a.optionsTipoPago[0].id)}})},getTarifaBoleto:function(){var e=$("#consultarTarifaBoletoEstacionOrigen").val();var d=$("#consultarTarifaBoletoEstacionDestino").val();var b=$("#consultarTarifaBoletoClaseBus").val();var a=$("#consultarTarifaBoletoClaseAsiento").val();var c=$("#consultarTarifaBoletoTipoPago").val();var f=$("#consultarTarifaBoletoHoraInicialSalida").val();if(e!==null&&$.trim(e)!==""&&$("#consultarTarifaBoletoEstacionOrigen")[0].checkValidity()&&d!==null&&$.trim(d)!==""&&$("#consultarTarifaBoletoEstacionDestino")[0].checkValidity()&&b!==null&&$.trim(b)!==""&&$("#consultarTarifaBoletoClaseBus")[0].checkValidity()&&a!==null&&$.trim(a)!==""&&$("#consultarTarifaBoletoClaseAsiento")[0].checkValidity()&&c!==null&&$.trim(c)!==""&&$("#consultarTarifaBoletoTipoPago")[0].checkValidity()&&$("#consultarTarifaBoletoHoraInicialSalida")[0].checkValidity()){core.request({url:$("#pathGetTarifaBoletoTopMenu").prop("value"),method:"POST",dataType:"json",async:false,extraParams:{estacionOrigen:e,estacionDestino:d,claseBus:b,claseAsiento:a,tipoPago:c,horaInicialSalida:f},successCallback:function(g){$("#consultarTarifaBoletoTarifa").val(g.result)}})}else{$("#consultarTarifaBoletoTarifa").val("")}},clickConsultarTarifaEncomienda:function(a){a.preventDefault();a.stopPropagation();core.request({url:$(this).attr("href"),method:"GET",async:false,successCallback:function(b){core.showMessageDialog({title:"Consultar Tarifa de Encomienda",text:$(b),removeOnClose:true,showCloseHandle:true});topMenu._initTarifaEncomienda()}})},_initTarifaEncomienda:function(){$("#consultarTarifaEncomiendaEstacionOrigen").select2({allowClear:true,data:[]});$("#consultarTarifaEncomiendaEstacionDestino").select2({allowClear:true,data:[]});$("#consultarTarifaEncomiendaTipoEncomienda").select2({allowClear:true,data:[]});$("#consultarTarifaEncomiendaTipoEncomienda").on("change",topMenu.checkTipoEncomiena);$("#consultarTarifaEncomiendaTipoEncomiendaEspecial").select2({allowClear:true,data:[]});$("input.changeTarifaTopMenu").on("change",topMenu.getTarifaEncomienda);topMenu.checkTipoEncomiena();topMenu.loadDatosConsultarEncomienda()},loadDatosConsultarEncomienda:function(){$("#consultarTarifaEncomiendaEstacionOrigen").select2("val","");$("#consultarTarifaEncomiendaEstacionDestino").select2("val","");$("#consultarTarifaEncomiendaTipoEncomienda").select2("val","");$("#consultarTarifaEncomiendaCantidad").val("");$("#consultarTarifaEncomiendaTipoEncomiendaEspecial").select2("val","");$("#consultarTarifaEncomiendaPeso").val("");$("#consultarTarifaEncomiendaAlto").val("");$("#consultarTarifaEncomiendaAncho").val("");$("#consultarTarifaEncomiendaProfundidad").val("");core.request({url:$("#pathLoadDatosConsultarTarifaEncomiendaTopMenu").prop("value"),method:"GET",dataType:"json",async:true,showLoading:false,successCallback:function(a){$("#consultarTarifaEncomiendaEstacionOrigen").select2({allowClear:true,data:{results:a.optionEstaciones}});$("#consultarTarifaEncomiendaEstacionDestino").select2({allowClear:true,data:{results:a.optionEstaciones}});$("#consultarTarifaEncomiendaTipoEncomienda").select2({allowClear:true,data:{results:a.optionTipoEncomienda}});$("#consultarTarifaEncomiendaTipoEncomiendaEspecial").select2({allowClear:true,data:{results:a.optionTipoEncomiendaEspecial}})}})},getTarifaEncomienda:function(){console.log("getTarifaEncomiendaEfectivo-init");var e=$("#consultarTarifaEncomiendaEstacionOrigen").val();var f=$("#consultarTarifaEncomiendaEstacionDestino").val();var h=$("#consultarTarifaEncomiendaTipoEncomienda").val();var g=$("#consultarTarifaEncomiendaCantidad").val();var a=$("#consultarTarifaEncomiendaTipoEncomiendaEspecial").val();var i=$("#consultarTarifaEncomiendaPeso").val();var c=$("#consultarTarifaEncomiendaAlto").val();var b=$("#consultarTarifaEncomiendaAncho").val();var d=$("#consultarTarifaEncomiendaProfundidad").val();if(e!==null&&$.trim(e)!==""&&f!==null&&$.trim(f)!==""&&h!==null&&$.trim(h)!==""&&g!==null&&$.trim(g)!==""&&$("#consultarTarifaEncomiendaCantidad")[0].checkValidity()){if(h==="2"&&(a===null||$.trim(a)==="")){$("#consultarTarifaEncomiendaTarifa").val("");return}if(h==="3"&&(i===null||$.trim(i)===""||!$("#consultarTarifaEncomiendaCantidad")[0].checkValidity()||c===null||$.trim(c)===""||!$("#consultarTarifaEncomiendaAlto")[0].checkValidity()||b===null||$.trim(b)===""||!$("#consultarTarifaEncomiendaAncho")[0].checkValidity()||d===null||$.trim(d)===""||!$("#consultarTarifaEncomiendaProfundidad")[0].checkValidity())){$("#consultarTarifaEncomiendaTarifa").val("");return}core.request({url:$("#pathGetTarifaEncomiendaTopMenu").prop("value"),method:"POST",dataType:"json",async:false,extraParams:{estacionOrigen:e,estacionDestino:f,tipoEncomienda:h,cantidad:g,tipoEncomiendaEspecial:a,peso:i,alto:c,ancho:b,profundidad:d},successCallback:function(j){$("#consultarTarifaEncomiendaTarifa").val(j.result)}})}else{$("#consultarTarifaEncomiendaTarifa").val("")}},checkTipoEncomiena:function(){var a=$("#consultarTarifaEncomiendaTipoEncomienda").val();if(a===null||$.trim(a)===""){$("#cteTipoEncomiendaEspecialDIV").hide();$("#ctePaqueteDIV").hide();$("#consultarTarifaEncomiendaCantidad").val("");$("#consultarTarifaEncomiendaTipoEncomiendaEspecial").select2("val","");$("#consultarTarifaEncomiendaPeso").val("");$("#consultarTarifaEncomiendaAlto").val("");$("#consultarTarifaEncomiendaAncho").val("");$("#consultarTarifaEncomiendaProfundidad").val("")}else{if($.trim(a)==="1"){$("#cteTipoEncomiendaEspecialDIV").hide();$("#ctePaqueteDIV").hide();$("#consultarTarifaEncomiendaTipoEncomiendaEspecial").select2("val","");$("#consultarTarifaEncomiendaPeso").val("");$("#consultarTarifaEncomiendaAlto").val("");$("#consultarTarifaEncomiendaAncho").val("");$("#consultarTarifaEncomiendaProfundidad").val("")}else{if($.trim(a)==="2"){$("#cteTipoEncomiendaEspecialDIV").show();$("#ctePaqueteDIV").hide();$("#consultarTarifaEncomiendaTipoEncomiendaEspecial").select2("val","")}else{if($.trim(a)==="3"){$("#cteTipoEncomiendaEspecialDIV").hide();$("#ctePaqueteDIV").show();$("#consultarTarifaEncomiendaPeso").val("");$("#consultarTarifaEncomiendaAlto").val("");$("#consultarTarifaEncomiendaAncho").val("");$("#consultarTarifaEncomiendaProfundidad").val("")}}}}}};
page={funcionesAddOnload:function(){this._init();this._conectEvents()},_init:function(){$(".fancybox").fancybox({helpers:{title:{type:"inside",position:"bottom"}}})},_conectEvents:function(){$("a.linkHelp").click(frondend.loadSubPage)},clicLinkLoadImage:function(b){b.preventDefault();b.stopPropagation();var a=$(this);core.request({url:$("#pathDataImagen").val(),type:"POST",dataType:"json",async:true,extraParams:{id:a.data("idimagen"),full:true},successCallback:function(c){if(c.image){$.fancybox.open({content:c.image,title:c.title,helpers:{title:{type:"inside",position:"bottom"}}})}}})}};
frondendSalidas={timeRefreshGrid:5,inAction:false,funcionesAddOnload:function(){this._init();this._conectEvents()},_init:function(){var a=new Date();$("#rangoFecha").daterangepicker({format:"DD/MM/YYYY",startDate:a,endDate:a,dateLimit:moment.duration(1,"years")});$("#rangoFecha").data("daterangepicker").clickApply();$("#grid").flexigrid({url:$("#grid").data("url"),dataType:"json",singleSelect:true,query:"",rpOptions:[5,10,15,20,25,30,40,50],colModel:[{display:"ID",name:"id",width:70,sortable:true,align:"center"},{display:"Fecha y Hora",name:"fecha",width:120,sortable:true,align:"center"},{display:"Itinerario",name:"idItinerario",width:60,sortable:false,hide:true,align:"center"},{display:"Cíclico",name:"ciclico",width:70,sortable:false,align:"center"},{display:"Empresa",name:"empresa",width:100,sortable:false,align:"left"},{display:"Origen",name:"origen",width:120,sortable:false,align:"left"},{display:"Destino",name:"destino",width:120,sortable:false,align:"left"},{display:"Estado",name:"estado",width:80,sortable:true,align:"center"},{display:"Bus",name:"bus",width:80,sortable:true,align:"center"},{display:"Piloto1",name:"piloto1",width:90,sortable:false,align:"center"},{display:"Piloto2",name:"piloto2",width:90,sortable:false,align:"center"},{display:"Tarjeta",name:"tarjeta",width:80,sortable:true,align:"center"},{display:"Tipo de Bus",name:"tipoBus",width:200,sortable:true,align:"left"},{display:"Clase",name:"claseBus",width:120,sortable:false,align:"left"}],usepager:true,useRp:true,rp:15,height:300,showTableToggleBtn:false});if(core.checkInstalljsPrintSetup()){jsPrintSetup.setSilentPrint(false)}},_conectEvents:function(){$("#linkFilter").click(frondend.linkFilter);$("li a.menuSalida").click(frondend.loadSubPage)}};
asignarSalida={funcionesAddOnload:function(){this._init();this._conectEvents()},_init:function(){$("#asignar_salida_command_bus").select2({allowClear:true});$("#asignar_salida_command_piloto").select2({allowClear:true});$("#asignar_salida_command_pilotoAux").select2({allowClear:true})},_conectEvents:function(){}};
consultarEsquema={funcionesAddOnload:function(){this._init();this._conectEvents()},_init:function(){$("#fecha").datepicker({format:"dd/mm/yyyy",todayBtn:true,language:"es",autoclose:true,todayHighlight:true});$("#fecha").datepicker("setDate",new Date());consultarEsquema.changeFecha()},_conectEvents:function(){$("#fecha").datepicker().on("changeDate",function(a){a.preventDefault();a.stopPropagation();consultarEsquema.changeFecha()});$("#salida").on("change",consultarEsquema.changeSalida);$("#cancelar").click(function(a){a.preventDefault();a.stopPropagation();core.getPageForMenu($("#cancelar").attr("href"))});$("#manifiestoInterno").data("index","salida");$("#manifiestoInterno").data("autoopenfile","PDF");$("#manifiestoInterno").click(frondend.loadSubPage);$("#manifiestoPiloto").data("index","salida");$("#manifiestoPiloto").data("autoopenfile","PDF");$("#manifiestoPiloto").click(frondend.loadSubPage);$("#manifiestoEncominda").data("index","salida");$("#manifiestoEncominda").data("autoopenfile","PDF");$("#manifiestoEncominda").click(frondend.loadSubPage)},changeFecha:function(){console.log("changeFecha-int");$("#salida").html("");$("#salida").val("");consultarEsquema.checkShowEsquema();var a=$("#fecha").val();if(a===null||$.trim(a)===""){return}else{core.request({url:$("#pathListarSalidasByFecha").val(),type:"POST",dataType:"html",async:false,extraParams:{fecha:a},successCallback:function(b){if(b){$("#salida").html(b);$("#salida").val("")}}})}},changeSalida:function(){console.log("changeSalida-int");var a=$("#salida").val();if(a===null||$.trim(a)===""){$("#utilizadoSpan").text(0);$("#totalSpan").text(0);consultarEsquema.checkShowEsquema();return}else{core.request({url:$("#pathGetInformacionPorSalida").prop("value"),type:"POST",dataType:"json",async:false,extraParams:{idSalida:a},successCallback:function(b){consultarEsquema.checkShowEsquema();if(b.optionListaAsientos){$("#listaAsientosHidden").val(JSON.stringify(b.optionListaAsientos))}if(b.optionListaSenales){$("#listaSenalesHidden").val(JSON.stringify(b.optionListaSenales))}if(b.optionBoletos){$("#listaBoletosHidden").val(JSON.stringify(b.optionBoletos))}if(b.optionReservaciones){$("#listaReservacionesHidden").val(JSON.stringify(b.optionReservaciones))}consultarEsquema.mostrarIconos()}})}},checkShowEsquema:function(){var a=$("#salida").val();if(a===null||a===""){$("#buttonDIV").hide();$("#esquemaDIV").hide()}else{$("#buttonDIV").show();$("#esquemaDIV").show()}},mostrarIconos:function(){$(".item").remove();var listaBoletos=$("#listaBoletosHidden").val();if(listaBoletos){listaBoletos=JSON.parse(listaBoletos)}else{listaBoletos=[]}var listaReservaciones=$("#listaReservacionesHidden").val();if(listaReservaciones){listaReservaciones=JSON.parse(listaReservaciones)}else{listaReservaciones=[]}var all=listaBoletos.concat(listaReservaciones);$("#nav2").addClass("hidden");var asientosPosicionados=[];var listaAsientos=$("#listaAsientosHidden").val();if(listaAsientos){listaAsientos=JSON.parse(listaAsientos)}else{listaAsientos=[]}$("#totalSpan").text(listaAsientos.length);jQuery.each(listaAsientos,function(){var clase=this.clase;if(clase==="1"){clase="claseA"}else{if(clase==="2"){clase="claseB"}else{throw new Error("El item debe tener uno de los id de clases siguientes: 1 o 2.")}}asientosPosicionados[this.numero]=this;var estado="libre";var item0=consultarEsquema.buscarBoletoReservacionPorAsiento(this.numero,all);if(item0!==null){estado=consultarEsquema.buscarEstadoAsientoItem(item0)}var item=$(".icono."+clase+"."+estado).clone();item.removeClass("ui-draggable icono");item.addClass("item");var nivel2=this.nivel2;if(eval(nivel2)){$("#nav2").removeClass("hidden");$(".nivel2").append(item)}else{$(".nivel1").append(item)}item.css("left",core.ajustarPosicion(this.coordenadaX));item.css("top",core.ajustarPosicion(this.coordenadaY));this.jsId=core.uniqId();item.attr("jsId",this.jsId);var numero=this.numero;item.find(".detalle").text(this.numero);item.data("numero",this.numero);item.data("id",this.id);if(item0!==null){item.data("tipo",item0.tipo);if(item0.tipo==="R"){item.data("idReservacion",item0.id);item.data("idClinteReservacion",item0.clinteId)}}item.css("cursor","hand")});$("#listaAsientosHidden").val(JSON.stringify(listaAsientos));$("#pendientes").addClass("hidden");$("#utilizadoSpan").text(all.length);jQuery.each(all,function(){var asiento=asientosPosicionados[this.numero];if(!asiento){$("#pendientes").removeClass("hidden");var clase=this.clase;if(clase==="1"){clase="claseA"}else{if(clase==="2"){clase="claseB"}else{throw new Error("El item debe tener uno de los id de clases siguientes: 1 o 2.")}}var estado=consultarEsquema.buscarEstadoAsientoItem(this);var item=$(".icono."+clase+"."+estado).clone();item.removeClass("ui-draggable icono");item.addClass("item2");$(".pendientes").append(item);item.css("left",core.ajustarPosicion(this.coordenadaX));item.css("top",core.ajustarPosicion(this.coordenadaY));this.jsId=core.uniqId();item.attr("jsId",this.jsId);var numero=this.numero;item.find(".detalle").text(this.numero);item.data("numero",this.numero);item.data("tipo",this.tipo);if(this.tipo==="R"){item.data("idReservacion",this.id);item.data("idClinteReservacion",this.clinteId)}}});$(".containment .active").removeClass("active");$("#tab1").addClass("active");$("#nav1").addClass("active");var listaSenales=$("#listaSenalesHidden").val();if(listaSenales){listaSenales=JSON.parse(listaSenales)}else{listaSenales=[]}jQuery.each(listaSenales,function(){var tipo=this.tipo;if(tipo==="1"){tipo="salida"}else{if(tipo==="2"){tipo="chofer"}else{throw new Error("El item debe tener uno de los id de tipo siguientes: 1 o 2.")}}var item=$(".icono."+tipo).clone();item.removeClass("ui-draggable icono");item.addClass("item");var nivel2=this.nivel2;if(eval(nivel2)){$(".nivel2").append(item)}else{$(".nivel1").append(item)}item.css("left",core.ajustarPosicion(this.coordenadaX));item.css("top",core.ajustarPosicion(this.coordenadaY));var id=this.id;this.jsId=core.uniqId();item.attr("jsId",this.jsId)});$("#listaSenalesHidden").val(JSON.stringify(listaSenales));$(".asiento .showInfo").bind("click",consultarEsquema.info)},info:function(d){d.preventDefault();d.stopPropagation();var c=$(this);var a=c.parent().data("numero");if(a===null||$.trim(a)===""){alert("No se pudo determinar el numero de asiento.");return}var b=$("#salida").val();if(b===null||$.trim(b)===""){alert("No se pudo determinar el id de la salida.");return}core.request({url:$("#pathInfoAsientoSalida").attr("value"),method:"GET",extraParams:{idSalida:b,numeroAsiento:a},dataType:"json",async:true,successCallback:function(h){console.debug(h);if(h.items){var g="";var e=h.items;$.each(e,function(){g+="<label><b>ID: "+this.id+"</b></label>";g+="<label>Asiento: "+this.numeroAsiento+"</label>";g+="<label>Tipo: "+this.tipo+"</label>";g+="<label>Creado: "+this.fechaCreacion+"</label>";g+="<label>Estación Venta: "+this.estacionVenta+"</label>";g+="<label>Estación Origen: "+this.origen+"</label>";g+="<label>Estación Destino: "+this.destino+"</label>";g+="<label>Cliente: "+this.cliente+"</label>";if(this.cortesia===true){g+="<label>Usuario: "+this.autorizadoPor+"</label>";g+="<label>Motivo: "+this.motivoCortesia+"</label>";g+="<label><a class='btn cancelarCortesiaPopUp' data-value='"+this.id+"'>CANCELAR CORTESIA</a></label>"}});if(g===""){g+="<label>Asiento libre</label>"}g+="<BR><BR>";var f=core.showMessageDialog({title:"Consultar Boleto",showCloseHandle:true,text:g,uniqid:true,buttons:{Cancelar:function(){this.dialog2("close")}}});$(".btn.cancelarCortesiaPopUp").click(function(){var i=$(this).data("value");core.request({url:$("#pathCancelarBoleto").attr("value"),type:"POST",dataType:"html",async:false,extraParams:{id:i},successCallback:function(j){if(!core.procesarRespuestaServidor(j)){f.dialog2("close");consultarEsquema.changeSalida()}}})})}}})},buscarBoletoReservacionPorAsiento:function(a,c){var b=null;$.each(c,function(){if(this.numero===a){b=this;return}});return b},buscarEstadoAsientoItem:function(a){if(a.tipo==="R"){return"reservado"}else{if(a.tipo==="B"){if(a.tipoDocumento===1||a.tipoDocumento===2||a.tipoDocumento===4||a.tipoDocumento===5||a.tipoDocumento===6||a.tipoDocumento===7||a.tipoDocumento===8){return"vendido"}else{if(a.tipoDocumento===3){return"cortesia"}else{throw new Error("No se pudo determinar el tipo de documento del boleto con id:"+a.id+", y numero:"+a.numero)}}}else{throw new Error("No se pudo determinar el tipo del asiento con id:"+a.id+", y numero:"+a.numero)}}},};
consultarDetalleSalida={funcionesAddOnload:function(){this._init();this._conectEvents()},_init:function(){$("#fecha").datepicker({format:"dd/mm/yyyy",todayBtn:true,language:"es",autoclose:true,todayHighlight:true});$("#fecha").datepicker("setDate",new Date());consultarDetalleSalida.changeFecha()},_conectEvents:function(){$("#fecha").datepicker().on("changeDate",function(a){a.preventDefault();a.stopPropagation();consultarDetalleSalida.changeFecha()});$("#cancelar").click(function(a){a.preventDefault();a.stopPropagation();core.getPageForMenu($("#cancelar").attr("href"))})},changeFecha:function(){console.log("changeFecha-int");$("#salidaBody").find("tr").not("#salidaVacioTR").remove();$("#salidaBody").find("#salidaVacioTR").show();var a=$("#fecha").val();if(a===null||$.trim(a)===""){return}else{core.request({url:$("#pathListarSalidasByFecha2").val(),type:"GET",dataType:"json",async:false,extraParams:{fecha:a},successCallback:function(b){console.debug(b);if(b&&b.optionSalidas.length>0){$("#salidaBody").find("#salidaVacioTR").hide();$.each(b.optionSalidas,function(c,e){var f="success";if(e.idEstado==="1"||e.idEstado==="4"){f="error"}else{if(e.idEstado==="2"){f="warning"}}var d="<tr class='"+f+"'><td style='text-align:center; vertical-align:middle;'>"+e.id+"</td><td style='text-align:center; vertical-align:middle;'>"+e.hora+"</td><td style='text-align:left; vertical-align:middle;'>"+e.ruta+"</td><td style='text-align:center; vertical-align:middle;'>"+e.clase+"</td><td style='text-align:center; vertical-align:middle;'>"+e.empresa+"</td><td style='text-align:center; vertical-align:middle;'>"+e.estado+"</td><td style='text-align:center; vertical-align:middle;'>"+(e.bus===""?"N/D":e.bus)+"</td><td style='text-align:left; vertical-align:middle;'>"+(e.piloto1===""?"N/D":e.piloto1)+(e.piloto2===""?"":"<BR>"+e.piloto2)+"</td></tr>";$("#salidaBody").append($(d))})}}})}}};
frondendItinerarioEspecial={funcionesAddOnload:function(){this._init();this._conectEvents()},_init:function(){$("#fechaEnd").datepicker({format:"dd/mm/yyyy",startDate:"d",endDate:"+2m",todayBtn:true,language:"es",autoclose:true,todayHighlight:true});$("#grid").flexigrid({url:$("#grid").data("url"),dataType:"json",singleSelect:true,query:"",rpOptions:[5,10,15,20,25,30,40,50],colModel:[{display:"ID",name:"id",width:70,sortable:true,align:"center"},{display:"Fecha",name:"fecha",width:120,sortable:true,align:"center"},{display:"Ruta",name:"ruta",width:50,sortable:true,align:"left"},{display:"Empresa",name:"empresa",width:100,sortable:false,align:"left"},{display:"Origen",name:"origen",width:150,sortable:false,align:"left"},{display:"Destino",name:"destino",width:150,sortable:false,align:"left"},{display:"Tipo Bus",name:"tipoBus",width:180,sortable:false,align:"left"},{display:"Activo",name:"activo",width:70,sortable:true,align:"center"},{display:"Motivo",name:"motivo",width:200,sortable:true,align:"left"}],usepager:true,useRp:true,rp:15,showTableToggleBtn:false})},_conectEvents:function(){$("#linkFilter").click(frondend.linkFilter);$("li a.menuItinerarioEspecial").not("a[data-print=true]").click(frondend.loadSubPage)}};
crearItinerarioEspecial={funcionesAddOnload:function(){this._init();this._conectEvents()},_init:function(){$("#datetimepicker_crear_itinerario_especial_command_fecha").datetimepicker({format:"dd-mm-yyyy hh:ii",startDate:core.addDiasAFecha(-1),endDate:core.addDiasAFecha(15),minuteStep:5,autoclose:true,todayBtn:true,language:"es"});$("#crear_itinerario_especial_command_ruta").select2({allowClear:true});$("#crear_itinerario_especial_command_tipoBus").select2({allowClear:true})},_conectEvents:function(){$("#cancelar").click(function(a){a.preventDefault();a.stopPropagation();confirm("¿Está seguro que desea cancelar la operación?",function(b){if(b===true){core.getPageForMenu($("#cancelar").attr("href"))}})});$("#aceptar").click(crearItinerarioEspecial.clickAceptar)},clickAceptar:function(b){b.preventDefault();b.stopPropagation();var a=$("#itinerarioEspecialForm");if(core.customValidateForm(a)===true){$(a).ajaxSubmit({target:a.attr("action"),type:"POST",dataType:"html",cache:false,async:false,beforeSubmit:function(){core.showLoading({showLoading:true})},error:function(){core.hideLoading({showLoading:true})},success:function(c){core.hideLoading({showLoading:true});if(!core.procesarRespuestaServidor(c)){alert("Operación realizada satisfactoriamente.",function(){core.getPageForMenu($("#pathHomeItinerarioEspecial").attr("value"))})}}})}}};
frondendClientes={funcionesAddOnload:function(){this._init();this._conectEvents()},_init:function(){$("#grid").flexigrid({url:$("#grid").data("url"),dataType:"json",singleSelect:true,query:"",rpOptions:[5,10,15,20,25,30,40,50],colModel:[{display:"ID",name:"id",width:70,sortable:true,align:"center"},{display:"Nombre Completo",name:"nombre",width:200,sortable:true,align:"left"},{display:"NIT",name:"nit",width:120,sortable:true,align:"left"},{display:"Documento",name:"documento",width:120,sortable:true,align:"left"},{display:"Nacionalidad",name:"nacionalidad",width:90,sortable:false,align:"left"},{display:"Nacimiento",name:"fechaNacimiento",width:100,sortable:false,align:"center"},{display:"Vcto Documento",name:"fechaNacimiento",width:100,sortable:false,align:"center"},{display:"Sexo",name:"sexo",width:50,sortable:false,align:"center"},{display:"Empleado",name:"empleado",width:50,sortable:false,align:"center"}],usepager:true,useRp:true,rp:15,showTableToggleBtn:false})},_conectEvents:function(){$("#linkFilter").click(function(a){frondend.linkFilter(a,$(this),$(".clienteGrid"),$(".clienteFiltersForm"))});$("li a.menuClientes").not("a[data-print=true]").click(frondend.loadSubPage)}};
crearUpdateCliente={funcionesAddOnload:function(){this._init();this._conectEvents()},_init:function(){$("#cliente_command_fechaNacimiento").datepicker({format:"dd/mm/yyyy",startDate:"-100y",endDate:"d",todayBtn:true,language:"es",autoclose:true,todayHighlight:true});$("#cliente_command_fechaVencimientoDocumento").datepicker({format:"dd/mm/yyyy",startDate:"d",endDate:"+20y",todayBtn:true,language:"es",autoclose:true,todayHighlight:true});if(!core.isMovil()){$("#cliente_command_tipoDocumento").select2({allowClear:true});$("#cliente_command_nacionalidad").select2({allowClear:true});$("#cliente_command_sexo").select2({allowClear:true});var b=sessionStorage.getItem("temp_value_key1");if(b&&$.trim(b)!==""){sessionStorage.setItem("temp_value_key1","");$("#cliente_command_nombre").val(b)}var a=sessionStorage.getItem("temp_value_key2");if(a&&$.trim(a)!==""){sessionStorage.setItem("temp_value_key2","");$("#cliente_command_nit").val(a)}}crearUpdateCliente.checkDetallado()},_conectEvents:function(){$("#cliente_command_detallado").bind("click",crearUpdateCliente.checkDetallado);$(".validateKeyUp").keyup(crearUpdateCliente.validateInputKeyUp)},checkDetallado:function(){var a=$("#cliente_command_detallado").prop("checked");if(a){$(".compactoDIV").hide();$(".detalladoDIV").show()}else{$(".detalladoDIV").hide();$(".compactoDIV").show()}},validateInputKeyUp:function(c){console.log("validateInputKeyUp-init");var a=$(this);if(a.hasClass("forceUpper")){if(a.val()){a.val(a.val().toUpperCase())}}c.preventDefault();var b=$("div[id*='dialog_internal']").find("form");if(b.length===0){throw new Error("No se encontro el formulario en el dialogo.")}else{core.customValidateForm(b,a)}}};
frondendReservacion={funcionesAddOnload:function(){this._init();this._conectEvents()},_init:function(){$("#rangoFecha").daterangepicker({format:"DD/MM/YYYY",startDate:core.modDate(-30),endDate:core.modDate(+30),dateLimit:moment.duration(6,"months")});$("#rangoFecha").data("daterangepicker").clickApply();var a=$("#cliente").data("pathlistarclientespaginando");$("#cliente").select2({minimumInputLength:1,allowClear:true,ajax:{url:a,dataType:"json",type:"POST",data:function(b,c){return{term:b,page_limit:5}},results:function(c,b){return{results:c.options}}}});$("#grid").flexigrid({url:$("#grid").data("url"),dataType:"json",singleSelect:true,query:"",rpOptions:[5,10,15,20,25,30,40,50],colModel:[{display:"ID",name:"id",width:60,sortable:true,align:"center"},{display:"Fecha Salida",name:"fecha",width:110,sortable:true,align:"center"},{display:"Número",name:"numeroAsiento",width:40,sortable:false,align:"center"},{display:"Ruta",name:"ruta",width:200,sortable:false,align:"left"},{display:"Cliente",name:"cliente",width:200,sortable:false,align:"left"},{display:"Externa",name:"externa",width:40,sortable:false,align:"center"},{display:"Fecha Creación",name:"fechaCreacion",width:100,sortable:false,align:"center"},{display:"Usuario Creación",name:"usuarioCreacion",width:100,sortable:false,align:"left"},{display:"Estación Creación",name:"estacionCreacion",width:100,sortable:false,align:"left"}],usepager:true,useRp:true,rp:15,height:300,showTableToggleBtn:false})},_conectEvents:function(){$("#linkFilter").click(frondend.linkFilter);$("li a.menuReservacion").not("a[data-print=true]").click(frondend.loadSubPage)}};
crearReservacion={funcionesAddOnload:function(){this._init();this._conectEvents()},_init:function(){var a=$("#clienteBase").data("pathlistarclientespaginando");$("#clienteBase").select2({minimumInputLength:1,allowClear:true,ajax:{url:a,dataType:"json",type:"POST",data:function(b,c){return{term:b,page_limit:5}},results:function(c,b){return{results:c.options}},},});$("#crear_reservacion_command_fechaSalida").datepicker({format:"dd/mm/yyyy",startDate:"d",endDate:"+2m",todayBtn:true,language:"es",autoclose:true,todayHighlight:true,});$("#crear_reservacion_command_estacionOrigen").select2({allowClear:true,});$("#salidaGrid").flexigrid({url:$("#salidaGrid").data("url"),dataType:"json",singleSelect:true,query:crearReservacion.getQueryString(),rpOptions:[5,10,15,20,25,30,40,50],colModel:[{display:"ID",name:"id",width:70,sortable:true,align:"center",hide:true,},{display:"Fecha y Hora",name:"fecha",width:120,sortable:false,align:"center",},{display:"Origen",name:"origen",width:120,sortable:false,align:"left",},{display:"Destino",name:"destino",width:120,sortable:false,align:"left",},{display:"Empresa",name:"empresa",width:80,sortable:false,align:"left",},{display:"Itinerario",name:"itinerario",width:130,sortable:false,align:"left",},{display:"Bus",name:"bus",width:130,sortable:false,align:"left",},{display:"Piloto",name:"piloto",width:130,sortable:false,align:"left",hide:true,},{display:"Estado",name:"estado",width:70,sortable:false,align:"center",},],usepager:true,useRp:true,rp:15,showTableToggleBtn:false,height:250,onSuccess:function(){$("#salidaGrid tr").on("click",crearReservacion.checkSelectedSalida);crearReservacion.checkSelectedSalida()},});crearReservacion.checkSelectedSalida()},_conectEvents:function(){$("#cancelar").click(function(a){a.preventDefault();a.stopPropagation();confirm("¿Está seguro que desea cancelar la operación?",function(b){if(b===true){core.getPageForMenu($("#cancelar").attr("href"))}})});$("#addClienteBase").click(function(a){frondend.loadSubPage(a,$(this),function(c){var b=$("#clienteBase");if(c!==""){core.request({url:b.data("pathlistarclientespaginando"),type:"POST",dataType:"json",async:false,extraParams:{id:c},successCallback:function(d){if(d.options&&d.options[0]){$("#clienteBase").select2("data",d.options[0])}},})}})});$("#updateClienteBase").click(function(a){frondend.loadSubPage(a,$(this),function(){var b=$("#clienteBase");var c=b.val();if(c!==""){core.request({url:b.data("pathlistarclientespaginando"),type:"POST",dataType:"json",async:false,extraParams:{id:c},successCallback:function(d){if(d.options&&d.options[0]){$("#clienteBase").select2("data",d.options[0])}},})}})});$("#seachClienteBase").click(function(a){frondend.loadSubPage(a,$(this),function(c){if(c!==""){var b=$("#clienteBase");core.request({url:b.data("pathlistarclientespaginando"),type:"POST",dataType:"json",async:false,extraParams:{id:c},successCallback:function(d){if(d.options&&d.options[0]){$("#clienteBase").select2("data",d.options[0])}},})}})});$("#aceptar").click(crearReservacion.clickAceptar);$("#crear_reservacion_command_fechaSalida").on("change",crearReservacion.changeFiltersSalida);$("#crear_reservacion_command_estacionOrigen").on("change",crearReservacion.changeFiltersSalida)},checkSelectedSalida:function(){crearReservacion.clearItemGridReservaciones();var a=core.getSelectedItemId("#salidaGrid");$("#crear_reservacion_command_salida").prop("value",a);if(a===null){$("#listaAsientosHidden").val(JSON.stringify([]));$("#listaSenalesHidden").val(JSON.stringify([]));$("#listaBoletosHidden").val(JSON.stringify([]));$("#listaReservacionesHidden").val(JSON.stringify([]));$("#dependenciasSelecccionSalidaGrid").hide();crearReservacion.mostrarIconos()}else{alert("dg");core.request({url:$("#pathGetInformacionPorSalida").prop("value"),type:"POST",dataType:"json",async:false,extraParams:{idSalida:a},successCallback:function(b){$("#dependenciasSelecccionSalidaGrid").show();if(b.optionListaAsientos){$("#listaAsientosHidden").val(JSON.stringify(b.optionListaAsientos))}if(b.optionListaSenales){$("#listaSenalesHidden").val(JSON.stringify(b.optionListaSenales))}if(b.optionBoletos){$("#listaBoletosHidden").val(JSON.stringify(b.optionBoletos))}if(b.optionReservaciones){$("#listaReservacionesHidden").val(JSON.stringify(b.optionReservaciones))}crearReservacion.mostrarIconos()},})}},changeFiltersSalida:function(){$("#salidaGrid").flexOptions({newp:1,query:crearReservacion.getQueryString(),}).flexReload()},getQueryString:function(){return $(".filterSalida").fieldSerialize()},buscarEstadoAsiento:function(a,b){var c="libre";$.each(b,function(){if(this.numero===a){c=crearReservacion.buscarEstadoAsientoItem(this)}});return c},buscarEstadoAsientoItem:function(a){if(a.tipo==="R"){return"reservado"}else{if(a.tipo==="B"){if(a.tipoDocumento===1||a.tipoDocumento===2||a.tipoDocumento===4||a.tipoDocumento===5||a.tipoDocumento===6||a.tipoDocumento===7||a.tipoDocumento===8){return"vendido"}else{if(a.tipoDocumento===3){return"cortesia"}else{throw new Error("No se pudo determinar el tipo de documento del boleto con id:"+a.id+", y numero:"+a.numero)}}}else{throw new Error("No se pudo determinar el tipo del asiento con id:"+a.id+", y numero:"+a.numero)}}},mostrarIconos:function(){$(".item").remove();var listaBoletos=$("#listaBoletosHidden").val();if(listaBoletos){listaBoletos=JSON.parse(listaBoletos)}else{listaBoletos=[]}var listaReservaciones=$("#listaReservacionesHidden").val();if(listaReservaciones){listaReservaciones=JSON.parse(listaReservaciones)}else{listaReservaciones=[]}var all=listaBoletos.concat(listaReservaciones);$("#nav2").addClass("hidden");var asientosPosicionados=[];var listaAsientos=$("#listaAsientosHidden").val();if(listaAsientos){listaAsientos=JSON.parse(listaAsientos)}else{listaAsientos=[]}jQuery.each(listaAsientos,function(){var clase=this.clase;if(clase==="1"){clase="claseA"}else{if(clase==="2"){clase="claseB"}else{throw new Error("El item debe tener uno de los id de clases siguientes: 1 o 2.")}}asientosPosicionados[this.numero]=this;var estado=crearReservacion.buscarEstadoAsiento(this.numero,all);var item=$(".icono."+clase+"."+estado).clone();item.removeClass("ui-draggable icono");item.addClass("item");var nivel2=this.nivel2;if(eval(nivel2)){$("#nav2").removeClass("hidden");$(".nivel2").append(item)}else{$(".nivel1").append(item)}item.css("left",core.ajustarPosicion(this.coordenadaX));item.css("top",core.ajustarPosicion(this.coordenadaY));this.jsId=core.uniqId();item.attr("jsId",this.jsId);var numero=this.numero;item.find(".detalle").text(this.numero);item.data("numero",this.numero);item.data("id",this.id);item.css("cursor","hand")});$("#listaAsientosHidden").val(JSON.stringify(listaAsientos));$("#pendientes").addClass("hidden");jQuery.each(all,function(){var asiento=asientosPosicionados[this.numero];if(!asiento){$("#pendientes").removeClass("hidden");var clase=this.clase;if(clase==="1"){clase="claseA"}else{if(clase==="2"){clase="claseB"}else{throw new Error("El item debe tener uno de los id de clases siguientes: 1 o 2.")}}var estado=crearReservacion.buscarEstadoAsientoItem(this);var item=$(".icono."+clase+"."+estado).clone();item.removeClass("ui-draggable icono");item.addClass("item2");$(".pendientes").append(item);item.css("left",core.ajustarPosicion(this.coordenadaX));item.css("top",core.ajustarPosicion(this.coordenadaY));this.jsId=core.uniqId();item.attr("jsId",this.jsId);var numero=this.numero;item.find(".detalle").text(this.numero);item.data("numero",this.numero);item.data("id",this.id)}});$(".containment .active").removeClass("active");$("#tab1").addClass("active");$("#nav1").addClass("active");var listaSenales=$("#listaSenalesHidden").val();if(listaSenales){listaSenales=JSON.parse(listaSenales)}else{listaSenales=[]}jQuery.each(listaSenales,function(){var tipo=this.tipo;if(tipo==="1"){tipo="salida"}else{if(tipo==="2"){tipo="chofer"}else{throw new Error("El item debe tener uno de los id de tipo siguientes: 1 o 2.")}}var item=$(".icono."+tipo).clone();item.removeClass("ui-draggable icono");item.addClass("item");var nivel2=this.nivel2;if(eval(nivel2)){$(".nivel2").append(item)}else{$(".nivel1").append(item)}item.css("left",core.ajustarPosicion(this.coordenadaX));item.css("top",core.ajustarPosicion(this.coordenadaY));var id=this.id;this.jsId=core.uniqId();item.attr("jsId",this.jsId)});$("#listaSenalesHidden").val(JSON.stringify(listaSenales));$(".asiento .showInfo").bind("click",crearReservacion.info);$(".nivel1 .asiento img").bind("click",crearReservacion.clickAsiento);$(".nivel2 .asiento img").bind("click",crearReservacion.clickAsiento)},info:function(d){d.preventDefault();d.stopPropagation();var c=$(this);var a=c.parent().data("numero");if(a===null||$.trim(a)===""){throw new Error("No se pudo determinar el numero de asiento.")}var b=core.getSelectedItemId("#salidaGrid");if(b===null||$.trim(b)===""){throw new Error("No se pudo determinar el id de la salida.")}core.request({url:$("#pathInfoAsientoSalida").attr("value"),method:"GET",extraParams:{idSalida:b,numeroAsiento:a,},dataType:"html",async:true,successCallback:function(e){core.showMessageDialog({title:"Consultar Asiento Bus",fullscreen:true,compact:true,text:e,defaultButtonOFF:true,buttons:{Cancelar:{primary:true,type:"info",click:function(){$("body").css("overflow-y","auto");this.dialog2("close")},},},})},})},clickAsiento:function(f){f.preventDefault();f.stopPropagation();var a=$(this).parent();var b=a.data("numero");if(a.hasClass("reservado")){alert("El asiento con el número "+b+" se encuentra reservado.");return}else{if(a.hasClass("cortesia")){alert("El asiento con el número "+b+" es una cortesía.");return}else{if(a.hasClass("vendido")){alert("El asiento con el número "+b+" ya está vendido.");return}}}var c=$("#crear_reservacion_command_listaClienteReservacion").val();if(c){c=JSON.parse(c)}else{c=[]}var d=crearReservacion.findAsiento(c,b);if(d===null){d={numero:a.data("numero"),id:a.data("id"),idCliente:"",};c.push(d);a.addClass("selected");crearReservacion.renderItemGridAddReservacion(d)}else{c=core.removeItemArray(c,d);a.removeClass("selected");crearReservacion.renderItemGridDeletedReservacion(d,c)}$("#crear_reservacion_command_listaClienteReservacion").val(JSON.stringify(c))},findAsiento:function(c,b){var a=null;b=$.trim(b);$.each(c,function(){if($.trim(this.numero)===b){a=this;return}});return a},renderItemGridAddReservacion:function(e){$("#clienteReservacionBody").find("#clienteReservacionVacioTR").hide();var a=e.numero;var h=core.uniqId("cliente_reservacion");var f="Seleccione el cliente de la reservación";var d=$("#inputClienteHidden").clone();d.prop("id",h);d.prop("name",h);d.data("numero",a);d.prop("placeholder",f);d.attr("placeholder",f);d.data("placeholder",f);d.prop("required","required");d.removeClass("hidden");d.val("");d.removeClass("select2-offscreen");var c=$("<tr class='trSelect"+a+"'><td>"+a+"</td><td class='inputSelect'></td></tr>");c.find(".inputSelect").append(d);var g=$("#clienteActionsHidden").clone();g.prop("id",h);g.removeClass("hidden");c.find(".inputSelect").append(g);$("#clienteReservacionBody").append(c);g.find("#addCliente").click(crearReservacion.addCliente);g.find("#updateCliente").click(crearReservacion.updateCliente);g.find("#updateCliente").data("index",h);g.find("#seachCliente").click(crearReservacion.seachCliente);var b=d.data("pathlistarclientespaginando");d.select2({minimumInputLength:1,allowClear:true,placeholder:f,ajax:{url:b,dataType:"json",type:"POST",data:function(i,j){return{term:i,page_limit:5}},results:function(j,i){return{results:j.options}},},});$(d).select2("data",$("#clienteBase").select2("data"))},renderItemGridDeletedReservacion:function(c,b){if(!b){b=$("#crear_reservacion_command_listaClienteReservacion").val();if(b){b=JSON.parse(b)}else{b=[]}}if(b.length===0){$("#clienteReservacionBody").find("tr").not("#clienteReservacionVacioTR").remove();$("#clienteReservacionBody").find("#clienteReservacionVacioTR").show()}else{$("#clienteReservacionBody").find("#clienteReservacionVacioTR").hide();var a=c.numero;$("#clienteReservacionBody").find(".trSelect"+a).remove()}},clearItemGridReservaciones:function(){$("#crear_reservacion_command_listaClienteReservacion").val(JSON.stringify([]));$("#clienteReservacionBody").find("tr").not("#clienteReservacionVacioTR").remove();$("#clienteReservacionBody").find("#clienteReservacionVacioTR").show()},imprimirDocumentos:function(){},syncronizarListaReservaciones:function(){var a=$("#crear_reservacion_command_listaClienteReservacion").val();if(a){a=JSON.parse(a)}else{a=[]}$.each(a,function(){this.idCliente=$(".trSelect"+this.numero).find('input[id^="cliente_reservacion"]').val()});$("#crear_reservacion_command_listaClienteReservacion").val(JSON.stringify(a))},clickAceptar:function(a){a.preventDefault();a.stopPropagation();var b=$("#reservacionForm");if(core.customValidateForm(b)===true&&crearReservacion.customValidate()===true){crearReservacion.syncronizarListaReservaciones();$(b).ajaxSubmit({target:b.attr("action"),type:"POST",dataType:"html",cache:false,async:false,beforeSubmit:function(){core.showLoading({showLoading:true})},error:function(){core.hideLoading({showLoading:true})},success:function(c){core.hideLoading({showLoading:true});if(!core.procesarRespuestaServidor(c)){alert("Operación realizada satisfactoriamente.",function(){crearReservacion.imprimirDocumentos();core.getPageForMenu(b.attr("action"))})}},})}},customValidate:function(a){cantidadReservaciones=$("#clienteReservacionBody").find("tr").not("#clienteReservacionVacioTR").length;if(cantidadReservaciones<=0){core.hiddenDialog2(a);alert("Debe seleccionar al menos un asiento.",function(){core.showDialog2(a)});return false}return true},addCliente:function(b){var a=$(this).parent().parent().find("input[id^='cliente_reservacion']");frondend.loadSubPage(b,$(this),function(c){if(c!==""){core.request({url:a.data("pathlistarclientespaginando"),type:"POST",dataType:"json",async:false,extraParams:{id:c},successCallback:function(d){if(d.options&&d.options[0]){a.select2("data",d.options[0])}},})}})},updateCliente:function(b){var a=$(this).parent().parent().find("input[id^='cliente_reservacion']");frondend.loadSubPage(b,$(this),function(){var c=a.val();if(c!==""){core.request({url:a.data("pathlistarclientespaginando"),type:"POST",dataType:"json",async:false,extraParams:{id:c},successCallback:function(d){if(d.options&&d.options[0]){a.select2("data",d.options[0])}},})}})},seachCliente:function(b){var a=$(this).parent().parent().find("input[id^='cliente_reservacion']");frondend.loadSubPage(b,$(this),function(c){if(c!==""){core.request({url:a.data("pathlistarclientespaginando"),type:"POST",dataType:"json",async:false,extraParams:{id:c},successCallback:function(d){if(d.options&&d.options[0]){a.select2("data",d.options[0])}},})}})},};
frondendBoletos={funcionesAddOnload:function(){this._init();this._conectEvents()},_init:function(){$("#rangoFecha").daterangepicker({format:"DD/MM/YYYY",startDate:core.modDate(-30),endDate:core.modDate(+30),dateLimit:moment.duration(6,"months")});$("#rangoFecha").data("daterangepicker").clickApply();$("#clienteDocumento").select2({minimumInputLength:1,allowClear:true,ajax:{url:$("#clienteDocumento").data("pathlistarclientespaginando"),dataType:"json",type:"POST",data:function(a,b){return{term:a,page_limit:5}},results:function(b,a){return{results:b.options}}}});$("#clienteBoleto").select2({minimumInputLength:1,allowClear:true,ajax:{url:$("#clienteBoleto").data("pathlistarclientespaginando"),dataType:"json",type:"POST",data:function(a,b){return{term:a,page_limit:5}},results:function(b,a){return{results:b.options}}}});$("#grid").flexigrid({url:$("#grid").data("url"),dataType:"json",singleSelect:true,query:"",rpOptions:[5,10,15,20,25,30,40,50],colModel:[{display:"ID",name:"id",width:60,sortable:true,align:"center"},{display:"Fecha Salida",name:"fecha",width:110,sortable:true,align:"center"},{display:"Número",name:"numeroAsiento",width:80,sortable:true,align:"center"},{display:"Estado",name:"estado",width:100,sortable:false,align:"left"},{display:"Documento",name:"tipoDocumento",width:150,sortable:false,align:"left"},{display:"Ruta",name:"ruta",width:300,sortable:true,align:"left"},{display:"Respetar",name:"utilizarDesdeEstacionOrigenSalida",width:80,sortable:false,align:"center",hide:true},{display:"Sube En",name:"estacionOrigen",width:150,sortable:false,align:"left"},{display:"Baja En",name:"estacionDestino",width:150,sortable:false,align:"left"},{display:"Baja En (Obs)",name:"observacionDestinoIntermedio",width:50,sortable:false,align:"left"},{display:"Clase",name:"claseAsiento",width:80,sortable:false,align:"center",hide:true},{display:"Ref. Externa",name:"referenciaExterna",width:80,sortable:false,align:"center",hide:true},{display:"Autorización Tarjeta",name:"autorizacionTarjeta",width:80,sortable:false,align:"center",hide:true},{display:"Cliente Documento",name:"clienteDocumento",width:300,sortable:true,align:"left"},{display:"Cliente Boleto",name:"clienteBoleto",width:300,sortable:true,align:"left"},{display:"Tipo Pago",name:"tipoPago",width:80,sortable:true,align:"left"},{display:"Precio Documento",name:"precioCalculado",width:100,sortable:false,align:"left"},{display:"Precio Moneda Base",name:"precioCalculadoMonedaBase",width:150,sortable:false,align:"left"},{display:"Reasignado",name:"reasignado",width:80,sortable:false,align:"center",hide:true},{display:"Fecha Creación",name:"fechaCreacion",width:100,sortable:true,align:"center"},{display:"Usuario Creación",name:"usuarioCreacion",width:100,sortable:true,align:"left"},{display:"Estación Creación",name:"estacionCreacion",width:100,sortable:true,align:"left"}],usepager:true,useRp:true,rp:15,height:300,showTableToggleBtn:false})},_conectEvents:function(){$("#linkFilter").click(frondend.linkFilter);$("li a.menuBoletos").click(frondend.loadSubPage)}};
emitirBoleto={procesandoDatos:false,funcionesAddOnload:function(){this._init();this._conectEvents()},_init:function(){$("#emitir_boleto_command_identificadorWeb").val(core.uniqIdCompuesto());var a=$("#emitir_boleto_command_clienteDocumento").data("pathlistarclientespaginando");$("#emitir_boleto_command_clienteDocumento").select2({minimumInputLength:1,allowClear:true,ajax:{url:a,dataType:"json",type:"GET",data:function(b,c){return{term:b,page_limit:5}},results:function(c,b){return{results:c.options}}},initSelection:function(b,d){var c=$(b).val();if(c!==""){$.ajax(a,{data:{id:c},type:"GET",dataType:"json"}).done(function(e){d(e)})}}});$("#emitir_boleto_command_fechaSalida").datepicker({format:"dd/mm/yyyy",startDate:"-1d",endDate:"+3m",todayBtn:true,language:"es",autoclose:true,todayHighlight:true});$("#emitir_boleto_command_fechaSalida").datepicker("setDate",new Date());$("#emitir_boleto_command_estacionOrigen").select2({allowClear:true});$("#emitir_boleto_command_estacionFacturacionEspecialVirtual").select2({allowClear:true});$("#salidaGrid").flexigrid({url:$("#salidaGrid").data("url"),dataType:"json",singleSelect:true,query:emitirBoleto.getQueryString(),rpOptions:[5,10,15,20,25,30,40,50],colModel:[{display:"ID",name:"id",width:70,sortable:true,align:"center",hide:true},{display:"Fecha y Hora",name:"fecha",width:120,sortable:false,align:"center"},{display:"Origen",name:"origen",width:120,sortable:false,align:"left"},{display:"Destino",name:"destino",width:120,sortable:false,align:"left"},{display:"Empresa",name:"empresa",width:80,sortable:false,align:"left"},{display:"Itinerario",name:"itinerario",width:130,sortable:false,align:"left"},{display:"Bus",name:"bus",width:130,sortable:false,align:"left"},{display:"Piloto",name:"piloto",width:130,sortable:false,align:"left",hide:true},{display:"Estado",name:"estado",width:70,sortable:false,align:"center"}],usepager:true,useRp:true,rp:15,showTableToggleBtn:false,height:250,onSuccess:function(){$("#salidaGrid tr").on("click",emitirBoleto.checkSelectedSalida);emitirBoleto.checkSelectedSalida();emitirBoleto.cargarMonedas()}});$("#emitir_boleto_command_estacionSubeEn").select2({allowClear:true,data:[]});$("#emitir_boleto_command_estacionBajaEn").select2({allowClear:true,data:[]});$("#emitir_boleto_command_tipoPagoVirtual").select2({allowClear:false});$("#emitir_boleto_command_monedaPagoVirtual").select2({allowClear:false,data:[]});$("#emitir_boleto_command_serieFacturaVirtual").select2({allowClear:false,data:[]});$("#emitir_boleto_command_serieFacturacionEspecialVirtual").select2({allowClear:false,data:[]});emitirBoleto.checkSelectedSalida()},_conectEvents:function(){$("#cancelar").click(function(a){a.preventDefault();a.stopPropagation();confirm("¿Está seguro que desea cancelar la operación?",function(b){if(b===true){core.getPageForMenu($("#cancelar").attr("href"))}})});$("#addCliente").click(function(a){frondend.loadSubPage(a,$(this),function(c){var b=$("#emitir_boleto_command_clienteDocumento");if(c!==""){core.request({url:b.data("pathlistarclientespaginando"),type:"POST",dataType:"json",async:false,extraParams:{id:c},successCallback:function(d){if(d.options&&d.options[0]){$("#emitir_boleto_command_clienteDocumento").select2("data",d.options[0])}}})}},{confirmarOperacion:false})});$("#updateCliente").click(function(a){console.debug("updateCliente-init");frondend.loadSubPage(a,$(this),function(){var b=$("#emitir_boleto_command_clienteDocumento");var c=b.val();if(c!==""){core.request({url:b.data("pathlistarclientespaginando"),type:"POST",dataType:"json",async:false,extraParams:{id:c},successCallback:function(d){if(d.options&&d.options[0]){$("#emitir_boleto_command_clienteDocumento").select2("data",d.options[0])}}})}})});$("#seachCliente").click(function(a){frondend.loadSubPage(a,$(this),function(c){if(c!==""){var b=$("#emitir_boleto_command_clienteDocumento");core.request({url:b.data("pathlistarclientespaginando"),type:"POST",dataType:"json",async:false,extraParams:{id:c},successCallback:function(d){if(d.options&&d.options[0]){$("#emitir_boleto_command_clienteDocumento").select2("data",d.options[0])}}})}})});$("#cortesia").click(emitirBoleto.clickCortesia);$("#facturar").click(emitirBoleto.clickFacturar);$("#aceptar").click(emitirBoleto.clickAceptar);$("#facturarEspecial").click(emitirBoleto.clickFacturarEspecial);$("#emitir_boleto_command_fechaSalida").on("change",emitirBoleto.changeFiltersSalida);$("#emitir_boleto_command_estacionOrigen").on("change",emitirBoleto.changeFiltersSalida);$("#emitir_boleto_command_tipoPagoVirtual").on("change",emitirBoleto.changeTipoPago);$("#emitir_boleto_command_monedaPagoVirtual").on("change",emitirBoleto.changeMonedaPago);$("#emitir_boleto_command_efectivoVirtual").on("change",emitirBoleto.changeEfectivo);$("#emitir_boleto_command_estacionFacturacionEspecialVirtual").on("change",emitirBoleto.changeEstacionFacturacionEspecial);$("#emitir_boleto_command_serieFacturacionEspecialVirtual").on("change",emitirBoleto.changeSerieFacturacionEspecial);$("#facturaEspecialVoucher").bind("click",emitirBoleto.changeSerieFacturacionEspecial);$("#emitir_boleto_command_serieFacturaVirtual").on("change",function(){console.debug("serieFacturaVirtual-init");var b=$("#emitir_boleto_command_serieFacturaVirtual").select2("val");var a=$("#emitir_boleto_command_serieFacturaVirtual").select2("data").idEmpresa;sessionStorage.setItem("sist_last_id_serie_factura_"+a,b)});$("#facturaVoucher").bind("click",emitirBoleto.checkFacturaVoucher);$("#facturaEspecialVoucher").bind("click",emitirBoleto.checkFacturaEspecialVoucher)},checkFacturaVoucher:function(){var a=$("#facturaVoucher").prop("checked");if(a){$(".voucherDIV").show()}else{$(".voucherDIV").hide()}},checkFacturaEspecialVoucher:function(){var a=$("#facturaEspecialVoucher").prop("checked");if(a){$(".voucherDIV").show()}else{$(".voucherDIV").hide()}},checkSelectedSalida:function(){emitirBoleto.clearItemGridBoleto();var a=core.getSelectedItemId("#salidaGrid");$("#emitir_boleto_command_salida").prop("value",a);if(a===null){$("#emitir_boleto_command_estacionSubeEn").select2({data:[]});$("#emitir_boleto_command_estacionBajaEn").select2({data:[]});$("#emitir_boleto_command_serieFacturaVirtual").select2({data:[]});$("#emitir_boleto_command_serieFacturacionEspecialVirtual").select2({data:[]});$("#listaAsientosHidden").val(JSON.stringify([]));$("#listaSenalesHidden").val(JSON.stringify([]));$("#listaBoletosHidden").val(JSON.stringify([]));$("#listaReservacionesHidden").val(JSON.stringify([]));$("#dependenciasSelecccionSalidaGrid").hide();$("#utilizadoSpan").text(0);$("#totalSpan").text(0);emitirBoleto.mostrarIconos()}else{core.request({url:$("#pathGetInformacionPorSalida").prop("value"),type:"POST",dataType:"json",async:false,extraParams:{idSalida:a,showTime:true},successCallback:function(d){$("#dependenciasSelecccionSalidaGrid").show();var i=d.optionEstacionOrigen;var f=d.optionEstacionDestino;var b=d.optionsEstacionesIntermedias;$.each(i,function(){this.text=(this.time!==""?this.time+" ":"")+this.text});$.each(f,function(){this.text=(this.time!==""?this.time+" ":"")+this.text});$.each(b,function(){this.text=(this.time!==""?this.time+" ":"")+this.text});if(d.optionEstacionOrigen&&d.optionsEstacionesIntermedias){var e=i.concat(b);$("#emitir_boleto_command_estacionSubeEn").select2({allowClear:true,data:{results:e}});$("#emitir_boleto_command_estacionSubeEn").select2("val",i[0].id)}if(d.optionEstacionDestino&&d.optionsEstacionesIntermedias){var e=f.concat(b);$("#emitir_boleto_command_estacionBajaEn").select2({allowClear:true,data:{results:e}});$("#emitir_boleto_command_estacionBajaEn").select2("val",f[0].id)}if(d.optionListaAsientos){$("#listaAsientosHidden").val(JSON.stringify(d.optionListaAsientos))}if(d.optionListaSenales){$("#listaSenalesHidden").val(JSON.stringify(d.optionListaSenales))}if(d.optionBoletos){$("#listaBoletosHidden").val(JSON.stringify(d.optionBoletos))}if(d.optionReservaciones){$("#listaReservacionesHidden").val(JSON.stringify(d.optionReservaciones))}emitirBoleto.mostrarIconos();var c=d.optionSeriesFacturas;if(c){$("#emitir_boleto_command_serieFacturaVirtual").select2({allowClear:false,data:{results:c}});var j=c.length;$("#emitir_boleto_command_serieFacturaVirtual").data("sizeItems",j);if(j>0){var g=c[0].idEmpresa;var h=sessionStorage.getItem("sist_last_id_serie_factura_"+g);if(h){$("#emitir_boleto_command_serieFacturaVirtual").select2("val",h)}else{if(c[0]){$("#emitir_boleto_command_serieFacturaVirtual").select2("val",c[0].id)}}}}$("#emitir_boleto_command_serieFacturacionEspecialVirtual").select2({data:[]})}})}},changeFiltersSalida:function(){$("#salidaGrid").flexOptions({newp:1,query:emitirBoleto.getQueryString()}).flexReload()},getQueryString:function(){return $(".filterSalida").fieldSerialize()},buscarBoletoReservacionPorAsiento:function(a,c){var b=null;$.each(c,function(){if(this.numero===a){b=this;return}});return b},buscarEstadoAsientoItem:function(a){if(a.tipo==="R"){return"reservado"}else{if(a.tipo==="B"){if(a.tipoDocumento===1||a.tipoDocumento===2||a.tipoDocumento===4||a.tipoDocumento===5||a.tipoDocumento===6||a.tipoDocumento===7||a.tipoDocumento===8){return"vendido"}else{if(a.tipoDocumento===3){return"cortesia"}else{throw new Error("No se pudo determinar el tipo de documento del boleto con id:"+a.id+", y numero:"+a.numero)}}}else{throw new Error("No se pudo determinar el tipo del asiento con id:"+a.id+", y numero:"+a.numero)}}},mostrarIconos:function(){$(".item").remove();var listaBoletos=$("#listaBoletosHidden").val();if(listaBoletos){listaBoletos=JSON.parse(listaBoletos)}else{listaBoletos=[]}var listaReservaciones=$("#listaReservacionesHidden").val();if(listaReservaciones){listaReservaciones=JSON.parse(listaReservaciones)}else{listaReservaciones=[]}var all=listaBoletos.concat(listaReservaciones);$("#nav2").addClass("hidden");var asientosPosicionados=[];var listaAsientos=$("#listaAsientosHidden").val();if(listaAsientos){listaAsientos=JSON.parse(listaAsientos)}else{listaAsientos=[]}$("#totalSpan").text(listaAsientos.length);jQuery.each(listaAsientos,function(){var clase=this.clase;if(clase==="1"){clase="claseA"}else{if(clase==="2"){clase="claseB"}else{throw new Error("El item debe tener uno de los id de clases siguientes: 1 o 2.")}}asientosPosicionados[this.numero]=this;var estado="libre";var item0=emitirBoleto.buscarBoletoReservacionPorAsiento(this.numero,all);if(item0!==null){estado=emitirBoleto.buscarEstadoAsientoItem(item0)}var item=$(".icono."+clase+"."+estado).clone();item.removeClass("ui-draggable icono");item.addClass("item");var nivel2=this.nivel2;if(eval(nivel2)){$("#nav2").removeClass("hidden");$(".nivel2").append(item)}else{$(".nivel1").append(item)}item.css("left",core.ajustarPosicion(this.coordenadaX));item.css("top",core.ajustarPosicion(this.coordenadaY));this.jsId=core.uniqId();item.attr("jsId",this.jsId);var numero=this.numero;item.find(".detalle").text(this.numero);item.data("numero",this.numero);item.data("id",this.id);if(item0!==null){item.data("tipo",item0.tipo);if(item0.tipo==="R"){item.data("idReservacion",item0.id);item.data("idClinteReservacion",item0.clinteId)}}item.css("cursor","hand")});$("#listaAsientosHidden").val(JSON.stringify(listaAsientos));$("#pendientes").addClass("hidden");$("#utilizadoSpan").text(all.length);jQuery.each(all,function(){var asiento=asientosPosicionados[this.numero];if(!asiento){$("#pendientes").removeClass("hidden");var clase=this.clase;if(clase==="1"){clase="claseA"}else{if(clase==="2"){clase="claseB"}else{throw new Error("El item debe tener uno de los id de clases siguientes: 1 o 2.")}}var estado=emitirBoleto.buscarEstadoAsientoItem(this);var item=$(".icono."+clase+"."+estado).clone();item.removeClass("ui-draggable icono");item.addClass("item2");$(".pendientes").append(item);item.css("left",core.ajustarPosicion(this.coordenadaX));item.css("top",core.ajustarPosicion(this.coordenadaY));this.jsId=core.uniqId();item.attr("jsId",this.jsId);var numero=this.numero;item.find(".detalle").text(this.numero);item.data("numero",this.numero);item.data("tipo",this.tipo);if(this.tipo==="R"){item.data("idReservacion",this.id);item.data("idClinteReservacion",this.clinteId)}}});$(".containment .active").removeClass("active");$("#tab1").addClass("active");$("#nav1").addClass("active");var listaSenales=$("#listaSenalesHidden").val();if(listaSenales){listaSenales=JSON.parse(listaSenales)}else{listaSenales=[]}jQuery.each(listaSenales,function(){var tipo=this.tipo;if(tipo==="1"){tipo="salida"}else{if(tipo==="2"){tipo="chofer"}else{throw new Error("El item debe tener uno de los id de tipo siguientes: 1 o 2.")}}var item=$(".icono."+tipo).clone();item.removeClass("ui-draggable icono");item.addClass("item");var nivel2=this.nivel2;if(eval(nivel2)){$(".nivel2").append(item)}else{$(".nivel1").append(item)}item.css("left",core.ajustarPosicion(this.coordenadaX));item.css("top",core.ajustarPosicion(this.coordenadaY));var id=this.id;this.jsId=core.uniqId();item.attr("jsId",this.jsId)});$("#listaSenalesHidden").val(JSON.stringify(listaSenales));$(".asiento .showInfo").bind("click",emitirBoleto.info);$(".nivel1 .asiento img").bind("click",emitirBoleto.clickAsiento);$(".nivel2 .asiento img").bind("click",emitirBoleto.clickAsiento)},info:function(d){d.preventDefault();d.stopPropagation();var c=$(this);var a=c.parent().data("numero");if(a===null||$.trim(a)===""){throw new Error("No se pudo determinar el numero de asiento.")}var b=core.getSelectedItemId("#salidaGrid");if(b===null||$.trim(b)===""){throw new Error("No se pudo determinar el id de la salida.")}core.request({url:$("#pathInfoAsientoSalida").attr("value"),method:"GET",extraParams:{idSalida:b,numeroAsiento:a},dataType:"html",async:true,successCallback:function(e){core.showMessageDialog({title:"Consultar Asiento Bus",fullscreen:true,compact:true,text:e,defaultButtonOFF:true,buttons:{Cancelar:{primary:true,type:"info",click:function(){$("body").css("overflow-y","auto");this.dialog2("close")}}}})}})},clickAsiento:function(f){f.preventDefault();f.stopPropagation();var a=$(this).parent();var b=a.data("numero");if(a.hasClass("reservado")){}else{if(a.hasClass("cortesia")){alert("El asiento con el número "+b+" es una cortesía.");return}else{if(a.hasClass("vendido")){alert("El asiento con el número "+b+" ya está vendido.");return}}}var d=$("#emitir_boleto_command_listaClienteBoleto").val();if(d){d=JSON.parse(d)}else{d=[]}var c=emitirBoleto.findAsiento(d,b);if(c===null){c={numero:a.data("numero"),id:a.data("id"),idCliente:"",idReservacion:a.data("idReservacion")!==undefined?a.data("idReservacion"):"",idClinteReservacion:a.data("idClinteReservacion")!==undefined?a.data("idClinteReservacion"):""};d.push(c);a.addClass("selected");emitirBoleto.renderItemGridAddBoleto(c)}else{d=core.removeItemArray(d,c);a.removeClass("selected");emitirBoleto.renderItemGridDeletedBoleto(c,d)}$("#emitir_boleto_command_listaClienteBoleto").val(JSON.stringify(d))},findAsiento:function(c,b){var a=null;b=$.trim(b);$.each(c,function(){if($.trim(this.numero)===b){a=this;return}});return a},renderItemGridAddBoleto:function(e){$("#clienteBoletoBody").find("#clienteBoletoVacioTR").hide();var a=e.numero;var h=core.uniqId("cliente_boleto");var f="Seleccione el cliente boleto";var d=$("#emitir_boleto_command_clienteDocumento").clone();d.prop("id",h);d.prop("name",h);d.data("numero",a);d.prop("placeholder",f);d.attr("placeholder",f);d.data("placeholder",f);d.val("");d.removeClass("select2-offscreen");var c=$("<tr class='trSelect"+a+"'><td>"+a+"</td><td class='inputSelect'></td></tr>");c.find(".inputSelect").append(d);var g=$("#clienteActionsHidden").clone();g.prop("id",h);g.removeClass("hidden");c.find(".inputSelect").append(g);$("#clienteBoletoBody").append(c);g.find(".addClienteHidden").click(emitirBoleto.addClienteHidden);g.find(".updateClienteHidden").click(emitirBoleto.updateClienteHidden);g.find(".updateClienteHidden").data("index",h);g.find(".seachClienteHidden").click(emitirBoleto.seachClienteHidden);var b=d.data("pathlistarclientespaginando");if(e.idClinteReservacion!==""){d.val(e.idClinteReservacion)}d.select2({minimumInputLength:1,allowClear:true,placeholder:f,ajax:{url:b,dataType:"json",type:"GET",data:function(i,j){return{term:i,page_limit:5}},results:function(j,i){return{results:j.options}}},initSelection:function(i,k){var j=$(i).val();if(j!==""){$.ajax(b,{data:{id:j},dataType:"json",type:"GET"}).done(function(l){k(l.options[0])})}}});if(d.val()===""){$(d).select2("data",$("#emitir_boleto_command_clienteDocumento").select2("data"))}},addClienteHidden:function(b){var a=$(this).parent().parent().find("input[id^='cliente_boleto']");frondend.loadSubPage(b,$(this),function(c){if(c!==""){core.request({url:a.data("pathlistarclientespaginando"),type:"POST",dataType:"json",async:false,extraParams:{id:c},successCallback:function(d){if(d.options&&d.options[0]){a.select2("data",d.options[0])}}})}})},updateClienteHidden:function(b){var a=$(this).parent().parent().find("input[id^='cliente_boleto']");frondend.loadSubPage(b,$(this),function(){var c=a.val();if(c!==""){core.request({url:a.data("pathlistarclientespaginando"),type:"POST",dataType:"json",async:false,extraParams:{id:c},successCallback:function(d){if(d.options&&d.options[0]){a.select2("data",d.options[0])}}})}})},seachClienteHidden:function(b){var a=$(this).parent().parent().find("input[id^='cliente_boleto']");frondend.loadSubPage(b,$(this),function(c){if(c!==""){core.request({url:a.data("pathlistarclientespaginando"),type:"POST",dataType:"json",async:false,extraParams:{id:c},successCallback:function(d){if(d.options&&d.options[0]){a.select2("data",d.options[0])}}})}})},renderItemGridDeletedBoleto:function(c,b){if(!b){b=$("#emitir_boleto_command_listaClienteBoleto").val();if(b){b=JSON.parse(b)}else{b=[]}}if(b.length===0){$("#clienteBoletoBody").find("tr").not("#clienteBoletoVacioTR").remove();$("#clienteBoletoBody").find("#clienteBoletoVacioTR").show()}else{$("#clienteBoletoBody").find("#clienteBoletoVacioTR").hide();var a=c.numero;$("#clienteBoletoBody").find(".trSelect"+a).remove()}},clearItemGridBoleto:function(){$("#emitir_boleto_command_listaClienteBoleto").val(JSON.stringify([]));$("#clienteBoletoBody").find("tr").not("#clienteBoletoVacioTR").remove();$("#clienteBoletoBody").find("#clienteBoletoVacioTR").show()},clickCortesia:function(b){console.debug("clickCortesia-init");b.preventDefault();b.stopPropagation();var a=$("#boletoForm");if(core.customValidateForm(a)===true&&emitirBoleto.customPreValidateCortesia()===true){core.showMessageDialog({title:"Registrar Cortesía",selector:$("#cortesiaDIV"),removeOnClose:false,uniqid:false,buttons:{Aceptar:{click:function(){if(emitirBoleto.procesandoDatos===false){emitirBoleto.procesandoDatos=true;var c=this;if(core.customValidateForm(a)===true&&emitirBoleto.customPostValidateCortesia(this)===true){$("#emitir_boleto_command_movil").prop("value",core.isMovil());$("#emitir_boleto_command_impresorasDisponibles").prop("value",frondend.listaImpresorasDisponibles);$("#emitir_boleto_command_autorizacionCortesia").prop("value",$("#pinAutorizacionCortesia").prop("value"));$("#emitir_boleto_command_tipoDocuemento").prop("value",3);emitirBoleto.syncronizarListaBoletos();$(a).ajaxSubmit({target:a.attr("action"),type:"POST",dataType:"html",cache:false,async:false,beforeSubmit:function(){core.showLoading({showLoading:true})},error:function(){core.hideLoading({showLoading:true});emitirBoleto.procesandoDatos=false},success:function(d){core.hideLoading({showLoading:true});if(!core.procesarRespuestaServidor(d)){c.dialog2("close");emitirBoleto.imprimirVoucher(d,function(){core.getPageForMenu(a.attr("action"))})}emitirBoleto.procesandoDatos=false}})}else{emitirBoleto.procesandoDatos=false}}},primary:true,type:"info"},Cancelar:function(){this.dialog2("close")}}})}},imprimirFacturas:function(responseText,successCallback){var info=core.getValueFromResponse(responseText,"info");core.showNotification({text:info});var autoPrint=core.getValueFromResponse(responseText,"autoPrint");if(eval(autoPrint)===true){frondend.printFacturaInternal(responseText,function(){alert("Operación realizada satisfactoriamente. "+info,function(){if(successCallback&&$.isFunction(successCallback)){successCallback(responseText)}})})}else{alert("Operación realizada satisfactoriamente. "+info,function(){frondend.printFacturaInternal(responseText,successCallback)})}},imprimirVoucher:function(responseText,successCallback){var info=core.getValueFromResponse(responseText,"info");core.showNotification({text:info});var autoPrint=core.getValueFromResponse(responseText,"autoPrint");if(eval(autoPrint)===true){var data=core.getValueFromResponse(responseText,"data");frondend.printVoucherBoleto($("#pathPrintVoucherBoleto").attr("value"),{ids:data},function(){alert("Operación realizada satisfactoriamente. "+info,function(){if(successCallback&&$.isFunction(successCallback)){successCallback(responseText)}})})}else{alert("Operación realizada satisfactoriamente. "+info,function(){var data=core.getValueFromResponse(responseText,"data");frondend.printVoucherBoleto($("#pathPrintVoucherBoleto").attr("value"),{ids:data},successCallback)})}},syncronizarListaBoletos:function(){var a=$("#emitir_boleto_command_listaClienteBoleto").val();if(a){a=JSON.parse(a)}else{a=[]}$.each(a,function(){this.idCliente=$(".trSelect"+this.numero).find('input[id^="cliente_boleto"]').val()});$("#emitir_boleto_command_listaClienteBoleto").val(JSON.stringify(a))},cargarMonedas:function(){var moneda=$("#emitir_boleto_command_monedaPagoVirtual").select2("val");if($.trim(moneda)===""){core.request({url:$("#pathListarDatosIniciales").val(),type:"GET",dataType:"json",async:true,showLoading:false,successCallback:function(data){if(data.optionMonedas){var optionMonedas=data.optionMonedas;$("#emitir_boleto_command_monedaPagoVirtual").select2({allowClear:false,data:{results:optionMonedas}});if(optionMonedas[0]){$("#emitir_boleto_command_monedaPagoVirtual").select2("val",optionMonedas[0].id)}}if(data.showVoucher&&eval(data.showVoucher)===true){$("#voucher").removeClass("hidden");$("#facturaVoucher").removeClass("hidden")}else{$("#voucher").addClass("hidden");$("#facturaVoucher").addClass("hidden")}}})}},clickFacturar:function(b){b.preventDefault();b.stopPropagation();var a=$("#boletoForm");if(core.customValidateForm(a)===true&&emitirBoleto.customPreValidateFactura()===true){$("#facturaVoucher").prop("checked",true);emitirBoleto.checkFacturaVoucher();core.showMessageDialog({title:"Registrar Facturar",selector:$("#facturaDIV"),removeOnClose:false,uniqid:false,buttons:{Aceptar:{click:function(){if(emitirBoleto.procesandoDatos===false){emitirBoleto.procesandoDatos=true;var c=this;if(core.customValidateForm(a)===true&&emitirBoleto.customPostValidateFactura(this)===true){$("#emitir_boleto_command_movil").prop("value",core.isMovil());$("#emitir_boleto_command_impresorasDisponibles").prop("value",frondend.listaImpresorasDisponibles);$("#emitir_boleto_command_referenciaExterna").prop("value",$("#emitir_boleto_command_referenciaExternaVirtual").prop("value"));$("#emitir_boleto_command_tipoPago").prop("value",$("#emitir_boleto_command_tipoPagoVirtual").prop("value"));$("#emitir_boleto_command_autorizacionTarjeta").prop("value",$("#emitir_boleto_command_autorizacionTarjetaVirtual").prop("value"));$("#emitir_boleto_command_totalNeto").prop("value",$("#emitir_boleto_command_totalNetoVirtual").prop("value"));$("#emitir_boleto_command_monedaPago").prop("value",$("#emitir_boleto_command_monedaPagoVirtual").prop("value"));$("#emitir_boleto_command_tasa").prop("value",$("#emitir_boleto_command_tasaVirtual").prop("value"));$("#emitir_boleto_command_totalPago").prop("value",$("#emitir_boleto_command_totalPagoVirtual").prop("value"));$("#emitir_boleto_command_efectivo").prop("value",$("#emitir_boleto_command_efectivoVirtual").prop("value"));$("#emitir_boleto_command_vuelto").prop("value",$("#emitir_boleto_command_vueltoVirtual").prop("value"));$("#emitir_boleto_command_serieFactura").prop("value",$("#emitir_boleto_command_serieFacturaVirtual").prop("value"));if($("#facturaVoucher").prop("checked")===true){$("#emitir_boleto_command_tipoDocuemento").prop("value",1)}else{$("#emitir_boleto_command_tipoDocuemento").prop("value",6)}emitirBoleto.syncronizarListaBoletos();$(a).ajaxSubmit({target:a.attr("action"),type:"POST",dataType:"html",cache:false,async:false,beforeSubmit:function(){core.showLoading({showLoading:true})},error:function(){core.hideLoading({showLoading:true});emitirBoleto.procesandoDatos=false},success:function(d){core.hideLoading({showLoading:true});if(!core.procesarRespuestaServidor(d)){c.dialog2("close");if($("#facturaVoucher").prop("checked")===true){emitirBoleto.imprimirFacturas(d,function(){core.getPageForMenu(a.attr("action"))})}else{emitirBoleto.imprimirVoucher(d,function(){core.getPageForMenu(a.attr("action"))})}}emitirBoleto.procesandoDatos=false}})}else{emitirBoleto.procesandoDatos=false}}},primary:true,type:"info"},Cancelar:function(){this.dialog2("close")}}});emitirBoleto.checkBloque2();emitirBoleto.changeTipoPago()}},clickAceptar:function(b){b.preventDefault();b.stopPropagation();var a=$("#boletoForm");if(core.customValidateForm(a)===true&&emitirBoleto.customPreValidateAceptar()===true){core.showMessageDialog({title:"Registrar Voucher",selector:$("#aceptarDIV"),removeOnClose:false,uniqid:false,buttons:{Aceptar:{click:function(){if(emitirBoleto.procesandoDatos===false){emitirBoleto.procesandoDatos=true;var c=this;if(core.customValidateForm(a)===true&&emitirBoleto.customPostValidateAceptar(this)===true){$("#emitir_boleto_command_movil").prop("value",core.isMovil());if(core.isMovil()){$("#emitir_boleto_command_impresorasDisponibles").prop("value","")}else{$("#emitir_boleto_command_impresorasDisponibles").prop("value",frondend.listaImpresorasDisponibles)}$("#emitir_boleto_command_referenciaExternaAgencia").prop("value",$("#emitir_boleto_command_referenciaExternaAgenciaVirtual").prop("value"));$("#emitir_boleto_command_totalNetoAgencia").prop("value",$("#emitir_boleto_command_totalNetoAgenciaVirtual").prop("value"));$("#emitir_boleto_command_utilizarBonoAgencia").prop("value",$("#emitir_boleto_command_utilizarBonoAgenciaVirtual").prop("checked"));$("#emitir_boleto_command_tipoDocuemento").prop("value",5);emitirBoleto.syncronizarListaBoletos();$(a).ajaxSubmit({target:a.attr("action"),type:"POST",dataType:"html",cache:false,async:false,beforeSubmit:function(){core.showLoading({showLoading:true})},error:function(){core.hideLoading({showLoading:true});emitirBoleto.procesandoDatos=false},success:function(d){core.hideLoading({showLoading:true});if(!core.procesarRespuestaServidor(d)){c.dialog2("close");emitirBoleto.imprimirVoucher(d,function(){core.getPageForMenu(a.attr("action"))})}emitirBoleto.procesandoDatos=false}})}else{emitirBoleto.procesandoDatos=false}}},primary:true,type:"info"},Cancelar:function(){this.dialog2("close")}}});emitirBoleto.loadImporteTotalAgencia()}},clickFacturarEspecial:function(b){b.preventDefault();b.stopPropagation();var a=$("#boletoForm");if(core.customValidateForm(a)===true&&emitirBoleto.customPreValidateFacturaEspecial()===true){$("#detalleFacturaBoletoBody").find("tr").remove();$("#emitir_boleto_command_estacionFacturacionEspecialVirtual").select2("val","");$("#emitir_boleto_command_serieFacturacionEspecialVirtual").select2("val","");$("#pingFacturacionEspecial").val("");$("#totalFacturarEspecial").text("");$("#facturaEspecialVoucher").prop("checked",true);emitirBoleto.checkFacturaEspecialVoucher();emitirBoleto.calcularImporteTotalMonedaBase(function(c){console.debug(c);if(c.error&&$.trim(c.error)!==""){alert(c.error)}else{$("#totalFacturarEspecial").text("Total: GTQ "+c.total);core.showMessageDialog({title:"Registrar Facturar Otra Estación",selector:$("#facturacionEspecialDIV"),removeOnClose:false,uniqid:false,buttons:{Aceptar:{click:function(){if(emitirBoleto.procesandoDatos===false){emitirBoleto.procesandoDatos=true;var d=this;if(core.customValidateForm(a)===true&&emitirBoleto.customPostValidateFacturaEspecial(this)===true){$("#emitir_boleto_command_movil").prop("value",core.isMovil());$("#emitir_boleto_command_impresorasDisponibles").prop("value",frondend.listaImpresorasDisponibles);$("#emitir_boleto_command_estacionFacturacionEspecial").prop("value",$("#emitir_boleto_command_estacionFacturacionEspecialVirtual").prop("value"));$("#emitir_boleto_command_serieFacturacionEspecial").prop("value",$("#emitir_boleto_command_serieFacturacionEspecialVirtual").prop("value"));$("#emitir_boleto_command_pingFacturacionEspecial").prop("value",$("#pingFacturacionEspecial").prop("value"));if($("#facturaEspecialVoucher").prop("checked")===true){$("#emitir_boleto_command_tipoDocuemento").prop("value",4)}else{$("#emitir_boleto_command_tipoDocuemento").prop("value",7)}emitirBoleto.syncronizarListaBoletos();$(a).ajaxSubmit({target:a.attr("action"),type:"POST",dataType:"html",cache:false,async:false,beforeSubmit:function(){core.showLoading({showLoading:true})},error:function(){core.hideLoading({showLoading:true});emitirBoleto.procesandoDatos=false},success:function(e){core.hideLoading({showLoading:true});if(!core.procesarRespuestaServidor(e)){d.dialog2("close");var f=core.getValueFromResponse(e,"info");core.showNotification({text:f});alert("Operación realizada satisfactoriamente. "+f,function(){core.getPageForMenu(a.attr("action"))})}emitirBoleto.procesandoDatos=false}})}else{emitirBoleto.procesandoDatos=false}}},primary:true,type:"info"},Cancelar:function(){this.dialog2("close")}}})}},false,{})}},customCommunValidate:function(a){var b=$("#clienteBoletoBody").find("tr").not("#clienteBoletoVacioTR").length;if(b<=0){core.hiddenDialog2(a);alert("Debe definir al menos un boleto.",function(){core.showDialog2(a)});return false}return true},customPreValidateCortesia:function(a){if(emitirBoleto.customCommunValidate(a)===false){return false}var b=$("#clienteBoletoBody").find("tr").not("#clienteBoletoVacioTR").length;if(b>1){core.hiddenDialog2(a);alert("Para las cortesías no puede definir más de un boleto.",function(){core.showDialog2(a)});return false}return true},customPostValidateCortesia:function(a){var b=$("#pinAutorizacionCortesia").prop("value");if(b===undefined||b===null||$.trim(b)===""){core.hiddenDialog2(a);alert("Debe especificar un PIN de autorización.",function(){core.showDialog2(a)});return false}return true},customPreValidateAceptar:function(a){if(emitirBoleto.customCommunValidate(a)===false){return false}return true},customPreValidateFactura:function(c){if(emitirBoleto.customCommunValidate(c)===false){return false}var b=$("#emitir_boleto_command_monedaPagoVirtual").select2("val");if($.trim(b)===""){core.hiddenDialog2(c);alert("Debe abrir una caja para facturar.",function(){core.showDialog2(c)});return false}var a=$("#emitir_boleto_command_serieFacturaVirtual").data("sizeItems");if(a<=0){core.hiddenDialog2(c);alert("No existen series de factura activa en la estación.",function(){core.showDialog2(c)});return false}return true},customPreValidateFacturaEspecial:function(a){if(emitirBoleto.customCommunValidate(a)===false){return false}return true},customPostValidateAceptar:function(a){var b=$("#emitir_boleto_command_totalNetoAgenciaVirtual").prop("value");if(b===undefined||b===null||$.trim(b)===""){core.hiddenDialog2(a);alert("No se ha podido determinar el total neto.",function(){core.showDialog2(a)});return false}return true},customPostValidateFactura:function(e){if($("#facturaVoucher").prop("checked")===true){if(frondend.listaImpresorasDisponibles===null||$.trim(frondend.listaImpresorasDisponibles)===""){core.hiddenDialog2(e);alert("El sistema aún no ha podido detectar las impresoras para la facturación.",function(){core.showDialog2(e)});return false}var b=$("#emitir_boleto_command_serieFacturaVirtual").select2("val");if($.trim(b)===""){core.hiddenDialog2(e);alert("Debe seleccionar una serie de factura.",function(){core.showDialog2(e)});return false}}var c=$("#emitir_boleto_command_tipoPagoVirtual").prop("value");if(c===undefined||c===null||$.trim(c)===""){core.hiddenDialog2(e);alert("Debe especificar un tipo de pago.",function(){core.showDialog2(e)});return false}else{if(c==="1"){var f=$("#emitir_boleto_command_monedaPagoVirtual").prop("value");if(f===undefined||f===null||$.trim(f)===""){core.hiddenDialog2(e);alert("Debe especificar una moneda de pago.",function(){core.showDialog2(e)});return false}var d=$("#emitir_boleto_command_efectivoVirtual").prop("value");if(d===undefined||d===null||$.trim(d)===""){core.hiddenDialog2(e);alert("Debe especificar un efectivo.",function(){core.showDialog2(e)});return false}}else{var a=$("#emitir_boleto_command_autorizacionTarjetaVirtual").prop("value");if(a===undefined||a===null||$.trim(a)===""){core.hiddenDialog2(e);alert("Debe especificar un código de autorización.",function(){core.showDialog2(e)});return false}}}var g=$("#emitir_boleto_command_totalNetoVirtual").prop("value");if(g===undefined||g===null||$.trim(g)===""){core.hiddenDialog2(e);alert("No se ha podido determinar el total neto.",function(){core.showDialog2(e)});return false}return true},customPostValidateFacturaEspecial:function(c){var f=$("#totalFacturarEspecial").text();if(f===undefined||f===null||$.trim(f)===""){core.hiddenDialog2(c);alert("No se ha podido determinar el total.",function(){core.showDialog2(c)});return false}var a=$("#emitir_boleto_command_estacionFacturacionEspecialVirtual").prop("value");if(a===undefined||a===null||$.trim(a)===""){core.hiddenDialog2(c);alert("Debe especificar la estación solicitante de la facturación.",function(){core.showDialog2(c)});return false}if($("#facturaEspecialVoucher").prop("checked")){var d=$("#emitir_boleto_command_serieFacturacionEspecialVirtual").prop("value");if(d===undefined||d===null||$.trim(d)===""){core.hiddenDialog2(c);alert("Debe especificar una serie de facturación.",function(){core.showDialog2(c)});return false}}var e=$("#pingFacturacionEspecial").prop("value");if(e===undefined||e===null||$.trim(e)===""){core.hiddenDialog2(c);alert("Debe definir el ping de autorización de facturación.",function(){core.showDialog2(c)});return false}var b=$("#detalleFacturaBoletoBody").find("tr").length;if(b<=0){core.hiddenDialog2(c);alert("La estación seleccionada no tiene facturas disponibles.",function(){core.showDialog2(c)});return false}return true},customValidateBoleto:function(){if(emitirBoleto.customCommunValidate()===false){return false}return true},checkBloque2:function(a){if(!a){a=$("#emitir_boleto_command_tipoPagoVirtual").val()}if(a===""){$("#emitir_boleto_command_totalNetoVirtual").val("");$(".bloque2").hide();$(".bloque5").hide();emitirBoleto.checkBloque3(a)}else{if(a==="1"){$(".bloque2").show();$(".bloque5").hide();emitirBoleto.checkBloque3(a)}else{if(a==="2"){$(".bloque2").hide();$(".bloque5").show();emitirBoleto.checkBloque3(a)}else{if(a==="3"){$(".bloque2").hide();$(".bloque5").show();emitirBoleto.checkBloque3(a)}}}}},checkBloque3:function(a){if(!a){a=$("#emitir_boleto_command_tipoPagoVirtual").val()}var b=$("#emitir_boleto_command_monedaPagoVirtual").val();if(a==="1"&&b!==""&&b!=="1"){$(".bloque3").show()}else{$(".bloque3").hide()}emitirBoleto.checkBloque4(a)},checkBloque4:function(a){if(!a){a=$("#emitir_boleto_command_tipoPagoVirtual").val()}if(a==="1"){$(".bloque4").show()}else{$(".bloque4").hide()}},calcularImporteTotalMonedaBase:function(c,e,d){emitirBoleto.syncronizarListaBoletos();var a=$("#emitir_boleto_command_estacionSubeEn").val();var b=$("#emitir_boleto_command_estacionBajaEn").val();var g=$("#emitir_boleto_command_tipoPagoVirtual").val();var j=core.getSelectedItemId("#salidaGrid");var i=$("#emitir_boleto_command_listaClienteBoleto").val();var f=$("#emitir_boleto_command_utilizarDesdeEstacionOrigenSalida").prop("checked");if(a!==null&&$.trim(a)!==""&&b!==null&&$.trim(b)!==""&&g!==null&&$.trim(g)!==""&&j!==null&&$.trim(j)!==""&&i!==null&&$.trim(i)!==""){var h={idEstacionOrigen:a,idEstacionDestino:b,idTipoPago:g,idSalida:j,listaClienteBoleto:i,pagadoDesdeOrigenRuta:f};if(d){jQuery.extend(h,d)}core.request({url:$("#pathCalcularImporteTotalMonedaBase").attr("value"),method:"POST",extraParams:h,dataType:"json",async:e,successCallback:function(k){c(k,h)}})}},loadImporteTotalAgencia:function(){console.log("changeTipoPago-init");$("#emitir_boleto_command_totalNetoAgenciaVirtual").val("");emitirBoleto.calcularImporteTotalMonedaBase(function(b,c){if(b.error&&$.trim(b.error)!==""){var a=$('.modal[style^="display: block;"]');a.hide();alert(b.error,function(){a.show()})}else{$("#emitir_boleto_command_totalNetoAgenciaVirtual").val(b.totalSec)}},true,{monedaSec:$("#emitir_boleto_command_monedaAgencia").val()})},changeTipoPago:function(){emitirBoleto.checkBloque2();$("#emitir_boleto_command_totalNetoVirtual").val("");$("#emitir_boleto_command_tasaVirtual").val("");$("#emitir_boleto_command_totalPagoVirtual").val("");$("#emitir_boleto_command_vueltoVirtual").val("");$("#emitir_boleto_command_efectivoVirtual").val("");emitirBoleto.calcularImporteTotalMonedaBase(function(b,c){if(b.error&&$.trim(b.error)!==""){var a=$('.modal[style^="display: block;"]');a.hide();alert(b.error,function(){a.show()})}else{$("#emitir_boleto_command_totalNetoVirtual").val(b.total);if(c.idTipoPago==="1"){emitirBoleto.changeMonedaPago()}$("#emitir_boleto_command_efectivoVirtual").focus()}},true,{})},changeMonedaPago:function(){var b=$("#emitir_boleto_command_monedaPagoVirtual").val();$("#emitir_boleto_command_tasaVirtual").val("");$("#emitir_boleto_command_totalPagoVirtual").val("");$("#emitir_boleto_command_vueltoVirtual").val("");if(b===null||$.trim(b)===""){$("#prependTotalPagoVirtual").text("???");$("#prependEfectivoVirtual").text("???")}else{if($.trim(b)==="1"){$("#prependTotalPagoVirtual").text("GTQ");$("#prependEfectivoVirtual").text("GTQ");emitirBoleto.changeEfectivo()}else{var c=$("#emitir_boleto_command_totalNetoVirtual").val();var a=$("#emitir_boleto_command_monedaPagoVirtual").val();$("#prependTotalPagoVirtual").text("GTQ");$("#prependEfectivoVirtual").text("GTQ");if(c!==null&&$.trim(c)!==""&&a!==null&&$.trim(a)!==""){core.request({url:$("#pathCalcularImporteTotalPorMoneda").attr("value"),method:"POST",extraParams:{totalNeto:c,idMoneda:a},dataType:"json",async:true,successCallback:function(e){if(e.error&&$.trim(e.error)!==""){var d=$('.modal[style^="display: block;"]');d.hide();alert(e.error,function(){d.show()})}else{$("#prependTotalPagoVirtual").text(e.sigla);$("#prependEfectivoVirtual").text(e.sigla);$("#emitir_boleto_command_tasaVirtual").val(e.tasa);$("#emitir_boleto_command_totalPagoVirtual").val(e.total);emitirBoleto.changeEfectivo()}}})}}}emitirBoleto.checkBloque3()},changeEfectivo:function(){var f=$("#emitir_boleto_command_monedaPagoVirtual").val();$("#emitir_boleto_command_vueltoVirtual").val("");var b=$("#emitir_boleto_command_efectivoVirtual").val();if(!$.isNumeric(b)){$("#emitir_boleto_command_efectivoVirtual").val("");return}else{b=parseFloat(b).toFixed(2);$("#emitir_boleto_command_efectivoVirtual").val(b)}if($.trim(f)==="1"){var g=$("#emitir_boleto_command_totalNetoVirtual").val();var c=b-parseFloat(g);c=parseFloat(c).toFixed(2);if(c===0){$("#emitir_boleto_command_vueltoVirtual").val(0)}else{if(c<0){var e=$('.modal[style^="display: block;"]');e.hide();alert("El efectivo no alcanza, como mínimo son:"+g+".",function(){e.show();$("#emitir_boleto_command_efectivoVirtual").val(g);$("#emitir_boleto_command_vueltoVirtual").val(0)})}else{$("#emitir_boleto_command_vueltoVirtual").val(c)}}}else{var d=$("#emitir_boleto_command_totalPagoVirtual").val();var c=b-parseFloat(d);c=parseFloat(c).toFixed(2);if(c===0){$("#emitir_boleto_command_vueltoVirtual").val(0)}else{if(c<0){var e=$('.modal[style^="display: block;"]');e.hide();alert("El efectivo no alcanza, como mínimo son:"+d+".",function(){e.show();$("#emitir_boleto_command_efectivoVirtual").val(d);$("#emitir_boleto_command_vueltoVirtual").val(0)})}else{var a=$("#emitir_boleto_command_monedaPagoVirtual").val();if(a!==null&&$.trim(a)!==""){core.request({url:$("#pathCalcularImporteTotalPorMoneda").attr("value"),method:"POST",extraParams:{totalNeto:c,idMoneda:a,dir:false},dataType:"json",async:true,successCallback:function(i){if(i.error&&$.trim(i.error)!==""){var h=$('.modal[style^="display: block;"]');h.hide();alert(i.error,function(){h.show();$("#emitir_boleto_command_efectivoVirtual").val(d);$("#emitir_boleto_command_vueltoVirtual").val(0)})}else{$("#emitir_boleto_command_vueltoVirtual").val(i.total)}}})}}}}},changeEstacionFacturacionEspecial:function(){var estacionFacturacionEspecial=$("#emitir_boleto_command_estacionFacturacionEspecialVirtual").select2("val");var idSalida=core.getSelectedItemId("#salidaGrid");$("#detalleFacturaBoletoBody").find("tr").remove();$("#emitir_boleto_command_serieFacturacionEspecialVirtual").select2({data:[]});$("#facturaEspecialVoucher").prop("checked",true);emitirBoleto.checkFacturaEspecialVoucher();if(estacionFacturacionEspecial!==null&&$.trim(estacionFacturacionEspecial)!==""&&idSalida!==null&&$.trim(idSalida)!==""){core.request({url:$("#pathSeriesActivaPorEstacion").attr("value"),method:"POST",extraParams:{idEstacion:estacionFacturacionEspecial,idSalida:idSalida},dataType:"json",async:true,successCallback:function(success){var optionSeriesFacturas=success.optionSeriesFacturas;if(optionSeriesFacturas){$("#emitir_boleto_command_serieFacturacionEspecialVirtual").select2({allowClear:false,data:{results:optionSeriesFacturas}});var cantidad=optionSeriesFacturas.length;$("#emitir_boleto_command_serieFacturacionEspecialVirtual").data("sizeItems",cantidad);if(cantidad>0){if(optionSeriesFacturas[0]){$("#emitir_boleto_command_serieFacturacionEspecialVirtual").select2("val",optionSeriesFacturas[0].id);emitirBoleto.changeSerieFacturacionEspecial()}}else{var modal=$('.modal[style^="display: block;"]');modal.hide();alert("La estación no tiene series de facturas activas.",function(){modal.show()})}}if(success.showVoucher&&eval(success.showVoucher)===true){$("#facturaEspecialVoucher").removeClass("hidden")}else{$("#facturaEspecialVoucher").addClass("hidden")}}})}},changeSerieFacturacionEspecial:function(){var b=$("#emitir_boleto_command_estacionFacturacionEspecialVirtual").select2("val");var a=$("#emitir_boleto_command_serieFacturacionEspecialVirtual").select2("val");$("#detalleFacturaBoletoBody").find("tr").remove();emitirBoleto.calcularImporteTotalMonedaBase(function(e){if(e.error&&$.trim(e.error)!==""){var d=$('.modal[style^="display: block;"]');d.hide();alert(e.error,function(){d.show()})}else{var c=e.boletos;$.each(c,function(){var f=$("<tr><td>"+this.numero+"</td><td>"+this.factura+"</td><td>"+this.importe+"</td></tr>");$("#detalleFacturaBoletoBody").append(f)})}},false,{detalle:true,estacionDetalle:b,facturar:$("#facturaEspecialVoucher").prop("checked"),serieFacturacionEspecial:a})},};
emitirBoletoCamino={procesandoDatos:false,funcionesAddOnload:function(){this._init();this._conectEvents()},_init:function(){$("#emitir_boleto_command_identificadorWeb").val(core.uniqIdCompuesto());var a=$("#emitir_boleto_command_clienteDocumento").data("pathlistarclientespaginando");$("#emitir_boleto_command_clienteDocumento").select2({minimumInputLength:1,allowClear:true,ajax:{url:a,dataType:"json",type:"GET",data:function(b,c){return{term:b,page_limit:5}},results:function(c,b){return{results:c.options}}}});$("#emitir_boleto_command_fechaSalida").datepicker({format:"dd/mm/yyyy",startDate:"-1d",endDate:"+2m",todayBtn:true,language:"es",autoclose:true,todayHighlight:true});$("#emitir_boleto_command_fechaSalida").datepicker("setDate",new Date());$("#emitir_boleto_command_estacionOrigen").select2({allowClear:true});$("#emitir_boleto_command_estacionFacturacionEspecialVirtual").select2({allowClear:true});$("#salidaGrid").flexigrid({url:$("#salidaGrid").data("url"),dataType:"json",singleSelect:true,query:emitirBoletoCamino.getQueryString(),rpOptions:[5,10,15,20,25,30,40,50],colModel:[{display:"ID",name:"id",width:70,sortable:true,align:"center",hide:true},{display:"Fecha y Hora",name:"fecha",width:120,sortable:false,align:"center"},{display:"Origen",name:"origen",width:120,sortable:false,align:"left"},{display:"Destino",name:"destino",width:120,sortable:false,align:"left"},{display:"Empresa",name:"empresa",width:80,sortable:false,align:"left"},{display:"Itinerario",name:"itinerario",width:130,sortable:false,align:"left"},{display:"Bus",name:"bus",width:130,sortable:false,align:"left"},{display:"Piloto",name:"piloto",width:130,sortable:false,align:"left",hide:true},{display:"Estado",name:"estado",width:70,sortable:false,align:"center"}],usepager:true,useRp:true,rp:15,showTableToggleBtn:false,height:250,onSuccess:function(){$("#salidaGrid tr").on("click",emitirBoletoCamino.checkSelectedSalida);emitirBoletoCamino.checkSelectedSalida();emitirBoletoCamino.cargarMonedas()}});$("#emitir_boleto_command_estacionSubeEn").select2({allowClear:true,data:[]});$("#emitir_boleto_command_estacionBajaEn").select2({allowClear:true,data:[]});$("#emitir_boleto_command_tipoPagoVirtual").select2({allowClear:false});$("#emitir_boleto_command_monedaPagoVirtual").select2({allowClear:false,data:[]});$("#emitir_boleto_command_serieFacturaVirtual").select2({allowClear:false,data:[]});$("#emitir_boleto_command_serieFacturacionEspecialVirtual").select2({allowClear:false,data:[]});emitirBoletoCamino.checkSelectedSalida()},_conectEvents:function(){$("#cancelar").click(function(a){a.preventDefault();a.stopPropagation();confirm("¿Está seguro que desea cancelar la operación?",function(b){if(b===true){core.getPageForMenu($("#cancelar").attr("href"))}})});$("#addCliente").click(function(a){frondend.loadSubPage(a,$(this),function(c){var b=$("#emitir_boleto_command_clienteDocumento");if(c!==""){core.request({url:b.data("pathlistarclientespaginando"),type:"POST",dataType:"json",async:false,extraParams:{id:c},successCallback:function(d){if(d.options&&d.options[0]){$("#emitir_boleto_command_clienteDocumento").select2("data",d.options[0])}}})}},{confirmarOperacion:false})});$("#updateCliente").click(function(a){frondend.loadSubPage(a,$(this),function(){var b=$("#emitir_boleto_command_clienteDocumento");var c=b.val();if(c!==""){core.request({url:b.data("pathlistarclientespaginando"),type:"POST",dataType:"json",async:false,extraParams:{id:c},successCallback:function(d){if(d.options&&d.options[0]){$("#emitir_boleto_command_clienteDocumento").select2("data",d.options[0])}}})}})});$("#seachCliente").click(function(a){frondend.loadSubPage(a,$(this),function(c){if(c!==""){var b=$("#emitir_boleto_command_clienteDocumento");core.request({url:b.data("pathlistarclientespaginando"),type:"POST",dataType:"json",async:false,extraParams:{id:c},successCallback:function(d){if(d.options&&d.options[0]){$("#emitir_boleto_command_clienteDocumento").select2("data",d.options[0])}}})}})});$("#cortesia").click(emitirBoletoCamino.clickCortesia);$("#facturar").click(emitirBoletoCamino.clickFacturar);$("#facturarEspecial").click(emitirBoletoCamino.clickFacturarEspecial);$("#addBoleto").click(emitirBoletoCamino.clickAddBoleto);$("#emitir_boleto_command_fechaSalida").on("change",emitirBoletoCamino.changeFiltersSalida);$("#emitir_boleto_command_estacionOrigen").on("change",emitirBoletoCamino.changeFiltersSalida);$("#emitir_boleto_command_tipoPagoVirtual").on("change",emitirBoletoCamino.changeTipoPago);$("#emitir_boleto_command_monedaPagoVirtual").on("change",emitirBoletoCamino.changeMonedaPago);$("#emitir_boleto_command_efectivoVirtual").on("change",emitirBoletoCamino.changeEfectivo);$("#emitir_boleto_command_estacionFacturacionEspecialVirtual").on("change",emitirBoletoCamino.changeEstacionFacturacionEspecial);$("#emitir_boleto_command_serieFacturacionEspecialVirtual").on("change",emitirBoletoCamino.changeSerieFacturacionEspecial);$("#facturaEspecialVoucher").bind("click",emitirBoletoCamino.changeSerieFacturacionEspecial);$("#emitir_boleto_command_serieFacturaVirtual").on("change",function(){console.debug("serieFacturaVirtual-init");var b=$("#emitir_boleto_command_serieFacturaVirtual").select2("val");var a=$("#emitir_boleto_command_serieFacturaVirtual").select2("data").idEmpresa;sessionStorage.setItem("sist_last_id_serie_factura_"+a,b)});$("#facturaVoucher").bind("click",emitirBoletoCamino.checkFacturaVoucher);$("#facturaEspecialVoucher").bind("click",emitirBoletoCamino.checkFacturaEspecialVoucher)},checkFacturaVoucher:function(){var a=$("#facturaVoucher").prop("checked");if(a){$(".voucherDIV").show()}else{$(".voucherDIV").hide()}},checkFacturaEspecialVoucher:function(){var a=$("#facturaEspecialVoucher").prop("checked");if(a){$(".voucherDIV").show()}else{$(".voucherDIV").hide()}},checkSelectedSalida:function(){emitirBoletoCamino.clearItemGridBoleto();var a=core.getSelectedItemId("#salidaGrid");$("#emitir_boleto_command_salida").prop("value",a);if(a===null){$("#emitir_boleto_command_estacionSubeEn").select2({data:[]});$("#emitir_boleto_command_estacionBajaEn").select2({data:[]});$("#emitir_boleto_command_serieFacturaVirtual").select2({data:[]});$("#emitir_boleto_command_serieFacturacionEspecialVirtual").select2({data:[]});$("#dependenciasSelecccionSalidaGrid").hide()}else{core.request({url:$("#pathGetInformacionPorSalida").prop("value"),type:"POST",dataType:"json",async:false,extraParams:{idSalida:a,camino:true,showTime:true},successCallback:function(d){$("#dependenciasSelecccionSalidaGrid").show();var i=d.optionEstacionOrigen;var f=d.optionEstacionDestino;var b=d.optionsEstacionesIntermedias;$.each(i,function(){this.text=(this.time!==""?this.time+" ":"")+this.text});$.each(f,function(){this.text=(this.time!==""?this.time+" ":"")+this.text});$.each(b,function(){this.text=(this.time!==""?this.time+" ":"")+this.text});if(d.optionEstacionOrigen&&d.optionsEstacionesIntermedias){var e=i.concat(b);$("#emitir_boleto_command_estacionSubeEn").select2({allowClear:true,data:{results:e}});$("#emitir_boleto_command_estacionSubeEn").select2("val",i[0].id)}if(d.optionEstacionDestino&&d.optionsEstacionesIntermedias){var e=f.concat(b);$("#emitir_boleto_command_estacionBajaEn").select2({allowClear:true,data:{results:e}});$("#emitir_boleto_command_estacionBajaEn").select2("val",f[0].id)}var c=d.optionSeriesFacturas;if(c){$("#emitir_boleto_command_serieFacturaVirtual").select2({allowClear:false,data:{results:c}});var j=c.length;$("#emitir_boleto_command_serieFacturaVirtual").data("sizeItems",j);if(j>0){var g=c[0].idEmpresa;var h=sessionStorage.getItem("sist_last_id_serie_factura_"+g);if(h){$("#emitir_boleto_command_serieFacturaVirtual").select2("val",h)}else{if(c[0]){$("#emitir_boleto_command_serieFacturaVirtual").select2("val",c[0].id)}}}}$("#emitir_boleto_command_serieFacturacionEspecialVirtual").select2({data:[]})}})}$("#cantidadBoletosSpan").text($("#clienteBoletoBody").find(".inputSelect").length)},changeFiltersSalida:function(){$("#salidaGrid").flexOptions({newp:1,query:emitirBoletoCamino.getQueryString()}).flexReload()},getQueryString:function(){return $(".filterSalida").fieldSerialize()},clickAddBoleto:function(d){d.preventDefault();d.stopPropagation();var i=$("#clienteBoletoBody").find(".inputSelect").length;if(i>=50){alert("No se pueden selecciona más de 50 boletos en una operación.");return}var g=$("#emitir_boleto_command_listaClienteBoleto").val();if(g){g=JSON.parse(g)}else{g=[]}var c=core.uniqId("boleto_");var j={numero:-1,id:c,idCliente:"",idReservacion:"",idClinteReservacion:""};g.push(j);$("#emitir_boleto_command_listaClienteBoleto").val(JSON.stringify(g));$("#clienteBoletoBody").find("#clienteBoletoVacioTR").hide();var b=core.uniqId("cliente_boleto");var h="Seleccione el cliente boleto";var k=$("#emitir_boleto_command_clienteDocumento").clone();k.prop("id",b);k.prop("name",b);k.prop("placeholder",h);k.attr("placeholder",h);k.data("placeholder",h);k.val("");k.removeClass("select2-offscreen");var f=$("<tr id='"+c+"'><td class='inputSelect'></td><td><a class='deleteBoleto' data-title='Adicionar Boleto'><i class='icon-minus'></i></a></td></tr>");f.find(".inputSelect").append(k);f.find(".deleteBoleto").addClass("btn btn-small");var l=$("#clienteActionsHidden").clone();l.prop("id",b);l.removeClass("hidden");f.find(".inputSelect").append(l);$("#clienteBoletoBody").append(f);l.find(".addClienteHidden").click(emitirBoletoCamino.addClienteHidden);l.find(".updateClienteHidden").click(emitirBoletoCamino.updateClienteHidden);l.find(".updateClienteHidden").data("index",b);l.find(".seachClienteHidden").click(emitirBoletoCamino.seachClienteHidden);f.find(".deleteBoleto").click(emitirBoletoCamino.renderItemGridDeletedBoleto);var a=k.data("pathlistarclientespaginando");k.select2({minimumInputLength:1,allowClear:true,placeholder:h,ajax:{url:a,dataType:"json",type:"GET",data:function(e,m){return{term:e,page_limit:5}},results:function(m,e){return{results:m.options}}}});if(k.val()===""){$(k).select2("data",$("#emitir_boleto_command_clienteDocumento").select2("data"))}$("#cantidadBoletosSpan").text($("#clienteBoletoBody").find(".inputSelect").length)},addClienteHidden:function(b){var a=$(this).parent().parent().find("input[id^='cliente_boleto']");frondend.loadSubPage(b,$(this),function(c){if(c!==""){core.request({url:a.data("pathlistarclientespaginando"),type:"POST",dataType:"json",async:false,extraParams:{id:c},successCallback:function(d){if(d.options&&d.options[0]){a.select2("data",d.options[0])}}})}})},updateClienteHidden:function(b){var a=$(this).parent().parent().find("input[id^='cliente_boleto']");frondend.loadSubPage(b,$(this),function(){var c=a.val();if(c!==""){core.request({url:a.data("pathlistarclientespaginando"),type:"POST",dataType:"json",async:false,extraParams:{id:c},successCallback:function(d){if(d.options&&d.options[0]){a.select2("data",d.options[0])}}})}})},seachClienteHidden:function(b){var a=$(this).parent().parent().find("input[id^='cliente_boleto']");frondend.loadSubPage(b,$(this),function(c){if(c!==""){core.request({url:a.data("pathlistarclientespaginando"),type:"POST",dataType:"json",async:false,extraParams:{id:c},successCallback:function(d){if(d.options&&d.options[0]){a.select2("data",d.options[0])}}})}})},renderItemGridDeletedBoleto:function(d){d.preventDefault();d.stopPropagation();var c=$("#emitir_boleto_command_listaClienteBoleto").val();if(c){c=JSON.parse(c)}else{c=[]}var a=$(this).parent().parent().attr("id");if(a===undefined||a===null){console.debug($(this));throw new Error("No se puedo determinar el id a eliminar")}var b=emitirBoletoCamino.findAsiento(c,a);if(b!==null){c=core.removeItemArray(c,b);if(c.length===0){$("#clienteBoletoBody").find("tr").not("#clienteBoletoVacioTR").remove();$("#clienteBoletoBody").find("#clienteBoletoVacioTR").show()}else{$("#clienteBoletoBody").find("#clienteBoletoVacioTR").hide();$("#clienteBoletoBody").find("#"+a).remove()}$("#emitir_boleto_command_listaClienteBoleto").val(JSON.stringify(c))}$("#cantidadBoletosSpan").text($("#clienteBoletoBody").find(".inputSelect").length)},clearItemGridBoleto:function(){$("#emitir_boleto_command_listaClienteBoleto").val(JSON.stringify([]));$("#clienteBoletoBody").find("tr").not("#clienteBoletoVacioTR").remove();$("#clienteBoletoBody").find("#clienteBoletoVacioTR").show()},findAsiento:function(b,c){var a=null;c=$.trim(c);$.each(b,function(){if($.trim(this.id)===c){a=this;return}});return a},clickCortesia:function(b){console.debug("clickCortesia-init");b.preventDefault();b.stopPropagation();var a=$("#boletoForm");if(core.customValidateForm(a)===true&&emitirBoletoCamino.customPreValidateCortesia()===true){core.showMessageDialog({title:"Registrar Cortesía",selector:$("#cortesiaDIV"),removeOnClose:false,uniqid:false,buttons:{Aceptar:{click:function(){if(emitirBoletoCamino.procesandoDatos===false){emitirBoletoCamino.procesandoDatos=true;var c=this;if(core.customValidateForm(a)===true&&emitirBoletoCamino.customPostValidateCortesia(this)===true){$("#emitir_boleto_command_movil").prop("value",core.isMovil());$("#emitir_boleto_command_impresorasDisponibles").prop("value",frondend.listaImpresorasDisponibles);$("#emitir_boleto_command_autorizacionCortesia").prop("value",$("#pinAutorizacionCortesia").prop("value"));$("#emitir_boleto_command_tipoDocuemento").prop("value",3);emitirBoletoCamino.syncronizarListaBoletos();$(a).ajaxSubmit({target:a.attr("action"),type:"POST",dataType:"html",cache:false,async:false,beforeSubmit:function(){core.showLoading({showLoading:true})},error:function(){core.hideLoading({showLoading:true});emitirBoletoCamino.procesandoDatos=false},success:function(d){core.hideLoading({showLoading:true});if(!core.procesarRespuestaServidor(d)){c.dialog2("close");emitirBoletoCamino.imprimirVoucher(d,function(){core.getPageForMenu(a.attr("action"))})}emitirBoletoCamino.procesandoDatos=false}})}else{emitirBoletoCamino.procesandoDatos=false}}},primary:true,type:"info"},Cancelar:function(){this.dialog2("close")}}})}},imprimirFacturas:function(responseText,successCallback){var info=core.getValueFromResponse(responseText,"info");core.showNotification({text:info});var autoPrint=core.getValueFromResponse(responseText,"autoPrint");if(eval(autoPrint)===true){frondend.printFacturaInternal(responseText,function(){alert("Operación realizada satisfactoriamente. "+info,function(){if(successCallback&&$.isFunction(successCallback)){successCallback(responseText)}})})}else{alert("Operación realizada satisfactoriamente. "+info,function(){frondend.printFacturaInternal(responseText,successCallback)})}},imprimirVoucher:function(responseText,successCallback){var info=core.getValueFromResponse(responseText,"info");core.showNotification({text:info});var autoPrint=core.getValueFromResponse(responseText,"autoPrint");if(eval(autoPrint)===true){var data=core.getValueFromResponse(responseText,"data");frondend.printVoucherBoleto($("#pathPrintVoucherBoleto").attr("value"),{ids:data},function(){alert("Operación realizada satisfactoriamente. "+info,function(){if(successCallback&&$.isFunction(successCallback)){successCallback(responseText)}})})}else{alert("Operación realizada satisfactoriamente. "+info,function(){var data=core.getValueFromResponse(responseText,"data");frondend.printVoucherBoleto($("#pathPrintVoucherBoleto").attr("value"),{ids:data},successCallback)})}},syncronizarListaBoletos:function(){var a=$("#emitir_boleto_command_listaClienteBoleto").val();if(a){a=JSON.parse(a)}else{a=[]}$.each(a,function(){this.idCliente=$("#"+this.id).find('input[id^="cliente_boleto"]').val()});$("#emitir_boleto_command_listaClienteBoleto").val(JSON.stringify(a))},cargarMonedas:function(){var moneda=$("#emitir_boleto_command_monedaPagoVirtual").select2("val");if($.trim(moneda)===""){core.request({url:$("#pathListarDatosIniciales").val(),type:"GET",dataType:"json",async:true,showLoading:false,successCallback:function(data){if(data.optionMonedas){var optionMonedas=data.optionMonedas;$("#emitir_boleto_command_monedaPagoVirtual").select2({allowClear:false,data:{results:optionMonedas}});if(optionMonedas[0]){$("#emitir_boleto_command_monedaPagoVirtual").select2("val",optionMonedas[0].id)}}if(data.showVoucher&&eval(data.showVoucher)===true){$("#voucher").removeClass("hidden");$("#facturaVoucher").removeClass("hidden")}else{$("#voucher").addClass("hidden");$("#facturaVoucher").addClass("hidden")}}})}},clickFacturar:function(b){b.preventDefault();b.stopPropagation();var a=$("#boletoForm");if(core.customValidateForm(a)===true&&emitirBoletoCamino.customPreValidateFactura()===true){$("#facturaVoucher").prop("checked",true);emitirBoletoCamino.checkFacturaVoucher();core.showMessageDialog({title:"Registrar Facturar",selector:$("#facturaDIV"),removeOnClose:false,uniqid:false,buttons:{Aceptar:{click:function(){if(emitirBoletoCamino.procesandoDatos===false){emitirBoletoCamino.procesandoDatos=true;var c=this;if(core.customValidateForm(a)===true&&emitirBoletoCamino.customPostValidateFactura(this)===true){$("#emitir_boleto_command_movil").prop("value",core.isMovil());$("#emitir_boleto_command_impresorasDisponibles").prop("value",frondend.listaImpresorasDisponibles);$("#emitir_boleto_command_referenciaExterna").prop("value",$("#emitir_boleto_command_referenciaExternaVirtual").prop("value"));$("#emitir_boleto_command_tipoPago").prop("value",$("#emitir_boleto_command_tipoPagoVirtual").prop("value"));$("#emitir_boleto_command_autorizacionTarjeta").prop("value",$("#emitir_boleto_command_autorizacionTarjetaVirtual").prop("value"));$("#emitir_boleto_command_totalNeto").prop("value",$("#emitir_boleto_command_totalNetoVirtual").prop("value"));$("#emitir_boleto_command_monedaPago").prop("value",$("#emitir_boleto_command_monedaPagoVirtual").prop("value"));$("#emitir_boleto_command_tasa").prop("value",$("#emitir_boleto_command_tasaVirtual").prop("value"));$("#emitir_boleto_command_totalPago").prop("value",$("#emitir_boleto_command_totalPagoVirtual").prop("value"));$("#emitir_boleto_command_efectivo").prop("value",$("#emitir_boleto_command_efectivoVirtual").prop("value"));$("#emitir_boleto_command_vuelto").prop("value",$("#emitir_boleto_command_vueltoVirtual").prop("value"));$("#emitir_boleto_command_serieFactura").prop("value",$("#emitir_boleto_command_serieFacturaVirtual").prop("value"));if($("#facturaVoucher").prop("checked")===true){$("#emitir_boleto_command_tipoDocuemento").prop("value",1)}else{$("#emitir_boleto_command_tipoDocuemento").prop("value",6)}emitirBoletoCamino.syncronizarListaBoletos();$(a).ajaxSubmit({target:a.attr("action"),type:"POST",dataType:"html",cache:false,async:false,beforeSubmit:function(){core.showLoading({showLoading:true})},error:function(){core.hideLoading({showLoading:true});emitirBoletoCamino.procesandoDatos=false},success:function(d){core.hideLoading({showLoading:true});if(!core.procesarRespuestaServidor(d)){c.dialog2("close");if($("#facturaVoucher").prop("checked")===true){emitirBoletoCamino.imprimirFacturas(d,function(){core.getPageForMenu(a.attr("action"))})}else{emitirBoletoCamino.imprimirVoucher(d,function(){core.getPageForMenu(a.attr("action"))})}}emitirBoletoCamino.procesandoDatos=false}})}else{emitirBoletoCamino.procesandoDatos=false}}},primary:true,type:"info"},Cancelar:function(){this.dialog2("close")}}});emitirBoletoCamino.checkBloque2();emitirBoletoCamino.changeTipoPago()}},clickFacturarEspecial:function(b){b.preventDefault();b.stopPropagation();var a=$("#boletoForm");if(core.customValidateForm(a)===true&&emitirBoletoCamino.customPreValidateFacturaEspecial()===true){$("#detalleFacturaBoletoBody").find("tr").remove();$("#emitir_boleto_command_estacionFacturacionEspecialVirtual").select2("val","");$("#emitir_boleto_command_serieFacturacionEspecialVirtual").select2("val","");$("#pingFacturacionEspecial").val("");$("#totalFacturarEspecial").val("");$("#facturaEspecialVoucher").prop("checked",true);emitirBoletoCamino.checkFacturaEspecialVoucher();emitirBoletoCamino.calcularImporteTotalMonedaBase(function(c){console.debug(c);if(c.error&&$.trim(c.error)!==""){alert(c.error)}else{$("#totalFacturarEspecial").text("Total: GTQ "+c.total);core.showMessageDialog({title:"Registrar Facturar Otra Estación",selector:$("#facturacionEspecialDIV"),removeOnClose:false,uniqid:false,buttons:{Aceptar:{click:function(){if(emitirBoletoCamino.procesandoDatos===false){emitirBoletoCamino.procesandoDatos=true;var d=this;if(core.customValidateForm(a)===true&&emitirBoletoCamino.customPostValidateFacturaEspecial(this)===true){$("#emitir_boleto_command_movil").prop("value",core.isMovil());$("#emitir_boleto_command_impresorasDisponibles").prop("value",frondend.listaImpresorasDisponibles);$("#emitir_boleto_command_estacionFacturacionEspecial").prop("value",$("#emitir_boleto_command_estacionFacturacionEspecialVirtual").prop("value"));$("#emitir_boleto_command_serieFacturacionEspecial").prop("value",$("#emitir_boleto_command_serieFacturacionEspecialVirtual").prop("value"));$("#emitir_boleto_command_pingFacturacionEspecial").prop("value",$("#pingFacturacionEspecial").prop("value"));if($("#facturaEspecialVoucher").prop("checked")===true){$("#emitir_boleto_command_tipoDocuemento").prop("value",4)}else{$("#emitir_boleto_command_tipoDocuemento").prop("value",7)}emitirBoletoCamino.syncronizarListaBoletos();$(a).ajaxSubmit({target:a.attr("action"),type:"POST",dataType:"html",cache:false,async:false,beforeSubmit:function(){core.showLoading({showLoading:true})},error:function(){core.hideLoading({showLoading:true});emitirBoletoCamino.procesandoDatos=false},success:function(e){core.hideLoading({showLoading:true});if(!core.procesarRespuestaServidor(e)){d.dialog2("close");var f=core.getValueFromResponse(e,"info");core.showNotification({text:f});alert("Operación realizada satisfactoriamente. "+f,function(){core.getPageForMenu(a.attr("action"))})}emitirBoletoCamino.procesandoDatos=false}})}else{emitirBoletoCamino.procesandoDatos=false}}},primary:true,type:"info"},Cancelar:function(){this.dialog2("close")}}})}},false,{})}},customCommunValidate:function(a){var b=$("#clienteBoletoBody").find("tr").not("#clienteBoletoVacioTR").length;if(b<=0){core.hiddenDialog2(a);alert("Debe definir al menos un boleto.",function(){core.showDialog2(a)});return false}return true},customPreValidateCortesia:function(a){if(emitirBoletoCamino.customCommunValidate(a)===false){return false}var b=$("#clienteBoletoBody").find("tr").not("#clienteBoletoVacioTR").length;if(b>1){core.hiddenDialog2(a);alert("Para las cortesías no puede definir más de un boleto.",function(){core.showDialog2(a)});return false}return true},customPostValidateCortesia:function(a){var b=$("#pinAutorizacionCortesia").prop("value");if(b===undefined||b===null||$.trim(b)===""){core.hiddenDialog2(a);alert("Debe especificar un PIN de autorización.",function(){core.showDialog2(a)});return false}return true},customPreValidateFactura:function(c){if(emitirBoletoCamino.customCommunValidate(c)===false){return false}var b=$("#emitir_boleto_command_monedaPagoVirtual").select2("val");if($.trim(b)===""){core.hiddenDialog2(c);alert("Debe abrir una caja para facturar.",function(){core.showDialog2(c)});return false}var a=$("#emitir_boleto_command_serieFacturaVirtual").data("sizeItems");if(a<=0){core.hiddenDialog2(c);alert("No existen series de factura activa en la estación.",function(){core.showDialog2(c)});return false}return true},customPreValidateFacturaEspecial:function(a){if(emitirBoletoCamino.customCommunValidate(a)===false){return false}return true},customPostValidateFactura:function(e){if($("#facturaVoucher").prop("checked")===true){if(frondend.listaImpresorasDisponibles===null||$.trim(frondend.listaImpresorasDisponibles)===""){core.hiddenDialog2(e);alert("El sistema aún no ha podido detectar las impresoras para la facturación.",function(){core.showDialog2(e)});return false}var b=$("#emitir_boleto_command_serieFacturaVirtual").select2("val");if($.trim(b)===""){core.hiddenDialog2(e);alert("Debe seleccionar una serie de factura.",function(){core.showDialog2(e)});return false}}var c=$("#emitir_boleto_command_tipoPagoVirtual").prop("value");if(c===undefined||c===null||$.trim(c)===""){core.hiddenDialog2(e);alert("Debe especificar un tipo de pago.",function(){core.showDialog2(e)});return false}else{if(c==="1"){var f=$("#emitir_boleto_command_monedaPagoVirtual").prop("value");if(f===undefined||f===null||$.trim(f)===""){core.hiddenDialog2(e);alert("Debe especificar una moneda de pago.",function(){core.showDialog2(e)});return false}var d=$("#emitir_boleto_command_efectivoVirtual").prop("value");if(d===undefined||d===null||$.trim(d)===""){core.hiddenDialog2(e);alert("Debe especificar un efectivo.",function(){core.showDialog2(e)});return false}}else{var a=$("#emitir_boleto_command_autorizacionTarjetaVirtual").prop("value");if(a===undefined||a===null||$.trim(a)===""){core.hiddenDialog2(e);alert("Debe especificar un código de autorización.",function(){core.showDialog2(e)});return false}}}var g=$("#emitir_boleto_command_totalNetoVirtual").prop("value");if(g===undefined||g===null||$.trim(g)===""){core.hiddenDialog2(e);alert("No se ha podido determinar el total neto.",function(){core.showDialog2(e)});return false}return true},customPostValidateFacturaEspecial:function(c){var f=$("#totalFacturarEspecial").text();if(f===undefined||f===null||$.trim(f)===""){core.hiddenDialog2(c);alert("No se ha podido determinar el total.",function(){core.showDialog2(c)});return false}var a=$("#emitir_boleto_command_estacionFacturacionEspecialVirtual").prop("value");if(a===undefined||a===null||$.trim(a)===""){core.hiddenDialog2(c);alert("Debe especificar la estación solicitante de la facturación.",function(){core.showDialog2(c)});return false}if($("#facturaEspecialVoucher").prop("checked")){var d=$("#emitir_boleto_command_serieFacturacionEspecialVirtual").prop("value");if(d===undefined||d===null||$.trim(d)===""){core.hiddenDialog2(c);alert("Debe especificar una serie de facturación.",function(){core.showDialog2(c)});return false}}var e=$("#pingFacturacionEspecial").prop("value");if(e===undefined||e===null||$.trim(e)===""){core.hiddenDialog2(c);alert("Debe definir el ping de autorización de facturación.",function(){core.showDialog2(c)});return false}var b=$("#detalleFacturaBoletoBody").find("tr").length;if(b<=0){core.hiddenDialog2(c);alert("La estación seleccionada no tiene facturas disponibles.",function(){core.showDialog2(c)});return false}return true},customValidateBoleto:function(){if(emitirBoletoCamino.customCommunValidate()===false){return false}return true},checkBloque2:function(a){if(!a){a=$("#emitir_boleto_command_tipoPagoVirtual").val()}if(a===""){$("#emitir_boleto_command_totalNetoVirtual").val("");$(".bloque2").hide();$(".bloque5").hide();emitirBoletoCamino.checkBloque3(a)}else{if(a==="1"){$(".bloque2").show();$(".bloque5").hide();emitirBoletoCamino.checkBloque3(a)}else{if(a==="2"){$(".bloque2").hide();$(".bloque5").show();emitirBoletoCamino.checkBloque3(a)}else{if(a==="3"){$(".bloque2").hide();$(".bloque5").show();emitirBoletoCamino.checkBloque3(a)}}}}},checkBloque3:function(a){if(!a){a=$("#emitir_boleto_command_tipoPagoVirtual").val()}var b=$("#emitir_boleto_command_monedaPagoVirtual").val();if(a==="1"&&b!==""&&b!=="1"){$(".bloque3").show()}else{$(".bloque3").hide()}emitirBoletoCamino.checkBloque4(a)},checkBloque4:function(a){if(!a){a=$("#emitir_boleto_command_tipoPagoVirtual").val()}if(a==="1"){$(".bloque4").show()}else{$(".bloque4").hide()}},calcularImporteTotalMonedaBase:function(c,e,d){emitirBoletoCamino.syncronizarListaBoletos();var a=$("#emitir_boleto_command_estacionSubeEn").val();var b=$("#emitir_boleto_command_estacionBajaEn").val();var g=$("#emitir_boleto_command_tipoPagoVirtual").val();var j=core.getSelectedItemId("#salidaGrid");var i=$("#emitir_boleto_command_listaClienteBoleto").val();var f=$("#emitir_boleto_command_utilizarDesdeEstacionOrigenSalida").prop("checked");if(a!==null&&$.trim(a)!==""&&b!==null&&$.trim(b)!==""&&g!==null&&$.trim(g)!==""&&j!==null&&$.trim(j)!==""&&i!==null&&$.trim(i)!==""){var h={idEstacionOrigen:a,idEstacionDestino:b,idTipoPago:g,idSalida:j,listaClienteBoleto:i,pagadoDesdeOrigenRuta:f};if(d){jQuery.extend(h,d)}core.request({url:$("#pathCalcularImporteTotalMonedaBase").attr("value"),method:"POST",extraParams:h,dataType:"json",async:e,successCallback:function(k){c(k,h)}})}},changeTipoPago:function(){emitirBoletoCamino.checkBloque2();$("#emitir_boleto_command_totalNetoVirtual").val("");$("#emitir_boleto_command_tasaVirtual").val("");$("#emitir_boleto_command_totalPagoVirtual").val("");$("#emitir_boleto_command_vueltoVirtual").val("");$("#emitir_boleto_command_efectivoVirtual").val("");emitirBoletoCamino.calcularImporteTotalMonedaBase(function(b,c){if(b.error&&$.trim(b.error)!==""){var a=$('.modal[style^="display: block;"]');a.hide();alert(b.error,function(){a.show()})}else{$("#emitir_boleto_command_totalNetoVirtual").val(b.total);if(c.idTipoPago==="1"){emitirBoletoCamino.changeMonedaPago()}$("#emitir_boleto_command_efectivoVirtual").focus()}},true,{})},changeMonedaPago:function(){var b=$("#emitir_boleto_command_monedaPagoVirtual").val();$("#emitir_boleto_command_tasaVirtual").val("");$("#emitir_boleto_command_totalPagoVirtual").val("");$("#emitir_boleto_command_vueltoVirtual").val("");if(b===null||$.trim(b)===""){$("#prependTotalPagoVirtual").text("???");$("#prependEfectivoVirtual").text("???")}else{if($.trim(b)==="1"){$("#prependTotalPagoVirtual").text("GTQ");$("#prependEfectivoVirtual").text("GTQ");emitirBoletoCamino.changeEfectivo()}else{var c=$("#emitir_boleto_command_totalNetoVirtual").val();var a=$("#emitir_boleto_command_monedaPagoVirtual").val();$("#prependTotalPagoVirtual").text("GTQ");$("#prependEfectivoVirtual").text("GTQ");if(c!==null&&$.trim(c)!==""&&a!==null&&$.trim(a)!==""){core.request({url:$("#pathCalcularImporteTotalPorMoneda").attr("value"),method:"POST",extraParams:{totalNeto:c,idMoneda:a},dataType:"json",async:true,successCallback:function(e){if(e.error&&$.trim(e.error)!==""){var d=$('.modal[style^="display: block;"]');d.hide();alert(e.error,function(){d.show()})}else{$("#prependTotalPagoVirtual").text(e.sigla);$("#prependEfectivoVirtual").text(e.sigla);$("#emitir_boleto_command_tasaVirtual").val(e.tasa);$("#emitir_boleto_command_totalPagoVirtual").val(e.total);emitirBoletoCamino.changeEfectivo()}}})}}}emitirBoletoCamino.checkBloque3()},changeEfectivo:function(){var f=$("#emitir_boleto_command_monedaPagoVirtual").val();$("#emitir_boleto_command_vueltoVirtual").val("");var b=$("#emitir_boleto_command_efectivoVirtual").val();if(!$.isNumeric(b)){$("#emitir_boleto_command_efectivoVirtual").val("");return}else{b=parseFloat(b).toFixed(2);$("#emitir_boleto_command_efectivoVirtual").val(b)}if($.trim(f)==="1"){var g=$("#emitir_boleto_command_totalNetoVirtual").val();var c=b-parseFloat(g);c=parseFloat(c).toFixed(2);if(c===0){$("#emitir_boleto_command_vueltoVirtual").val(0)}else{if(c<0){var e=$('.modal[style^="display: block;"]');e.hide();alert("El efectivo no alcanza, como mínimo son:"+g+".",function(){e.show();$("#emitir_boleto_command_efectivoVirtual").val(g);$("#emitir_boleto_command_vueltoVirtual").val(0)})}else{$("#emitir_boleto_command_vueltoVirtual").val(c)}}}else{var d=$("#emitir_boleto_command_totalPagoVirtual").val();var c=b-parseFloat(d);c=parseFloat(c).toFixed(2);if(c===0){$("#emitir_boleto_command_vueltoVirtual").val(0)}else{if(c<0){var e=$('.modal[style^="display: block;"]');e.hide();alert("El efectivo no alcanza, como mínimo son:"+d+".",function(){e.show();$("#emitir_boleto_command_efectivoVirtual").val(d);$("#emitir_boleto_command_vueltoVirtual").val(0)})}else{var a=$("#emitir_boleto_command_monedaPagoVirtual").val();if(a!==null&&$.trim(a)!==""){core.request({url:$("#pathCalcularImporteTotalPorMoneda").attr("value"),method:"POST",extraParams:{totalNeto:c,idMoneda:a,dir:false},dataType:"json",async:true,successCallback:function(i){if(i.error&&$.trim(i.error)!==""){var h=$('.modal[style^="display: block;"]');h.hide();alert(i.error,function(){h.show();$("#emitir_boleto_command_efectivoVirtual").val(d);$("#emitir_boleto_command_vueltoVirtual").val(0)})}else{$("#emitir_boleto_command_vueltoVirtual").val(i.total)}}})}}}}},changeEstacionFacturacionEspecial:function(){var estacionFacturacionEspecial=$("#emitir_boleto_command_estacionFacturacionEspecialVirtual").select2("val");var idSalida=core.getSelectedItemId("#salidaGrid");$("#detalleFacturaBoletoBody").find("tr").remove();$("#emitir_boleto_command_serieFacturacionEspecialVirtual").select2({data:[]});$("#facturaEspecialVoucher").prop("checked",true);emitirBoletoCamino.checkFacturaEspecialVoucher();if(estacionFacturacionEspecial!==null&&$.trim(estacionFacturacionEspecial)!==""&&idSalida!==null&&$.trim(idSalida)!==""){core.request({url:$("#pathSeriesActivaPorEstacion").attr("value"),method:"POST",extraParams:{idEstacion:estacionFacturacionEspecial,idSalida:idSalida},dataType:"json",async:true,successCallback:function(success){var optionSeriesFacturas=success.optionSeriesFacturas;if(optionSeriesFacturas){$("#emitir_boleto_command_serieFacturacionEspecialVirtual").select2({allowClear:false,data:{results:optionSeriesFacturas}});var cantidad=optionSeriesFacturas.length;$("#emitir_boleto_command_serieFacturacionEspecialVirtual").data("sizeItems",cantidad);if(cantidad>0){if(optionSeriesFacturas[0]){$("#emitir_boleto_command_serieFacturacionEspecialVirtual").select2("val",optionSeriesFacturas[0].id);emitirBoletoCamino.changeSerieFacturacionEspecial()}}else{var modal=$('.modal[style^="display: block;"]');modal.hide();alert("La estación no tiene series de facturas activas.",function(){modal.show()})}}if(success.showVoucher&&eval(success.showVoucher)===true){$("#facturaEspecialVoucher").removeClass("hidden")}else{$("#facturaEspecialVoucher").addClass("hidden")}}})}},changeSerieFacturacionEspecial:function(){var b=$("#emitir_boleto_command_estacionFacturacionEspecialVirtual").select2("val");var a=$("#emitir_boleto_command_serieFacturacionEspecialVirtual").select2("val");$("#detalleFacturaBoletoBody").find("tr").remove();emitirBoletoCamino.calcularImporteTotalMonedaBase(function(e){if(e.error&&$.trim(e.error)!==""){var d=$('.modal[style^="display: block;"]');d.hide();alert(e.error,function(){d.show()})}else{var c=e.boletos;$.each(c,function(){var f=$("<tr><td>"+this.numero+"</td><td>"+this.factura+"</td><td>"+this.importe+"</td></tr>");$("#detalleFacturaBoletoBody").append(f)})}},false,{detalle:true,estacionDetalle:b,facturar:$("#facturaEspecialVoucher").prop("checked"),serieFacturacionEspecial:a})},};
reasignarBoleto={procesandoDatos:false,funcionesAddOnload:function(){this._init();this._conectEvents()},_init:function(){$("#reasignar_boleto_command_identificadorWeb").val(core.uniqIdCompuesto());var b=$("#reasignar_boleto_command_clienteDocumento").data("pathlistarclientespaginando");$("#reasignar_boleto_command_clienteDocumento").select2({minimumInputLength:1,allowClear:true,ajax:{url:b,dataType:"json",type:"GET",data:function(c,d){return{term:c,page_limit:5}},results:function(d,c){return{results:d.options}}},initSelection:function(c,e){var d=$(c).val();if(d!==""){$.ajax(b,{data:{id:d},type:"GET",dataType:"json"}).done(function(f){$(c).select2("data",f.options[0])})}}});$("#reasignar_boleto_command_fechaSalida").datepicker({format:"dd/mm/yyyy",startDate:"-1d",endDate:"+2m",todayBtn:true,language:"es",autoclose:true,todayHighlight:true});$("#reasignar_boleto_command_fechaSalida").datepicker("setDate",new Date());$("#reasignar_boleto_command_estacionOrigen").select2({allowClear:true});$("#reasignar_boleto_command_estacionFacturacionEspecialVirtual").select2({allowClear:true});$("#salidaGrid").flexigrid({url:$("#salidaGrid").data("url"),dataType:"json",singleSelect:true,query:reasignarBoleto.getQueryString(),rpOptions:[5,10,15,20,25,30,40,50],colModel:[{display:"ID",name:"id",width:70,sortable:true,align:"center",hide:true},{display:"Fecha y Hora",name:"fecha",width:120,sortable:false,align:"center"},{display:"Origen",name:"origen",width:120,sortable:false,align:"left"},{display:"Destino",name:"destino",width:120,sortable:false,align:"left"},{display:"Empresa",name:"empresa",width:80,sortable:false,align:"left"},{display:"Itinerario",name:"itinerario",width:130,sortable:false,align:"left"},{display:"Bus",name:"bus",width:130,sortable:false,align:"left"},{display:"Piloto",name:"piloto",width:130,sortable:false,align:"left",hide:true},{display:"Estado",name:"estado",width:70,sortable:false,align:"center"}],usepager:true,useRp:true,rp:15,showTableToggleBtn:false,height:250,onSuccess:function(){$("#salidaGrid tr").on("click",reasignarBoleto.checkSelectedSalida);reasignarBoleto.checkSelectedSalida()}});$("#reasignar_boleto_command_estacionSubeEn").select2({allowClear:true,data:[]});$("#reasignar_boleto_command_estacionBajaEn").select2({allowClear:true,data:[]});$("#reasignar_boleto_command_tipoPagoVirtual").select2({allowClear:true});$("#reasignar_boleto_command_monedaPagoVirtual").select2({allowClear:true});$("#reasignar_boleto_command_serieFacturaVirtual").select2({allowClear:false,data:[]});$("#reasignar_boleto_command_serieFacturacionEspecialVirtual").select2({allowClear:false,data:[]});var a=$("#reasignar_boleto_command_precioCalculadoMonedaBase").val();if(a!==""&&a!==0&&a!=="0"){$("#importeFacturado").val("GTQ "+a)}reasignarBoleto.checkSelectedSalida()},_conectEvents:function(){$("#cancelar").click(function(a){a.preventDefault();a.stopPropagation();confirm("¿Está seguro que desea cancelar la operación?",function(b){if(b===true){core.getPageForMenu($("#cancelar").attr("href"))}})});$("#addCliente").click(function(a){frondend.loadSubPage(a,$(this),function(c){var b=$("#reasignar_boleto_command_clienteDocumento");if(c!==""){core.request({url:b.data("pathlistarclientespaginando"),type:"POST",dataType:"json",async:false,extraParams:{id:c},successCallback:function(d){if(d.options&&d.options[0]){$("#reasignar_boleto_command_clienteDocumento").select2("data",d.options[0])}}})}})});$("#updateCliente").click(function(a){frondend.loadSubPage(a,$(this),function(){var b=$("#reasignar_boleto_command_clienteDocumento");var c=b.val();if(c!==""){core.request({url:b.data("pathlistarclientespaginando"),type:"POST",dataType:"json",async:false,extraParams:{id:c},successCallback:function(d){if(d.options&&d.options[0]){$("#reasignar_boleto_command_clienteDocumento").select2("data",d.options[0])}}})}})});$("#seachCliente").click(function(a){frondend.loadSubPage(a,$(this),function(c){if(c!==""){var b=$("#reasignar_boleto_command_clienteDocumento");core.request({url:b.data("pathlistarclientespaginando"),type:"POST",dataType:"json",async:false,extraParams:{id:c},successCallback:function(d){if(d.options&&d.options[0]){$("#reasignar_boleto_command_clienteDocumento").select2("data",d.options[0])}}})}})});$("#aceptar").click(reasignarBoleto.clickAceptar);$("#reasignar_boleto_command_fechaSalida").on("change",reasignarBoleto.changeFiltersSalida);$("#reasignar_boleto_command_estacionOrigen").on("change",reasignarBoleto.changeFiltersSalida);$("#reasignar_boleto_command_tipoPagoVirtual").on("change",reasignarBoleto.changeTipoPago);$("#reasignar_boleto_command_monedaPagoVirtual").on("change",reasignarBoleto.changeMonedaPago);$("#reasignar_boleto_command_efectivoVirtual").on("change",reasignarBoleto.changeEfectivo);$("#reasignar_boleto_command_estacionFacturacionEspecialVirtual").on("change",reasignarBoleto.changeEstacionFacturacionEspecial);$("#reasignar_boleto_command_serieFacturacionEspecialVirtual").on("change",reasignarBoleto.changeSerieFacturacionEspecial);$("#facturaEspecialVoucher").bind("click",reasignarBoleto.changeSerieFacturacionEspecial);$("#reasignar_boleto_command_serieFacturaVirtual").on("change",function(){console.debug("serieFacturaVirtual-init");var b=$("#reasignar_boleto_command_serieFacturaVirtual").select2("val");var a=$("#reasignar_boleto_command_serieFacturaVirtual").select2("data").idEmpresa;sessionStorage.setItem("sist_last_id_serie_factura_"+a,b)});$("#facturaVoucher").bind("click",reasignarBoleto.checkFacturaVoucher);$("#facturaEspecialVoucher").bind("click",reasignarBoleto.checkFacturaEspecialVoucher)},checkFacturaVoucher:function(){var a=$("#facturaVoucher").prop("checked");if(a){$(".voucherDIV").show()}else{$(".voucherDIV").hide()}},checkFacturaEspecialVoucher:function(){var a=$("#facturaEspecialVoucher").prop("checked");if(a){$(".voucherDIV").show()}else{$(".voucherDIV").hide()}},checkSelectedSalida:function(){reasignarBoleto.clearItemGridBoleto();var a=core.getSelectedItemId("#salidaGrid");$("#reasignar_boleto_command_salida").prop("value",a);if(a===null){$("#reasignar_boleto_command_estacionSubeEn").select2({data:[]});$("#reasignar_boleto_command_estacionBajaEn").select2({data:[]});$("#reasignar_boleto_command_serieFacturaVirtual").select2({data:[]});$("#reasignar_boleto_command_serieFacturacionEspecialVirtual").select2({data:[]});$("#listaAsientosHidden").val(JSON.stringify([]));$("#listaSenalesHidden").val(JSON.stringify([]));$("#listaBoletosHidden").val(JSON.stringify([]));$("#listaReservacionesHidden").val(JSON.stringify([]));$("#dependenciasSelecccionSalidaGrid").hide();reasignarBoleto.mostrarIconos()}else{core.request({url:$("#pathGetInformacionPorSalida").prop("value"),type:"POST",dataType:"json",async:false,extraParams:{idSalida:a,showTime:true},successCallback:function(d){$("#dependenciasSelecccionSalidaGrid").show();var i=d.optionEstacionOrigen;var f=d.optionEstacionDestino;var b=d.optionsEstacionesIntermedias;$.each(i,function(){this.text=(this.time!==""?this.time+" ":"")+this.text});$.each(f,function(){this.text=(this.time!==""?this.time+" ":"")+this.text});$.each(b,function(){this.text=(this.time!==""?this.time+" ":"")+this.text});if(d.optionEstacionOrigen&&d.optionsEstacionesIntermedias){var e=i.concat(b);$("#reasignar_boleto_command_estacionSubeEn").select2({allowClear:true,data:{results:e}});$("#reasignar_boleto_command_estacionSubeEn").select2("val",i[0].id)}if(d.optionEstacionDestino&&d.optionsEstacionesIntermedias){var e=f.concat(b);$("#reasignar_boleto_command_estacionBajaEn").select2({allowClear:true,data:{results:e}});$("#reasignar_boleto_command_estacionBajaEn").select2("val",f[0].id)}if(d.optionListaAsientos){$("#listaAsientosHidden").val(JSON.stringify(d.optionListaAsientos))}if(d.optionListaSenales){$("#listaSenalesHidden").val(JSON.stringify(d.optionListaSenales))}if(d.optionBoletos){$("#listaBoletosHidden").val(JSON.stringify(d.optionBoletos))}if(d.optionReservaciones){$("#listaReservacionesHidden").val(JSON.stringify(d.optionReservaciones))}reasignarBoleto.mostrarIconos();var c=d.optionSeriesFacturas;if(c){$("#reasignar_boleto_command_serieFacturaVirtual").select2({allowClear:false,data:{results:c}});var j=c.length;$("#reasignar_boleto_command_serieFacturaVirtual").data("sizeItems",j);if(j>0){var g=c[0].idEmpresa;var h=sessionStorage.getItem("sist_last_id_serie_factura_"+g);if(h){$("#reasignar_boleto_command_serieFacturaVirtual").select2("val",h)}else{if(c[0]){$("#reasignar_boleto_command_serieFacturaVirtual").select2("val",c[0].id)}}}}$("#reasignar_boleto_command_serieFacturacionEspecialVirtual").select2({data:[]})}})}},changeFiltersSalida:function(){$("#salidaGrid").flexOptions({newp:1,query:reasignarBoleto.getQueryString()}).flexReload()},getQueryString:function(){return $(".filterSalida").fieldSerialize()},buscarBoletoReservacionPorAsiento:function(a,c){var b=null;$.each(c,function(){if(this.numero===a){b=this;return}});return b},buscarEstadoAsientoItem:function(b){var a=$("#reasignar_boleto_command_boletoOriginal").val();if(a===b.id){return"libre"}else{if(b.tipo==="R"){return"reservado"}else{if(b.tipo==="B"){if(b.tipoDocumento===1||b.tipoDocumento===2||b.tipoDocumento===4||b.tipoDocumento===5||b.tipoDocumento===6||b.tipoDocumento===7||b.tipoDocumento===8){return"vendido"}else{if(b.tipoDocumento===3){return"cortesia"}else{throw new Error("No se pudo determinar el tipo de documento del boleto con id:"+b.id+", y numero:"+b.numero)}}}else{throw new Error("No se pudo determinar el tipo del asiento con id:"+b.id+", y numero:"+b.numero)}}}},mostrarIconos:function(){$(".item").remove();var listaBoletos=$("#listaBoletosHidden").val();if(listaBoletos){listaBoletos=JSON.parse(listaBoletos)}else{listaBoletos=[]}var listaReservaciones=$("#listaReservacionesHidden").val();if(listaReservaciones){listaReservaciones=JSON.parse(listaReservaciones)}else{listaReservaciones=[]}var all=listaBoletos.concat(listaReservaciones);$("#nav2").addClass("hidden");var asientosPosicionados=[];var listaAsientos=$("#listaAsientosHidden").val();if(listaAsientos){listaAsientos=JSON.parse(listaAsientos)}else{listaAsientos=[]}jQuery.each(listaAsientos,function(){var clase=this.clase;if(clase==="1"){clase="claseA"}else{if(clase==="2"){clase="claseB"}else{throw new Error("El item debe tener uno de los id de clases siguientes: 1 o 2.")}}asientosPosicionados[this.numero]=this;var estado="libre";var item0=reasignarBoleto.buscarBoletoReservacionPorAsiento(this.numero,all);if(item0!==null){estado=reasignarBoleto.buscarEstadoAsientoItem(item0)}var item=$(".icono."+clase+"."+estado).clone();item.removeClass("ui-draggable icono");item.addClass("item");var nivel2=this.nivel2;if(eval(nivel2)){$("#nav2").removeClass("hidden");$(".nivel2").append(item)}else{$(".nivel1").append(item)}item.css("left",core.ajustarPosicion(this.coordenadaX));item.css("top",core.ajustarPosicion(this.coordenadaY));this.jsId=core.uniqId();item.attr("jsId",this.jsId);var numero=this.numero;item.find(".detalle").text(this.numero);item.data("numero",this.numero);item.data("id",this.id);if(item0!==null){item.data("tipo",item0.tipo);if(item0.tipo==="R"){item.data("idReservacion",item0.id);item.data("idClinteReservacion",item0.clinteId)}}item.css("cursor","hand")});$("#listaAsientosHidden").val(JSON.stringify(listaAsientos));$("#pendientes").addClass("hidden");jQuery.each(all,function(){var asiento=asientosPosicionados[this.numero];if(!asiento){$("#pendientes").removeClass("hidden");var clase=this.clase;if(clase==="1"){clase="claseA"}else{if(clase==="2"){clase="claseB"}else{throw new Error("El item debe tener uno de los id de clases siguientes: 1 o 2.")}}var estado=reasignarBoleto.buscarEstadoAsientoItem(this);var item=$(".icono."+clase+"."+estado).clone();item.removeClass("ui-draggable icono");item.addClass("item2");$(".pendientes").append(item);item.css("left",core.ajustarPosicion(this.coordenadaX));item.css("top",core.ajustarPosicion(this.coordenadaY));this.jsId=core.uniqId();item.attr("jsId",this.jsId);var numero=this.numero;item.find(".detalle").text(this.numero);item.data("numero",this.numero);item.data("tipo",this.tipo);if(this.tipo==="R"){item.data("idReservacion",this.id);item.data("idClinteReservacion",this.clinteId)}}});$(".containment .active").removeClass("active");$("#tab1").addClass("active");$("#nav1").addClass("active");var listaSenales=$("#listaSenalesHidden").val();if(listaSenales){listaSenales=JSON.parse(listaSenales)}else{listaSenales=[]}jQuery.each(listaSenales,function(){var tipo=this.tipo;if(tipo==="1"){tipo="salida"}else{if(tipo==="2"){tipo="chofer"}else{throw new Error("El item debe tener uno de los id de tipo siguientes: 1 o 2.")}}var item=$(".icono."+tipo).clone();item.removeClass("ui-draggable icono");item.addClass("item");var nivel2=this.nivel2;if(eval(nivel2)){$(".nivel2").append(item)}else{$(".nivel1").append(item)}item.css("left",core.ajustarPosicion(this.coordenadaX));item.css("top",core.ajustarPosicion(this.coordenadaY));var id=this.id;this.jsId=core.uniqId();item.attr("jsId",this.jsId)});$("#listaSenalesHidden").val(JSON.stringify(listaSenales));$(".asiento .showInfo").bind("click",reasignarBoleto.info);$(".nivel1 .asiento img").bind("click",reasignarBoleto.clickAsiento);$(".nivel2 .asiento img").bind("click",reasignarBoleto.clickAsiento)},info:function(d){d.preventDefault();d.stopPropagation();var c=$(this);var a=c.parent().data("numero");if(a===null||$.trim(a)===""){throw new Error("No se pudo determinar el numero de asiento.")}var b=core.getSelectedItemId("#salidaGrid");if(b===null||$.trim(b)===""){throw new Error("No se pudo determinar el id de la salida.")}core.request({url:$("#pathInfoAsientoSalida").attr("value"),method:"GET",extraParams:{idSalida:b,numeroAsiento:a},dataType:"html",async:true,successCallback:function(e){core.showMessageDialog({title:"Consultar Asiento Bus",fullscreen:true,compact:true,text:e,defaultButtonOFF:true,buttons:{Cancelar:{primary:true,type:"info",click:function(){$("body").css("overflow-y","auto");this.dialog2("close")}}}})}})},clickAsiento:function(d){d.preventDefault();d.stopPropagation();var a=$(this).parent();var b=a.data("numero");if(a.hasClass("reservado")){}else{if(a.hasClass("cortesia")){alert("El asiento con el número "+b+" es una cortesía.");return}else{if(a.hasClass("vendido")){alert("El asiento con el número "+b+" ya está vendido.");return}}}var c=$("#reasignar_boleto_command_listaClienteBoleto").val();if(c){c=JSON.parse(c)}else{c=[]}$(".asiento.selected").removeClass("selected");$.each(c,function(){if($.trim(this.numero)!==b){reasignarBoleto.renderItemGridDeletedBoleto(this,c)}});c=[];newItem={numero:a.data("numero"),id:a.data("id"),idCliente:"",idReservacion:a.data("idReservacion")!==undefined?a.data("idReservacion"):"",idClinteReservacion:a.data("idClinteReservacion")!==undefined?a.data("idClinteReservacion"):""};c.push(newItem);a.addClass("selected");reasignarBoleto.renderItemGridAddBoleto(newItem);$("#reasignar_boleto_command_listaClienteBoleto").val(JSON.stringify(c))},findAsiento:function(c,b){var a=null;b=$.trim(b);$.each(c,function(){if($.trim(this.numero)===b){a=this;return}});return a},renderItemGridAddBoleto:function(e){$("#clienteBoletoBody").find("#clienteBoletoVacioTR").hide();var a=e.numero;var g=core.uniqId("cliente_boleto");var f="Seleccione el cliente boleto";var d=$("#reasignar_boleto_command_clienteDocumento").clone();d.prop("id",g);d.prop("name",g);d.data("numero",a);d.prop("placeholder",f);d.attr("placeholder",f);d.data("placeholder",f);d.val("");d.removeClass("select2-offscreen");var c=$("<tr class='trSelect"+a+"'><td>"+a+"</td><td class='inputSelect'></td></tr>");c.find(".inputSelect").append(d);$("#clienteBoletoBody").append(c);var b=d.data("pathlistarclientespaginando");if(e.idClinteReservacion!==""){d.val(e.idClinteReservacion)}d.select2({minimumInputLength:1,allowClear:true,placeholder:f,ajax:{url:b,dataType:"json",type:"GET",data:function(h,i){return{term:h,page_limit:5}},results:function(i,h){return{results:i.options}}},initSelection:function(h,j){var i=$(h).val();if(i!==""){$.ajax(b,{data:{id:i},dataType:"json",type:"GET"}).done(function(k){j(k.options[0])})}}});if(d.val()===""){$(d).select2("data",$("#reasignar_boleto_command_clienteDocumento").select2("data"))}},renderItemGridDeletedBoleto:function(c,b){if(!b){b=$("#reasignar_boleto_command_listaClienteBoleto").val();if(b){b=JSON.parse(b)}else{b=[]}}if(b.length===0){$("#clienteBoletoBody").find("tr").not("#clienteBoletoVacioTR").remove();$("#clienteBoletoBody").find("#clienteBoletoVacioTR").show()}else{$("#clienteBoletoBody").find("#clienteBoletoVacioTR").hide();var a=c.numero;$("#clienteBoletoBody").find(".trSelect"+a).remove()}},clearItemGridBoleto:function(){$("#reasignar_boleto_command_listaClienteBoleto").val(JSON.stringify([]));$("#clienteBoletoBody").find("tr").not("#clienteBoletoVacioTR").remove();$("#clienteBoletoBody").find("#clienteBoletoVacioTR").show()},imprimirFacturas:function(responseText,successCallback){var info=core.getValueFromResponse(responseText,"info");core.showNotification({text:info});var autoPrint=core.getValueFromResponse(responseText,"autoPrint");if(eval(autoPrint)===true){frondend.printFacturaInternal(responseText,function(){alert("Operación realizada satisfactoriamente. "+info,function(){if(successCallback&&$.isFunction(successCallback)){successCallback(responseText)}})})}else{alert("Operación realizada satisfactoriamente. "+info,function(){frondend.printFacturaInternal(responseText,successCallback)})}},imprimirVoucher:function(responseText,successCallback){var info=core.getValueFromResponse(responseText,"info");core.showNotification({text:info});var autoPrint=core.getValueFromResponse(responseText,"autoPrint");if(eval(autoPrint)===true){var data=core.getValueFromResponse(responseText,"data");frondend.printVoucherBoleto($("#pathPrintVoucherBoleto").attr("value"),{ids:data},function(){alert("Operación realizada satisfactoriamente. "+info,function(){if(successCallback&&$.isFunction(successCallback)){successCallback(responseText)}})})}else{alert("Operación realizada satisfactoriamente. "+info,function(){var data=core.getValueFromResponse(responseText,"data");frondend.printVoucherBoleto($("#pathPrintVoucherBoleto").attr("value"),{ids:data},successCallback)})}},syncronizarListaBoletos:function(){var a=$("#reasignar_boleto_command_listaClienteBoleto").val();if(a){a=JSON.parse(a)}else{a=[]}$.each(a,function(){this.idCliente=$(".trSelect"+this.numero).find('input[id^="cliente_boleto"]').val()});$("#reasignar_boleto_command_listaClienteBoleto").val(JSON.stringify(a))},clickAceptar:function(e){e.preventDefault();e.stopPropagation();var boletoForm=$("#boletoForm");if(core.customValidateForm(boletoForm)===true&&reasignarBoleto.customCommunValidate()===true){var tipoDocumento=parseInt($("#reasignar_boleto_command_tipoDocuemento").val());if(tipoDocumento===1||tipoDocumento===2||tipoDocumento===4||tipoDocumento===6||tipoDocumento===7||tipoDocumento===8){$("#reasignar_boleto_command_tipoPagoVirtual").val("1");var importeTotalMonedaBase=parseFloat(reasignarBoleto.calcularImporteTotalMonedaBaseGenerico(function(success){if(success.showVoucher&&eval(success.showVoucher)===true){$("#voucher").removeClass("hidden");$("#facturaVoucher").removeClass("hidden")}else{$("#voucher").addClass("hidden");$("#facturaVoucher").addClass("hidden")}},false,{showVoucher:true}));if(importeTotalMonedaBase===0){$("#reasignar_boleto_command_movil").prop("value",core.isMovil());$("#reasignar_boleto_command_impresorasDisponibles").prop("value",frondend.listaImpresorasDisponibles);var tipoDocumentoAux="";if(tipoDocumento===1||tipoDocumento===2||tipoDocumento===4){tipoDocumentoAux=1}if(tipoDocumento===6||tipoDocumento===7){tipoDocumentoAux=6}if(tipoDocumento===8){tipoDocumentoAux=8}$("#reasignar_boleto_command_tipoDocuemento").prop("value",tipoDocumentoAux);$("#reasignar_boleto_command_monedaPago").prop("value","1");$("#reasignar_boleto_command_totalNeto").prop("value","");reasignarBoleto.syncronizarListaBoletos();$(boletoForm).ajaxSubmit({target:boletoForm.attr("action"),type:"POST",dataType:"html",cache:false,async:false,beforeSubmit:function(){core.showLoading({showLoading:true})},error:function(){core.hideLoading({showLoading:true})},success:function(responseText){core.hideLoading({showLoading:true});if(!core.procesarRespuestaServidor(responseText)){reasignarBoleto.imprimirVoucher(responseText,function(){core.getPageForMenu($("#pathHomeBoletos").attr("value"))})}}})}else{if(importeTotalMonedaBase!==-1){if(tipoDocumento===8){alert("No se puede reasignar un voucher por un precio mayor al pagado en el portal de internet. Existe una diferencia de GTQ "+importeTotalMonedaBase+".");return}var info="Se debe facturar una diferencia de GTQ "+importeTotalMonedaBase+".";core.showMessageDialog({text:info,buttons:{Facturar:{click:function(){this.dialog2("close");reasignarBoleto.iniciarProcesoFacturar(importeTotalMonedaBase)},primary:true,type:"info"},"Facturar Otra Estación":{click:function(){this.dialog2("close");reasignarBoleto.iniciarProcesoFacturarEspecial(importeTotalMonedaBase)},primary:true,type:"info"},Cancelar:function(){this.dialog2("close")}}})}}}else{if(tipoDocumento===5){$("#reasignar_boleto_command_totalNetoAgenciaVirtual").val("");$("#reasignar_boleto_command_tipoPagoVirtual").val("1");reasignarBoleto.calcularImporteTotalMonedaBaseGenerico(function(success){console.debug(success);var importeTotal=parseFloat(success.totalSec);if(importeTotal===0){$("#reasignar_boleto_command_movil").prop("value",core.isMovil());$("#reasignar_boleto_command_impresorasDisponibles").prop("value",frondend.listaImpresorasDisponibles);$("#reasignar_boleto_command_referenciaExternaAgencia").prop("value","");$("#reasignar_boleto_command_totalNetoAgencia").prop("value",0);$("#reasignar_boleto_command_tipoDocuemento").prop("value",5);reasignarBoleto.syncronizarListaBoletos();$(boletoForm).ajaxSubmit({target:boletoForm.attr("action"),type:"POST",dataType:"html",cache:false,async:false,beforeSubmit:function(){core.showLoading({showLoading:true})},error:function(){core.hideLoading({showLoading:true})},success:function(responseText){core.hideLoading({showLoading:true});if(!core.procesarRespuestaServidor(responseText)){reasignarBoleto.imprimirVoucher(responseText,function(){core.getPageForMenu($("#pathHomeBoletos").attr("value"))})}}})}else{if(importeTotal!==-1){console.log("x2");reasignarBoleto.iniciarProcesoVoucherAgencia(importeTotal)}}},false,{monedaSec:$("#reasignar_boleto_command_monedaAgencia").val()})}else{if(tipoDocumento===3){reasignarBoleto.syncronizarListaBoletos();$("#reasignar_boleto_command_tipoDocuemento").prop("value",3);$("#reasignar_boleto_command_movil").prop("value",core.isMovil());$("#reasignar_boleto_command_impresorasDisponibles").prop("value",frondend.listaImpresorasDisponibles);$(boletoForm).ajaxSubmit({target:boletoForm.attr("action"),type:"POST",dataType:"html",cache:false,async:false,beforeSubmit:function(){core.showLoading({showLoading:true})},error:function(){core.hideLoading({showLoading:true})},success:function(responseText){core.hideLoading({showLoading:true});if(!core.procesarRespuestaServidor(responseText)){reasignarBoleto.imprimirVoucher(responseText,function(){core.getPageForMenu($("#pathHomeBoletos").attr("value"))})}}})}else{throw new Error("Tipo de documento no valido. Valor:"+tipoDocumento+".")}}}}},iniciarProcesoVoucherAgencia:function(a){$("#reasignar_boleto_command_totalNetoAgenciaVirtual").val(a);core.showMessageDialog({title:"Registrar Voucher",selector:$("#aceptarDIV"),removeOnClose:false,uniqid:false,buttons:{Aceptar:{click:function(){if(reasignarBoleto.procesandoDatos===false){reasignarBoleto.procesandoDatos=true;var b=this;var c=$("#boletoForm");if(core.customValidateForm(c)===true&&reasignarBoleto.customPostValidateAceptar(this)===true){$("#reasignar_boleto_command_movil").prop("value",core.isMovil());$("#reasignar_boleto_command_impresorasDisponibles").prop("value",frondend.listaImpresorasDisponibles);$("#reasignar_boleto_command_referenciaExternaAgencia").prop("value",$("#reasignar_boleto_command_referenciaExternaAgenciaVirtual").prop("value"));$("#reasignar_boleto_command_totalNetoAgencia").prop("value",$("#reasignar_boleto_command_totalNetoAgenciaVirtual").prop("value"));$("#reasignar_boleto_command_tipoDocuemento").prop("value",5);reasignarBoleto.syncronizarListaBoletos();$(c).ajaxSubmit({target:c.attr("action"),type:"POST",dataType:"html",cache:false,async:false,beforeSubmit:function(){core.showLoading({showLoading:true})},error:function(){core.hideLoading({showLoading:true});reasignarBoleto.procesandoDatos=false},success:function(d){core.hideLoading({showLoading:true});if(!core.procesarRespuestaServidor(d)){b.dialog2("close");reasignarBoleto.imprimirVoucher(d,function(){core.getPageForMenu($("#pathHomeBoletos").attr("value"))})}reasignarBoleto.procesandoDatos=false}})}else{reasignarBoleto.procesandoDatos=false}}},primary:true,type:"info"},Cancelar:function(){this.dialog2("close")}}})},customPostValidateAceptar:function(a){var b=$("#reasignar_boleto_command_totalNetoAgenciaVirtual").prop("value");if(b===undefined||b===null||$.trim(b)===""){core.hiddenDialog2(a);alert("No se ha podido determinar el total neto.",function(){core.showDialog2(a)});return false}return true},customPreValidateFactura:function(c){var a=$("#reasignar_boleto_command_monedaPagoVirtual option").length;if(a<=0){core.hiddenDialog2(c);alert("Debe abrir una caja para facturar.",function(){core.showDialog2(c)});return false}var b=$("#reasignar_boleto_command_serieFacturaVirtual").data("sizeItems");if(b<=0){core.hiddenDialog2(c);alert("No existen series de factura activa en la estación.",function(){core.showDialog2(c)});return false}return true},iniciarProcesoFacturar:function(a){$("#reasignar_boleto_command_totalNetoVirtual").val("");$("#reasignar_boleto_command_tasaVirtual").val("");$("#reasignar_boleto_command_totalPagoVirtual").val("");$("#reasignar_boleto_command_vueltoVirtual").val("");$("#reasignar_boleto_command_efectivoVirtual").val("");$("#reasignar_boleto_command_totalNetoVirtual").val(a);if(reasignarBoleto.customPreValidateFactura()===true){$("#facturaVoucher").prop("checked",true);reasignarBoleto.checkFacturaVoucher();core.showMessageDialog({title:"Registrar Facturar",selector:$("#facturaDIV"),removeOnClose:false,uniqid:false,buttons:{Aceptar:{click:function(){var b=this;var c=$("#boletoForm");if(core.customValidateForm(c)===true&&reasignarBoleto.customPostValidateFactura(this)===true){$("#reasignar_boleto_command_movil").prop("value",core.isMovil());$("#reasignar_boleto_command_impresorasDisponibles").prop("value",frondend.listaImpresorasDisponibles);$("#reasignar_boleto_command_referenciaExterna").prop("value",$("#reasignar_boleto_command_referenciaExternaVirtual").prop("value"));$("#reasignar_boleto_command_tipoPago").prop("value",$("#reasignar_boleto_command_tipoPagoVirtual").prop("value"));$("#reasignar_boleto_command_autorizacionTarjeta").prop("value",$("#reasignar_boleto_command_autorizacionTarjetaVirtual").prop("value"));$("#reasignar_boleto_command_totalNeto").prop("value",$("#reasignar_boleto_command_totalNetoVirtual").prop("value"));$("#reasignar_boleto_command_monedaPago").prop("value",$("#reasignar_boleto_command_monedaPagoVirtual").prop("value"));$("#reasignar_boleto_command_tasa").prop("value",$("#reasignar_boleto_command_tasaVirtual").prop("value"));$("#reasignar_boleto_command_totalPago").prop("value",$("#reasignar_boleto_command_totalPagoVirtual").prop("value"));$("#reasignar_boleto_command_efectivo").prop("value",$("#reasignar_boleto_command_efectivoVirtual").prop("value"));$("#reasignar_boleto_command_vuelto").prop("value",$("#reasignar_boleto_command_vueltoVirtual").prop("value"));$("#reasignar_boleto_command_serieFactura").prop("value",$("#reasignar_boleto_command_serieFacturaVirtual").prop("value"));if($("#facturaVoucher").prop("checked")===true){$("#reasignar_boleto_command_tipoDocuemento").prop("value",1)}else{$("#reasignar_boleto_command_tipoDocuemento").prop("value",6)}reasignarBoleto.syncronizarListaBoletos();$(c).ajaxSubmit({target:c.attr("action"),type:"POST",dataType:"html",cache:false,async:false,beforeSubmit:function(){core.showLoading({showLoading:true})},error:function(){core.hideLoading({showLoading:true})},success:function(d){core.hideLoading({showLoading:true});if(!core.procesarRespuestaServidor(d)){b.dialog2("close");if($("#facturaVoucher").prop("checked")===true){reasignarBoleto.imprimirFacturas(d,function(){core.getPageForMenu($("#pathHomeBoletos").attr("value"))})}else{reasignarBoleto.imprimirVoucher(d,function(){core.getPageForMenu($("#pathHomeBoletos").attr("value"))})}}}})}},primary:true,type:"info"},Cancelar:function(){this.dialog2("close")}}});reasignarBoleto.checkBloque2()}},customPreValidateFacturaEspecial:function(a){return true},customPostValidateFacturaEspecial:function(c){var f=$("#totalFacturarEspecial").text();if(f===undefined||f===null||$.trim(f)===""){core.hiddenDialog2(c);alert("No se ha podido determinar el total.",function(){core.showDialog2(c)});return false}var a=$("#reasignar_boleto_command_estacionFacturacionEspecialVirtual").prop("value");if(a===undefined||a===null||$.trim(a)===""){core.hiddenDialog2(c);alert("Debe especificar la estación solicitante de la facturación.",function(){core.showDialog2(c)});return false}if($("#facturaEspecialVoucher").prop("checked")){var d=$("#reasignar_boleto_command_serieFacturacionEspecialVirtual").prop("value");if(d===undefined||d===null||$.trim(d)===""){core.hiddenDialog2(c);alert("Debe especificar una serie de facturación.",function(){core.showDialog2(c)});return false}}var e=$("#pingFacturacionEspecial").prop("value");if(e===undefined||e===null||$.trim(e)===""){core.hiddenDialog2(c);alert("Debe definir el ping de autorización de facturación.",function(){core.showDialog2(c)});return false}var b=$("#detalleFacturaBoletoBody").find("tr").length;if(b<=0){core.hiddenDialog2(c);alert("La estación seleccionada no tiene facturas disponibles.",function(){core.showDialog2(c)});return false}return true},iniciarProcesoFacturarEspecial:function(a){$("#detalleFacturaBoletoBody").find("tr").remove();$("#reasignar_boleto_command_estacionFacturacionEspecialVirtual").select2("val","");$("#reasignar_boleto_command_serieFacturacionEspecialVirtual").select2("val","");$("#pingFacturacionEspecial").val("");$("#totalFacturarEspecial").text("Total: GTQ "+a);$("#cantidadBoletos").val($("#clienteBoletoBody").find("tr").not("#clienteBoletoVacioTR").length);if(reasignarBoleto.customPreValidateFacturaEspecial()===true){$("#facturaEspecialVoucher").prop("checked",true);reasignarBoleto.checkFacturaEspecialVoucher();core.showMessageDialog({title:"Registrar Facturar Otra Estación",selector:$("#facturacionEspecialDIV"),removeOnClose:false,uniqid:false,buttons:{Aceptar:{click:function(){var b=this;var c=$("#boletoForm");if(core.customValidateForm(c)===true&&reasignarBoleto.customPostValidateFacturaEspecial(this)===true){$("#reasignar_boleto_command_movil").prop("value",core.isMovil());$("#reasignar_boleto_command_impresorasDisponibles").prop("value",frondend.listaImpresorasDisponibles);$("#reasignar_boleto_command_estacionFacturacionEspecial").prop("value",$("#reasignar_boleto_command_estacionFacturacionEspecialVirtual").prop("value"));$("#reasignar_boleto_command_serieFacturacionEspecial").prop("value",$("#reasignar_boleto_command_serieFacturacionEspecialVirtual").prop("value"));$("#reasignar_boleto_command_pingFacturacionEspecial").prop("value",$("#pingFacturacionEspecial").prop("value"));if($("#facturaEspecialVoucher").prop("checked")===true){$("#reasignar_boleto_command_tipoDocuemento").prop("value",4)}else{$("#reasignar_boleto_command_tipoDocuemento").prop("value",7)}reasignarBoleto.syncronizarListaBoletos();$(c).ajaxSubmit({target:c.attr("action"),type:"POST",dataType:"html",cache:false,async:false,beforeSubmit:function(){core.showLoading({showLoading:true})},error:function(){core.hideLoading({showLoading:true})},success:function(d){core.hideLoading({showLoading:true});if(!core.procesarRespuestaServidor(d)){b.dialog2("close");var e=core.getValueFromResponse(d,"info");core.showNotification({text:e});alert("Operación realizada satisfactoriamente. "+e,function(){core.getPageForMenu($("#pathHomeBoletos").attr("value"))})}}})}},primary:true,type:"info"},Cancelar:function(){this.dialog2("close")}}})}},customCommunValidate:function(a){cantidadBoletos=$("#clienteBoletoBody").find("tr").not("#clienteBoletoVacioTR").length;if(cantidadBoletos<=0){if(a){core.hiddenDialog2(a)}alert("Debe definir al menos un boleto.",function(){if(a){core.showDialog2(a)}});return false}if(cantidadBoletos>1){if(a){core.hiddenDialog2(a)}alert("Para las reasignaciones no puede seleccionar más de un boleto.",function(){if(a){core.showDialog2(a)}});return false}return true},customPostValidateFactura:function(e){if($("#facturaVoucher").prop("checked")===true){if(frondend.listaImpresorasDisponibles===null||$.trim(frondend.listaImpresorasDisponibles)===""){core.hiddenDialog2(e);alert("El sistema aún no ha podido detectar las impresoras para la facturación.",function(){core.showDialog2(e)});return false}var b=$("#reasignar_boleto_command_serieFacturaVirtual").select2("val");if($.trim(b)===""){core.hiddenDialog2(e);alert("Debe seleccionar una serie de factura.",function(){core.showDialog2(e)});return false}}var c=$("#reasignar_boleto_command_tipoPagoVirtual").prop("value");if(c===undefined||c===null||$.trim(c)===""){core.hiddenDialog2(e);alert("Debe especificar un tipo de pago.",function(){core.showDialog2(e)});return false}else{if(c==="1"){var f=$("#reasignar_boleto_command_monedaPagoVirtual").prop("value");if(f===undefined||f===null||$.trim(f)===""){core.hiddenDialog2(e);alert("Debe especificar una moneda de pago.",function(){core.showDialog2(e)});return false}var d=$("#reasignar_boleto_command_efectivoVirtual").prop("value");if(d===undefined||d===null||$.trim(d)===""){core.hiddenDialog2(e);alert("Debe especificar un efectivo.",function(){core.showDialog2(e)});return false}}else{var a=$("#reasignar_boleto_command_autorizacionTarjetaVirtual").prop("value");if(a===undefined||a===null||$.trim(a)===""){core.hiddenDialog2(e);alert("Debe especificar un código de autorización.",function(){core.showDialog2(e)});return false}}}var g=$("#reasignar_boleto_command_totalNetoVirtual").prop("value");if(g===undefined||g===null||$.trim(g)===""){core.hiddenDialog2(e);alert("No se ha podido determinar el total neto.",function(){core.showDialog2(e)});return false}return true},checkBloque2:function(a){if(!a){a=$("#reasignar_boleto_command_tipoPagoVirtual").val()}if(a===""){$("#reasignar_boleto_command_totalNetoVirtual").val("");$(".bloque2").hide();$(".bloque5").hide();reasignarBoleto.checkBloque3(a)}else{if(a==="1"){$(".bloque2").show();$(".bloque5").hide();reasignarBoleto.checkBloque3(a)}else{if(a==="2"){$(".bloque2").hide();$(".bloque5").show();reasignarBoleto.checkBloque3(a)}else{if(a==="3"){$(".bloque2").hide();$(".bloque5").show();reasignarBoleto.checkBloque3(a)}}}}},checkBloque3:function(a){if(!a){a=$("#reasignar_boleto_command_tipoPagoVirtual").val()}var b=$("#reasignar_boleto_command_monedaPagoVirtual").val();if(a==="1"&&b!==""&&b!=="1"){$(".bloque3").show()}else{$(".bloque3").hide()}reasignarBoleto.checkBloque4(a)},checkBloque4:function(a){if(!a){a=$("#reasignar_boleto_command_tipoPagoVirtual").val()}if(a==="1"){$(".bloque4").show()}else{$(".bloque4").hide()}},calcularImporteTotalMonedaBaseGenerico:function(c,e,d){reasignarBoleto.syncronizarListaBoletos();var a=$("#reasignar_boleto_command_estacionSubeEn").val();var b=$("#reasignar_boleto_command_estacionBajaEn").val();var l=core.getSelectedItemId("#salidaGrid");var j=$("#reasignar_boleto_command_listaClienteBoleto").val();var h=$("#reasignar_boleto_command_utilizarDesdeEstacionOrigenSalida").prop("checked");var k=0;if(a!==null&&$.trim(a)!==""&&b!==null&&$.trim(b)!==""&&l!==null&&$.trim(l)!==""&&j!==null&&$.trim(j)!==""){var g=$("#reasignar_boleto_command_tipoPagoVirtual").val();if(g===null||$.trim(g)===""){g="1"}var f=$("#reasignar_boleto_command_boletoOriginal").val();var i={idEstacionOrigen:a,idEstacionDestino:b,idTipoPago:g,idSalida:l,listaClienteBoleto:j,idBoletoOriginal:f,pagadoDesdeOrigenRuta:h};if(d){jQuery.extend(i,d)}core.request({url:$("#pathCalcularImporteTotalMonedaBase").attr("value"),method:"POST",extraParams:i,dataType:"json",async:e,successCallback:function(n){if(n.error&&$.trim(n.error)!==""){k=-1;var m=$('.modal[style^="display: block;"]');m.hide();alert(n.error,function(){m.show()})}else{k=n.total;if(c&&$.isFunction(c)){c(n,i)}}}})}return k},calcularImporteTotalMonedaBase:function(){reasignarBoleto.calcularImporteTotalMonedaBaseGenerico(function(b){$("#reasignar_boleto_command_totalNetoVirtual").val(b.total);var a=$("#reasignar_boleto_command_tipoPagoVirtual").val();if(a==="1"){reasignarBoleto.changeMonedaPago()}},false,{})},changeTipoPago:function(){reasignarBoleto.checkBloque2();$("#reasignar_boleto_command_totalNetoVirtual").val("");$("#reasignar_boleto_command_tasaVirtual").val("");$("#reasignar_boleto_command_totalPagoVirtual").val("");$("#reasignar_boleto_command_vueltoVirtual").val("");$("#reasignar_boleto_command_efectivoVirtual").val("");reasignarBoleto.calcularImporteTotalMonedaBase()},changeMonedaPago:function(){var b=$("#reasignar_boleto_command_monedaPagoVirtual").val();$("#reasignar_boleto_command_tasaVirtual").val("");$("#reasignar_boleto_command_totalPagoVirtual").val("");$("#reasignar_boleto_command_vueltoVirtual").val("");if(b===null||$.trim(b)===""){$("#prependTotalPagoVirtual").text("???");$("#prependEfectivoVirtual").text("???")}else{if($.trim(b)==="1"){$("#prependTotalPagoVirtual").text("GTQ");$("#prependEfectivoVirtual").text("GTQ");reasignarBoleto.changeEfectivo()}else{var c=$("#reasignar_boleto_command_totalNetoVirtual").val();var a=$("#reasignar_boleto_command_monedaPagoVirtual").val();$("#prependTotalPagoVirtual").text("GTQ");$("#prependEfectivoVirtual").text("GTQ");if(c!==null&&$.trim(c)!==""&&a!==null&&$.trim(a)!==""){core.request({url:$("#pathCalcularImporteTotalPorMoneda").attr("value"),method:"POST",extraParams:{totalNeto:c,idMoneda:a},dataType:"json",async:true,successCallback:function(e){if(e.error&&$.trim(e.error)!==""){var d=$('.modal[style^="display: block;"]');d.hide();alert(e.error,function(){d.show()})}else{$("#prependTotalPagoVirtual").text(e.sigla);$("#prependEfectivoVirtual").text(e.sigla);$("#reasignar_boleto_command_tasaVirtual").val(e.tasa);$("#reasignar_boleto_command_totalPagoVirtual").val(e.total);reasignarBoleto.changeEfectivo()}}})}}}reasignarBoleto.checkBloque3()},changeEfectivo:function(){var f=$("#reasignar_boleto_command_monedaPagoVirtual").val();$("#reasignar_boleto_command_vueltoVirtual").val("");var b=$("#reasignar_boleto_command_efectivoVirtual").val();if(!$.isNumeric(b)){$("#reasignar_boleto_command_efectivoVirtual").val("");return}else{b=parseFloat(b).toFixed(2);$("#reasignar_boleto_command_efectivoVirtual").val(b)}if($.trim(f)==="1"){var g=$("#reasignar_boleto_command_totalNetoVirtual").val();var c=b-parseFloat(g);c=parseFloat(c).toFixed(2);if(c===0){$("#reasignar_boleto_command_vueltoVirtual").val(0)}else{if(c<0){var e=$('.modal[style^="display: block;"]');e.hide();alert("El efectivo no alcanza, como mínimo son:"+g+".",function(){e.show();$("#reasignar_boleto_command_efectivoVirtual").val(g);$("#reasignar_boleto_command_vueltoVirtual").val(0)})}else{$("#reasignar_boleto_command_vueltoVirtual").val(c)}}}else{var d=$("#reasignar_boleto_command_totalPagoVirtual").val();var c=b-parseFloat(d);c=parseFloat(c).toFixed(2);if(c===0){$("#reasignar_boleto_command_vueltoVirtual").val(0)}else{if(c<0){var e=$('.modal[style^="display: block;"]');e.hide();alert("El efectivo no alcanza, como mínimo son:"+d+".",function(){e.show();$("#reasignar_boleto_command_efectivoVirtual").val(d);$("#reasignar_boleto_command_vueltoVirtual").val(0)})}else{var a=$("#reasignar_boleto_command_monedaPagoVirtual").val();if(a!==null&&$.trim(a)!==""){core.request({url:$("#pathCalcularImporteTotalPorMoneda").attr("value"),method:"POST",extraParams:{totalNeto:c,idMoneda:a,dir:false},dataType:"json",async:true,successCallback:function(i){if(i.error&&$.trim(i.error)!==""){var h=$('.modal[style^="display: block;"]');h.hide();alert(i.error,function(){h.show();$("#reasignar_boleto_command_efectivoVirtual").val(d);$("#reasignar_boleto_command_vueltoVirtual").val(0)})}else{$("#reasignar_boleto_command_vueltoVirtual").val(i.total)}}})}}}}},changeEstacionFacturacionEspecial:function(){var estacionFacturacionEspecial=$("#reasignar_boleto_command_estacionFacturacionEspecialVirtual").select2("val");var idSalida=core.getSelectedItemId("#salidaGrid");$("#detalleFacturaBoletoBody").find("tr").remove();$("#reasignar_boleto_command_serieFacturacionEspecialVirtual").select2({data:[]});$("#facturaEspecialVoucher").prop("checked",true);reasignarBoleto.checkFacturaEspecialVoucher();if(estacionFacturacionEspecial!==null&&$.trim(estacionFacturacionEspecial)!==""&&idSalida!==null&&$.trim(idSalida)!==""){core.request({url:$("#pathSeriesActivaPorEstacion").attr("value"),method:"POST",extraParams:{idEstacion:estacionFacturacionEspecial,idSalida:idSalida},dataType:"json",async:true,successCallback:function(success){var optionSeriesFacturas=success.optionSeriesFacturas;if(optionSeriesFacturas){$("#reasignar_boleto_command_serieFacturacionEspecialVirtual").select2({allowClear:false,data:{results:optionSeriesFacturas}});var cantidad=optionSeriesFacturas.length;$("#reasignar_boleto_command_serieFacturacionEspecialVirtual").data("sizeItems",cantidad);if(cantidad>0){if(optionSeriesFacturas[0]){$("#reasignar_boleto_command_serieFacturacionEspecialVirtual").select2("val",optionSeriesFacturas[0].id);reasignarBoleto.changeSerieFacturacionEspecial()}}else{var modal=$('.modal[style^="display: block;"]');modal.hide();alert("La estación no tiene series de facturas activas.",function(){modal.show()})}}if(success.showVoucher&&eval(success.showVoucher)===true){$("#facturaEspecialVoucher").removeClass("hidden")}else{$("#facturaEspecialVoucher").addClass("hidden")}}})}},changeSerieFacturacionEspecial:function(){var b=$("#reasignar_boleto_command_estacionFacturacionEspecialVirtual").select2("val");var a=$("#reasignar_boleto_command_serieFacturacionEspecialVirtual").select2("val");$("#detalleFacturaBoletoBody").find("tr").remove();reasignarBoleto.calcularImporteTotalMonedaBaseGenerico(function(e){if(e.error&&$.trim(e.error)!==""){var d=$('.modal[style^="display: block;"]');d.hide();alert(e.error,function(){d.show()})}else{var c=e.boletos;$.each(c,function(){var f=$("<tr><td>"+this.numero+"</td><td>"+this.factura+"</td><td>"+this.importe+"</td></tr>");$("#detalleFacturaBoletoBody").append(f)})}},false,{detalle:true,estacionDetalle:b,facturar:$("#facturaEspecialVoucher").prop("checked"),serieFacturacionEspecial:a})}};
chequearBoletosPorSalida={funcionesAddOnload:function(){this._init();this._conectEvents()},_init:function(){$("#chequear_boleto_salida_command_salida").select2({allowClear:false});chequearBoletosPorSalida.buscarBoletos()},_conectEvents:function(){$("#cancelar").click(function(a){a.preventDefault();a.stopPropagation();confirm("¿Está seguro que desea cancelar la operación?",function(b){if(b===true){core.getPageForMenu($("#cancelar").attr("href"))}})});$("#chequear_boleto_salida_command_salida").on("change",chequearBoletosPorSalida.buscarBoletos);$("#aceptar").click(chequearBoletosPorSalida.clickAceptar);$("#manifiestoInterno").data("index","chequear_boleto_salida_command_salida");$("#manifiestoInterno").data("autoopenfile","PDF");$("#manifiestoInterno").click(frondend.loadSubPage);$("#manifiestoPiloto").data("index","chequear_boleto_salida_command_salida");$("#manifiestoPiloto").data("autoopenfile","PDF");$("#manifiestoPiloto").click(frondend.loadSubPage)},buscarBoletos:function(b){console.debug("buscarBoletos-init");$("#boletoBody").find("tr").not("#boletoVacioTR").remove();$("#boletoBody").find("#boletoVacioTR").show();var a=$("#chequear_boleto_salida_command_salida").val();if(a!==null&&$.trim(a)!==""){core.request({url:$("#pathListarBoletosAChequear").attr("value"),method:"POST",extraParams:{salida:a},dataType:"html",async:false,successCallback:function(c){console.debug(c);if($.trim(c)!==""){$("#boletoBody").find("#boletoVacioTR").hide();$("#boletoBody").append(c);$(".chequeadoSI").not($(".chequeadoSI[disabled]")).bind("click",(function(d){$(this).parent().parent().find(".chequeadoNO").prop("checked",false)}));$(".chequeadoNO").not($(".chequeadoNO[disabled]")).bind("click",(function(d){$(this).parent().parent().find(".chequeadoSI").prop("checked",false)}))}}})}},clickAceptar:function(f){f.preventDefault();f.stopPropagation();var d=[];var c=$(".chequeadoSI").not($(".chequeadoSI[disabled]"));$.each(c,function(){var e=$(this).prop("checked");if(e){d.push($(this).parent().parent().data("id"))}});console.debug(d);var a=[];var g=$(".chequeadoNO").not($(".chequeadoNO[disabled]"));$.each(g,function(){var e=$(this).prop("checked");if(e){a.push($(this).parent().parent().data("id"))}});console.debug(a);if(d.length<=0&&a.length<=0){alert("Debe seleccionar un boleto para chequear.");return}var b=$("#chequear_boleto_salida_command_salida").val();if(b!==null&&$.trim(b)!==""){core.request({url:$("#chequearBoletosPorSalida").attr("action"),method:"POST",extraParams:{salida:b,idBoletosSI:d.join(","),idBoletosNO:a.join(",")},dataType:"html",async:false,successCallback:function(e){console.debug(e);if(!core.procesarRespuestaServidor(e)){alert("Operación realizada satisfactoriamente.",function(){chequearBoletosPorSalida.buscarBoletos()})}}})}}};
frondendCajas={funcionesAddOnload:function(){this._init();this._conectEvents()},_init:function(){$("#fechaCreacion").datepicker({format:"dd/mm/yyyy",todayBtn:true,language:"es",autoclose:true,todayHighlight:true});$("#fechaApertura").datepicker({format:"dd/mm/yyyy",todayBtn:true,language:"es",autoclose:true,todayHighlight:true});$("#grid").flexigrid({url:$("#grid").data("url"),dataType:"json",singleSelect:true,query:"",rpOptions:[5,10,15,20,25,30,40,50],colModel:[{display:"ID",name:"id",width:70,sortable:true,align:"center"},{display:"Moneda",name:"moneda",width:60,sortable:true,align:"center"},{display:"Estado",name:"estado",width:100,sortable:true,align:"center"},{display:"Fecha Creación",name:"fechaCreacion",width:100,sortable:true,align:"center"},{display:"Fecha Apertura",name:"fechaApertura",width:100,sortable:true,align:"center"},{display:"Usuario",name:"usuario",width:200,sortable:false,align:"left"},{display:"Estación",name:"estacion",width:150,sortable:false,align:"left"}],usepager:true,useRp:true,rp:15,showTableToggleBtn:false})},_conectEvents:function(){$("#linkFilter").click(frondend.linkFilter);$("li a.menuCajas").not("a[data-print=true]").click(frondend.loadSubPage)}};
crearCaja={funcionesAddOnload:function(){this._init();this._conectEvents()},_init:function(){if(!core.isMovil()){$("#crear_caja_command_moneda").select2({allowClear:true});$("#crear_caja_command_usuario").select2({allowClear:true})}},_conectEvents:function(){$("#cancelar").click(function(a){a.preventDefault();a.stopPropagation();confirm("¿Está seguro que desea cancelar la operación?",function(b){if(b===true){core.getPageForMenu($("#cancelar").attr("href"))}})});$("#aceptar").click(crearCaja.clickAceptar)},clickAceptar:function(b){b.preventDefault();b.stopPropagation();var a=$("#cajaForm");if(core.customValidateForm(a)===true){$(a).ajaxSubmit({target:a.attr("action"),type:"POST",dataType:"html",cache:false,async:false,beforeSubmit:function(){core.showLoading({showLoading:true})},error:function(){core.hideLoading({showLoading:true})},success:function(c){core.hideLoading({showLoading:true});if(!core.procesarRespuestaServidor(c)){alert("Operación realizada satisfactoriamente.",function(){core.getPageForMenu($("#pathHomeCaja").attr("value"))})}}})}}};
frondendBuses={funcionesAddOnload:function(){this._init();this._conectEvents()},_init:function(){$("#grid").flexigrid({url:$("#grid").data("url"),dataType:"json",singleSelect:true,query:"",rpOptions:[5,10,15,20,25,30,40,50],colModel:[{display:"Código",name:"id",width:50,sortable:false,align:"center"},{display:"Empresa",name:"empresa",width:100,sortable:false,align:"left"},{display:"Placa",name:"placa",width:60,sortable:false,align:"center"},{display:"Estado",name:"estado",width:100,sortable:false,align:"center"},{display:"Tipo",name:"tipo",width:200,sortable:false,align:"left"}],usepager:true,useRp:true,rp:15,showTableToggleBtn:false})},_conectEvents:function(){$("#linkFilter").click(frondend.linkFilter);$("li a.menuBuses").not("a[data-print=true]").click(frondend.loadSubPage)}};
cambiarEstadoBus={funcionesAddOnload:function(){this._init();this._conectEvents()},_init:function(){$("#cambiar_estado_bus_command_estado").select2({allowClear:true})},_conectEvents:function(){}};
actualizarBus={funcionesAddOnload:function(){this._init();this._conectEvents()},_init:function(){$("#actualizar_bus_command_empresa").select2({allowClear:true});$("#actualizar_bus_command_tipo").select2({allowClear:true});$("#actualizar_bus_command_marca").select2({allowClear:true});$("#actualizar_bus_command_estado").select2({allowClear:true});$("#actualizar_bus_command_fechaVencimientoTarjetaOperaciones").datepicker({format:"dd/mm/yyyy",todayBtn:true,language:"es",autoclose:true,todayHighlight:true})},_conectEvents:function(){$("#cancelar").click(function(a){a.preventDefault();a.stopPropagation();confirm("¿Está seguro que desea cancelar la operación?",function(b){if(b===true){core.getPageForMenu($("#cancelar").attr("href"))}})});$("#aceptar").click(actualizarBus.clickAceptar)},clickAceptar:function(a){a.preventDefault();a.stopPropagation();var b=$("#busForm");if(core.customValidateForm(b)===true){$(b).ajaxSubmit({target:b.attr("action"),type:"POST",dataType:"html",cache:false,async:false,beforeSubmit:function(){core.showLoading({showLoading:true})},error:function(){core.hideLoading({showLoading:true})},success:function(c){core.hideLoading({showLoading:true});if(!core.procesarRespuestaServidor(c)){alert("Operación realizada satisfactoriamente.",function(){core.getPageForMenu($("#cancelar").attr("href"))})}}})}}};
crearBus={funcionesAddOnload:function(){this._init();this._conectEvents()},_init:function(){$("#crear_bus_command_empresa").select2({allowClear:true});$("#crear_bus_command_tipo").select2({allowClear:true});$("#crear_bus_command_marca").select2({allowClear:true});$("#crear_bus_command_estado").select2({allowClear:true});$("#crear_bus_command_fechaVencimientoTarjetaOperaciones").datepicker({format:"dd/mm/yyyy",todayBtn:true,language:"es",autoclose:true,todayHighlight:true})},_conectEvents:function(){$("#cancelar").click(function(a){a.preventDefault();a.stopPropagation();confirm("¿Está seguro que desea cancelar la operación?",function(b){if(b===true){core.getPageForMenu($("#cancelar").attr("href"))}})});$("#aceptar").click(crearBus.clickAceptar)},clickAceptar:function(a){a.preventDefault();a.stopPropagation();var b=$("#busForm");if(core.customValidateForm(b)===true){$(b).ajaxSubmit({target:b.attr("action"),type:"POST",dataType:"html",cache:false,async:false,beforeSubmit:function(){core.showLoading({showLoading:true})},error:function(){core.hideLoading({showLoading:true})},success:function(c){core.hideLoading({showLoading:true});if(!core.procesarRespuestaServidor(c)){alert("Operación realizada satisfactoriamente.",function(){core.getPageForMenu($("#cancelar").attr("href"))})}}})}}};
frondendPilotos={funcionesAddOnload:function(){this._init();this._conectEvents()},_init:function(){$("#grid").flexigrid({url:$("#grid").data("url"),dataType:"json",singleSelect:true,query:"",rpOptions:[5,10,15,20,25,30,40,50],colModel:[{display:"Código",name:"codigo",width:45,sortable:false,align:"center"},{display:"Nombre Completo",name:"nombre",width:150,sortable:false,align:"left"},{display:"Nacionalidad",name:"nacionalidad",width:100,sortable:false,align:"left"},{display:"DPI",name:"dpi",width:100,sortable:false,align:"center"},{display:"Seguro Social",name:"seguroSocial",width:100,sortable:false,align:"center"},{display:"Teléfono",name:"telefono",width:100,sortable:false,align:"center"},{display:"Licencia",name:"numeroLicencia",width:100,sortable:false,align:"center"},{display:"Vencimiento",name:"fechaVencimientoLicencia",width:80,sortable:false,align:"center"},{display:"Sexo",name:"sexo",width:50,sortable:false,align:"center"},{display:"Empresa",name:"empresa",width:100,sortable:false,align:"center"},{display:"Fecha Nacimiento",name:"fechaNacimiento",width:100,sortable:false,align:"center"},{display:"Activo",name:"activo",width:40,sortable:false,align:"center"}],usepager:true,useRp:true,rp:15,showTableToggleBtn:false})},_conectEvents:function(){$("#linkFilter").click(frondend.linkFilter);$("li a.menuPilotos").not("a[data-print=true]").click(frondend.loadSubPage)}};
crearPiloto={funcionesAddOnload:function(){this._init();this._conectEvents()},_init:function(){$("#crear_piloto_command_empresa").select2({allowClear:true});$("#crear_piloto_command_nacionalidad").select2({allowClear:false});$("#crear_piloto_command_sexo").select2({allowClear:false});$("#crear_piloto_command_fechaNacimiento").datepicker({format:"dd/mm/yyyy",startDate:"-100y",endDate:"d",todayBtn:true,language:"es",autoclose:true,todayHighlight:true});$("#crear_piloto_command_fechaVencimientoLicencia").datepicker({format:"dd/mm/yyyy",startDate:"-20y",endDate:"+20y",todayBtn:true,language:"es",autoclose:true,todayHighlight:true})},_conectEvents:function(){$("#cancelar").click(function(a){a.preventDefault();a.stopPropagation();confirm("¿Está seguro que desea cancelar la operación?",function(b){if(b===true){core.getPageForMenu($("#cancelar").attr("href"))}})});$("#aceptar").click(crearPiloto.clickAceptar)},clickAceptar:function(b){b.preventDefault();b.stopPropagation();var a=$("#pilotoForm");if(core.customValidateForm(a)===true){$(a).ajaxSubmit({target:a.attr("action"),type:"POST",dataType:"html",cache:false,async:false,beforeSubmit:function(){core.showLoading({showLoading:true})},error:function(){core.hideLoading({showLoading:true})},success:function(c){core.hideLoading({showLoading:true});if(!core.procesarRespuestaServidor(c)){alert("Operación realizada satisfactoriamente.",function(){core.getPageForMenu($("#cancelar").attr("href"))})}}})}}};
actualizarPiloto={funcionesAddOnload:function(){this._init();this._conectEvents()},_init:function(){$("#actualizar_piloto_command_empresa").select2({allowClear:true});$("#actualizar_piloto_command_nacionalidad").select2({allowClear:false});$("#actualizar_piloto_command_sexo").select2({allowClear:false});$("#actualizar_piloto_command_fechaNacimiento").datepicker({format:"dd/mm/yyyy",startDate:"-100y",endDate:"d",todayBtn:true,language:"es",autoclose:true,todayHighlight:true});$("#actualizar_piloto_command_fechaVencimientoLicencia").datepicker({format:"dd/mm/yyyy",startDate:"-20y",endDate:"+20y",todayBtn:true,language:"es",autoclose:true,todayHighlight:true})},_conectEvents:function(){$("#cancelar").click(function(a){a.preventDefault();a.stopPropagation();confirm("¿Está seguro que desea cancelar la operación?",function(b){if(b===true){core.getPageForMenu($("#cancelar").attr("href"))}})});$("#aceptar").click(actualizarPiloto.clickAceptar)},clickAceptar:function(b){b.preventDefault();b.stopPropagation();var a=$("#pilotoForm");if(core.customValidateForm(a)===true){$(a).ajaxSubmit({target:a.attr("action"),type:"POST",dataType:"html",cache:false,async:false,beforeSubmit:function(){core.showLoading({showLoading:true})},error:function(){core.hideLoading({showLoading:true})},success:function(c){core.hideLoading({showLoading:true});if(!core.procesarRespuestaServidor(c)){alert("Operación realizada satisfactoriamente.",function(){core.getPageForMenu($("#cancelar").attr("href"))})}}})}}};
frondendAutorizacionInterna={funcionesAddOnload:function(){this._init();this._conectEvents()},_init:function(){$("#fechaCreacion").datepicker({format:"dd/mm/yyyy",todayBtn:true,language:"es",autoclose:true,todayHighlight:true});$("#grid").flexigrid({url:$("#grid").data("url"),dataType:"json",singleSelect:true,query:"",rpOptions:[5,10,15,20,25,30,40,50],colModel:[{display:"ID",name:"id",width:50,sortable:false,align:"center"},{display:"Fecha Creación",name:"fecha",width:120,sortable:false,align:"center"},{display:"PIN",name:"codigo",width:120,sortable:false,align:"center"},{display:"Motivo",name:"motivo",width:500,sortable:false,align:"left"}],usepager:true,useRp:true,rp:15,showTableToggleBtn:false})},_conectEvents:function(){$("#linkFilter").click(frondend.linkFilter);$("li a.menuAutorizacionInterna").not("a[data-print=true]").click(frondend.loadSubPage)}};
crearAutorizacionInterna={funcionesAddOnload:function(){this._init();this._conectEvents()},_init:function(){var a=$("#pathGeneratePin").val();var b=$('<a class="btn changePin" href="'+a+'"><i class="icon-refresh"></i>Cambiar pin</div></a>');$("#crear_autorizacion_interna_command_codigo").parent().append(b)},_conectEvents:function(){$("#cancelar").click(function(a){a.preventDefault();a.stopPropagation();confirm("¿Está seguro que desea cancelar la operación?",function(b){if(b===true){core.getPageForMenu($("#cancelar").attr("href"))}})});$(".changePin").bind("click",crearAutorizacionInterna.changePin);$("#aceptar").click(crearAutorizacionInterna.clickAceptar)},changePin:function(a){$.get($(this).attr("href"),function(b){$("#crear_autorizacion_interna_command_codigo").val(b)});a.preventDefault()},clickAceptar:function(b){b.preventDefault();b.stopPropagation();var a=$("#autorizacionInternaForm");if(core.customValidateForm(a)===true){$(a).ajaxSubmit({target:a.attr("action"),type:"POST",dataType:"html",cache:false,async:false,beforeSubmit:function(){core.showLoading({showLoading:true})},error:function(){core.hideLoading({showLoading:true})},success:function(c){core.hideLoading({showLoading:true});if(!core.procesarRespuestaServidor(c)){alert("Operación realizada satisfactoriamente.",function(){core.getPageForMenu($("#pathHomeAutorizacionInterna").attr("value"))})}}})}}};
crearAutorizacionInternaMultiple={funcionesAddOnload:function(){this._init();this._conectEvents()},_init:function(){},_conectEvents:function(){$("#cancelar").click(function(a){a.preventDefault();a.stopPropagation();confirm("¿Está seguro que desea cancelar la operación?",function(b){if(b===true){core.getPageForMenu($("#cancelar").attr("href"))}})});$("#aceptar").click(crearAutorizacionInternaMultiple.clickAceptar)},clickAceptar:function(b){b.preventDefault();b.stopPropagation();var a=$("#autorizacionInternaForm");if(core.customValidateForm(a)===true){$(a).ajaxSubmit({target:a.attr("action"),type:"POST",dataType:"html",cache:false,async:false,beforeSubmit:function(){core.showLoading({showLoading:true})},error:function(){core.hideLoading({showLoading:true})},success:function(c){core.hideLoading({showLoading:true});if(!core.procesarRespuestaServidor(c)){alert("Operación realizada satisfactoriamente.",function(){core.getPageForMenu($("#cancelar").attr("href"))})}}})}},};
frondendAutorizacionCortesia={funcionesAddOnload:function(){this._init();this._conectEvents()},_init:function(){$("#fechaCreacion").datepicker({format:"dd/mm/yyyy",todayBtn:true,language:"es",autoclose:true,todayHighlight:true});$("#grid").flexigrid({url:$("#grid").data("url"),dataType:"json",singleSelect:true,query:"",rpOptions:[5,10,15,20,25,30,40,50],colModel:[{display:"ID",name:"id",width:50,sortable:false,align:"center"},{display:"Servicio",name:"servicio",width:90,sortable:false,align:"left"},{display:"Fecha Creación",name:"fecha",width:120,sortable:false,align:"center"},{display:"PIN",name:"codigo",width:120,sortable:false,align:"center"},{display:"Cliente",name:"cliente",width:200,sortable:false,align:"left"},{display:"Motivo",name:"motivo",width:500,sortable:false,align:"left"}],usepager:true,useRp:true,rp:15,showTableToggleBtn:false})},_conectEvents:function(){$("#linkFilter").click(frondend.linkFilter);$("li a.menuAutorizacionCortesia").not("a[data-print=true]").click(frondend.loadSubPage)}};
crearBoletoAutorizacionCortesia={funcionesAddOnload:function(){this._init();this._conectEvents()},_init:function(){var a=$("#crear_boleto_autorizacion_cortesia_command_cliente").data("pathlistarclientespaginando");$("#crear_boleto_autorizacion_cortesia_command_cliente").select2({minimumInputLength:1,closeOnSelect:false,ajax:{url:a,dataType:"json",type:"GET",data:function(b,c){return{term:b,page_limit:5}},results:function(c,b){return{results:c.options}}}});$("#crear_boleto_autorizacion_cortesia_command_fechaSalida").datepicker({format:"dd/mm/yyyy",startDate:"-1d",endDate:"+3m",todayBtn:true,language:"es",autoclose:true,todayHighlight:true});$("#crear_boleto_autorizacion_cortesia_command_fechaSalida").datepicker("setDate",new Date());if(core.isMovil()){$(".widgetReal").hide();$(".widgetAux").show()}else{$(".widgetReal").show();$(".widgetAux").hide();$("#crear_boleto_autorizacion_cortesia_command_estacionOrigen").select2();$("#crear_boleto_autorizacion_cortesia_command_salida").select2({data:[]});$("#crear_boleto_autorizacion_cortesia_command_estacionSubeEn").select2({data:[]});$("#crear_boleto_autorizacion_cortesia_command_estacionBajaEn").select2({data:[]})}crearBoletoAutorizacionCortesia.loadSalidas();crearBoletoAutorizacionCortesia.checkSelectedSalida()},_conectEvents:function(){$("#cancelar").click(function(a){a.preventDefault();a.stopPropagation();confirm("¿Está seguro que desea cancelar la operación?",function(b){if(b===true){core.getPageForMenu($("#cancelar").attr("href"),false)}})});$("#aceptar").click(crearBoletoAutorizacionCortesia.clickAceptar);$("#addCliente").click(function(a){frondend.loadSubPage(a,$(this),function(c){var b=$("#crear_boleto_autorizacion_cortesia_command_cliente");if(c!==""){core.request({url:b.data("pathlistarclientespaginando"),type:"POST",dataType:"json",async:false,extraParams:{id:c},successCallback:function(d){if(d.options&&d.options[0]){$("#crear_boleto_autorizacion_cortesia_command_cliente").select2("data",d.options[0])}}})}},{confirmarOperacion:false})});$("#updateCliente").click(function(a){frondend.loadSubPage(a,$(this),function(){var b=$("#crear_boleto_autorizacion_cortesia_command_cliente");var c=b.val();if(c!==""){core.request({url:b.data("pathlistarclientespaginando"),type:"POST",dataType:"json",async:false,extraParams:{id:c},successCallback:function(d){if(d.options&&d.options[0]){$("#crear_boleto_autorizacion_cortesia_command_cliente").select2("data",d.options[0])}}})}})});$("#crear_boleto_autorizacion_cortesia_command_fechaSalida").datepicker().on("changeDate",function(a){a.preventDefault();a.stopPropagation();crearBoletoAutorizacionCortesia.loadSalidas()});$("#crear_boleto_autorizacion_cortesia_command_estacionOrigen").on("change",crearBoletoAutorizacionCortesia.loadSalidas);$("#crear_boleto_autorizacion_cortesia_command_salida").on("change",crearBoletoAutorizacionCortesia.checkSelectedSalida);$("#salidaAux").on("change",crearBoletoAutorizacionCortesia.checkSelectedSalida)},loadSalidas:function(){console.log("loadSalidas...");var a=$("#crear_boleto_autorizacion_cortesia_command_fechaSalida").val();var b=$("#crear_boleto_autorizacion_cortesia_command_estacionOrigen").val();if(a===null||$.trim(a)===""||b===null||$.trim(b)===""){$("#salidaDIV").hide();return}core.request({url:$("#pathListarSalidas").val(),type:"POST",dataType:"json",async:false,extraParams:{fecha:a,estacion:b},successCallback:function(c){$("#salidaDIV").show();if(c.optionSalidas){if(core.isMovil()){$("#salidaAux").find("option").remove();$.each(c.optionSalidas,function(d,e){$("#salidaAux").append($("<option>",{value:e.id,text:e.text}))});$("#salidaAux").val("")}else{$("#crear_boleto_autorizacion_cortesia_command_salida").select2({data:{results:c.optionSalidas}})}}crearBoletoAutorizacionCortesia.checkSelectedSalida()}})},checkSelectedSalida:function(){var a=null;if(core.isMovil()){a=$("#salidaAux").val()}else{a=$("#crear_boleto_autorizacion_cortesia_command_salida").prop("value")}if(a===null||$.trim(a)===""){if(core.isMovil()){$("#estacionSubeEnAux").find("option").remove();$("#estacionBajaEnAux").find("option").remove()}else{$("#crear_boleto_autorizacion_cortesia_command_estacionSubeEn").select2({data:[]});$("#crear_boleto_autorizacion_cortesia_command_estacionBajaEn").select2({data:[]})}$("#listaAsientosHidden").val(JSON.stringify([]));$("#listaSenalesHidden").val(JSON.stringify([]));$("#listaBoletosHidden").val(JSON.stringify([]));$("#listaReservacionesHidden").val(JSON.stringify([]));$("#dependenciasSelecccionSalidaDIV").hide();$("#utilizadoSpan").text(0);$("#totalSpan").text(0);crearBoletoAutorizacionCortesia.mostrarIconos()}else{core.request({url:$("#pathGetInformacionPorSalida").prop("value"),type:"POST",dataType:"json",async:false,extraParams:{idSalida:a},successCallback:function(e){$("#dependenciasSelecccionSalidaDIV").show();var d=e.optionEstacionOrigen;var b=e.optionEstacionDestino;var f=e.optionsEstacionesIntermedias;if(e.optionEstacionOrigen&&e.optionsEstacionesIntermedias){var c=d.concat(f);if(core.isMovil()){$("#estacionSubeEnAux").find("option").remove();$.each(c,function(g,h){$("#estacionSubeEnAux").append($("<option>",{value:h.id,text:h.text}))});$("#estacionSubeEnAux").val(d[0].id)}else{$("#crear_boleto_autorizacion_cortesia_command_estacionSubeEn").select2({data:{results:c}});$("#crear_boleto_autorizacion_cortesia_command_estacionSubeEn").select2("val",d[0].id)}}if(e.optionEstacionDestino&&e.optionsEstacionesIntermedias){var c=b.concat(f);if(core.isMovil()){$("#estacionBajaEnAux").find("option").remove();$.each(c,function(g,h){$("#estacionBajaEnAux").append($("<option>",{value:h.id,text:h.text}))});$("#estacionBajaEnAux").val(b[0].id)}else{$("#crear_boleto_autorizacion_cortesia_command_estacionBajaEn").select2({data:{results:c}});$("#crear_boleto_autorizacion_cortesia_command_estacionBajaEn").select2("val",b[0].id)}}if(e.optionListaAsientos){$("#listaAsientosHidden").val(JSON.stringify(e.optionListaAsientos))}if(e.optionListaSenales){$("#listaSenalesHidden").val(JSON.stringify(e.optionListaSenales))}if(e.optionBoletos){$("#listaBoletosHidden").val(JSON.stringify(e.optionBoletos))}if(e.optionReservaciones){$("#listaReservacionesHidden").val(JSON.stringify(e.optionReservaciones))}crearBoletoAutorizacionCortesia.mostrarIconos()}})}},clearItemGridBoleto:function(){$("#crear_boleto_autorizacion_cortesia_command_listaBoleto").val(JSON.stringify([]))},buscarBoletoReservacionPorAsiento:function(a,c){var b=null;$.each(c,function(){if(this.numero===a){b=this;return}});return b},buscarEstadoAsientoItem:function(a){if(a.tipo==="R"){return"reservado"}else{if(a.tipo==="B"){if(a.tipoDocumento===1||a.tipoDocumento===2||a.tipoDocumento===4||a.tipoDocumento===5||a.tipoDocumento===6||a.tipoDocumento===7||a.tipoDocumento===8){return"vendido"}else{if(a.tipoDocumento===3){return"cortesia"}else{throw new Error("No se pudo determinar el tipo de documento del boleto con id:"+a.id+", y numero:"+a.numero)}}}else{throw new Error("No se pudo determinar el tipo del asiento con id:"+a.id+", y numero:"+a.numero)}}},mostrarIconos:function(){$(".item").remove();var listaBoletos=$("#listaBoletosHidden").val();if(listaBoletos){listaBoletos=JSON.parse(listaBoletos)}else{listaBoletos=[]}var listaReservaciones=$("#listaReservacionesHidden").val();if(listaReservaciones){listaReservaciones=JSON.parse(listaReservaciones)}else{listaReservaciones=[]}var all=listaBoletos.concat(listaReservaciones);$("#nav2").addClass("hidden");var asientosPosicionados=[];var listaAsientos=$("#listaAsientosHidden").val();if(listaAsientos){listaAsientos=JSON.parse(listaAsientos)}else{listaAsientos=[]}$("#totalSpan").text(listaAsientos.length);jQuery.each(listaAsientos,function(){var clase=this.clase;if(clase==="1"){clase="claseA"}else{if(clase==="2"){clase="claseB"}else{throw new Error("El item debe tener uno de los id de clases siguientes: 1 o 2.")}}asientosPosicionados[this.numero]=this;var estado="libre";var item0=crearBoletoAutorizacionCortesia.buscarBoletoReservacionPorAsiento(this.numero,all);if(item0!==null){estado=crearBoletoAutorizacionCortesia.buscarEstadoAsientoItem(item0)}var item=$(".icono."+clase+"."+estado).clone();item.removeClass("ui-draggable icono");item.addClass("item");var nivel2=this.nivel2;if(eval(nivel2)){$("#nav2").removeClass("hidden");$(".nivel2").append(item)}else{$(".nivel1").append(item)}item.css("left",core.ajustarPosicion(this.coordenadaX));item.css("top",core.ajustarPosicion(this.coordenadaY));this.jsId=core.uniqId();item.attr("jsId",this.jsId);var numero=this.numero;item.find(".detalle").text(this.numero);item.data("numero",this.numero);item.data("id",this.id);if(item0!==null){item.data("tipo",item0.tipo);if(item0.tipo==="R"){item.data("idReservacion",item0.id);item.data("idClinteReservacion",item0.clinteId)}}item.css("cursor","hand")});$("#listaAsientosHidden").val(JSON.stringify(listaAsientos));$("#pendientes").addClass("hidden");$("#utilizadoSpan").text(all.length);jQuery.each(all,function(){var asiento=asientosPosicionados[this.numero];if(!asiento){$("#pendientes").removeClass("hidden");var clase=this.clase;if(clase==="1"){clase="claseA"}else{if(clase==="2"){clase="claseB"}else{throw new Error("El item debe tener uno de los id de clases siguientes: 1 o 2.")}}var estado=crearBoletoAutorizacionCortesia.buscarEstadoAsientoItem(this);var item=$(".icono."+clase+"."+estado).clone();item.removeClass("ui-draggable icono");item.addClass("item2");$(".pendientes").append(item);item.css("left",core.ajustarPosicion(this.coordenadaX));item.css("top",core.ajustarPosicion(this.coordenadaY));this.jsId=core.uniqId();item.attr("jsId",this.jsId);var numero=this.numero;item.find(".detalle").text(this.numero);item.data("numero",this.numero);item.data("tipo",this.tipo);if(this.tipo==="R"){item.data("idReservacion",this.id);item.data("idClinteReservacion",this.clinteId)}}});$(".containment .active").removeClass("active");$("#tab1").addClass("active");$("#nav1").addClass("active");var listaSenales=$("#listaSenalesHidden").val();if(listaSenales){listaSenales=JSON.parse(listaSenales)}else{listaSenales=[]}jQuery.each(listaSenales,function(){var tipo=this.tipo;if(tipo==="1"){tipo="salida"}else{if(tipo==="2"){tipo="chofer"}else{throw new Error("El item debe tener uno de los id de tipo siguientes: 1 o 2.")}}var item=$(".icono."+tipo).clone();item.removeClass("ui-draggable icono");item.addClass("item");var nivel2=this.nivel2;if(eval(nivel2)){$(".nivel2").append(item)}else{$(".nivel1").append(item)}item.css("left",core.ajustarPosicion(this.coordenadaX));item.css("top",core.ajustarPosicion(this.coordenadaY));var id=this.id;this.jsId=core.uniqId();item.attr("jsId",this.jsId)});$("#listaSenalesHidden").val(JSON.stringify(listaSenales));$(".asiento .showInfo").bind("click",crearBoletoAutorizacionCortesia.info);$(".nivel1 .asiento img").bind("click",crearBoletoAutorizacionCortesia.clickAsiento);$(".nivel2 .asiento img").bind("click",crearBoletoAutorizacionCortesia.clickAsiento)},info:function(d){d.preventDefault();d.stopPropagation();var c=$(this);var a=c.parent().data("numero");if(a===null||$.trim(a)===""){throw new Error("No se pudo determinar el numero de asiento.")}var b=null;if(core.isMovil()){b=$("#salidaAux").val()}else{b=$("#crear_boleto_autorizacion_cortesia_command_salida").prop("value")}if(b===null||$.trim(b)===""){throw new Error("No se pudo determinar el id de la salida.")}core.request({url:$("#pathInfoAsientoSalida").attr("value"),method:"GET",extraParams:{idSalida:b,numeroAsiento:a},dataType:"json",async:true,successCallback:function(h){console.debug(h);if(h.items){var g="";var e=h.items;$.each(e,function(){g+="<label><b>ID: "+this.id+"</b></label>";g+="<label>Asiento: "+this.numeroAsiento+"</label>";g+="<label>Tipo: "+this.tipo+"</label>";g+="<label>Creado: "+this.fechaCreacion+"</label>";g+="<label>Estación Venta: "+this.estacionVenta+"</label>";g+="<label>Estación Origen: "+this.origen+"</label>";g+="<label>Estación Destino: "+this.destino+"</label>";g+="<label>Cliente: "+this.cliente+"</label>";if(this.cortesia===true){g+="<label>Usuario: "+this.autorizadoPor+"</label>";g+="<label>Motivo: "+this.motivoCortesia+"</label>";g+="<label><a class='btn cancelarCortesiaPopUp' data-value='"+this.id+"'>CANCELAR CORTESIA</a></label>"}});if(g===""){g+="<label>Asiento libre</label>"}g+="<BR><BR>";var f=core.showMessageDialog({title:"Consultar Boleto",showCloseHandle:true,text:g,uniqid:true,buttons:{Cancelar:function(){this.dialog2("close")}}});$(".btn.cancelarCortesiaPopUp").click(function(){var i=$(this).data("value");core.request({url:$("#pathCancelarBoleto").attr("value"),type:"POST",dataType:"html",async:false,extraParams:{id:i},successCallback:function(j){if(!core.procesarRespuestaServidor(j)){f.dialog2("close");crearBoletoAutorizacionCortesia.checkSelectedSalida()}}})})}}})},clickAsiento:function(f){f.preventDefault();f.stopPropagation();var a=$(this).parent();var b=a.data("numero");if(a.hasClass("reservado")){}else{if(a.hasClass("cortesia")){alert("El asiento con el número "+b+" es una cortesía.");return}else{if(a.hasClass("vendido")){alert("El asiento con el número "+b+" ya está vendido.");return}}}var d=$("#crear_boleto_autorizacion_cortesia_command_listaBoleto").val();if(d){d=JSON.parse(d)}else{d=[]}var c=crearBoletoAutorizacionCortesia.findAsiento(d,b);if(c===null){c={numero:a.data("numero"),id:a.data("id"),idCliente:"",idReservacion:a.data("idReservacion")!==undefined?a.data("idReservacion"):"",idClinteReservacion:""};d.push(c);a.addClass("selected")}else{d=core.removeItemArray(d,c);a.removeClass("selected")}$("#crear_boleto_autorizacion_cortesia_command_listaBoleto").val(JSON.stringify(d))},findAsiento:function(c,b){var a=null;b=$.trim(b);$.each(c,function(){if($.trim(this.numero)===b){a=this;return}});return a},clickAceptar:function(b){b.preventDefault();b.stopPropagation();var a=$("#autorizacionCortesiaForm");if(core.customValidateForm(a)===true&&crearBoletoAutorizacionCortesia.customValidate()===true){if(core.isMovil()){$("#crear_boleto_autorizacion_cortesia_command_salida").val($("#salidaAux").val());$("#crear_boleto_autorizacion_cortesia_command_estacionSubeEn").val($("#estacionSubeEnAux").val());$("#crear_boleto_autorizacion_cortesia_command_estacionBajaEn").val($("#estacionBajaEnAux").val())}$("#crear_boleto_autorizacion_cortesia_command_movil").prop("value",core.isMovil());$("#crear_boleto_autorizacion_cortesia_command_impresorasDisponibles").prop("value",frondend.listaImpresorasDisponibles);$(a).ajaxSubmit({target:a.attr("action"),type:"POST",dataType:"html",cache:false,async:false,beforeSubmit:function(){core.showLoading({showLoading:true})},error:function(){core.hideLoading({showLoading:true})},success:function(c){core.hideLoading({showLoading:true});if(!core.procesarRespuestaServidor(c)){var d=core.getValueFromResponse(c,"info");core.showNotification({text:d});alert("Operación realizada satisfactoriamente."+d,function(){if(core.isMovil()){core.getPageForMenu(a.attr("action"))}else{crearBoletoAutorizacionCortesia.imprimirVoucher(c,function(){core.getPageForMenu(a.attr("action"))})}})}}})}},customValidate:function(a){var b=$("#crear_boleto_autorizacion_cortesia_command_listaBoleto").val();if(b){b=JSON.parse(b)}else{b=[]}var c=b.length;if(c<=0){core.hiddenDialog2(a);alert("Debe definir al menos un boleto.",function(){core.showDialog2(a)});return false}return true},imprimirVoucher:function(c,a){var b=core.getValueFromResponse(c,"data");frondend.printVoucherBoleto($("#pathPrintVoucherBoleto").attr("value"),{ids:b},function(){if(a&&$.isFunction(a)){a(c)}})}};
crearPinAutorizacionCortesia={funcionesAddOnload:function(){this._init();this._conectEvents()},_init:function(){if(!core.isMovil()){$("#crear_autorizacion_cortesia_multiple_command_usuarioNotificacion").select2({allowClear:$("#crear_autorizacion_cortesia_multiple_command_usuarioNotificacion option[value='']").length===1});$("#crear_autorizacion_cortesia_multiple_command_usuarioNotificacion").select2("readonly",($("#crear_autorizacion_cortesia_multiple_command_usuarioNotificacion").attr("readonly")==="readonly"))}},_conectEvents:function(){$("#cancelar").click(function(a){a.preventDefault();a.stopPropagation();confirm("¿Está seguro que desea cancelar la operación?",function(b){if(b===true){core.getPageForMenu($("#cancelar").attr("href"))}})});$("#aceptar").click(crearPinAutorizacionCortesia.clickAceptar)},clickAceptar:function(b){b.preventDefault();b.stopPropagation();var a=$("#autorizacionCortesiaForm");if(core.customValidateForm(a)===true){$(a).ajaxSubmit({target:a.attr("action"),type:"POST",dataType:"html",cache:false,async:false,beforeSubmit:function(){core.showLoading({showLoading:true})},error:function(){core.hideLoading({showLoading:true})},success:function(c){core.hideLoading({showLoading:true});if(!core.procesarRespuestaServidor(c)){alert("Operación realizada satisfactoriamente.",function(){core.getPageForMenu($("#cancelar").attr("href"))})}}})}},};
frondendEncomiendas={funcionesAddOnload:function(){this._init();this._conectEvents()},_init:function(){$("#rangoFechaCreacion").daterangepicker({format:"DD/MM/YYYY",dateLimit:moment.duration(120,"d"),});$("#clienteRemitente").select2({minimumInputLength:1,allowClear:true,ajax:{url:$("#clienteRemitente").data("pathlistarclientespaginando"),dataType:"json",type:"POST",data:function(a,b){return{term:a,page_limit:5}},results:function(b,a){return{results:b.options}}}});$("#clienteDestinatario").select2({minimumInputLength:1,allowClear:true,ajax:{url:$("#clienteDestinatario").data("pathlistarclientespaginando"),dataType:"json",type:"POST",data:function(a,b){return{term:a,page_limit:5}},results:function(b,a){return{results:b.options}}}});$("#grid").flexigrid({url:$("#grid").data("url"),dataType:"json",singleSelect:true,query:"",rpOptions:[5,10,15,20,25,30,40,50],colModel:[{display:"ID",name:"id",width:60,sortable:true,align:"center"},{display:"Fecha Creación",name:"fechaCreacion",width:110,sortable:true,align:"center"},{display:"Empresa",name:"empresa",width:60,sortable:false,align:"center"},{display:"Tipo Encomienda",name:"tipoEncomienda",width:100,sortable:false,align:"left"},{display:"Cantidad",name:"cantidad",width:70,sortable:true,align:"center"},{display:"Estado",name:"estado",width:100,sortable:false,align:"left"},{display:"Bus",name:"bus",width:50,sortable:false,align:"center"},{display:"Documento",name:"tipoDocumento",width:120,sortable:false,align:"left"},{display:"Origen",name:"estacionOrigen",width:150,sortable:false,align:"left",hide:true},{display:"Destino",name:"estacionDestino",width:150,sortable:false,align:"left",hide:true},{display:"Estaciones",name:"estaciones",width:200,sortable:false,align:"left"},{display:"Cliente Remitente",name:"clienteRemitente",width:300,sortable:true,align:"left"},{display:"Cliente Destinatario",name:"clienteDestinatario",width:300,sortable:true,align:"left"},{display:"Códigos",name:"codigoExternoCliente",width:70,sortable:false,align:"left"},{display:"Boleto",name:"boleto",width:100,sortable:true,align:"center",hide:true},{display:"Descripción",name:"descripcion",width:300,sortable:false,align:"left",hide:true},{display:"Precio",name:"precioCalculadoMonedaBase",width:150,sortable:false,align:"left"}],usepager:true,useRp:true,rp:15,height:300,showTableToggleBtn:false})},_conectEvents:function(){$("#linkFilter").click(frondend.linkFilter);$("li a.menuEncomiendas").click(frondend.loadSubPage)}};
registrarEncomienda={funcionesAddOnload:function(){this._init();this._conectEvents();registrarEncomienda.checkTipoEncomiena();registrarEncomienda.cargarMonedas()},_init:function(){$("#registrar_encomienda_command_identificadorWeb").val(core.uniqIdCompuesto());var b=$("#registrar_encomienda_command_clienteRemitente").data("pathlistarclientespaginando");$("#registrar_encomienda_command_clienteRemitente").select2({minimumInputLength:1,allowClear:true,ajax:{url:b,dataType:"json",type:"POST",data:function(d,e){return{term:d,page_limit:5}},results:function(e,d){return{results:e.options}}}});var b=$("#registrar_encomienda_command_clienteDestinatario").data("pathlistarclientespaginando");$("#registrar_encomienda_command_clienteDestinatario").select2({minimumInputLength:1,allowClear:true,ajax:{url:b,dataType:"json",type:"POST",data:function(d,e){return{term:d,page_limit:5}},results:function(e,d){return{results:e.options}}}});var c=$("#registrar_encomienda_command_boleto").data("pathlistarboletospaginando");$("#registrar_encomienda_command_boleto").select2({minimumInputLength:1,allowClear:true,ajax:{url:c,dataType:"json",type:"POST",data:function(d,e){return{term:d,page_limit:5}},results:function(e,d){return{results:e.options}}},initSelection:function(d,f){var e=$(d).val();if(e!==""){$.ajax(c,{data:{id:e},type:"POST",dataType:"json"}).done(function(g){f(g)})}}});$("#registrar_encomienda_command_estacionOrigen").select2({allowClear:$("#registrar_encomienda_command_estacionOrigen option[value='']").length===1});$("#registrar_encomienda_command_estacionOrigen").select2("readonly",($("#registrar_encomienda_command_estacionOrigen").attr("readonly")==="readonly"));$("#registrar_encomienda_command_tipoEncomiendaVirtual").select2({allowClear:true});var a=$("#registrar_encomienda_command_tipoEncomiendaEspecialVirtual").data("pathlistartipoencomiendaespecialpaginando");$("#registrar_encomienda_command_tipoEncomiendaEspecialVirtual").select2({minimumInputLength:0,allowClear:true,ajax:{url:a,dataType:"json",type:"POST",data:function(d,e){return{term:d,page_limit:20}},results:function(e,d){return{results:e.options}}}});$("#registrar_encomienda_command_tipoPagoVirtual").select2({allowClear:true});$("#registrar_encomienda_command_monedaPagoVirtual").select2({allowClear:false,data:[]});$("#registrar_encomienda_command_rutaVirtual").select2({allowClear:true,data:[]});$("#registrar_encomienda_command_estacionFinalVirtual").select2({allowClear:true,data:[]});$("#registrar_encomienda_command_serieFacturaVirtual").select2({allowClear:false,data:[]})},_conectEvents:function(){$("#cancelar").click(function(a){a.preventDefault();a.stopPropagation();confirm("¿Está seguro que desea cancelar la operación?",function(b){if(b===true){core.getPageForMenu($("#cancelar").attr("href"))}})});$("#addClienteRemitente").click(function(a){frondend.loadSubPage(a,$(this),function(c){var b=$("#registrar_encomienda_command_clienteRemitente");if(c!==""){core.request({url:b.data("pathlistarclientespaginando"),type:"POST",dataType:"json",async:false,extraParams:{id:c},successCallback:function(d){if(d.options&&d.options[0]){$("#registrar_encomienda_command_clienteRemitente").select2("data",d.options[0])}}})}},{confirmarOperacion:false})});$("#updateClienteRemitente").click(function(a){frondend.loadSubPage(a,$(this),function(){var b=$("#registrar_encomienda_command_clienteRemitente");var c=b.val();if(c!==""){core.request({url:b.data("pathlistarclientespaginando"),type:"POST",dataType:"json",async:false,extraParams:{id:c},successCallback:function(d){if(d.options&&d.options[0]){$("#registrar_encomienda_command_clienteRemitente").select2("data",d.options[0])}}})}})});$("#seachClienteRemitente").click(function(a){frondend.loadSubPage(a,$(this),function(c){if(c!==""){var b=$("#registrar_encomienda_command_clienteRemitente");core.request({url:b.data("pathlistarclientespaginando"),type:"POST",dataType:"json",async:false,extraParams:{id:c},successCallback:function(d){if(d.options&&d.options[0]){$("#registrar_encomienda_command_clienteRemitente").select2("data",d.options[0])}}})}})});$("#addClienteDestinatario").click(function(a){frondend.loadSubPage(a,$(this),function(c){var b=$("#registrar_encomienda_command_clienteDestinatario");if(c!==""){core.request({url:b.data("pathlistarclientespaginando"),type:"POST",dataType:"json",async:false,extraParams:{id:c},successCallback:function(d){if(d.options&&d.options[0]){$("#registrar_encomienda_command_clienteDestinatario").select2("data",d.options[0])}}})}},{confirmarOperacion:false})});$("#updateClienteDestinatario").click(function(a){frondend.loadSubPage(a,$(this),function(){var b=$("#registrar_encomienda_command_clienteDestinatario");var c=b.val();if(c!==""){core.request({url:b.data("pathlistarclientespaginando"),type:"POST",dataType:"json",async:false,extraParams:{id:c},successCallback:function(d){if(d.options&&d.options[0]){$("#registrar_encomienda_command_clienteDestinatario").select2("data",d.options[0])}}})}})});$("#seachClienteDestinatario").click(function(a){frondend.loadSubPage(a,$(this),function(c){if(c!==""){var b=$("#registrar_encomienda_command_clienteDestinatario");core.request({url:b.data("pathlistarclientespaginando"),type:"POST",dataType:"json",async:false,extraParams:{id:c},successCallback:function(d){if(d.options&&d.options[0]){$("#registrar_encomienda_command_clienteDestinatario").select2("data",d.options[0])}}})}})});$("#adicionarEncomienda").click(registrarEncomienda.clickAdicionarEncomienda);$("#adicionarRuta").click(registrarEncomienda.clickAdicionarRuta);$("#facturar").click(registrarEncomienda.clickFacturar);$("#porCobrar").click(registrarEncomienda.clickPorCobrar);$("#autorizacionCortesia").click(registrarEncomienda.clickAutorizacionCortesia);$("#autorizacionInterna").click(registrarEncomienda.clickAutorizacionInterna);$("#registrar_encomienda_command_tipoEncomiendaVirtual").on("change",registrarEncomienda.checkTipoEncomiena);$("#registrar_encomienda_command_rutaVirtual").on("change",registrarEncomienda.changeRuta);$("#registrar_encomienda_command_tipoPagoVirtual").on("change",registrarEncomienda.changeTipoPago);$("#registrar_encomienda_command_monedaPagoVirtual").on("change",registrarEncomienda.changeMonedaPago);$("#registrar_encomienda_command_efectivoVirtual").on("change",registrarEncomienda.changeEfectivo);$("#registrar_encomienda_command_boleto").on("change",registrarEncomienda.changeBoleto);$("#registrar_encomienda_command_serieFacturaVirtual").on("change",function(){console.debug("serieFacturaVirtual-init");var b=$("#registrar_encomienda_command_serieFacturaVirtual").select2("val");var a=$("#registrar_encomienda_command_serieFacturaVirtual").select2("data").idEmpresa;sessionStorage.setItem("sist_last_id_serie_factura_enco_"+a,b)})},cargarMonedas:function(){var a=$("#registrar_encomienda_command_monedaPagoVirtual").select2("val");if($.trim(a)===""){core.request({url:$("#pathMonedasCajasAbiertas").val(),type:"GET",dataType:"json",async:true,showLoading:false,successCallback:function(c){if(c.optionMonedas){var b=c.optionMonedas;$("#registrar_encomienda_command_monedaPagoVirtual").select2({allowClear:false,data:{results:b}});if(b[0]){$("#registrar_encomienda_command_monedaPagoVirtual").select2("val",b[0].id)}}}})}},clearPopUpRuta:function(){$("#registrar_encomienda_command_rutaVirtual").select2("val","");$("#registrar_encomienda_command_estacionFinalVirtual").select2("val","");$("#estacionFinalDIV").hide()},clickAdicionarRuta:function(c){c.preventDefault();c.stopPropagation();var b=4;var a=$("#registrar_encomienda_command_listaEncomiendaRutas").val();if(a){a=JSON.parse(a)}else{a=[]}if(a.length>=b){alert("No se puede registrar más de "+b+" rutas.");return}registrarEncomienda.clearPopUpRuta();registrarEncomienda.loadRutas(function(){core.showMessageDialog({title:"Adicionar Ruta",selector:$("#adicionarRutaDIV"),removeOnClose:false,uniqid:false,buttons:{Aceptar:{click:function(){var d=this;var i=$("#adicionarEncomiendaDIV").find("form");if(i.length===0){i=$("<form id='adicionarRutaPopUpForm'></form>");i.append($("#adicionarRutaDIV").children());$("#adicionarRutaDIV").append(i)}if(core.customValidateForm(i)===true&&registrarEncomienda.validatePopUpRuta(d)===true){var e=$("#registrar_encomienda_command_listaEncomiendaRutas").val();if(e){e=JSON.parse(e)}else{e=[]}var f=$("#registrar_encomienda_command_rutaVirtual").select2("data");var g=$("#registrar_encomienda_command_estacionFinalVirtual").select2("data");var h={id:core.uniqId("ruta_"),posicion:e.length+1,rutaVirtual:f.id,rutaNameVirtual:f.text,idEmpresa:f.idEmpresa,estacionFinalVirtual:g.id,estacionFinalNameVirtual:g.text};e.push(h);registrarEncomienda.renderItemGridAddRuta(h);$("#registrar_encomienda_command_estacionDestino").val(g.id);$("#registrar_encomienda_command_listaEncomiendaRutas").val(JSON.stringify(e));this.dialog2("close")}},primary:true,type:"info"},Cancelar:function(){this.dialog2("close")}}})})},renderItemGridAddRuta:function(c){$("#rutaBody").find("#rutaVacioTR").hide();var a=$('<a class="btn btn-small" href="#"><i class="icon-minus"></i></a>');var b=$("<tr id='"+c.id+"'><td>"+c.posicion+"</td><td>"+c.rutaNameVirtual+"</td><td>"+c.estacionFinalNameVirtual+"</td><td class='action'></td></tr>");b.find(".action").append(a);$("#rutaBody").append(b);$(a).click(registrarEncomienda.clickEliminarRuta)},clickEliminarRuta:function(d){d.preventDefault();d.stopPropagation();var c=$(this).parent().parent();var f=c.attr("id");if(f!==null&&$.trim(f)!==""){var a=$("#registrar_encomienda_command_listaEncomiendaRutas").val();if(a){a=JSON.parse(a)}else{a=[]}$("#registrar_encomienda_command_estacionDestino").val("");var b=[];$.each(a,function(){if($.trim(this.id)===f){return false}else{b.push(this);$("#registrar_encomienda_command_estacionDestino").val(this.estacionFinalVirtual)}});a=b;$("#rutaBody").find("tr").not("#rutaVacioTR").remove();$("#rutaBody").find("#rutaVacioTR").show();$.each(a,function(){registrarEncomienda.renderItemGridAddRuta(this)});$("#registrar_encomienda_command_listaEncomiendaRutas").val(JSON.stringify(a))}},validatePopUpRuta:function(b){var a=$("#registrar_encomienda_command_rutaVirtual").val();if(a===null||$.trim(a)===""){core.hiddenDialog2(b);alert("Debe seleccionar una ruta.",function(){core.showDialog2(b)});return false}var c=$("#registrar_encomienda_command_estacionFinalVirtual").val();if(c===null||$.trim(c)===""){core.hiddenDialog2(b);alert("Debe seleccionar una estación.",function(){core.showDialog2(b)});return false}return true},loadRutas:function(a){var c=$("#registrar_encomienda_command_estacionOrigen").val();var b=$("#registrar_encomienda_command_listaEncomiendaRutas").val();if(b){b=JSON.parse(b)}else{b=[]}if(b.length!==0){c=b[b.length-1].estacionFinalVirtual}core.request({url:$("#pathGetRutasPorEstacion").prop("value"),type:"POST",dataType:"json",async:false,extraParams:{idEstacionOrigen:c,rutaInicial:b.length===0},successCallback:function(e){var d=e.optionRutas;$("#registrar_encomienda_command_rutaVirtual").select2({allowClear:true,data:{results:d}});registrarEncomienda.changeRuta();if(a&&$.isFunction(a)){a()}}})},changeRuta:function(){var a=$("#registrar_encomienda_command_rutaVirtual").val();if(a===null||$.trim(a)===""){$("#estacionFinalDIV").hide()}else{core.request({url:$("#pathGetEstacionesDestinosPorRuta").prop("value"),type:"POST",dataType:"json",async:false,extraParams:{codigoRuta:a},successCallback:function(c){$("#estacionFinalDIV").show();var b=c.optionEstacionesDestino;$("#registrar_encomienda_command_estacionFinalVirtual").select2({allowClear:true,data:{results:b}});$("#registrar_encomienda_command_estacionFinalVirtual").select2("val",b[0].id)}})}},checkTipoEncomiena:function(){var a=$("#registrar_encomienda_command_tipoEncomiendaVirtual").val();if(a===null||$.trim(a)===""){$("#tipoEncomiendaEspecialVirtualDIV").hide();$("#valorDeclaradoVirtualDIV").hide();$("#registrar_encomienda_command_tipoEncomiendaEspecialVirtual").select2("val","");$("#paqueteVirtualDIV").hide();$("#registrar_encomienda_command_valorDeclaradoVirtual").val("");$("#registrar_encomienda_command_pesoVirtual").val("");$("#registrar_encomienda_command_volumenAltoVirtual").val("");$("#registrar_encomienda_command_volumenAnchoVirtual").val("");$("#registrar_encomienda_command_volumenProfundidadVirtual").val("")}else{if($.trim(a)==="1"){$("#tipoEncomiendaEspecialVirtualDIV").hide();$("#valorDeclaradoVirtualDIV").hide();$("#registrar_encomienda_command_tipoEncomiendaEspecialVirtual").select2("val","");$("#paqueteVirtualDIV").hide();$("#registrar_encomienda_command_valorDeclaradoVirtual").val("");$("#registrar_encomienda_command_pesoVirtual").val("");$("#registrar_encomienda_command_volumenAltoVirtual").val("");$("#registrar_encomienda_command_volumenAnchoVirtual").val("");$("#registrar_encomienda_command_volumenProfundidadVirtual").val("")}else{if($.trim(a)==="2"){$("#tipoEncomiendaEspecialVirtualDIV").show();$("#valorDeclaradoVirtualDIV").show();$("#paqueteVirtualDIV").hide();$("#registrar_encomienda_command_valorDeclaradoVirtual").val("");$("#registrar_encomienda_command_pesoVirtual").val("");$("#registrar_encomienda_command_volumenAltoVirtual").val("");$("#registrar_encomienda_command_volumenAnchoVirtual").val("");$("#registrar_encomienda_command_volumenProfundidadVirtual").val("")}else{if($.trim(a)==="3"){$("#tipoEncomiendaEspecialVirtualDIV").hide();$("#valorDeclaradoVirtualDIV").show();$("#registrar_encomienda_command_valorDeclaradoVirtual").val("");$("#registrar_encomienda_command_pesoVirtual").val("1");$("#registrar_encomienda_command_volumenAltoVirtual").val("1");$("#registrar_encomienda_command_volumenAnchoVirtual").val("1");$("#registrar_encomienda_command_volumenProfundidadVirtual").val("1");$("#paqueteVirtualDIV").show()}}}}},clearPopUpEncomiena:function(){$("#registrar_encomienda_command_cantidadVirtual").val("1");$("#registrar_encomienda_command_pesoVirtual").val("");$("#registrar_encomienda_command_volumenAltoVirtual").val("");$("#registrar_encomienda_command_volumenAnchoVirtual").val("");$("#registrar_encomienda_command_volumenProfundidadVirtual").val("");$("#registrar_encomienda_command_descripcionVirtual").val("");$("#registrar_encomienda_command_tipoEncomiendaVirtual").select2("val","");$("#registrar_encomienda_command_tipoEncomiendaEspecialVirtual").select2("val","");if(eval($("#aplicarTarifaVolumen").val())===1||eval($("#aplicarTarifaVolumen").val())===true){$(".bloqueVolumen").show()}else{$(".bloqueVolumen").hide()}},clickAdicionarEncomienda:function(a){a.preventDefault();a.stopPropagation();registrarEncomienda.clearPopUpEncomiena();$("#registrar_encomienda_command_tipoEncomiendaVirtual").select2("val","3");registrarEncomienda.checkTipoEncomiena();core.showMessageDialog({title:"Adicionar Encomienda",selector:$("#adicionarEncomiendaDIV"),removeOnClose:false,uniqid:false,buttons:{Aceptar:{click:function(){var d=this;var b=$("#adicionarEncomiendaDIV").find("form");if(b.length===0){b=$("<form id='adicionarEncomiendaPopUpForm'></form>");b.append($("#adicionarEncomiendaDIV").children());$("#adicionarEncomiendaDIV").append(b)}if(core.customValidateForm(b)===true&&registrarEncomienda.validatePopUpEncomienda(d)===true){var j=$("#registrar_encomienda_command_listaEncomiendas").val();if(j){j=JSON.parse(j)}else{j=[]}var h=0;var l=0;var c=$("#registrar_encomienda_command_volumenAltoVirtual").val();var e=$("#registrar_encomienda_command_volumenAnchoVirtual").val();var k=$("#registrar_encomienda_command_volumenProfundidadVirtual").val();var f=$.trim($("#registrar_encomienda_command_tipoEncomiendaVirtual").val());if(f==="3"){l=parseFloat(c)*parseFloat(e)*parseFloat(k);l=l.toFixed(0);h=parseFloat($("#registrar_encomienda_command_pesoVirtual").val())}var g="";if($("#registrar_encomienda_command_tipoEncomiendaEspecialVirtual").select2("data")!==null){g=$("#registrar_encomienda_command_tipoEncomiendaEspecialVirtual").select2("data").text}var i={id:core.uniqId("encomienda_"),cantidad:$("#registrar_encomienda_command_cantidadVirtual").val(),tipoEncomienda:$("#registrar_encomienda_command_tipoEncomiendaVirtual").val(),valorDeclarado:$("#registrar_encomienda_command_valorDeclaradoVirtual").val(),tipoEncomiendaEspecial:$("#registrar_encomienda_command_tipoEncomiendaEspecialVirtual").val(),nombreTipoEncomiendaEspecial:g,volumenAlto:c,volumenAncho:e,volumenProfundidad:k,volumen:l,peso:h,descripcion:$("#registrar_encomienda_command_descripcionVirtual").val()};j.push(i);registrarEncomienda.renderItemGridAddEncomienda(i);$("#registrar_encomienda_command_listaEncomiendas").val(JSON.stringify(j));this.dialog2("close")}},primary:true,type:"info"},Cancelar:function(){this.dialog2("close")}}})},renderItemGridAddEncomienda:function(item){$("#clienteEncomiendaBody").find("#clienteEncomiendaVacioTR").hide();var cantidad=item.cantidad;var tipoEncomienda="";var clase="";if(item.tipoEncomienda==="1"){tipoEncomienda="Efectivo";clase="trEncomiendaEfectivo";cantidad="GTQ "+cantidad}else{if(item.tipoEncomienda==="2"){clase="trEncomiendaEspecial";tipoEncomienda="Especial"}else{if(item.tipoEncomienda==="3"){clase="trEncomiendaPaquete";tipoEncomienda="Paquete"}}}var descripcion=item.descripcion;if(item.tipoEncomiendaEspecial!==""){descripcion="Producto: "+item.nombreTipoEncomiendaEspecial+". "+descripcion}if(item.volumen!==""&&eval(item.volumen)!==0){descripcion="Dimesiones: "+item.volumenAlto+"x"+item.volumenAncho+"x"+item.volumenProfundidad+". "+descripcion}if(item.peso!==""&&eval(item.volumen)!==0){descripcion="Peso: "+item.peso+". "+descripcion}var valorDeclarado=item.valorDeclarado;if(valorDeclarado===null||$.trim(valorDeclarado)===""){valorDeclarado=" - "}else{valorDeclarado="GTQ "+valorDeclarado}var eliminarEncomienda=$('<a class="btn btn-small" href="#"><i class="icon-minus"></i></a>');var itemTR=$("<tr class='"+clase+"' id='"+item.id+"'><td>"+cantidad+"</td><td>"+valorDeclarado+"</td><td>"+tipoEncomienda+"</td><td>"+descripcion+"</td><td class='action'></td></tr>");itemTR.find(".action").append(eliminarEncomienda);$("#clienteEncomiendaBody").append(itemTR);$(eliminarEncomienda).click(registrarEncomienda.clickEliminarEncomienda)},clickEliminarEncomienda:function(d){d.preventDefault();d.stopPropagation();var c=$(this).parent().parent();var f=c.attr("id");if(f!==null&&$.trim(f)!==""){var a=$("#registrar_encomienda_command_listaEncomiendas").val();if(a){a=JSON.parse(a)}else{a=[]}var b=registrarEncomienda.findEncomienda(a,f);a=core.removeItemArray(a,b);if(a.length===0){$("#clienteEncomiendaBody").find("tr").not("#clienteEncomiendaVacioTR").remove();$("#clienteEncomiendaBody").find("#clienteEncomiendaVacioTR").show()}else{$("#clienteEncomiendaBody").find("#clienteEncomiendaVacioTR").hide();$("#clienteEncomiendaBody").find("#"+f).remove()}$("#registrar_encomienda_command_listaEncomiendas").val(JSON.stringify(a))}},findEncomienda:function(b,c){var a=null;c=$.trim(c);$.each(b,function(){if($.trim(this.id)===c){a=this;return}});return a},validatePopUpEncomienda:function(d){var c=$("#registrar_encomienda_command_cantidadVirtual").val();if(c===null||$.trim(c)===""){core.hiddenDialog2(d);alert("Debe especificar una cantidad del producto.",function(){core.showDialog2(d)});return false}c=parseInt(c);if(c<=0){core.hiddenDialog2(d);alert("La cantidad debe ser un número positivo.",function(){core.showDialog2(d)});return false}var f=$("#registrar_encomienda_command_tipoEncomiendaVirtual").val();if(f===null||$.trim(f)===""){core.hiddenDialog2(d);alert("Debe seleccionar una tipo de encomienda.",function(){core.showDialog2(d)});return false}else{if($.trim(f)==="2"){var h=$("#registrar_encomienda_command_tipoEncomiendaEspecialVirtual").val();if(h===null||$.trim(h)===""){core.hiddenDialog2(d);alert("Debe seleccionar un nombre de encomienda.",function(){core.showDialog2(d)});return false}}else{if($.trim(f)==="3"){var a=$("#registrar_encomienda_command_volumenAltoVirtual").val();if(a===null||$.trim(a)===""){core.hiddenDialog2(d);alert("Debe especificar el alto de la encomienda.",function(){core.showDialog2(d)});return false}var g=$("#registrar_encomienda_command_volumenAnchoVirtual").val();if(g===null||$.trim(g)===""){core.hiddenDialog2(d);alert("Debe especificar el ancho de la encomienda.",function(){core.showDialog2(d)});return false}var b=$("#registrar_encomienda_command_volumenProfundidadVirtual").val();if(b===null||$.trim(b)===""){core.hiddenDialog2(d);alert("Debe especificar la profundidad de la encomienda.",function(){core.showDialog2(d)});return false}var e=$("#registrar_encomienda_command_pesoVirtual").val();if(e===null||$.trim(e)===""){core.hiddenDialog2(d);alert("Debe especificar el peso de la encomienda.",function(){core.showDialog2(d)});return false}}}}return true},imprimirEncomiendaDatos:function(responseText,successCallback){var info=core.getValueFromResponse(responseText,"info");core.showNotification({text:info});var autoPrint=core.getValueFromResponse(responseText,"autoPrint");if(eval(autoPrint)===true){var data=core.getValueFromResponse(responseText,"data");frondend.printDataEncomienda($("#pathPrintEncomiendaDatos").attr("value"),{ids:data},function(){alert("Operación realizada satisfactoriamente. "+info,function(){if(successCallback&&$.isFunction(successCallback)){successCallback(responseText)}})})}else{alert("Operación realizada satisfactoriamente. "+info,function(){var data=core.getValueFromResponse(responseText,"data");frondend.printDataEncomienda($("#pathPrintEncomiendaDatos").attr("value"),{ids:data},successCallback)})}},imprimirEncomiendaFactura:function(responseText,successCallback){var info=core.getValueFromResponse(responseText,"info");core.showNotification({text:info});var autoPrint=core.getValueFromResponse(responseText,"autoPrint");if(eval(autoPrint)===true){frondend.printFacturaInternal(responseText,function(){var data=core.getValueFromResponse(responseText,"data");frondend.printDataEncomienda($("#pathPrintEncomiendaDatos").attr("value"),{ids:data},function(){alert("Operación realizada satisfactoriamente. "+info,function(){if(successCallback&&$.isFunction(successCallback)){successCallback(responseText)}})})})}else{alert("Operación realizada satisfactoriamente. "+info,function(){frondend.printFacturaInternal(responseText,function(){var data=core.getValueFromResponse(responseText,"data");frondend.printDataEncomienda($("#pathPrintEncomiendaDatos").attr("value"),{ids:data},successCallback)})})}},customCommunValidate:function(a){var b=$("#rutaBody").find("tr").not("#rutaVacioTR").length;if(b<=0){core.hiddenDialog2(a);alert("Tiene que definir al menos una ruta.",function(){core.showDialog2(a)});return false}var c=$("#clienteEncomiendaBody").find("tr").not("#clienteEncomiendaVacioTR").length;if(c<=0){core.hiddenDialog2(a);alert("Debe definir al menos una encomienda.",function(){core.showDialog2(a)});return false}return true},clickAutorizacionInterna:function(b){b.preventDefault();b.stopPropagation();var a=$("#encomiendaForm");if(core.customValidateForm(a)===true&&registrarEncomienda.customPreValidateInterna()===true){core.showMessageDialog({title:"Autorización Interna",selector:$("#internaDIV"),removeOnClose:false,uniqid:false,buttons:{Aceptar:{click:function(){var c=this;if(core.customValidateForm(a)===true&&registrarEncomienda.customPostValidateInterna(this)===true){$("#registrar_encomienda_command_impresorasDisponibles").prop("value",frondend.listaImpresorasDisponibles);$("#registrar_encomienda_command_autorizacionInterna").prop("value",$("#pinAutorizacionInterna").prop("value"));$("#registrar_encomienda_command_tipoDocuemento").prop("value","4");$(a).ajaxSubmit({target:a.attr("action"),type:"POST",dataType:"html",cache:false,async:false,beforeSubmit:function(){core.showLoading({showLoading:true})},error:function(){core.hideLoading({showLoading:true})},success:function(d){core.hideLoading({showLoading:true});if(!core.procesarRespuestaServidor(d)){c.dialog2("close");registrarEncomienda.imprimirEncomiendaDatos(d,function(){core.getPageForMenu(a.attr("action"))})}}})}},primary:true,type:"info"},Cancelar:function(){this.dialog2("close")}}});registrarEncomienda.showTotalEncomiendaEfectivo()}},customPreValidateInterna:function(a){if(registrarEncomienda.customCommunValidate(a)===false){return false}var b=$("#clienteEncomiendaBody").find("tr").not("#clienteEncomiendaVacioTR").length;if(b>1){core.hiddenDialog2(a);alert("Para las autorizaciones internas no puede definir más de una encomienda.",function(){core.showDialog2(a)});return false}return true},customPostValidateInterna:function(a){var b=$("#pinAutorizacionInterna").prop("value");if(b===undefined||b===null||$.trim(b)===""){core.hiddenDialog2(a);alert("Debe especificar un PIN de autorización.",function(){core.showDialog2(a)});return false}return true},clickAutorizacionCortesia:function(b){b.preventDefault();b.stopPropagation();var a=$("#encomiendaForm");if(core.customValidateForm(a)===true&&registrarEncomienda.customPreValidateCortesia()===true){core.showMessageDialog({title:"Cortesía",selector:$("#cortesiaDIV"),removeOnClose:false,uniqid:false,buttons:{Aceptar:{click:function(){var c=this;if(core.customValidateForm(a)===true&&registrarEncomienda.customPostValidateCortesia(this)===true){$("#registrar_encomienda_command_impresorasDisponibles").prop("value",frondend.listaImpresorasDisponibles);$("#registrar_encomienda_command_autorizacionCortesia").prop("value",$("#pinAutorizacionCortesia").prop("value"));$("#registrar_encomienda_command_tipoDocuemento").prop("value","3");$(a).ajaxSubmit({target:a.attr("action"),type:"POST",dataType:"html",cache:false,async:false,beforeSubmit:function(){core.showLoading({showLoading:true})},error:function(){core.hideLoading({showLoading:true})},success:function(d){core.hideLoading({showLoading:true});if(!core.procesarRespuestaServidor(d)){c.dialog2("close");registrarEncomienda.imprimirEncomiendaDatos(d,function(){core.getPageForMenu(a.attr("action"))})}}})}},primary:true,type:"info"},Cancelar:function(){this.dialog2("close")}}});registrarEncomienda.showTotalEncomiendaEfectivo()}},customPreValidateCortesia:function(a){if(registrarEncomienda.customCommunValidate(a)===false){return false}var b=$("#clienteEncomiendaBody").find("tr").not("#clienteEncomiendaVacioTR").length;if(b>1){core.hiddenDialog2(a);alert("Para las cortesías no puede definir más de una encomienda.",function(){core.showDialog2(a)});return false}return true},customPostValidateCortesia:function(a){var b=$("#pinAutorizacionCortesia").prop("value");if(b===undefined||b===null||$.trim(b)===""){core.hiddenDialog2(a);alert("Debe especificar un PIN de autorización.",function(){core.showDialog2(a)});return false}return true},clickPorCobrar:function(b){b.preventDefault();b.stopPropagation();var a=$("#encomiendaForm");if(core.customValidateForm(a)===true&&registrarEncomienda.customPreValidatePorCobrar()===true){registrarEncomienda.calcularImporteTotalPorCobrarMonedaBase(function(e){var d=e.total;var c=e.descuento;confirm("El importe total por cobrar es de GTQ "+d+". Se aplicó un descuento de GTQ "+c+". Desea continuar?",function(f){if(f===true){$("#registrar_encomienda_command_impresorasDisponibles").prop("value",frondend.listaImpresorasDisponibles);$("#registrar_encomienda_command_tipoDocuemento").prop("value","2");$(a).ajaxSubmit({target:a.attr("action"),type:"POST",dataType:"html",cache:false,async:false,beforeSubmit:function(){core.showLoading({showLoading:true})},error:function(){core.hideLoading({showLoading:true})},success:function(g){core.hideLoading({showLoading:true});if(!core.procesarRespuestaServidor(g)){registrarEncomienda.imprimirEncomiendaDatos(g,function(){core.getPageForMenu(a.attr("action"))})}}})}})})}},calcularImporteTotalPorCobrarMonedaBase:function(c){var b=$("#registrar_encomienda_command_estacionOrigen").val();var a=$("#registrar_encomienda_command_estacionDestino").val();var e=$("#registrar_encomienda_command_tipoPagoVirtual").val();var d=$("#registrar_encomienda_command_listaEncomiendas").val();var f=$("#registrar_encomienda_command_clienteRemitente").val();$("#registrar_encomienda_command_totalNetoVirtual").val("");if(f!==null&&$.trim(f)!==""&&b!==null&&$.trim(b)!==""&&a!==null&&$.trim(a)!==""&&d!==null&&$.trim(d)!==""){core.request({url:$("#pathCalcularImporteTotalMonedaBase").attr("value"),method:"POST",extraParams:{listaEncomiendas:d,idClienteRemitente:f,idEstacionOrigen:b,idEstacionDestino:a},dataType:"json",async:true,successCallback:function(h){if(h.error&&$.trim(h.error)!==""){var g=$('.modal[style^="display: block;"]');g.hide();alert(h.error,function(){g.show()})}else{if(c&&$.isFunction(c)){c(h)}}}})}},customPreValidatePorCobrar:function(a){if(registrarEncomienda.customCommunValidate(a)===false){return false}return true},clickFacturar:function(b){b.preventDefault();b.stopPropagation();var a=$("#encomiendaForm");if(core.customValidateForm(a)===true&&registrarEncomienda.customPreValidateFactura()===true){registrarEncomienda.loadSeriesFacturaActiva(function(){core.showMessageDialog({title:"Facturar",selector:$("#facturaDIV"),removeOnClose:false,uniqid:false,buttons:{Aceptar:{click:function(){var c=this;if(core.customValidateForm(a)===true&&registrarEncomienda.customPostValidateFactura(this)===true){$("#registrar_encomienda_command_impresorasDisponibles").prop("value",frondend.listaImpresorasDisponibles);$("#registrar_encomienda_command_referenciaExterna").prop("value",$("#registrar_encomienda_command_referenciaExternaVirtual").prop("value"));$("#registrar_encomienda_command_tipoPago").prop("value",$("#registrar_encomienda_command_tipoPagoVirtual").prop("value"));$("#registrar_encomienda_command_totalNeto").prop("value",$("#registrar_encomienda_command_totalNetoVirtual").prop("value"));$("#registrar_encomienda_command_monedaPago").prop("value",$("#registrar_encomienda_command_monedaPagoVirtual").prop("value"));$("#registrar_encomienda_command_tasa").prop("value",$("#registrar_encomienda_command_tasaVirtual").prop("value"));$("#registrar_encomienda_command_totalPago").prop("value",$("#registrar_encomienda_command_totalPagoVirtual").prop("value"));$("#registrar_encomienda_command_efectivo").prop("value",$("#registrar_encomienda_command_efectivoVirtual").prop("value"));$("#registrar_encomienda_command_vuelto").prop("value",$("#registrar_encomienda_command_vueltoVirtual").prop("value"));$("#registrar_encomienda_command_serieFactura").prop("value",$("#registrar_encomienda_command_serieFacturaVirtual").prop("value"));$("#registrar_encomienda_command_tipoDocuemento").prop("value","1");$(a).ajaxSubmit({target:a.attr("action"),type:"POST",dataType:"html",cache:false,async:false,beforeSubmit:function(){core.showLoading({showLoading:true})},error:function(){core.hideLoading({showLoading:true})},success:function(d){core.hideLoading({showLoading:true});if(!core.procesarRespuestaServidor(d)){c.dialog2("close");registrarEncomienda.imprimirEncomiendaFactura(d,function(){core.getPageForMenu(a.attr("action"))})}}})}},primary:true,type:"info"},Cancelar:function(){this.dialog2("close")}}});registrarEncomienda.showTotalEncomiendaEfectivo();registrarEncomienda.checkBloque2();registrarEncomienda.changeTipoPago()})}},loadSeriesFacturaActiva:function(a){var d=$("#registrar_encomienda_command_estacionOrigen").select2("val");var c=null;var b=$("#registrar_encomienda_command_listaEncomiendaRutas").val();if(b){b=JSON.parse(b)}else{b=[]}if(b.length>0){c=b[0].idEmpresa}$("#registrar_encomienda_command_serieFacturaVirtual").select2({data:[]});if(d!==null&&$.trim(d)!==""&&c!==null&&$.trim(c)!==""){core.request({url:$("#pathSeriesActivaPorEstacion").attr("value"),method:"POST",extraParams:{idEstacion:d,idEmpresa:c,tipoServicio:"2"},dataType:"json",async:true,successCallback:function(h){var f=h.optionSeriesFacturas;if(f){$("#registrar_encomienda_command_serieFacturaVirtual").select2({allowClear:false,data:{results:f}});var e=f.length;$("#registrar_encomienda_command_serieFacturaVirtual").data("sizeItems",e);if(e>0){if(f[0]){$("#registrar_encomienda_command_serieFacturaVirtual").select2("val",f[0].id);if(a&&$.isFunction(a)){a()}}}else{var g=$('.modal[style^="display: block;"]');g.hide();alert("La estación no tiene series de facturas activas.",function(){g.show()})}}}})}else{alert("No se ha podido determinar la empresa que factura en su estación.")}},customPreValidateFactura:function(d){if(registrarEncomienda.customCommunValidate(d)===false){return false}var c=4;var a=$("#registrar_encomienda_command_listaEncomiendas").val();if(a){a=JSON.parse(a)}else{a=[]}if(a.length>c){alert("No se puede registrar más de "+c+" encomiendas a la vez cuando se factura.");return}var b=$("#registrar_encomienda_command_monedaPagoVirtual").select2("val");if($.trim(b)===""){core.hiddenDialog2(d);alert("Debe abrir una caja para facturar.",function(){core.showDialog2(d)});return false}return true},customPostValidateFactura:function(c){if(frondend.listaImpresorasDisponibles===null||$.trim(frondend.listaImpresorasDisponibles)===""){core.hiddenDialog2(c);alert("El sistema aún no ha podido detectar las impresoras para la facturación.",function(){core.showDialog2(c)});return false}var a=$("#registrar_encomienda_command_tipoPagoVirtual").prop("value");if(a===undefined||a===null||$.trim(a)===""){core.hiddenDialog2(c);alert("Debe especificar un tipo de pago.",function(){core.showDialog2(c)});return false}else{if(a==="1"){var d=$("#registrar_encomienda_command_monedaPagoVirtual").prop("value");if(d===undefined||d===null||$.trim(d)===""){core.hiddenDialog2(c);alert("Debe especificar una moneda de pago.",function(){core.showDialog2(c)});return false}var b=$("#registrar_encomienda_command_efectivoVirtual").prop("value");if(b===undefined||b===null||$.trim(b)===""){core.hiddenDialog2(c);alert("Debe especificar un efectivo.",function(){core.showDialog2(c)});return false}}}var e=$("#registrar_encomienda_command_totalNetoVirtual").prop("value");if(e===undefined||e===null||$.trim(e)===""){core.hiddenDialog2(c);alert("No se ha podido determinar el total neto.",function(){core.showDialog2(c)});return false}return true},showTotalEncomiendaEfectivo:function(){var a=$("#registrar_encomienda_command_listaEncomiendas").val();if(a){a=JSON.parse(a)}else{a=[]}var b=0;$.each(a,function(){if(this.tipoEncomienda==="1"){b+=parseFloat(this.cantidad)}});if(b!==0){$(".totalEncomiendasEfectivo").text("La suma total de las encomiendas de efectivo es GTQ "+b+". Este valor no está sumado al total neto.")}else{$(".totalEncomiendasEfectivo").text("")}},checkBloque2:function(a){if(!a){a=$("#registrar_encomienda_command_tipoPagoVirtual").val()}if(a===""){$("#registrar_encomienda_command_totalNetoVirtual").val("");$(".bloque2").hide();registrarEncomienda.checkBloque3(a)}else{if(a==="1"){$(".bloque2").show();registrarEncomienda.checkBloque3(a)}else{if(a==="2"){$(".bloque2").hide();registrarEncomienda.checkBloque3(a)}else{if(a==="3"){$(".bloque2").hide();registrarEncomienda.checkBloque3(a)}}}}},checkBloque3:function(a){if(!a){a=$("#registrar_encomienda_command_tipoPagoVirtual").val()}var b=$("#registrar_encomienda_command_monedaPagoVirtual").val();if(a==="1"&&b!==""&&b!=="1"){$(".bloque3").show()}else{$(".bloque3").hide()}registrarEncomienda.checkBloque4(a)},checkBloque4:function(a){if(!a){a=$("#registrar_encomienda_command_tipoPagoVirtual").val()}if(a==="1"){$(".bloque4").show()}else{$(".bloque4").hide()}},calcularImporteTotalMonedaBase:function(){var b=$("#registrar_encomienda_command_estacionOrigen").val();var a=$("#registrar_encomienda_command_estacionDestino").val();var d=$("#registrar_encomienda_command_tipoPagoVirtual").val();var c=$("#registrar_encomienda_command_listaEncomiendas").val();var e=$("#registrar_encomienda_command_clienteRemitente").val();$(".descuentoSpan").text("");$("#registrar_encomienda_command_totalNetoVirtual").val("");if(e!==null&&$.trim(e)!==""&&b!==null&&$.trim(b)!==""&&a!==null&&$.trim(a)!==""&&c!==null&&$.trim(c)!==""){core.request({url:$("#pathCalcularImporteTotalMonedaBase").attr("value"),method:"POST",extraParams:{listaEncomiendas:c,idClienteRemitente:e,idEstacionOrigen:b,idEstacionDestino:a},dataType:"json",async:true,successCallback:function(g){if(g.error&&$.trim(g.error)!==""){var f=$('.modal[style^="display: block;"]');f.hide();alert(g.error,function(){f.show()})}else{$("#registrar_encomienda_command_totalNetoVirtual").val(g.total);$(".descuentoSpan").text("Descuento: GTQ "+g.descuento+".");if(d==="1"){registrarEncomienda.changeMonedaPago()}}}})}},changeTipoPago:function(){registrarEncomienda.checkBloque2();$("#registrar_encomienda_command_totalNetoVirtual").val("");$("#registrar_encomienda_command_tasaVirtual").val("");$("#registrar_encomienda_command_totalPagoVirtual").val("");$("#registrar_encomienda_command_vueltoVirtual").val("");$("#registrar_encomienda_command_efectivoVirtual").val("");registrarEncomienda.calcularImporteTotalMonedaBase()},changeMonedaPago:function(){var b=$("#registrar_encomienda_command_monedaPagoVirtual").val();$("#registrar_encomienda_command_tasaVirtual").val("");$("#registrar_encomienda_command_totalPagoVirtual").val("");$("#registrar_encomienda_command_vueltoVirtual").val("");if(b===null||$.trim(b)===""){$("#prependTotalPagoVirtual").text("???");$("#prependEfectivoVirtual").text("???")}else{if($.trim(b)==="1"){$("#prependTotalPagoVirtual").text("GTQ");$("#prependEfectivoVirtual").text("GTQ");registrarEncomienda.changeEfectivo()}else{var c=$("#registrar_encomienda_command_totalNetoVirtual").val();var a=$("#registrar_encomienda_command_monedaPagoVirtual").val();$("#prependTotalPagoVirtual").text("GTQ");$("#prependEfectivoVirtual").text("GTQ");if(c!==null&&$.trim(c)!==""&&a!==null&&$.trim(a)!==""){core.request({url:$("#pathCalcularImporteTotalPorMoneda").attr("value"),method:"POST",extraParams:{totalNeto:c,idMoneda:a},dataType:"json",async:true,successCallback:function(e){if(e.error&&$.trim(e.error)!==""){var d=$('.modal[style^="display: block;"]');d.hide();alert(e.error,function(){d.show()})}else{$("#prependTotalPagoVirtual").text(e.sigla);$("#prependEfectivoVirtual").text(e.sigla);$("#registrar_encomienda_command_tasaVirtual").val(e.tasa);$("#registrar_encomienda_command_totalPagoVirtual").val(e.total);registrarEncomienda.changeEfectivo()}}})}}}registrarEncomienda.checkBloque3()},changeEfectivo:function(){var f=$("#registrar_encomienda_command_monedaPagoVirtual").val();$("#registrar_encomienda_command_vueltoVirtual").val("");var b=$("#registrar_encomienda_command_efectivoVirtual").val();if(!$.isNumeric(b)){$("#registrar_encomienda_command_efectivoVirtual").val("");return}else{b=parseFloat(b).toFixed(2);$("#registrar_encomienda_command_efectivoVirtual").val(b)}if($.trim(f)==="1"){var g=$("#registrar_encomienda_command_totalNetoVirtual").val();var c=b-parseFloat(g);c=parseFloat(c).toFixed(2);if(c===0){$("#registrar_encomienda_command_vueltoVirtual").val(0)}else{if(c<0){var e=$('.modal[style^="display: block;"]');e.hide();alert("El efectivo no alcanza, como mínimo son:"+g+".",function(){e.show();$("#registrar_encomienda_command_efectivoVirtual").val(g);$("#registrar_encomienda_command_vueltoVirtual").val(0)})}else{$("#registrar_encomienda_command_vueltoVirtual").val(c)}}}else{var d=$("#registrar_encomienda_command_totalPagoVirtual").val();var c=b-parseFloat(d);c=parseFloat(c).toFixed(2);if(c===0){$("#registrar_encomienda_command_vueltoVirtual").val(0)}else{if(c<0){var e=$('.modal[style^="display: block;"]');e.hide();alert("El efectivo no alcanza, como mínimo son:"+d+".",function(){e.show();$("#registrar_encomienda_command_efectivoVirtual").val(d);$("#registrar_encomienda_command_vueltoVirtual").val(0)})}else{var a=$("#registrar_encomienda_command_monedaPagoVirtual").val();if(a!==null&&$.trim(a)!==""){core.request({url:$("#pathCalcularImporteTotalPorMoneda").attr("value"),method:"POST",extraParams:{totalNeto:c,idMoneda:a,dir:false},dataType:"json",async:true,successCallback:function(i){if(i.error&&$.trim(i.error)!==""){var h=$('.modal[style^="display: block;"]');h.hide();alert(i.error,function(){h.show();$("#registrar_encomienda_command_efectivoVirtual").val(d);$("#registrar_encomienda_command_vueltoVirtual").val(0)})}else{$("#registrar_encomienda_command_vueltoVirtual").val(i.total)}}})}}}}},changeBoleto:function(){var a=$("#registrar_encomienda_command_boleto").val();if(a===null||$.trim(a)===""){$("#porCobrar").show()}else{$("#porCobrar").hide();core.request({url:$("#pathGetInformacionBoleto").prop("value"),type:"POST",dataType:"json",async:false,extraParams:{idBoleto:a},successCallback:function(g){console.debug(g);var b=g.optionCliente;$("#registrar_encomienda_command_clienteRemitente").select2({allowClear:true,data:{results:b}});$("#registrar_encomienda_command_clienteRemitente").select2("val",b[0].id);$("#registrar_encomienda_command_clienteDestinatario").select2({allowClear:true,data:{results:b}});$("#registrar_encomienda_command_clienteDestinatario").select2("val",b[0].id);var d=g.optionRuta[0];var e=g.optionDestino[0];var f={id:core.uniqId("ruta_"),posicion:1,rutaVirtual:d.id,rutaNameVirtual:d.text,idEmpresa:d.idEmpresa,estacionFinalVirtual:e.id,estacionFinalNameVirtual:e.text};var c=[];c.push(f);$("#rutaBody").find("tr").not("#rutaVacioTR").remove();registrarEncomienda.renderItemGridAddRuta(f);$("#registrar_encomienda_command_estacionDestino").val(e.id);$("#registrar_encomienda_command_listaEncomiendaRutas").val(JSON.stringify(c))}})}}};
embarcarEncomienda={funcionesAddOnload:function(){this._init();this._conectEvents()},_init:function(){$("#embarcar_encomienda_command_salida").select2({allowClear:true})},_conectEvents:function(){}};
entregarEncomienda={funcionesAddOnload:function(){this._init();this._conectEvents()},_init:function(){var a=$("#entregar_encomienda_command_clienteReceptor").data("pathlistarclientespaginando");$("#entregar_encomienda_command_clienteReceptor").select2({minimumInputLength:1,allowClear:true,ajax:{url:a,dataType:"json",type:"POST",data:function(b,c){return{term:b,page_limit:5}},results:function(c,b){return{results:c.options}}}});$("#entregar_encomienda_command_clienteDocumentoVirtual").select2({minimumInputLength:1,allowClear:true,ajax:{url:$("#entregar_encomienda_command_clienteDocumentoVirtual").data("pathlistarclientespaginando"),dataType:"json",type:"GET",data:function(b,c){return{term:b,page_limit:5}},results:function(c,b){return{results:c.options}}}});$("#entregar_encomienda_command_tipoPagoVirtual").select2({allowClear:true});$("#entregar_encomienda_command_monedaPagoVirtual").select2({allowClear:true});$("#entregar_encomienda_command_serieFacturaVirtual").select2({allowClear:false,data:[]})},_conectEvents:function(){$("#cancelar").click(function(a){a.preventDefault();a.stopPropagation();confirm("¿Está seguro que desea cancelar la operación?",function(b){if(b===true){core.getPageForMenu($("#cancelar").attr("href"))}})});$("#addCliente").click(function(a){frondend.loadSubPage(a,$(this),function(c){var b=$("#entregar_encomienda_command_clienteReceptor");if(c!==""){core.request({url:b.data("pathlistarclientespaginando"),type:"POST",dataType:"json",async:false,extraParams:{id:c},successCallback:function(d){if(d.options&&d.options[0]){$("#entregar_encomienda_command_clienteReceptor").select2("data",d.options[0])}}})}},{confirmarOperacion:false})});$("#updateCliente").click(function(a){frondend.loadSubPage(a,$(this),function(){var b=$("#entregar_encomienda_command_clienteReceptor");var c=b.val();if(c!==""){core.request({url:b.data("pathlistarclientespaginando"),type:"POST",dataType:"json",async:false,extraParams:{id:c},successCallback:function(d){if(d.options&&d.options[0]){$("#entregar_encomienda_command_clienteReceptor").select2("data",d.options[0])}}})}})});$("#seachCliente").click(function(a){frondend.loadSubPage(a,$(this),function(c){if(c!==""){var b=$("#entregar_encomienda_command_clienteReceptor");core.request({url:b.data("pathlistarclientespaginando"),type:"POST",dataType:"json",async:false,extraParams:{id:c},successCallback:function(d){if(d.options&&d.options[0]){$("#entregar_encomienda_command_clienteReceptor").select2("data",d.options[0])}}})}})});$("#addClienteDocumento").click(function(a){frondend.loadSubPage(a,$(this),function(c){var b=$("#entregar_encomienda_command_clienteDocumentoVirtual");if(c!==""){core.request({url:b.data("pathlistarclientespaginando"),type:"POST",dataType:"json",async:false,extraParams:{id:c},successCallback:function(d){if(d.options&&d.options[0]){$("#entregar_encomienda_command_clienteDocumentoVirtual").select2("data",d.options[0])}}})}},{confirmarOperacion:false})});$("#updateClienteDocumento").click(function(a){console.log("updateCliente-clic");frondend.loadSubPage(a,$(this),function(){var b=$("#entregar_encomienda_command_clienteDocumentoVirtual");var c=b.val();if(c!==""){core.request({url:b.data("pathlistarclientespaginando"),type:"POST",dataType:"json",async:false,extraParams:{id:c},successCallback:function(d){if(d.options&&d.options[0]){$("#entregar_encomienda_command_clienteDocumentoVirtual").select2("data",d.options[0])}}})}})});$("#seachClienteDocumento").click(function(a){frondend.loadSubPage(a,$(this),function(c){if(c!==""){var b=$("#entregar_encomienda_command_clienteDocumentoVirtual");core.request({url:b.data("pathlistarclientespaginando"),type:"POST",dataType:"json",async:false,extraParams:{id:c},successCallback:function(d){if(d.options&&d.options[0]){$("#entregar_encomienda_command_clienteDocumentoVirtual").select2("data",d.options[0])}}})}})});$("#entregar_encomienda_command_serieFacturaVirtual").on("change",function(){console.debug("serieFacturaVirtual-init");var b=$("#entregar_encomienda_command_serieFacturaVirtual").select2("val");var a=$("#entregar_encomienda_command_serieFacturaVirtual").select2("data").idEmpresa;sessionStorage.setItem("sist_last_id_serie_factura_enco_"+a,b)});$("#aceptar").click(entregarEncomienda.clickAceptar);$("#entregar_encomienda_command_tipoPagoVirtual").on("change",entregarEncomienda.changeTipoPago);$("#entregar_encomienda_command_monedaPagoVirtual").on("change",entregarEncomienda.changeMonedaPago);$("#entregar_encomienda_command_efectivoVirtual").on("change",entregarEncomienda.changeEfectivo);$("#entregar_encomienda_command_facturarVirtual").bind("click",entregarEncomienda.checkFacturar)},imprimirEncomiendaFactura:function(b,a){frondend.printFacturaInternal(b,a)},customPostValidateFactura:function(c){if(frondend.listaImpresorasDisponibles===null||$.trim(frondend.listaImpresorasDisponibles)===""){core.hiddenDialog2(c);alert("El sistema aún no ha podido detectar las impresoras para la facturación.",function(){core.showDialog2(c)});return false}var a=$("#entregar_encomienda_command_tipoPagoVirtual").prop("value");if(a===undefined||a===null||$.trim(a)===""){core.hiddenDialog2(c);alert("Debe especificar un tipo de pago.",function(){core.showDialog2(c)});return false}else{if(a==="1"){var d=$("#entregar_encomienda_command_monedaPagoVirtual").prop("value");if(d===undefined||d===null||$.trim(d)===""){core.hiddenDialog2(c);alert("Debe especificar una moneda de pago.",function(){core.showDialog2(c)});return false}var b=$("#entregar_encomienda_command_efectivoVirtual").prop("value");if(b===undefined||b===null||$.trim(b)===""){core.hiddenDialog2(c);alert("Debe especificar un efectivo.",function(){core.showDialog2(c)});return false}}}if($("#entregar_encomienda_command_facturarVirtual").prop("checked")===true){var e=$("#entregar_encomienda_command_clienteDocumentoVirtual").prop("value");if(e===undefined||e===null||$.trim(e)===""){core.hiddenDialog2(c);alert("Debe seleccionar el cliente de la factura.",function(){core.showDialog2(c)});return false}}var e=$("#entregar_encomienda_command_totalNetoVirtual").prop("value");if(e===undefined||e===null||$.trim(e)===""){core.hiddenDialog2(c);alert("No se ha podido determinar el total neto.",function(){core.showDialog2(c)});return false}return true},clickAceptar:function(e){e.preventDefault();e.stopPropagation();var encomiendaForm=$("#encomiendaForm");if(core.customValidateForm(encomiendaForm)===true){var tipoDocumento=$("#entregar_encomienda_command_tipoDocumento").val();if(tipoDocumento!=="2"){$("#entregar_encomienda_command_impresorasDisponibles").prop("value",frondend.listaImpresorasDisponibles);$(encomiendaForm).ajaxSubmit({target:encomiendaForm.attr("action"),type:"POST",dataType:"html",cache:false,async:false,beforeSubmit:function(){core.showLoading({showLoading:true})},error:function(){core.hideLoading({showLoading:true})},success:function(responseText){core.hideLoading({showLoading:true});if(!core.procesarRespuestaServidor(responseText)){var info=core.getValueFromResponse(responseText,"info");core.showNotification({text:info});alert("Operación realizada satisfactoriamente. "+info,function(){core.getPageForMenu($("#pathHomeEncomienda").val())})}}})}else{if(entregarEncomienda.customPreValidateFactura()===true){entregarEncomienda.loadSeriesFacturaActiva(function(){$("#entregar_encomienda_command_facturarVirtual").prop("checked",false);entregarEncomienda.checkFacturar();core.showMessageDialog({title:"Facturar",selector:$("#facturaDIV"),removeOnClose:false,uniqid:false,buttons:{Aceptar:{click:function(){var dialogActual=this;if(core.customValidateForm(encomiendaForm)===true&&entregarEncomienda.customPostValidateFactura(this)===true){$("#entregar_encomienda_command_impresorasDisponibles").prop("value",frondend.listaImpresorasDisponibles);$("#entregar_encomienda_command_facturar").prop("value",$("#entregar_encomienda_command_facturarVirtual").prop("checked"));$("#entregar_encomienda_command_tipoPago").prop("value",$("#entregar_encomienda_command_tipoPagoVirtual").prop("value"));$("#entregar_encomienda_command_totalNeto").prop("value",$("#entregar_encomienda_command_totalNetoVirtual").prop("value"));$("#entregar_encomienda_command_monedaPago").prop("value",$("#entregar_encomienda_command_monedaPagoVirtual").prop("value"));$("#entregar_encomienda_command_tasa").prop("value",$("#entregar_encomienda_command_tasaVirtual").prop("value"));$("#entregar_encomienda_command_totalPago").prop("value",$("#entregar_encomienda_command_totalPagoVirtual").prop("value"));$("#entregar_encomienda_command_efectivo").prop("value",$("#entregar_encomienda_command_efectivoVirtual").prop("value"));$("#entregar_encomienda_command_vuelto").prop("value",$("#entregar_encomienda_command_vueltoVirtual").prop("value"));$("#entregar_encomienda_command_serieFactura").prop("value",$("#entregar_encomienda_command_serieFacturaVirtual").prop("value"));$("#entregar_encomienda_command_clienteDocumento").prop("value",$("#entregar_encomienda_command_clienteDocumentoVirtual").prop("value"));$(encomiendaForm).ajaxSubmit({target:encomiendaForm.attr("action"),type:"POST",dataType:"html",cache:false,async:false,beforeSubmit:function(){core.showLoading({showLoading:true})},error:function(){core.hideLoading({showLoading:true})},success:function(responseText){var facturar=eval($("#entregar_encomienda_command_facturar").prop("value"));core.hideLoading({showLoading:true});if(!core.procesarRespuestaServidor(responseText)){dialogActual.dialog2("close");var info=core.getValueFromResponse(responseText,"info");core.showNotification({text:info});alert("Operación realizada satisfactoriamente. "+info,function(){core.getPageForMenu($("#pathHomeEncomienda").val())});if(facturar){entregarEncomienda.imprimirEncomiendaFactura(responseText)}}}})}},primary:true,type:"info"},Cancelar:function(){this.dialog2("close")}}})});entregarEncomienda.checkBloque2();entregarEncomienda.changeTipoPago()}}}},loadSeriesFacturaActiva:function(b){var a=$("#entregar_encomienda_command_idEstacionDestino").val();var c=$("#entregar_encomienda_command_idEmpresa").val();$("#entregar_encomienda_command_serieFacturaVirtual").select2({data:[]});if(a!==null&&$.trim(a)!==""&&c!==null&&$.trim(c)!==""){core.request({url:$("#pathSeriesActivaPorEstacion").attr("value"),method:"POST",extraParams:{idEstacion:a,idEmpresa:c,tipoServicio:"2"},dataType:"json",async:true,successCallback:function(e){var d=e.optionSeriesFacturas;if(d){$("#entregar_encomienda_command_serieFacturaVirtual").select2({allowClear:false,data:{results:d}});if(d[0]){$("#entregar_encomienda_command_serieFacturaVirtual").select2("val",d[0].id);if(b&&$.isFunction(b)){b()}}}}})}},checkFacturar:function(){var a=$("#entregar_encomienda_command_facturarVirtual").prop("checked");if(a){$(".bloque0").removeClass("hidden")}else{$(".bloque0").addClass("hidden");$("#entregar_encomienda_command_clienteDocumentoVirtual").select2("val","")}},customPreValidateFactura:function(b){var a=$("#entregar_encomienda_command_monedaPagoVirtual option").length;if(a<=0){core.hiddenDialog2(b);alert("Debe abrir una caja para facturar.",function(){core.showDialog2(b)});return false}return true},checkBloque2:function(a){if(!a){a=$("#entregar_encomienda_command_tipoPagoVirtual").val()}if(a===""){$("#entregar_encomienda_command_totalNetoVirtual").val("");$(".bloque2").hide();entregarEncomienda.checkBloque3(a)}else{if(a==="1"){$(".bloque2").show();entregarEncomienda.checkBloque3(a)}else{if(a==="2"){$(".bloque2").hide();entregarEncomienda.checkBloque3(a)}else{if(a==="3"){$(".bloque2").hide();entregarEncomienda.checkBloque3(a)}}}}},checkBloque3:function(a){if(!a){a=$("#entregar_encomienda_command_tipoPagoVirtual").val()}var b=$("#entregar_encomienda_command_monedaPagoVirtual").val();if(a==="1"&&b!==""&&b!=="1"){$(".bloque3").show()}else{$(".bloque3").hide()}entregarEncomienda.checkBloque4(a)},checkBloque4:function(a){if(!a){a=$("#entregar_encomienda_command_tipoPagoVirtual").val()}if(a==="1"){$(".bloque4").show()}else{$(".bloque4").hide()}},calcularImporteTotalMonedaBase:function(){var a=$("#entregar_encomienda_command_encomiendaOriginal").val();var b=$("#entregar_encomienda_command_tipoPagoVirtual").val();$("#entregar_encomienda_command_totalNetoVirtual").val("");if(a!==null&&$.trim(a)!==""&&b!==null&&$.trim(b)!==""){core.request({url:$("#pathCalcularImporteTotalMonedaBaseEntregarEncomienda").attr("value"),method:"POST",extraParams:{idEncomiendaOriginal:a,idTipoPago:b},dataType:"json",async:true,successCallback:function(d){if(d.error&&$.trim(d.error)!==""){var c=$('.modal[style^="display: block;"]');c.hide();alert(d.error,function(){c.show()})}else{$("#entregar_encomienda_command_totalNetoVirtual").val(d.total);if(b==="1"){entregarEncomienda.changeMonedaPago()}}}})}},changeTipoPago:function(){entregarEncomienda.checkBloque2();$("#entregar_encomienda_command_totalNetoVirtual").val("");$("#entregar_encomienda_command_tasaVirtual").val("");$("#entregar_encomienda_command_totalPagoVirtual").val("");$("#entregar_encomienda_command_vueltoVirtual").val("");$("#entregar_encomienda_command_efectivoVirtual").val("");entregarEncomienda.calcularImporteTotalMonedaBase()},changeMonedaPago:function(){var b=$("#entregar_encomienda_command_monedaPagoVirtual").val();$("#entregar_encomienda_command_tasaVirtual").val("");$("#entregar_encomienda_command_totalPagoVirtual").val("");$("#entregar_encomienda_command_vueltoVirtual").val("");if(b===null||$.trim(b)===""){$("#prependTotalPagoVirtual").text("???");$("#prependEfectivoVirtual").text("???")}else{if($.trim(b)==="1"){$("#prependTotalPagoVirtual").text("GTQ");$("#prependEfectivoVirtual").text("GTQ");entregarEncomienda.changeEfectivo()}else{var c=$("#entregar_encomienda_command_totalNetoVirtual").val();var a=$("#entregar_encomienda_command_monedaPagoVirtual").val();$("#prependTotalPagoVirtual").text("GTQ");$("#prependEfectivoVirtual").text("GTQ");if(c!==null&&$.trim(c)!==""&&a!==null&&$.trim(a)!==""){core.request({url:$("#pathCalcularImporteTotalPorMoneda").attr("value"),method:"POST",extraParams:{totalNeto:c,idMoneda:a},dataType:"json",async:true,successCallback:function(e){if(e.error&&$.trim(e.error)!==""){var d=$('.modal[style^="display: block;"]');d.hide();alert(e.error,function(){d.show()})}else{$("#prependTotalPagoVirtual").text(e.sigla);$("#prependEfectivoVirtual").text(e.sigla);$("#entregar_encomienda_command_tasaVirtual").val(e.tasa);$("#entregar_encomienda_command_totalPagoVirtual").val(e.total);entregarEncomienda.changeEfectivo()}}})}}}entregarEncomienda.checkBloque3()},changeEfectivo:function(){var f=$("#entregar_encomienda_command_monedaPagoVirtual").val();$("#entregar_encomienda_command_vueltoVirtual").val("");var b=$("#entregar_encomienda_command_efectivoVirtual").val();if(!$.isNumeric(b)){$("#entregar_encomienda_command_efectivoVirtual").val("");return}else{b=parseFloat(b).toFixed(2);$("#entregar_encomienda_command_efectivoVirtual").val(b)}if($.trim(f)==="1"){var g=$("#entregar_encomienda_command_totalNetoVirtual").val();var c=b-parseFloat(g);c=parseFloat(c).toFixed(2);if(c===0){$("#entregar_encomienda_command_vueltoVirtual").val(0)}else{if(c<0){var e=$('.modal[style^="display: block;"]');e.hide();alert("El efectivo no alcanza, como mínimo son:"+g+".",function(){e.show();$("#entregar_encomienda_command_efectivoVirtual").val(g);$("#entregar_encomienda_command_vueltoVirtual").val(0)})}else{$("#entregar_encomienda_command_vueltoVirtual").val(c)}}}else{var d=$("#entregar_encomienda_command_totalPagoVirtual").val();var c=b-parseFloat(d);c=parseFloat(c).toFixed(2);if(c===0){$("#entregar_encomienda_command_vueltoVirtual").val(0)}else{if(c<0){var e=$('.modal[style^="display: block;"]');e.hide();alert("El efectivo no alcanza, como mínimo son:"+d+".",function(){e.show();$("#entregar_encomienda_command_efectivoVirtual").val(d);$("#entregar_encomienda_command_vueltoVirtual").val(0)})}else{var a=$("#entregar_encomienda_command_monedaPagoVirtual").val();if(a!==null&&$.trim(a)!==""){core.request({url:$("#pathCalcularImporteTotalPorMoneda").attr("value"),method:"POST",extraParams:{totalNeto:c,idMoneda:a,dir:false},dataType:"json",async:true,successCallback:function(i){if(i.error&&$.trim(i.error)!==""){var h=$('.modal[style^="display: block;"]');h.hide();alert(i.error,function(){h.show();$("#entregar_encomienda_command_efectivoVirtual").val(d);$("#entregar_encomienda_command_vueltoVirtual").val(0)})}else{$("#entregar_encomienda_command_vueltoVirtual").val(i.total)}}})}}}}}};
procesarEncomiendaPorSalida={funcionesAddOnload:function(){this._init();this._conectEvents()},_init:function(){$("#procesar_encomiendas_salida_command_salida").select2({allowClear:$("#procesar_encomiendas_salida_command_salida option[value='']").length===1});procesarEncomiendaPorSalida.buscarDatos()},_conectEvents:function(){$("#cancelar").click(function(a){a.preventDefault();a.stopPropagation();confirm("¿Está seguro que desea cancelar la operación?",function(b){if(b===true){core.getPageForMenu($("#cancelar").attr("href"))}})});$("#procesar_encomiendas_salida_command_salida").on("change",procesarEncomiendaPorSalida.buscarDatos);$("#aceptar").click(procesarEncomiendaPorSalida.clickAceptar);$("#manifiesto").data("index","procesar_encomiendas_salida_command_salida");$("#manifiesto").data("autoopenfile","PDF");$("#manifiesto").click(frondend.loadSubPage)},buscarDatos:function(b){console.debug("buscarDatos-init");$("#encomiendasAbordadasBody").find("tr").not("#encomiendasAbordadasVacioTR").remove();$("#encomiendasAbordadasBody").find("#encomiendasAbordadasVacioTR").show();$("#encomiendasPendientesBody").find("tr").not("#encomiendasPendientesVacioTR").remove();$("#encomiendasPendientesBody").find("#encomiendasPendientesVacioTR").show();var a=$("#procesar_encomiendas_salida_command_salida").val();if(a!==null&&$.trim(a)!==""){core.request({url:$("#pathListarEncomiendasAProcesar").attr("value"),method:"POST",extraParams:{salida:a},dataType:"json",async:false,successCallback:function(f){console.debug(f);var d=f.encomiendasAbordadas;var e=$("#pathConsultarEncomienda").val();$.each(d,function(){$("#encomiendasAbordadasBody").find("#encomiendasAbordadasVacioTR").hide();var g=$("<tr id='EA"+this.id+"'><td class='center'><a class='btn'>"+this.id+"</a></td><td class='center inputCheckbox'><input data-valor='"+this.id+"' type='checkbox'></td><td class='center'>"+this.fecha+"</td><td class='center'>"+this.doc+"</td><td class='center'>"+this.origen+"</td><td class='center'>"+this.destino+"</td><td class='center'>"+this.desc+"</td></tr>");if(!this.puedeModificar){g.find("input").attr("disabled","disabled")}g.val(this.id);g.find("a").attr("href",e);g.find("a").data("index","EA"+this.id);g.find("a").data("title","Consultar Encomienda");g.find("a").data("fullscreen",true);g.find("a").click(frondend.loadSubPage);$("#encomiendasAbordadasBody").append(g)});var c=f.encomiendasPendientes;$.each(c,function(){$("#encomiendasPendientesBody").find("#encomiendasPendientesVacioTR").hide();var g=$("<tr id='EP"+this.id+"'><td class='center'><a class='btn'>"+this.id+"</a></td><td class='center inputCheckbox'><input data-valor='"+this.id+"' type='checkbox'></td><td class='center'>"+this.fecha+"</td><td class='center'>"+this.doc+"</td><td class='center'>"+this.origen+"</td><td class='center'>"+this.destino+"</td><td class='center'>"+this.desc+"</td></tr>");if(!this.puedeModificar){g.find("input").attr("disabled","disabled")}g.val(this.id);g.find("a").attr("href",e);g.find("a").data("index","EP"+this.id);g.find("a").data("title","Consultar Encomienda");g.find("a").data("fullscreen",true);g.find("a").click(frondend.loadSubPage);$("#encomiendasPendientesBody").append(g)})}})}},clickAceptar:function(f){console.debug("clickAceptar-init");f.preventDefault();f.stopPropagation();var c=$("#procesar_encomiendas_salida_command_salida").val();if(c===null||$.trim(c)===""){alert("Debe seleccionar una salida.");return}var d=[];var b=$("#encomiendasPendientesBody").find("input");$.each(b,function(){var e=$(this).prop("checked");if(e){d.push($(this).data("valor"))}});console.debug(d);var a=[];var b=$("#encomiendasAbordadasBody").find("input");$.each(b,function(){var e=$(this).prop("checked");if(e){a.push($(this).data("valor"))}});console.debug(a);if(d.length<=0&&a.length<=0){alert("Debe seleccionar al menos una encomienda.");return}core.request({url:$("#procesarEncomiendaPorSalida").attr("action"),method:"POST",extraParams:{salida:c,listaIdEmbarcar:d.join(","),listaIdDesembarcar:a.join(",")},dataType:"html",async:false,successCallback:function(e){console.debug(e);if(!core.procesarRespuestaServidor(e)){alert("Operación realizada satisfactoriamente.",function(){procesarEncomiendaPorSalida.buscarDatos()})}}})}};
entregaMultipleEncomiendas={funcionesAddOnload:function(){this._init();this._conectEvents()},_init:function(){$("#entrega_multiple_encomienda_command_estacion").select2({allowClear:$("#entrega_multiple_encomienda_command_estacion option[value='']").length===1});$("#entrega_multiple_encomienda_command_estacion").select2("readonly",($("#entrega_multiple_encomienda_command_estacion").attr("readonly")==="readonly"));$("#entrega_multiple_encomienda_command_empresa").select2({allowClear:$("#entrega_multiple_encomienda_command_empresa option[value='']").length===1});$("#entrega_multiple_encomienda_command_empresa").select2("readonly",($("#entrega_multiple_encomienda_command_empresa").attr("readonly")==="readonly"));$("#entrega_multiple_encomienda_command_clienteReceptor").select2({minimumInputLength:1,allowClear:true,ajax:{url:$("#entrega_multiple_encomienda_command_clienteReceptor").data("pathlistarclientespaginando"),dataType:"json",type:"GET",data:function(a,b){return{term:a,page_limit:5}},results:function(b,a){return{results:b.options}}}});$("#entrega_multiple_encomienda_command_clienteDocumentoVirtual").select2({minimumInputLength:1,allowClear:true,ajax:{url:$("#entrega_multiple_encomienda_command_clienteDocumentoVirtual").data("pathlistarclientespaginando"),dataType:"json",type:"GET",data:function(a,b){return{term:a,page_limit:5}},results:function(b,a){return{results:b.options}}}});$("#entrega_multiple_encomienda_command_tipoPagoVirtual").select2({allowClear:true});$("#entrega_multiple_encomienda_command_monedaPagoVirtual").select2({allowClear:true});$("#entrega_multiple_encomienda_command_serieFacturaVirtual").select2({allowClear:false,data:[]});entregaMultipleEncomiendas.buscarDatos()},_conectEvents:function(){$("#cancelar").click(function(a){a.preventDefault();a.stopPropagation();confirm("¿Está seguro que desea cancelar la operación?",function(b){if(b===true){core.getPageForMenu($("#cancelar").attr("href"))}})});$("#entrega_multiple_encomienda_command_estacion").on("change",entregaMultipleEncomiendas.buscarDatos);$("#entrega_multiple_encomienda_command_empresa").on("change",entregaMultipleEncomiendas.buscarDatos);$("#aceptar").click(entregaMultipleEncomiendas.clickAceptar);$("#addCliente").click(function(a){frondend.loadSubPage(a,$(this),function(c){var b=$("#entrega_multiple_encomienda_command_clienteReceptor");if(c!==""){core.request({url:b.data("pathlistarclientespaginando"),type:"POST",dataType:"json",async:false,extraParams:{id:c},successCallback:function(d){if(d.options&&d.options[0]){$("#entrega_multiple_encomienda_command_clienteReceptor").select2("data",d.options[0])}}})}},{confirmarOperacion:false})});$("#updateCliente").click(function(a){console.log("updateCliente-clic");frondend.loadSubPage(a,$(this),function(){var b=$("#entrega_multiple_encomienda_command_clienteReceptor");var c=b.val();if(c!==""){core.request({url:b.data("pathlistarclientespaginando"),type:"POST",dataType:"json",async:false,extraParams:{id:c},successCallback:function(d){if(d.options&&d.options[0]){$("#entrega_multiple_encomienda_command_clienteReceptor").select2("data",d.options[0])}}})}})});$("#seachCliente").click(function(a){frondend.loadSubPage(a,$(this),function(c){if(c!==""){var b=$("#entrega_multiple_encomienda_command_clienteReceptor");core.request({url:b.data("pathlistarclientespaginando"),type:"POST",dataType:"json",async:false,extraParams:{id:c},successCallback:function(d){if(d.options&&d.options[0]){$("#entrega_multiple_encomienda_command_clienteReceptor").select2("data",d.options[0])}}})}})});$("#addClienteDocumento").click(function(a){frondend.loadSubPage(a,$(this),function(c){var b=$("#entrega_multiple_encomienda_command_clienteDocumentoVirtual");if(c!==""){core.request({url:b.data("pathlistarclientespaginando"),type:"POST",dataType:"json",async:false,extraParams:{id:c},successCallback:function(d){if(d.options&&d.options[0]){$("#entrega_multiple_encomienda_command_clienteDocumentoVirtual").select2("data",d.options[0])}}})}},{confirmarOperacion:false})});$("#updateClienteDocumento").click(function(a){console.log("updateCliente-clic");frondend.loadSubPage(a,$(this),function(){var b=$("#entrega_multiple_encomienda_command_clienteDocumentoVirtual");var c=b.val();if(c!==""){core.request({url:b.data("pathlistarclientespaginando"),type:"POST",dataType:"json",async:false,extraParams:{id:c},successCallback:function(d){if(d.options&&d.options[0]){$("#entrega_multiple_encomienda_command_clienteDocumentoVirtual").select2("data",d.options[0])}}})}})});$("#seachClienteDocumento").click(function(a){frondend.loadSubPage(a,$(this),function(c){if(c!==""){var b=$("#entrega_multiple_encomienda_command_clienteDocumentoVirtual");core.request({url:b.data("pathlistarclientespaginando"),type:"POST",dataType:"json",async:false,extraParams:{id:c},successCallback:function(d){if(d.options&&d.options[0]){$("#entrega_multiple_encomienda_command_clienteDocumentoVirtual").select2("data",d.options[0])}}})}})});$("#entrega_multiple_encomienda_command_serieFacturaVirtual").on("change",function(){console.debug("serieFacturaVirtual-init");var b=$("#entrega_multiple_encomienda_command_serieFacturaVirtual").select2("val");var a=$("#entrega_multiple_encomienda_command_serieFacturaVirtual").select2("data").idEmpresa;sessionStorage.setItem("sist_last_id_serie_factura_enco_"+a,b)});$("#entrega_multiple_encomienda_command_tipoPagoVirtual").on("change",entregaMultipleEncomiendas.changeTipoPago);$("#entrega_multiple_encomienda_command_monedaPagoVirtual").on("change",entregaMultipleEncomiendas.changeMonedaPago);$("#entrega_multiple_encomienda_command_efectivoVirtual").on("change",entregaMultipleEncomiendas.changeEfectivo);$("#entrega_multiple_encomienda_command_facturarVirtual").bind("click",entregaMultipleEncomiendas.checkFacturar)},imprimirEncomiendaFactura:function(b,a){frondend.printFacturaInternal(b,a)},buscarDatos:function(c){console.debug("buscarDatos-init");$("#encomiendasBody").find("tr").not("#encomiendasVacioTR").remove();$("#encomiendasBody").find("#encomiendasVacioTR").show();$("#entrega_multiple_encomienda_command_importeTotal").val("");var b=$("#entrega_multiple_encomienda_command_estacion").val();var a=$("#entrega_multiple_encomienda_command_empresa").val();if(b!==null&&$.trim(b)!==""&&a!==null&&$.trim(a)!==""){core.request({url:$("#pathListarEncomiendasPendientesEntrega").attr("value"),method:"POST",extraParams:{estacion:b,empresa:a,showClientes:true},dataType:"json",async:false,successCallback:function(g){console.debug(g);var d=g.encomiendas;var f=$("#pathConsultarEncomienda").val();$.each(d,function(){$("#encomiendasBody").find("#encomiendasVacioTR").hide();var h=$("<tr id='E"+this.id+"'><td class='center'><a class='btn'>"+this.id+"</a></td><td class='center inputCheckbox'><input data-valor='"+this.id+"' data-importe='"+this.importe+"' data-iddoc='"+this.idDoc+"' type='checkbox'></td><td class='center'>"+this.empresa+"</td><td class='center'>"+this.fecha+"</td><td class='center'>"+this.doc+"</td><td class='center'>"+this.cli+"</td><td class='center'> GTQ "+this.importe+"</td><td class='center'>"+this.desc+"</td></tr>");$("#encomiendasBody").append(h);h.val(this.id);h.find("a").attr("href",f);h.find("a").data("index","E"+this.id);h.find("a").data("title","Consultar Encomienda");h.find("a").data("fullscreen",true);h.find("a").click(frondend.loadSubPage)});$(".inputCheckbox").find("input").bind("click",entregaMultipleEncomiendas.totalizar);entregaMultipleEncomiendas.totalizar();var e=g.optionSeriesFacturas;if(e){$("#entrega_multiple_encomienda_command_serieFacturaVirtual").select2({allowClear:false,data:{results:e}});if(e.length>0&&e[0]){$("#entrega_multiple_encomienda_command_serieFacturaVirtual").select2("val",e[0].id)}}}})}else{entregaMultipleEncomiendas.totalizar()}},syncronizarLista:function(c){var a=[];var b=$(".inputCheckbox").find("input");b.each(function(d,f){var e=$(f).prop("checked");if(e){a.push($(f).data("valor"))}});$("#entrega_multiple_encomienda_command_listaIdEncomiendas").val(JSON.stringify(a))},totalizar:function(){console.log("totalizar-init");var c=null;var b=0;var a=$(".inputCheckbox").find("input");a.each(function(d,f){var e=$(f).prop("checked");if(e){console.log("chequeando item checked...");if(c===null){console.log("tipoDocumentoEncomienda is null");c=$(f).data("iddoc")}else{console.log("tipoDocumentoEncomienda: "+c+", y el item tiene: "+$(f).data("iddoc"));if(c!==$(f).data("iddoc")){console.log("son diferentes...desmarcando...");$(f).prop("checked",false);return}}b+=core.customParseFloat($(f).data("importe"))}else{console.log("chequeando item...")}});$("#entrega_multiple_encomienda_command_tipoDocumentoEncomienda").val(c);$("#entrega_multiple_encomienda_command_importeTotal").val(b)},clickAceptar:function(e){console.debug("clickAceptar-init");e.preventDefault();e.stopPropagation();var encomiendaForm=$("#entregaMultipleEncomiendas");entregaMultipleEncomiendas.syncronizarLista();if(core.customValidateForm(encomiendaForm)===true&&entregaMultipleEncomiendas.communPreValidate()===true){var tipoDocumento=$("#entrega_multiple_encomienda_command_tipoDocumentoEncomienda").val();if(tipoDocumento!=="2"){$("#entrega_multiple_encomienda_command_impresorasDisponibles").prop("value",frondend.listaImpresorasDisponibles);$(encomiendaForm).ajaxSubmit({target:encomiendaForm.attr("action"),type:"POST",dataType:"html",cache:false,async:false,beforeSubmit:function(){core.showLoading({showLoading:true})},error:function(){core.hideLoading({showLoading:true})},success:function(responseText){core.hideLoading({showLoading:true});if(!core.procesarRespuestaServidor(responseText)){var info=core.getValueFromResponse(responseText,"info");core.showNotification({text:info});alert("Operación realizada satisfactoriamente. "+info,function(){entregaMultipleEncomiendas.buscarDatos()})}}})}else{if(entregaMultipleEncomiendas.customPreValidateFactura()===true){$("#entrega_multiple_encomienda_command_facturarVirtual").prop("checked",false);entregaMultipleEncomiendas.checkFacturar();core.showMessageDialog({title:"Facturar",selector:$("#facturaDIV"),removeOnClose:false,uniqid:false,buttons:{Aceptar:{click:function(){var dialogActual=this;if(core.customValidateForm(encomiendaForm)===true&&entregaMultipleEncomiendas.customPostValidateFactura(this)===true){$("#entrega_multiple_encomienda_command_impresorasDisponibles").prop("value",frondend.listaImpresorasDisponibles);$("#entrega_multiple_encomienda_command_facturar").prop("value",$("#entrega_multiple_encomienda_command_facturarVirtual").prop("checked"));$("#entrega_multiple_encomienda_command_tipoPago").prop("value",$("#entrega_multiple_encomienda_command_tipoPagoVirtual").prop("value"));$("#entrega_multiple_encomienda_command_totalNeto").prop("value",$("#entrega_multiple_encomienda_command_totalNetoVirtual").prop("value"));$("#entrega_multiple_encomienda_command_monedaPago").prop("value",$("#entrega_multiple_encomienda_command_monedaPagoVirtual").prop("value"));$("#entrega_multiple_encomienda_command_tasa").prop("value",$("#entrega_multiple_encomienda_command_tasaVirtual").prop("value"));$("#entrega_multiple_encomienda_command_totalPago").prop("value",$("#entrega_multiple_encomienda_command_totalPagoVirtual").prop("value"));$("#entrega_multiple_encomienda_command_efectivo").prop("value",$("#entrega_multiple_encomienda_command_efectivoVirtual").prop("value"));$("#entrega_multiple_encomienda_command_vuelto").prop("value",$("#entrega_multiple_encomienda_command_vueltoVirtual").prop("value"));$("#entrega_multiple_encomienda_command_serieFactura").prop("value",$("#entrega_multiple_encomienda_command_serieFacturaVirtual").prop("value"));$("#entrega_multiple_encomienda_command_clienteDocumento").prop("value",$("#entrega_multiple_encomienda_command_clienteDocumentoVirtual").prop("value"));$(encomiendaForm).ajaxSubmit({target:encomiendaForm.attr("action"),type:"POST",dataType:"html",cache:false,async:false,beforeSubmit:function(){core.showLoading({showLoading:true})},error:function(){core.hideLoading({showLoading:true})},success:function(responseText){var facturar=eval($("#entrega_multiple_encomienda_command_facturar").prop("value"));core.hideLoading({showLoading:true});if(!core.procesarRespuestaServidor(responseText)){dialogActual.dialog2("close");var info=core.getValueFromResponse(responseText,"info");core.showNotification({text:info});alert("Operación realizada satisfactoriamente. "+info,function(){entregaMultipleEncomiendas.buscarDatos()});if(facturar){entregaMultipleEncomiendas.imprimirEncomiendaFactura(responseText)}}}})}},primary:true,type:"info"},Cancelar:function(){this.dialog2("close")}}});entregaMultipleEncomiendas.checkBloque2();entregaMultipleEncomiendas.changeTipoPago()}}}},checkFacturar:function(){var a=$("#entrega_multiple_encomienda_command_facturarVirtual").prop("checked");if(a){$(".bloque0").removeClass("hidden")}else{$(".bloque0").addClass("hidden");$("#entrega_multiple_encomienda_command_clienteDocumentoVirtual").select2("val","")}},communPreValidate:function(){var a=$("#entrega_multiple_encomienda_command_listaIdEncomiendas").val();if(a){a=JSON.parse(a)}else{a=[]}if(a.length===0){alert("Debe seleccionar al menos una encomienda.");return false}return true},customPreValidateFactura:function(b){var a=$("#entrega_multiple_encomienda_command_monedaPagoVirtual option").length;if(a<=0){core.hiddenDialog2(b);alert("Debe abrir una caja para facturar.",function(){core.showDialog2(b)});return false}return true},customPostValidateFactura:function(e){if(frondend.listaImpresorasDisponibles===null||$.trim(frondend.listaImpresorasDisponibles)===""){core.hiddenDialog2(e);alert("El sistema aún no ha podido detectar las impresoras para la facturación.",function(){core.showDialog2(e)});return false}var b=$("#entrega_multiple_encomienda_command_tipoPagoVirtual").prop("value");if(b===undefined||b===null||$.trim(b)===""){core.hiddenDialog2(e);alert("Debe especificar un tipo de pago.",function(){core.showDialog2(e)});return false}else{if(b==="1"){var f=$("#entrega_multiple_encomienda_command_monedaPagoVirtual").prop("value");if(f===undefined||f===null||$.trim(f)===""){core.hiddenDialog2(e);alert("Debe especificar una moneda de pago.",function(){core.showDialog2(e)});return false}var c=$("#entrega_multiple_encomienda_command_efectivoVirtual").prop("value");if(c===undefined||c===null||$.trim(c)===""){core.hiddenDialog2(e);alert("Debe especificar un efectivo.",function(){core.showDialog2(e)});return false}}}if($("#entrega_multiple_encomienda_command_facturarVirtual").prop("checked")===true){var d=4;var a=$("#entrega_multiple_encomienda_command_listaIdEncomiendas").val();if(a){a=JSON.parse(a)}else{a=[]}if(a.length>d){alert("No se puede seleccionar más de "+d+" encomiendas a la vez cuando se factura.");return}var g=$("#entrega_multiple_encomienda_command_clienteDocumentoVirtual").prop("value");if(g===undefined||g===null||$.trim(g)===""){core.hiddenDialog2(e);alert("Debe seleccionar el cliente de la factura.",function(){core.showDialog2(e)});return false}}var g=$("#entrega_multiple_encomienda_command_totalNetoVirtual").prop("value");if(g===undefined||g===null||$.trim(g)===""){core.hiddenDialog2(e);alert("No se ha podido determinar el total neto.",function(){core.showDialog2(e)});return false}return true},checkBloque2:function(a){if(!a){a=$("#entrega_multiple_encomienda_command_tipoPagoVirtual").val()}if(a===""){$("#entrega_multiple_encomienda_command_totalNetoVirtual").val("");$(".bloque2").hide();entregaMultipleEncomiendas.checkBloque3(a)}else{if(a==="1"){$(".bloque2").show();entregaMultipleEncomiendas.checkBloque3(a)}else{if(a==="2"){$(".bloque2").hide();entregaMultipleEncomiendas.checkBloque3(a)}else{if(a==="3"){$(".bloque2").hide();entregaMultipleEncomiendas.checkBloque3(a)}}}}},checkBloque3:function(a){if(!a){a=$("#entrega_multiple_encomienda_command_tipoPagoVirtual").val()}var b=$("#entrega_multiple_encomienda_command_monedaPagoVirtual").val();if(a==="1"&&b!==""&&b!=="1"){$(".bloque3").show()}else{$(".bloque3").hide()}entregaMultipleEncomiendas.checkBloque4(a)},checkBloque4:function(a){if(!a){a=$("#entrega_multiple_encomienda_command_tipoPagoVirtual").val()}if(a==="1"){$(".bloque4").show()}else{$(".bloque4").hide()}},calcularImporteTotalMonedaBase:function(){var b=$("#entrega_multiple_encomienda_command_tipoPagoVirtual").val();var a=$("#entrega_multiple_encomienda_command_importeTotal").val();$("#entrega_multiple_encomienda_command_totalNetoVirtual").val(a);if(b==="1"){entregaMultipleEncomiendas.changeMonedaPago()}},changeTipoPago:function(){entregaMultipleEncomiendas.checkBloque2();$("#entrega_multiple_encomienda_command_totalNetoVirtual").val("");$("#entrega_multiple_encomienda_command_tasaVirtual").val("");$("#entrega_multiple_encomienda_command_totalPagoVirtual").val("");$("#entrega_multiple_encomienda_command_vueltoVirtual").val("");$("#entrega_multiple_encomienda_command_efectivoVirtual").val("");entregaMultipleEncomiendas.calcularImporteTotalMonedaBase()},changeMonedaPago:function(){var b=$("#entrega_multiple_encomienda_command_monedaPagoVirtual").val();$("#entrega_multiple_encomienda_command_tasaVirtual").val("");$("#entrega_multiple_encomienda_command_totalPagoVirtual").val("");$("#entrega_multiple_encomienda_command_vueltoVirtual").val("");if(b===null||$.trim(b)===""){$("#prependTotalPagoVirtual").text("???");$("#prependEfectivoVirtual").text("???")}else{if($.trim(b)==="1"){$("#prependTotalPagoVirtual").text("GTQ");$("#prependEfectivoVirtual").text("GTQ");entregaMultipleEncomiendas.changeEfectivo()}else{var c=$("#entrega_multiple_encomienda_command_totalNetoVirtual").val();var a=$("#entrega_multiple_encomienda_command_monedaPagoVirtual").val();$("#prependTotalPagoVirtual").text("GTQ");$("#prependEfectivoVirtual").text("GTQ");if(c!==null&&$.trim(c)!==""&&a!==null&&$.trim(a)!==""){core.request({url:$("#pathCalcularImporteTotalPorMoneda").attr("value"),method:"POST",extraParams:{totalNeto:c,idMoneda:a},dataType:"json",async:true,successCallback:function(e){if(e.error&&$.trim(e.error)!==""){var d=$('.modal[style^="display: block;"]');d.hide();alert(e.error,function(){d.show()})}else{$("#prependTotalPagoVirtual").text(e.sigla);$("#prependEfectivoVirtual").text(e.sigla);$("#entrega_multiple_encomienda_command_tasaVirtual").val(e.tasa);$("#entrega_multiple_encomienda_command_totalPagoVirtual").val(e.total);entregaMultipleEncomiendas.changeEfectivo()}}})}}}entregaMultipleEncomiendas.checkBloque3()},changeEfectivo:function(){var f=$("#entrega_multiple_encomienda_command_monedaPagoVirtual").val();$("#entrega_multiple_encomienda_command_vueltoVirtual").val("");var b=$("#entrega_multiple_encomienda_command_efectivoVirtual").val();if(!$.isNumeric(b)){$("#entrega_multiple_encomienda_command_efectivoVirtual").val("");return}else{b=parseFloat(b).toFixed(2);$("#entrega_multiple_encomienda_command_efectivoVirtual").val(b)}if($.trim(f)==="1"){var g=$("#entrega_multiple_encomienda_command_totalNetoVirtual").val();var c=b-parseFloat(g);c=parseFloat(c).toFixed(2);if(c===0){$("#entrega_multiple_encomienda_command_vueltoVirtual").val(0)}else{if(c<0){var e=$('.modal[style^="display: block;"]');e.hide();alert("El efectivo no alcanza, como mínimo son:"+g+".",function(){e.show();$("#entrega_multiple_encomienda_command_efectivoVirtual").val(g);$("#entrega_multiple_encomienda_command_vueltoVirtual").val(0)})}else{$("#entrega_multiple_encomienda_command_vueltoVirtual").val(c)}}}else{var d=$("#entrega_multiple_encomienda_command_totalPagoVirtual").val();var c=b-parseFloat(d);c=parseFloat(c).toFixed(2);if(c===0){$("#entrega_multiple_encomienda_command_vueltoVirtual").val(0)}else{if(c<0){var e=$('.modal[style^="display: block;"]');e.hide();alert("El efectivo no alcanza, como mínimo son:"+d+".",function(){e.show();$("#entrega_multiple_encomienda_command_efectivoVirtual").val(d);$("#entrega_multiple_encomienda_command_vueltoVirtual").val(0)})}else{var a=$("#entrega_multiple_encomienda_command_monedaPagoVirtual").val();if(a!==null&&$.trim(a)!==""){core.request({url:$("#pathCalcularImporteTotalPorMoneda").attr("value"),method:"POST",extraParams:{totalNeto:c,idMoneda:a,dir:false},dataType:"json",async:true,successCallback:function(i){if(i.error&&$.trim(i.error)!==""){var h=$('.modal[style^="display: block;"]');h.hide();alert(i.error,function(){h.show();$("#entrega_multiple_encomienda_command_efectivoVirtual").val(d);$("#entrega_multiple_encomienda_command_vueltoVirtual").val(0)})}else{$("#entrega_multiple_encomienda_command_vueltoVirtual").val(i.total)}}})}}}}}};
pendientesEntregaEncomiendas={funcionesAddOnload:function(){this._init();this._conectEvents()},_init:function(){$("#pendiente_entrega_command_estacion").select2({allowClear:$("#pendiente_entrega_command_estacion option[value='']").length===1});$("#pendiente_entrega_command_estacion").select2("readonly",($("#pendiente_entrega_command_estacion").attr("readonly")==="readonly"));$("#pendiente_entrega_command_empresa").select2({allowClear:$("#pendiente_entrega_command_empresa option[value='']").length===1});$("#pendiente_entrega_command_empresa").select2("readonly",($("#pendiente_entrega_command_empresa").attr("readonly")==="readonly"));$("#pendiente_entrega_command_cliente").select2({minimumInputLength:1,allowClear:true,ajax:{url:$("#pendiente_entrega_command_cliente").data("pathlistarclientespaginando"),dataType:"json",type:"GET",data:function(a,b){return{term:a,page_limit:5}},results:function(b,a){return{results:b.options}}}});$("#pendiente_entrega_command_fecha").datepicker({format:"dd/mm/yyyy",startDate:"-180d",endDate:"d",todayBtn:true,language:"es",autoclose:true,todayHighlight:true});$("#pendiente_entrega_command_serieFactura").select2({allowClear:false,data:[]});pendientesEntregaEncomiendas.buscarDatos()},_conectEvents:function(){$("#cancelar").click(function(a){a.preventDefault();a.stopPropagation();confirm("¿Está seguro que desea cancelar la operación?",function(b){if(b===true){core.getPageForMenu($("#cancelar").attr("href"))}})});$("#pendiente_entrega_command_estacion").on("change",pendientesEntregaEncomiendas.buscarDatos);$("#pendiente_entrega_command_empresa").on("change",pendientesEntregaEncomiendas.buscarDatos);$("#aceptar").click(pendientesEntregaEncomiendas.clickAceptar);$("#addCliente").click(function(a){frondend.loadSubPage(a,$(this),function(c){var b=$("#pendiente_entrega_command_cliente");if(c!==""){core.request({url:b.data("pathlistarclientespaginando"),type:"POST",dataType:"json",async:false,extraParams:{id:c},successCallback:function(d){if(d.options&&d.options[0]){$("#pendiente_entrega_command_cliente").select2("data",d.options[0])}}})}},{confirmarOperacion:false})});$("#updateCliente").click(function(a){frondend.loadSubPage(a,$(this),function(){var b=$("#pendiente_entrega_command_cliente");var c=b.val();if(c!==""){core.request({url:b.data("pathlistarclientespaginando"),type:"POST",dataType:"json",async:false,extraParams:{id:c},successCallback:function(d){if(d.options&&d.options[0]){$("#pendiente_entrega_command_cliente").select2("data",d.options[0])}}})}})});$("#seachCliente").click(function(a){frondend.loadSubPage(a,$(this),function(c){if(c!==""){var b=$("#pendiente_entrega_command_cliente");core.request({url:b.data("pathlistarclientespaginando"),type:"POST",dataType:"json",async:false,extraParams:{id:c},successCallback:function(d){if(d.options&&d.options[0]){$("#pendiente_entrega_command_cliente").select2("data",d.options[0])}}})}})});$("#pendiente_entrega_command_serieFactura").on("change",function(){console.debug("serieFacturaVirtual-init");var b=$("#pendiente_entrega_command_serieFactura").select2("val");var a=$("#pendiente_entrega_command_serieFactura").select2("data").idEmpresa;sessionStorage.setItem("sist_last_id_serie_factura_enco_"+a,b)})},buscarDatos:function(c){console.debug("buscarDatos-init");$("#encomiendasBody").find("tr").not("#encomiendasVacioTR").remove();$("#encomiendasBody").find("#encomiendasVacioTR").show();$("#pendiente_entrega_command_serieFactura").select2({data:[]});$("#pendiente_entrega_command_importeTotal").val("");$("#pendiente_entrega_command_numeroFactura").val("");var b=$("#pendiente_entrega_command_estacion").val();var a=$("#pendiente_entrega_command_empresa").val();if(b!==null&&$.trim(b)!==""&&a!==null&&$.trim(a)!==""){core.request({url:$("#pathListarEncomiendasPendientesEntrega").attr("value"),method:"POST",extraParams:{estacion:b,empresa:a},dataType:"json",async:false,successCallback:function(g){console.debug(g);var d=g.encomiendas;var f=$("#pathConsultarEncomienda").val();$.each(d,function(){$("#encomiendasBody").find("#encomiendasVacioTR").hide();var h=$("<tr id='E"+this.id+"'><td class='center'><a class='btn'>"+this.id+"</a></td><td class='center inputCheckbox'><input data-valor='"+this.id+"' data-importe='"+this.importe+"' type='checkbox'></td><td class='center'>"+this.empresa+"</td><td class='center'>"+this.fecha+"</td><td class='center'>"+this.doc+"</td><td class='center'>"+this.importe+"</td><td class='center'>"+this.desc+"</td></tr>");$("#encomiendasBody").append(h);h.val(this.id);h.find("a").attr("href",f);h.find("a").data("index","E"+this.id);h.find("a").data("title","Consultar Encomienda");h.find("a").data("fullscreen",true);h.find("a").click(frondend.loadSubPage)});$(".inputCheckbox").find("input").bind("click",pendientesEntregaEncomiendas.totalizar);pendientesEntregaEncomiendas.totalizar();var e=g.optionSeriesFacturas;if(e){$("#pendiente_entrega_command_serieFactura").select2({allowClear:false,data:{results:e}});if(e.length>0&&e[0]){$("#pendiente_entrega_command_serieFactura").select2("val",e[0].id)}}}})}else{pendientesEntregaEncomiendas.totalizar()}},syncronizarLista:function(c){var a=[];var b=$(".inputCheckbox").find("input");b.each(function(d,f){var e=$(f).prop("checked");if(e){a.push($(f).data("valor"))}});$("#pendiente_entrega_command_listaIdEncomiendas").val(JSON.stringify(a))},totalizar:function(){console.debug("totalizar-init");var b=0;var a=$(".inputCheckbox").find("input");a.each(function(c,e){var d=$(e).prop("checked");if(d){b+=core.customParseFloat($(e).data("importe"))}});$("#pendiente_entrega_command_importeTotal").val(b)},clickAceptar:function(b){console.debug("clickAceptar-init");b.preventDefault();b.stopPropagation();var a=$("#encomiendaPendienteEntrega");if(core.customValidateForm(a)===true){pendientesEntregaEncomiendas.syncronizarLista();$(a).ajaxSubmit({target:a.attr("action"),type:"POST",dataType:"html",cache:false,async:false,beforeSubmit:function(){core.showLoading({showLoading:true})},error:function(){core.hideLoading({showLoading:true})},success:function(c){core.hideLoading({showLoading:true});if(!core.procesarRespuestaServidor(c)){alert("Operación realizada satisfactoriamente.",function(){pendientesEntregaEncomiendas.buscarDatos()})}}})}}};
pendientesEnvioEncomiendas={funcionesAddOnload:function(){this._init();this._conectEvents()},_init:function(){$("#pendiente_envio_command_estacion").select2({allowClear:$("#pendiente_envio_command_estacion option[value='']").length===1});$("#pendiente_envio_command_estacion").select2("readonly",($("#pendiente_envio_command_estacion").attr("readonly")==="readonly"));pendientesEnvioEncomiendas.buscarDatos()},_conectEvents:function(){$("#cancelar").click(function(a){a.preventDefault();a.stopPropagation();confirm("¿Está seguro que desea cancelar la operación?",function(b){if(b===true){core.getPageForMenu($("#cancelar").attr("href"))}})});$("#pdf").data("index","pendiente_envio_command_estacion");$("#pdf").data("autoopenfile","PDF");$("#pdf").click(frondend.loadSubPage);$("#pendiente_envio_command_estacion").on("change",pendientesEnvioEncomiendas.buscarDatos)},buscarDatos:function(b){console.debug("buscarDatos-init");$("#encomiendasBody").find("tr").not("#encomiendasVacioTR").remove();$("#encomiendasBody").find("#encomiendasVacioTR").show();var a=$("#pendiente_envio_command_estacion").val();if(a!==null&&$.trim(a)!==""){core.request({url:$("#pathListarEncomiendasPendientesPorEstacion").attr("value"),method:"POST",extraParams:{estacion:a},dataType:"json",async:false,successCallback:function(e){console.debug(e);var c=e.encomiendas;var d=$("#pathConsultarEncomienda").val();$.each(c,function(){console.debug(this);$("#encomiendasBody").find("#encomiendasVacioTR").hide();var f=$("<tr id='EN"+this.id+"'><td class='center'><a class='id btn'>"+this.id+"</a></td><td class='center'>"+this.empresa+"</td><td class='center'>"+this.fecha+"</td><td class='center'>"+this.doc+"</td><td class='center'><a class='ruta btn' data-codigoruta='"+this.codigoPrimeraRuta+"'data-idestacionorigen='"+this.idEstacionOrigen+"'data-idestacionprimerdestino='"+this.idEstacionPrimerDestino+"'data-idencomienda='"+this.id+"' >"+this.codigoPrimeraRuta+"</a><BR>"+this.nombrePrimeraRuta+"</td><td class='center'>"+this.proxDestino+"</td><td class='center'>"+this.desc+"</td></tr>");f.val(this.id);f.find("a.id").attr("href",d);f.find("a.id").data("index","EN"+this.id);f.find("a.id").data("title","Consultar Encomienda");f.find("a.id").data("fullscreen",true);f.find("a.id").click(frondend.loadSubPage);if(this.puedeModificar){f.find("a.ruta").click(pendientesEnvioEncomiendas.modificarRuta)}else{f.find("a.ruta").addClass("disabled")}console.debug(f);$("#encomiendasBody").append(f)})}})}},buscarDatosById:function(a){console.debug("buscarDatosById-init");if(a!==null&&$.trim(a)!==""){core.request({url:$("#pathGetEncomiendaPendientesById").attr("value"),method:"POST",extraParams:{idEncomienda:a},dataType:"json",async:false,successCallback:function(e){console.debug(e);var c=e.encomienda;if(!c||c===null){alert("No se pudo obtener la encomienda con identificador : "+a+".");return}var d=$("#pathConsultarEncomienda").val();console.debug(c);var b=$("<tr id='EN"+c.id+"'><td class='center'><a class='id btn'>"+c.id+"</a></td><td class='center'>"+c.empresa+"</td><td class='center'>"+c.fecha+"</td><td class='center'>"+c.doc+"</td><td class='center'><a class='ruta btn' data-codigoruta='"+c.codigoPrimeraRuta+"'data-idestacionorigen='"+c.idEstacionOrigen+"'data-idestacionprimerdestino='"+c.idEstacionPrimerDestino+"'data-idencomienda='"+c.id+"' >"+c.codigoPrimeraRuta+"</a><BR>"+c.nombrePrimeraRuta+"</td><td class='center'>"+c.proxDestino+"</td><td class='center'>"+c.desc+"</td></tr>");b.val(c.id);b.find("a.id").attr("href",d);b.find("a.id").data("index","EN"+c.id);b.find("a.id").data("title","Consultar Encomienda");b.find("a.id").data("fullscreen",true);b.find("a.id").click(frondend.loadSubPage);if(c.puedeModificar){b.find("a.ruta").click(pendientesEnvioEncomiendas.modificarRuta)}else{b.find("a.ruta").addClass("disabled")}console.debug(b);$("#encomiendasBody").find("#EN"+a).replaceWith(b)}})}},modificarRuta:function(b){console.debug("modificarRuta-init");b.preventDefault();b.stopPropagation();var a=$(this);core.request({url:$("#pathGetRutasAlternas").prop("value"),type:"POST",dataType:"json",async:false,extraParams:{idEstacionOrigen:a.data("idestacionorigen"),idEstacionDestino:a.data("idestacionprimerdestino"),idEncomienda:a.data("idencomienda")},successCallback:function(d){var c=d.optionRutas;$("#ruta").select2({allowClear:false,data:{results:c}});$("#ruta").select2("val",a.data("codigoruta"));core.showMessageDialog({title:"Modificar Ruta - Empresa",selector:$("#modificarRutaDIV"),removeOnClose:false,uniqid:false,buttons:{Aceptar:{click:function(){console.debug("clic...");var e=a.data("idencomienda");console.debug("IdEncomienda: "+e);var g=$("#ruta").val();console.debug("Ruta: "+g);var f=this;core.request({url:$("#encomiendaPendienteEnvio").attr("action"),method:"POST",extraParams:{idEncomienda:e,codigoRuta:g},dataType:"html",async:false,successCallback:function(h){console.debug(h);if(!core.procesarRespuestaServidor(h)){f.dialog2("close");alert("Operación realizada satisfactoriamente.",function(){pendientesEnvioEncomiendas.buscarDatosById(e)})}}})},primary:true,type:"info"},Cancelar:function(){this.dialog2("close")}}})}})}};
registrarEncomiendaEspecial={funcionesAddOnload:function(){this._init();this._conectEvents()},_init:function(){},_conectEvents:function(){$("#cancelar").click(function(a){a.preventDefault();a.stopPropagation();confirm("¿Está seguro que desea cancelar la operación?",function(b){if(b===true){core.getPageForMenu($("#cancelar").attr("href"))}})});$("#aceptar").click(registrarEncomiendaEspecial.clickAceptar)},clickAceptar:function(b){b.preventDefault();b.stopPropagation();var a=$("#encomiendaForm");if(core.customValidateForm(a)===true){$(a).ajaxSubmit({target:a.attr("action"),type:"POST",dataType:"html",cache:false,async:false,beforeSubmit:function(){core.showLoading({showLoading:true})},error:function(){core.hideLoading({showLoading:true})},success:function(c){core.hideLoading({showLoading:true});if(!core.procesarRespuestaServidor(c)){alert("Operación realizada satisfactoriamente.",function(){core.getPageForMenu(a.attr("action"))})}}})}}};
perfil={funcionesAddOnload:function(){this._init();this._conectEvents()},_init:function(){$("#cambiarContrasena").click(frondend.loadSubPage);$("#cambiarEstacion").click(function(a){frondend.loadSubPage(a,$(this),function(b){$("#infoEstacionUsuario").text(b);$("a.perfil").click()})})},_conectEvents:function(){}};
configurarTiempo={funcionesAddOnload:function(){this._init();this._conectEvents()},_init:function(){$("#configurar_tiempo_command_ruta").select2({allowClear:true});$("#configurar_tiempo_command_claseBus").select2({allowClear:true})},_conectEvents:function(){$("#configurar_tiempo_command_ruta").on("change",configurarTiempo.loadTiempos);$("#configurar_tiempo_command_claseBus").on("change",configurarTiempo.loadTiempos);$("#cancelar").click(function(a){a.preventDefault();a.stopPropagation();confirm("¿Está seguro que desea cancelar la operación?",function(b){if(b===true){core.getPageForMenu($("#cancelar").attr("href"))}})});$("#aceptar").click(configurarTiempo.clickAceptar)},clickAceptar:function(b){b.preventDefault();b.stopPropagation();var a=$("#configurarTiempoForm");if(core.customValidateForm(a)===true){configurarTiempo.syncData();$(a).ajaxSubmit({target:a.attr("action"),type:"POST",dataType:"html",cache:false,async:false,beforeSubmit:function(){core.showLoading({showLoading:true})},error:function(){core.hideLoading({showLoading:true})},success:function(c){core.hideLoading({showLoading:true});if(!core.procesarRespuestaServidor(c)){alert("Operación realizada satisfactoriamente.",function(){configurarTiempo.loadTiempos()})}}})}},syncData:function(){var b=[];var a=$("#estacionesBody").find("input");$.each(a,function(c,d){d=$(d);var e=d.parent().parent();b.push({id:e.data("id"),minutos:d.val()})});$("#configurar_tiempo_command_listaItems").val(JSON.stringify(b))},loadTiempos:function(){console.log("loadTiempos-init");$("#estacionesBody").find("tr").not("#estacionesVacioTR").remove();$("#estacionesBody").find("#estacionesVacioTR").show();var a=$("#configurar_tiempo_command_ruta").val();var b=$("#configurar_tiempo_command_claseBus").val();if(a!==null&&$.trim(a)!==""&&b!==null&&$.trim(b)!==""){core.request({url:$("#pathListarTiempos").prop("value"),type:"POST",dataType:"json",async:false,extraParams:{ruta:a,claseBus:b},successCallback:function(c){var d=c.optionsEstaciones;if(d&&d.length!==0){$("#estacionesBody").find("#estacionesVacioTR").hide();console.log("renderEstaciones: "+d.length+" items");jQuery.each(d,function(){var e=$("<tr class='trSelect' data-id='"+this.id+"'><td>"+this.text+"</td><td class='minutoTD'><input type='number' min=0 max=9999 value='"+this.minutes+"' /></td></tr>");$("#estacionesBody").append(e)})}}})}}};
updateuser={funcionesAddOnload:function(){this._init();this._conectEvents()},_init:function(){if(!core.isMovil()){$("#update_user_user").select2({allowClear:$("#update_user_user option[value='']").length===1});$("#update_user_user").select2("readonly",($("#update_user_user").attr("readonly")==="readonly"));$("#update_user_estacion").select2({allowClear:$("#update_user_estacion option[value='']").length===1});$("#update_user_estacion").select2("readonly",($("#update_user_estacion").attr("readonly")==="readonly"))}},_conectEvents:function(){$("#cancelar").click(function(a){a.preventDefault();a.stopPropagation();confirm("¿Está seguro que desea cancelar la operación?",function(b){if(b===true){core.getPageForMenu($("#cancelar").attr("href"))}})});$("#aceptar").click(updateuser.clickAceptar)},clickAceptar:function(b){b.preventDefault();b.stopPropagation();var a=$("form.form");if(core.customValidateForm(a)===true){$(a).ajaxSubmit({target:a.attr("action"),type:"POST",dataType:"html",cache:false,async:false,beforeSubmit:function(){core.showLoading({showLoading:true})},error:function(){core.hideLoading({showLoading:true})},success:function(c){core.hideLoading({showLoading:true});if(!core.procesarRespuestaServidor(c)){alert("Operación realizada satisfactoriamente.",function(){core.getPageForMenu($("#cancelar").attr("href"))})}}})}},};
frondendFacturas={funcionesAddOnload:function(){this._init();this._conectEvents()},_init:function(){$("#fechaEmision").datepicker({format:"dd/mm/yyyy",todayBtn:true,language:"es",autoclose:true,todayHighlight:true});$("#fechaVencimiento").datepicker({format:"dd/mm/yyyy",todayBtn:true,language:"es",autoclose:true,todayHighlight:true});$("#grid").flexigrid({url:$("#grid").data("url"),dataType:"json",singleSelect:true,query:"",rpOptions:[5,10,15,20,25,30,40,50],colModel:[{display:"ID",name:"id",width:70,sortable:true,align:"center"},{display:"Serie",name:"serieValor",width:100,sortable:false,align:"center"},{display:"Sigla",name:"serie",width:60,sortable:false,align:"center",hide:true},{display:"Valor",name:"valor",width:80,sortable:false,align:"center",hide:true},{display:"Servicio",name:"servicio",width:85,sortable:false,align:"left"},{display:"Estación",name:"estacion",width:150,sortable:false,align:"left"},{display:"Empresa",name:"empresa",width:100,sortable:false,align:"left"},{display:"Mínimo",name:"minimo",width:80,sortable:false,align:"center"},{display:"Máximo",name:"maximo",width:80,sortable:false,align:"center"},{display:"Emisión",name:"fechaEmision",width:100,sortable:true,align:"center"},{display:"Vencimiento",name:"fechaVencimiento",width:100,sortable:true,align:"center"},{display:"Activo",name:"activo",width:50,sortable:false,align:"center"},{display:"Impresora",name:"impresora",width:100,sortable:false,align:"left"}],usepager:true,useRp:true,rp:15,showTableToggleBtn:false})},_conectEvents:function(){$("#linkFilter").click(frondend.linkFilter);$("li a.menuFacturas").not("a[data-print=true]").click(frondend.loadSubPage)}};
crearSeriesFactura={funcionesAddOnload:function(){this._init();this._conectEvents()},_init:function(){$("#series_factura_command_estacion").select2({allowClear:true});$("#series_factura_command_empresa").select2({allowClear:true});$("#series_factura_command_servicioEstacion").select2({allowClear:true});$("#series_factura_command_impresora").select2({allowClear:true});$("#series_factura_command_fechaEmisionResolucionFactura").datepicker({format:"dd-mm-yyyy",startDate:"-10y",endDate:"+10y",todayBtn:true,language:"es",autoclose:true,todayHighlight:true});$("#series_factura_command_fechaVencimientoResolucionFactura").datepicker({format:"dd-mm-yyyy",startDate:"-10y",endDate:"+10y",todayBtn:true,language:"es",autoclose:true,todayHighlight:true})},_conectEvents:function(){$("#cancelar").click(function(a){a.preventDefault();a.stopPropagation();confirm("¿Está seguro que desea cancelar la operación?",function(b){if(b===true){core.getPageForMenu($("#cancelar").attr("href"))}})});$("#aceptar").click(crearSeriesFactura.clickAceptar)},clickAceptar:function(b){b.preventDefault();b.stopPropagation();var a=$("#serieFacturaForm");if(core.customValidateForm(a)===true){$(a).ajaxSubmit({target:a.attr("action"),type:"POST",dataType:"html",cache:false,async:false,beforeSubmit:function(){core.showLoading({showLoading:true})},error:function(){core.hideLoading({showLoading:true})},success:function(c){core.hideLoading({showLoading:true});if(!core.procesarRespuestaServidor(c)){alert("Operación realizada satisfactoriamente.",function(){core.getPageForMenu($("#pathHomeSerieFactura").attr("value"))})}}})}}};
actualizarSeriesFactura={funcionesAddOnload:function(){this._init();this._conectEvents()},_init:function(){$("#series_factura_command_estacion").select2({allowClear:true});$("#series_factura_command_empresa").select2({allowClear:true});$("#series_factura_command_servicioEstacion").select2({allowClear:true});$("#series_factura_command_impresora").select2({allowClear:true});$("#series_factura_command_fechaEmisionResolucionFactura").datepicker({format:"dd-mm-yyyy",startDate:"-10y",endDate:"+10y",todayBtn:true,language:"es",autoclose:true,todayHighlight:true});$("#series_factura_command_fechaVencimientoResolucionFactura").datepicker({format:"dd-mm-yyyy",startDate:"-10y",endDate:"+10y",todayBtn:true,language:"es",autoclose:true,todayHighlight:true})},_conectEvents:function(){$("#cancelar").click(function(a){a.preventDefault();a.stopPropagation();confirm("¿Está seguro que desea cancelar la operación?",function(b){if(b===true){core.getPageForMenu($("#cancelar").attr("href"))}})});$("#aceptar").click(actualizarSeriesFactura.clickAceptar)},clickAceptar:function(b){b.preventDefault();b.stopPropagation();var a=$("#serieFacturaForm");if(core.customValidateForm(a)===true){$(a).ajaxSubmit({target:a.attr("action"),type:"POST",dataType:"html",cache:false,async:false,beforeSubmit:function(){core.showLoading({showLoading:true})},error:function(){core.hideLoading({showLoading:true})},success:function(c){core.hideLoading({showLoading:true});if(!core.procesarRespuestaServidor(c)){alert("Operación realizada satisfactoriamente.",function(){core.getPageForMenu($("#pathHomeSerieFactura").attr("value"))})}}})}}};
consultarSeriesFactura={funcionesAddOnload:function(){this._init();this._conectEvents()},_init:function(){if(!core.isMovil()){$("#consultar_serie_factura_command_estacion").select2({allowClear:$("#consultar_serie_factura_command_estacion option[value='']").length===1});$("#consultar_serie_factura_command_estacion").select2("readonly",($("#consultar_serie_factura_command_estacion").attr("readonly")==="readonly"))}},_conectEvents:function(){$("#consultar_serie_factura_command_estacion").on("change",consultarSeriesFactura.loadFacturas)},loadFacturas:function(){var a=$("#consultar_serie_factura_command_estacion").val();if(a===null||$.trim(a)===""){$("#facturasBody").find("tr").not("#trNoExitenFacturas").remove();$("#facturasBody").find("#trNoExitenFacturas").show()}else{core.request({url:$("#pathAjaxListarFacturas2").prop("value"),type:"POST",dataType:"json",async:false,extraParams:{estacion:a},successCallback:function(c){$("#facturasBody").find("tr").not("#trNoExitenFacturas").remove();var b=c.optionFacturas;if(b&&b.length>0){$("#facturasBody").find("#trNoExitenFacturas").hide();$.each(b,function(){var d=$("<tr><td>"+this.srf+"</td><td>"+this.min+"</td><td>"+this.max+"</td><td>"+this.emp+"</td><td>"+this.servicio+"</td><td>"+this.factEspecial+"</td><td>"+this.ping+"</td></tr>");$("#facturasBody").append(d)})}else{$("#facturasBody").find("#trNoExitenFacturas").show()}}})}}};
frondendAlquiler={funcionesAddOnload:function(){this._init();this._conectEvents()},_init:function(){$("#rangoFecha").daterangepicker({format:"DD/MM/YYYY",dateLimit:moment.duration(90,"d")});$("#grid").flexigrid({url:$("#grid").data("url"),dataType:"json",singleSelect:true,query:"",rpOptions:[5,10,15,20,25,30,40,50],colModel:[{display:"ID",name:"id",width:70,sortable:false,align:"center"},{display:"Fecha Inicial",name:"fechaInicial",width:100,sortable:false,align:"center"},{display:"Fecha Final",name:"fechaFinal",width:100,sortable:false,align:"center"},{display:"Empresa",name:"empresa",width:100,sortable:false,align:"center"},{display:"Bus",name:"bus",width:100,sortable:false,align:"center"},{display:"Piloto1",name:"piloto1",width:100,sortable:false,align:"left"},{display:"Piloto2",name:"piloto2",width:100,sortable:false,align:"left"},{display:"Estado",name:"estado",width:100,sortable:false,align:"center"},{display:"Importe",name:"importe",width:100,sortable:false,align:"left"},{display:"Descripción",name:"descripcion",width:200,sortable:false,align:"left"}],usepager:true,useRp:true,rp:15,showTableToggleBtn:false})},_conectEvents:function(){$("#linkFilter").click(frondend.linkFilter);$("li a.menuAlquiler").click(frondend.loadSubPage)}};
crearAlquiler={funcionesAddOnload:function(){this._init();this._conectEvents()},_init:function(){$("#crear_alquiler_command_rangoFecha").daterangepicker({format:"DD/MM/YYYY",dateLimit:moment.duration(90,"d")});$("#crear_alquiler_command_empresa").select2({allowClear:$("#crear_alquiler_command_empresa option[value='']").length===1});$("#crear_alquiler_command_empresa").select2("readonly",($("#crear_alquiler_command_empresa").attr("readonly")==="readonly"));$("#crear_alquiler_command_piloto").select2({allowClear:$("#crear_alquiler_command_piloto option[value='']").length===1});$("#crear_alquiler_command_piloto").select2("readonly",($("#crear_alquiler_command_piloto").attr("readonly")==="readonly"));$("#crear_alquiler_command_pilotoAux").select2({allowClear:$("#crear_alquiler_command_pilotoAux option[value='']").length===1});$("#crear_alquiler_command_pilotoAux").select2("readonly",($("#crear_alquiler_command_pilotoAux").attr("readonly")==="readonly"));$("#crear_alquiler_command_bus").select2({allowClear:$("#crear_alquiler_command_bus option[value='']").length===1});$("#crear_alquiler_command_bus").select2("readonly",($("#crear_alquiler_command_bus").attr("readonly")==="readonly"))},_conectEvents:function(){$("#cancelar").click(function(a){a.preventDefault();a.stopPropagation();confirm("¿Está seguro que desea cancelar la operación?",function(b){if(b===true){core.getPageForMenu($("#cancelar").attr("href"))}})});$("#aceptar").click(crearAlquiler.clickAceptar)},clickAceptar:function(b){b.preventDefault();b.stopPropagation();var a=$("#alquilerForm");if(core.customValidateForm(a)===true){$(a).ajaxSubmit({target:a.attr("action"),type:"POST",dataType:"html",cache:false,async:false,beforeSubmit:function(){core.showLoading({showLoading:true})},error:function(){core.hideLoading({showLoading:true})},success:function(c){core.hideLoading({showLoading:true});if(!core.procesarRespuestaServidor(c)){alert("Operación realizada satisfactoriamente.",function(){core.getPageForMenu($("#pathHomeAlquiler").attr("value"))})}}})}}};
actualizarAlquiler={funcionesAddOnload:function(){this._init();this._conectEvents()},_init:function(){$("#actualizar_alquiler_command_rangoFecha").daterangepicker({format:"DD/MM/YYYY",dateLimit:moment.duration(90,"d")});$("#actualizar_alquiler_command_empresa").select2({allowClear:$("#actualizar_alquiler_command_empresa option[value='']").length===1});$("#actualizar_alquiler_command_empresa").select2("readonly",($("#actualizar_alquiler_command_empresa").attr("readonly")==="readonly"));$("#actualizar_alquiler_command_piloto").select2({allowClear:$("#actualizar_alquiler_command_piloto option[value='']").length===1});$("#actualizar_alquiler_command_piloto").select2("readonly",($("#actualizar_alquiler_command_piloto").attr("readonly")==="readonly"));$("#actualizar_alquiler_command_pilotoAux").select2({allowClear:$("#actualizar_alquiler_command_pilotoAux option[value='']").length===1});$("#actualizar_alquiler_command_pilotoAux").select2("readonly",($("#actualizar_alquiler_command_pilotoAux").attr("readonly")==="readonly"));$("#actualizar_alquiler_command_bus").select2({allowClear:$("#actualizar_alquiler_command_bus option[value='']").length===1});$("#actualizar_alquiler_command_bus").select2("readonly",($("#actualizar_alquiler_command_bus").attr("readonly")==="readonly"))},_conectEvents:function(){$("#cancelar").click(function(a){a.preventDefault();a.stopPropagation();confirm("¿Está seguro que desea cancelar la operación?",function(b){if(b===true){core.getPageForMenu($("#cancelar").attr("href"))}})});$("#aceptar").click(actualizarAlquiler.clickAceptar)},clickAceptar:function(b){b.preventDefault();b.stopPropagation();var a=$("#alquilerForm");if(core.customValidateForm(a)===true){$(a).ajaxSubmit({target:a.attr("action"),type:"POST",dataType:"html",cache:false,async:false,beforeSubmit:function(){core.showLoading({showLoading:true})},error:function(){core.hideLoading({showLoading:true})},success:function(c){core.hideLoading({showLoading:true});if(!core.procesarRespuestaServidor(c)){alert("Operación realizada satisfactoriamente.",function(){core.getPageForMenu($("#pathHomeAlquiler").attr("value"))})}}})}}};
consultarAlquiler={funcionesAddOnload:function(){this._init();this._conectEvents()},_init:function(){$("#consultar_alquiler_command_rangoFecha").daterangepicker({format:"DD/MM/YYYY",dateLimit:moment.duration(90,"d")});$("#consultar_alquiler_command_empresa").select2({allowClear:$("#consultar_alquiler_command_empresa option[value='']").length===1});$("#consultar_alquiler_command_empresa").select2("readonly",($("#consultar_alquiler_command_empresa").attr("readonly")==="readonly"));$("#consultar_alquiler_command_piloto").select2({allowClear:$("#consultar_alquiler_command_piloto option[value='']").length===1});$("#consultar_alquiler_command_piloto").select2("readonly",($("#consultar_alquiler_command_piloto").attr("readonly")==="readonly"));$("#consultar_alquiler_command_pilotoAux").select2({allowClear:$("#consultar_alquiler_command_pilotoAux option[value='']").length===1});$("#consultar_alquiler_command_pilotoAux").select2("readonly",($("#consultar_alquiler_command_pilotoAux").attr("readonly")==="readonly"));$("#consultar_alquiler_command_bus").select2({allowClear:$("#consultar_alquiler_command_bus option[value='']").length===1});$("#consultar_alquiler_command_bus").select2("readonly",($("#consultar_alquiler_command_bus").attr("readonly")==="readonly"))},_conectEvents:function(){$("#cancelar").click(function(a){a.preventDefault();a.stopPropagation();confirm("¿Está seguro que desea cancelar la operación?",function(b){if(b===true){core.getPageForMenu($("#cancelar").attr("href"))}})})}};
registrarDepositoAgencia={funcionesAddOnload:function(){this._init();this._conectEvents()},_init:function(){if(!core.isMovil()){$("#registrar_deposito_agencia_command_estacion").select2({allowClear:$("#registrar_deposito_agencia_command_estacion option[value='']").length===1});$("#registrar_deposito_agencia_command_estacion").select2("readonly",($("#registrar_deposito_agencia_command_estacion").attr("readonly")==="readonly"))}$("#registrar_deposito_agencia_command_fecha").datepicker({format:"dd/mm/yyyy",startDate:"-7d",endDate:"+7d",todayBtn:true,language:"es",autoclose:true,todayHighlight:true})},_conectEvents:function(){$("#cancelar").click(function(a){a.preventDefault();a.stopPropagation();confirm("¿Está seguro que desea cancelar la operación?",function(b){if(b===true){core.getPageForMenu($("#cancelar").attr("href"))}})});$("#aceptar").click(registrarDepositoAgencia.clickAceptar)},clickAceptar:function(b){b.preventDefault();b.stopPropagation();var a=$("#depositoAgenciaForm");if(core.customValidateForm(a)===true){$(a).ajaxSubmit({target:a.attr("action"),type:"POST",dataType:"html",cache:false,async:false,beforeSubmit:function(){core.showLoading({showLoading:true})},error:function(){core.hideLoading({showLoading:true})},success:function(c){core.hideLoading({showLoading:true});if(!core.procesarRespuestaServidor(c)){alert("Operación realizada satisfactoriamente.",function(){core.getPageForMenu($("#pathHomeDepositoAgencia").attr("value"))})}}})}}};
frondendDepositoAgencia={funcionesAddOnload:function(){this._init();this._conectEvents()},_init:function(){$("#rangoFecha").daterangepicker({format:"DD/MM/YYYY"});$("#grid").flexigrid({url:$("#grid").data("url"),dataType:"json",singleSelect:true,query:"",rpOptions:[5,10,15,20,25,30,40,50],colModel:[{display:"ID",name:"id",width:70,sortable:false,align:"center",hide:true},{display:"Fecha",name:"fecha",width:100,sortable:false,align:"center"},{display:"Agencia",name:"estacion",width:150,sortable:false,align:"center"},{display:"Estado",name:"estado",width:80,sortable:false,align:"center"},{display:"Importe",name:"importe",width:100,sortable:false,align:"left"},{display:"Aplica Bono",name:"aplicaBono",width:80,sortable:false,align:"left"},{display:"Boleta",name:"numeroBoleta",width:100,sortable:false,align:"left"},{display:"Creado",name:"fechaCreacion",width:100,sortable:false,align:"center"},{display:"Usuario",name:"usuarioCreacion",width:100,sortable:false,align:"left"},{display:"Observación",name:"observacion",width:200,sortable:false,align:"left",hide:true},{display:"Motivo Rechazo",name:"motivoRechazo",width:200,sortable:false,align:"left"}],usepager:true,useRp:true,rp:15,showTableToggleBtn:false})},_conectEvents:function(){$("#linkFilter").click(frondend.linkFilter);$("li a.menuDepositoAgencia").click(frondend.loadSubPage)}};
consultarSaldoAgencia={funcionesAddOnload:function(){this._init();this._conectEvents()},_init:function(){if(!core.isMovil()){$("#consultar_saldos_command_estacion").select2({allowClear:$("#consultar_saldos_command_estacion option[value='']").length===1});$("#consultar_saldos_command_estacion").select2("readonly",($("#consultar_saldos_command_estacion").attr("readonly")==="readonly"))}},_conectEvents:function(){$("#consultar_saldos_command_estacion").on("change",consultarSaldoAgencia.loadFacturas);$("#cancelar").click(function(a){a.preventDefault();a.stopPropagation();core.getPageForMenu($("#cancelar").attr("href"))})},loadFacturas:function(){var a=$("#consultar_saldos_command_estacion").val();if(a===null||$.trim(a)===""){$("#estado").val("");$("#saldo").val("0.00");$("#bono").val("0.00");$("#total").val("0.00");$("#totalDepositado").val("0.00")}else{core.request({url:$("#pathAjaxListarSaldosAgencias").prop("value"),type:"POST",dataType:"json",async:false,extraParams:{estacion:a},successCallback:function(b){$("#estado").val(b.estado);$("#saldo").val(b.saldo);$("#bono").val(b.bonif);$("#total").val(b.total);$("#totalDepositado").val(b.totalDepositado)}})}}};
frondendTarjetas={funcionesAddOnload:function(){this._init();this._conectEvents()},_init:function(){$("#rangoFecha").daterangepicker({format:"DD/MM/YYYY",dateLimit:moment.duration(90,"d")});$("#grid").flexigrid({url:$("#grid").data("url"),dataType:"json",singleSelect:true,query:"",rpOptions:[5,10,15,20,25,30,40,50],colModel:[{display:"ID",name:"id",width:80,sortable:false,align:"center",hide:true},{display:"Número",name:"numero",width:80,sortable:false,align:"center"},{display:"Salida",name:"salida",width:80,sortable:false,align:"center"},{display:"Fecha",name:"fecha",width:120,sortable:true,align:"center"},{display:"Ruta",name:"ruta",width:180,sortable:false,align:"left"},{display:"Empresa",name:"empresa",width:80,sortable:false,align:"center"},{display:"Estado",name:"estado",width:140,sortable:false,align:"center"},{display:"Cantidad",name:"cantidad",width:70,sortable:false,align:"center"},{display:"Fecha Creación",name:"fechaCreacion",width:100,sortable:true,align:"center"},{display:"Usuario Creación",name:"usuarioCreacion",width:100,sortable:true,align:"left"},{display:"Estación Creación",name:"estacionCreacion",width:100,sortable:true,align:"left"}],usepager:true,useRp:true,rp:15,height:320,showTableToggleBtn:false})},_conectEvents:function(){$("#linkFilter").click(frondend.linkFilter);$("li a.menuTarjetas").click(frondend.loadSubPage)}};
conciliarTarjeta={funcionesAddOnload:function(){this._init();this._conectEvents()},_init:function(){},_conectEvents:function(){$("#cancelar").click(function(a){a.preventDefault();a.stopPropagation();confirm("¿Está seguro que desea cancelar la operación?",function(b){if(b===true){core.getPageForMenu($("#cancelar").attr("href"))}})});$("#aceptar").click(conciliarTarjeta.clickAceptar);$("a.showSalidaDetails").click(conciliarTarjeta.showSalidaDetails);$("a.showTarjetaDetails").click(conciliarTarjeta.showTarjetaDetails);$("a.showDetails").click(conciliarTarjeta.showDetails);$("a.ponerEnRevision").click(conciliarTarjeta.ponerEnRevision);$("a.conciliarSuccess").click(conciliarTarjeta.conciliarSuccess);$("a.conciliarDiferencias").click(conciliarTarjeta.conciliarDiferencias)},conciliarDiferencias:function(b){console.log("conciliarDiferencias-init");b.preventDefault();b.stopPropagation();var a=$(this).parent().find("textarea.description").val();if(a===null||$.trim(a)===""){alert("Debe especificar una observación en la conciliación cuando existen diferencias.");return}core.request({url:$(this).attr("href"),type:"POST",dataType:"html",async:false,extraParams:{description:a},successCallback:function(c){if(!core.procesarRespuestaServidor(c)){alert("Operación realizada satisfactoriamente.",function(){core.getPageForMenu($("#pathConciliarTarjeta").attr("value"))})}}})},conciliarSuccess:function(a){console.log("conciliarSuccess-init");a.preventDefault();a.stopPropagation();core.request({url:$(this).attr("href"),type:"POST",dataType:"html",async:false,successCallback:function(b){if(!core.procesarRespuestaServidor(b)){alert("Operación realizada satisfactoriamente.",function(){core.getPageForMenu($("#pathConciliarTarjeta").attr("value"))})}}})},ponerEnRevision:function(a){console.log("ponerEnRevision-init");a.preventDefault();a.stopPropagation();core.request({url:$(this).attr("href"),type:"GET",dataType:"html",async:false,successCallback:function(b){if(!core.procesarRespuestaServidor(b)){alert("Operación realizada satisfactoriamente.",function(){core.getPageForMenu($("#pathConciliarTarjeta").attr("value"))})}}})},showTarjetaDetails:function(a){console.log("showTarjetaDetails-init");a.preventDefault();a.stopPropagation();core.request({url:$(this).attr("href"),type:"GET",dataType:"html",async:false,successCallback:function(b){if(!core.procesarRespuestaServidor(b)){console.debug(b);core.showMessageDialog({title:"Consultar Tarjeta",fullscreen:true,compact:true,text:b,defaultButtonOFF:true,buttons:{Cancelar:{primary:true,type:"info",click:function(){$("body").css("overflow-y","auto");this.dialog2("close")}}}})}}})},showSalidaDetails:function(a){console.log("showSalidaDetails-init");a.preventDefault();a.stopPropagation();core.request({url:$(this).attr("href"),type:"GET",dataType:"html",async:false,successCallback:function(b){if(!core.procesarRespuestaServidor(b)){console.debug(b);core.showMessageDialog({title:"Consultar Salida",fullscreen:true,compact:true,text:b,defaultButtonOFF:true,buttons:{Cancelar:{primary:true,type:"info",click:function(){$("body").css("overflow-y","auto");this.dialog2("close")}}}})}}})},showDetails:function(a){console.log("showDetails-init");a.preventDefault();a.stopPropagation();core.request({url:$(this).attr("href"),type:"GET",dataType:"html",async:false,successCallback:function(b){if(!core.procesarRespuestaServidor(b)){console.debug(b);core.showMessageDialog({title:"Detalles de Corte de Venta",fullscreen:true,compact:true,text:b,defaultButtonOFF:true,buttons:{Cancelar:{primary:true,type:"info",click:function(){$("body").css("overflow-y","auto");this.dialog2("close")}}}})}}})},clickAceptar:function(b){console.log("clickAceptar-init");b.preventDefault();b.stopPropagation();var a=$("#tarjetaForm");if(core.customValidateForm(a)===true){$(a).ajaxSubmit({target:a.attr("action"),type:"POST",dataType:"html",cache:false,async:false,beforeSubmit:function(){core.showLoading({showLoading:true})},error:function(){core.hideLoading({showLoading:true})},success:function(c){core.hideLoading({showLoading:true});if(!core.procesarRespuestaServidor(c)){alert("Operación realizada satisfactoriamente.",function(){core.getPageForMenu($("#pathHomeTarjeta").attr("value"))})}}})}}};
asignarTarjeta={funcionesAddOnload:function(){this._init();this._conectEvents()},_init:function(){asignarTarjeta.checkSelectedOption()},_conectEvents:function(){$("input[name='tarjeta_command[tipo]']:radio").change(function(){console.log("click");asignarTarjeta.checkSelectedOption();if($("#tarjeta_command_tipo_1").is(":checked")){$("#tarjeta_command_numero").val("")}})},checkSelectedOption:function(){if($("#tarjeta_command_tipo_1").is(":checked")){$("#numeroDiv").show();$("#numeroDiv span.sigla").text("M");$("#tarjeta_command_numero").prop("readonly",false)}else{if($("#tarjeta_command_tipo_2").is(":checked")){$("#numeroDiv").show();$("#numeroDiv span.sigla").text("A");$("#tarjeta_command_numero").val($("#tarjeta_command_salida").val());$("#tarjeta_command_numero").prop("readonly",true)}else{$("#numeroDiv").hide()}}}};
adicionarCorteVenta={keyCurrentStation:"",optionTarjetas:[],funcionesAddOnload:function(){this._init();this._conectEvents()},_init:function(){$("#adicionar_corte_venta_talonario_command_fecha").datepicker({format:"dd/mm/yyyy",startDate:"-10y",endDate:"d",todayBtn:true,language:"es",autoclose:true,todayHighlight:true});$("#adicionar_corte_venta_talonario_command_fecha").datepicker("setDate",new Date());$("#adicionar_corte_venta_talonario_command_estacionCreacion").select2();$("#adicionar_corte_venta_talonario_command_inspector").select2();var a=localStorage.getItem(adicionarCorteVenta.keyCurrentStation);if(a!==null&&$.trim(a)!==""){console.log("loading last key station: "+a);$("#adicionar_corte_venta_talonario_command_estacionCreacion").select2("val",a)}adicionarCorteVenta.loadData()},_conectEvents:function(){$("#cancelar").click(function(a){a.preventDefault();a.stopPropagation();confirm("¿Está seguro que desea cancelar la operación?",function(b){if(b===true){core.getPageForMenu($("#cancelar").attr("href"))}})});$("#aceptar").click(adicionarCorteVenta.clickAceptar);$("#adicionar_corte_venta_talonario_command_estacionCreacion").on("change",function(){var a=$("#adicionar_corte_venta_talonario_command_estacionCreacion").val();console.log("saving key station: "+a);localStorage.setItem(adicionarCorteVenta.keyCurrentStation,a)});$("#adicionar_corte_venta_talonario_command_tarjeta").on("change",adicionarCorteVenta.changeTarjeta);$("#adicionar_corte_venta_talonario_command_talonario").on("change",adicionarCorteVenta.changeTalonario)},clickAceptar:function(b){b.preventDefault();b.stopPropagation();var a=$("#corteVentaForm");if(core.customValidateForm(a)===true){$(a).ajaxSubmit({target:a.attr("action"),type:"POST",dataType:"html",cache:false,async:false,beforeSubmit:function(){core.showLoading({showLoading:true})},error:function(){core.hideLoading({showLoading:true})},success:function(c){core.hideLoading({showLoading:true});if(!core.procesarRespuestaServidor(c)){alert("Operación realizada satisfactoriamente.",function(){core.getPageForMenu(a.attr("action"))})}}})}},loadData:function(a){console.log("load data");core.request({url:$("#pathGetTarjetasRecientes").prop("value"),type:"GET",dataType:"json",async:true,extraParams:{},successCallback:function(b){console.debug(b.optionTarjetas);if(b.optionTarjetas){adicionarCorteVenta.optionTarjetas=b.optionTarjetas;$("#adicionar_corte_venta_talonario_command_tarjeta").select2({allowClear:true,data:{results:b.optionTarjetas}});$.each(adicionarCorteVenta.optionTarjetas,function(c,d){$.each(d.talonarios,function(e,f){this.text=this.min+" - "+this.max})})}$("#talonarioDiv").addClass("hidden");$("#corteVentaDiv").addClass("hidden")},error:function(){$("#adicionar_corte_venta_talonario_command_tarjeta").select2({allowClear:true,data:{results:[]}});$("#talonarioDiv").addClass("hidden");$("#corteVentaDiv").addClass("hidden")}})},changeTarjeta:function(b){console.log("changeTarjeta");var a=$("#adicionar_corte_venta_talonario_command_tarjeta").val();$("#corteVentaDiv").addClass("hidden");$("#talonarioDiv").addClass("hidden");var c=adicionarCorteVenta.findTarjetaInList(a);if(c!==null&&$.trim(c)!==""){console.debug(c);$("#talonarioDiv").removeClass("hidden");$("#adicionar_corte_venta_talonario_command_talonario").select2({allowClear:true,data:{results:c.talonarios}})}},changeTalonario:function(d){console.log("changeTalonario");$("#corteVentaDiv").addClass("hidden");var c=$("#adicionar_corte_venta_talonario_command_tarjeta").val();var f=adicionarCorteVenta.findTarjetaInList(c);if(f!==null){var b=$("#adicionar_corte_venta_talonario_command_talonario").val();var a=adicionarCorteVenta.findInList(b,f.talonarios);if(a!==null){$("#corteVentaDiv").removeClass("hidden");$("#adicionar_corte_venta_talonario_command_inicial").attr("min",a.min);$("#adicionar_corte_venta_talonario_command_inicial").attr("max",a.max);$("#adicionar_corte_venta_talonario_command_inicial").val(a.min);$("#adicionar_corte_venta_talonario_command_final").attr("min",a.min);$("#adicionar_corte_venta_talonario_command_final").attr("max",a.max);$("#adicionar_corte_venta_talonario_command_final").val(a.min);$("#adicionar_corte_venta_talonario_command_importeTotal").val(0)}}},findTarjetaInList:function(b){if(b===null||$.trim(b)===""){return null}var a=null;$.each(adicionarCorteVenta.optionTarjetas,function(c,d){if(d.id===b){a=d;return false}});return a},findInList:function(c,b){if(c===null||$.trim(c)===""){return null}var a=null;$.each(b,function(d,e){if(e.id===c){a=e;return false}});return a}};
actualizarCorteVenta={funcionesAddOnload:function(){this._init();this._conectEvents()},_init:function(){actualizarCorteVenta.renderItems()},_conectEvents:function(){$("#cancelar").click(function(a){a.preventDefault();a.stopPropagation();confirm("¿Está seguro que desea cancelar la operación?",function(b){if(b===true){core.getPageForMenu($("#cancelar").attr("href"))}})});$("#aceptar").click(actualizarCorteVenta.clickAceptar)},clickAceptar:function(c){console.debug("clickAceptar-init");c.preventDefault();c.stopPropagation();var a=[];var b=$("#actualizar_revision_corte_venta_talonario_command_listaItems").val();if(b!==null&&$.trim(b)!==""){a=JSON.parse(b)}$.each($("input.importe"),function(e,g){var h=$(g).attr("data-id");var f=actualizarCorteVenta.findInList(h,a);if(f!==null){f.importe=$(g).val()}});$("#actualizar_revision_corte_venta_talonario_command_listaItems").val(JSON.stringify(a));var d=$("#corteVentaTalonarioForm");if(core.customValidateForm(d)===true){$(d).ajaxSubmit({target:d.attr("action"),type:"POST",dataType:"html",cache:false,async:false,beforeSubmit:function(){core.showLoading({showLoading:true})},error:function(){core.hideLoading({showLoading:true})},success:function(e){core.hideLoading({showLoading:true});if(!core.procesarRespuestaServidor(e)){alert("Operación realizada satisfactoriamente.",function(){core.getPageForMenu($("#pathHomeCorteVentaTalonario").attr("value"))})}}})}},findInList:function(c,b){if(c===null||$.trim(c)===""){return null}var a=null;$.each(b,function(d,e){if(e.id===c){a=e;return false}});return a},renderItems:function(){console.log("renderItems-init");var c=$("#actualizar_revision_corte_venta_talonario_command_listaItems").val();if(c!==null&&$.trim(c)!==""){var b=JSON.parse(c);if(b.length>0){$("#listItemsBody > tr.emptyListDiv").addClass("hidden");var a=$("tr.prototype.hidden");$.each(b,function(d,f){var e=a.clone();e.removeClass("prototype");e.removeClass("hidden");e.find("td.numero").text(f.numero);e.find("input.importe").attr("data-id",f.id);e.find("input.importe").val(f.importe);$("#listItemsBody").append(e)})}}}};
frondendCorteVentaTalonario={funcionesAddOnload:function(){this._init();this._conectEvents()},_init:function(){$("#rangoFecha").daterangepicker({format:"DD/MM/YYYY",dateLimit:moment.duration(90,"d")});$("#grid").flexigrid({url:$("#grid").data("url"),dataType:"json",singleSelect:true,query:"",rpOptions:[5,10,15,20,25,30,40,50],colModel:[{display:"ID",name:"id",width:80,sortable:false,align:"center",hide:true},{display:"Tarjeta",name:"tarjeta",width:100,sortable:false,align:"center"},{display:"Fecha",name:"fecha",width:120,sortable:true,align:"center"},{display:"Inicio",name:"inicio",width:100,sortable:false,align:"center"},{display:"Fin",name:"fin",width:100,sortable:false,align:"center"},{display:"Cantidad",name:"cantidad",width:100,sortable:false,align:"center"},{display:"Estado",name:"estado",width:100,sortable:false,align:"center"}],usepager:true,useRp:true,rp:15,height:320,showTableToggleBtn:false})},_conectEvents:function(){$("#linkFilter").click(frondend.linkFilter);$("li a.menuCorteVentaTalonarios").click(frondend.loadSubPage)}};
frondendAutorizacionOperaciones={funcionesAddOnload:function(){this._init();this._conectEvents()},_init:function(){$("#rangoFecha").daterangepicker({format:"DD/MM/YYYY",startDate:core.modDate(-30),endDate:new Date(),dateLimit:moment.duration(6,"months")});$("#rangoFecha").data("daterangepicker").clickApply();$("#grid").flexigrid({url:$("#grid").data("url"),dataType:"json",singleSelect:true,query:"",rpOptions:[5,10,15,20,25,30,40,50],colModel:[{display:"ID",name:"id",width:60,sortable:false,align:"center"},{display:"Empresa",name:"empresa",width:90,sortable:false,align:"center"},{display:"Fecha",name:"fecha",width:110,sortable:false,align:"center"},{display:"Estación",name:"estacion",width:150,sortable:false,align:"left"},{display:"Boleto",name:"idBoleto",width:80,sortable:false,align:"center"},{display:"Tipo",name:"tipo",width:150,sortable:false,align:"left"},{display:"Estado",name:"estado",width:90,sortable:false,align:"left"},{display:"Usuario",name:"usuario",width:100,sortable:false,align:"left"},{display:"Motivo",name:"motivo",width:350,sortable:false,align:"left"}],usepager:true,useRp:true,rp:15,height:300,showTableToggleBtn:false})},_conectEvents:function(){$("#linkFilter").click(frondend.linkFilter);$("li a.menuAutorizacionOperaciones").click(frondend.loadSubPage)}};
desembarcarMovil={funcionesAddOnload:function(){this._init();this._conectEvents()},_init:function(){$("#zoom").slider({min:1,max:4,step:0.5,value:1});desembarcarMovil.initWebCam();$("#cameraNames").select2()},showErrorCamera:function(a,b){alert(b)},webcamFound:function(e,b,a,d,c){$("#cameraNames").html("");console.debug(e);$.each(e,function(f,g){$("#cameraNames").append($("<option></option>").val(f).html(g))});$("#cameraNames").select2("val",b);desembarcarMovil.findBarCode()},initWebCam:function(){var zoom=eval($("#zoom").slider("getValue").val());$("#webcam").scriptcam({path:"/cam/",width:320,height:240,useMicrophone:false,showMicrophoneErrors:false,onError:desembarcarMovil.showErrorCamera,onWebcamReady:desembarcarMovil.webcamFound,readBarCodes:"CODE_128",zoom:zoom})},_conectEvents:function(){$("#cancelar").click(function(a){a.preventDefault();a.stopPropagation();confirm("¿Está seguro que desea cancelar la operación?",function(b){if(b===true){core.getPageForMenu($("#cancelar").attr("href"))}})});$("#cameraNames").on("change",function(){$.scriptcam.changeCamera($("#cameraNames").val());desembarcarMovil.findBarCode()});$("#zoom").slider().on("slideStop",function(a){desembarcarMovil.initWebCam()})},timeFind:500,tempFunction:null,findBarCode:function(){tempFunction=setTimeout(function(){clearTimeout(tempFunction);var a=null;try{var a=$.scriptcam.getBarCode()}catch(b){return}console.debug(a);if(!a||a===null||$.trim(a)===""){$("#desembarcar_command_code").val("");desembarcarMovil.findBarCode()}else{$("#desembarcar_command_code").val(a);desembarcarMovil.desembarcarEncomienda(a)}},desembarcarMovil.timeFind)},desembarcarEncomienda:function(a){core.request({url:$("#movilWebForm").attr("action"),type:"POST",dataType:"json",showLoading:true,async:false,extraParams:{id:a},successCallback:function(c){var b=core.checkExistError(c);if(b===false){desembarcarMovil.findBarCode()}else{alert(b,function(){desembarcarMovil.findBarCode()})}}})}};
embarcarMovil={funcionesAddOnload:function(){this._init();this._conectEvents()},_init:function(){$("#zoom").slider({min:1,max:4,step:0.5,value:1});embarcarMovil.initWebCam();$("#cameraNames").select2();$("#embarcar_command_salida").select2()},showErrorCamera:function(a,b){alert(b)},webcamFound:function(e,b,a,d,c){$("#cameraNames").html("");$.each(e,function(f,g){$("#cameraNames").append($("<option></option>").val(f).html(g))});$("#cameraNames").select2("val",b);embarcarMovil.findBarCode()},initWebCam:function(){var zoom=eval($("#zoom").slider("getValue").val());$("#webcam").scriptcam({path:"/cam/",width:320,height:240,useMicrophone:false,showMicrophoneErrors:false,onError:embarcarMovil.showErrorCamera,onWebcamReady:embarcarMovil.webcamFound,readBarCodes:"CODE_128",zoom:zoom})},_conectEvents:function(){$("#cancelar").click(function(a){a.preventDefault();a.stopPropagation();confirm("¿Está seguro que desea cancelar la operación?",function(b){if(b===true){core.getPageForMenu($("#cancelar").attr("href"))}})});$("#cameraNames").on("change",function(){$.scriptcam.changeCamera($("#cameraNames").val());embarcarMovil.findBarCode()});$("#zoom").slider().on("slideStop",function(a){embarcarMovil.initWebCam()})},timeFind:500,tempFunction:null,findBarCode:function(){tempFunction=setTimeout(function(){clearTimeout(tempFunction);var a=null;try{var a=$.scriptcam.getBarCode()}catch(b){return}if(!a||a===null||$.trim(a)===""){$("#embarcar_command_code").val("");embarcarMovil.findBarCode()}else{$("#embarcar_command_code").val(a);embarcarMovil.embarcarEncomienda(a)}},embarcarMovil.timeFind)},embarcarEncomienda:function(a){core.request({url:$("#movilWebForm").attr("action"),type:"POST",dataType:"json",showLoading:true,async:false,extraParams:{id:a,salida:$("#embarcar_command_salida").val()},successCallback:function(c){var b=core.checkExistError(c);if(b===false){embarcarMovil.findBarCode()}else{alert(b,function(){embarcarMovil.findBarCode()})}}})}};
listarDesembarcarMovil={funcionesAddOnload:function(){this._init();this._conectEvents()},_init:function(){$("#listar_desembarcar_command_salida").select2({allowClear:false});$("#encomiedasGrid").flexigrid({url:$("#encomiedasGrid").data("url"),dataType:"json",singleSelect:true,query:listarDesembarcarMovil.getQueryString(),rpOptions:[100],colModel:[{display:"ID",name:"id",width:70,sortable:false,align:"center"},{display:"Grupo",name:"idPadre",width:100,sortable:false,align:"center"},{display:"Tipo",name:"tipoEncomienda",width:100,sortable:false,align:"left"},{display:"Estaciones",name:"estaciones",width:150,sortable:false,align:"left"},{display:"Remitente",name:"clienteRemitente",width:150,sortable:false,align:"left"},{display:"Destinatario",name:"clienteDestinatario",width:150,sortable:false,align:"left"},{display:"Descripción",name:"descripcion",width:200,sortable:false,align:"left"},],usepager:true,useRp:true,rp:100,showTableToggleBtn:false,height:400})},_conectEvents:function(){$("#cancelar").click(function(a){a.preventDefault();a.stopPropagation();confirm("¿Está seguro que desea cancelar la operación?",function(b){if(b===true){core.getPageForMenu($("#cancelar").attr("href"))}})});$("#listar_desembarcar_command_salida").on("change",listarDesembarcarMovil.buscarEncomiendasPendientes)},buscarEncomiendasPendientes:function(){$("#encomiedasGrid").flexOptions({newp:1,query:listarDesembarcarMovil.getQueryString()}).flexReload()},getQueryString:function(){var a=$("#listar_desembarcar_command_salida").fieldSerialize();a=a.replace("listar_desembarcar_command%5Bsalida%5D","salida");return a}};
frondendReporte={funcionesAddOnload:function(){this._init();this._conectEvents()},_init:function(){if(core.checkInstalljsPrintSetup()){jsPrintSetup.setSilentPrint(false)}},_conectEvents:function(){$(".ejecutar").click(frondendReporte.ejecutarReporte);$("#ejecutar").click(frondendReporte.ejecutarReporte)},ejecutarReporte:function(g){g.preventDefault();g.stopPropagation();var d=$(this).data("type");if(d===undefined||d===null||$.trim(d)===""){throw new Error("Debe especificar un formato de documento.")}var f=$("#reporteForm");var b=f.formSerialize();var a=f.find('input[type="checkbox"]');$.each(a,function(e,h){h=$(h);if(h.prop("checked")===false){b+="&"+h.prop("name")+"=0"}});b+="&type="+d;var c=$("#reporteForm");if(core.customValidateForm(c)===true){$(c).ajaxSubmit({target:c.attr("action"),type:"POST",data:{type:d},dataType:"html",cache:false,async:false,beforeSubmit:function(){core.showLoading({showLoading:true})},error:function(){core.hideLoading({showLoading:true})},success:function(i){core.hideLoading({showLoading:true});if(!core.procesarRespuestaServidor(i)){var h=core.getValueFromResponse(i,"data");if(!h){throw new Error("No se pudo obtener la url del pdf del response.")}if(d==="TXT"){core.readText(h,function(j){var k=window.open("","Reporte","charset=utf-8,left=20,top=20,width=800,height=600,scrollbars=yes,resizable=yes,menubar=yes,status=yes,toolbar=yes");k.document.open();k.document.write("<pre>"+j+"</pre>");k.document.close()})}else{var e=window.open(h,"Reporte","charset=utf-8,left=20,top=20,width=800,height=600,scrollbars=yes,resizable=yes,menubar=yes,status=yes,toolbar=yes");e.focus()}if(core.checkInstalljsPrintSetup()){jsPrintSetup.setPaperSizeData(1);jsPrintSetup.setSilentPrint(false)}}}})}},};
cuadreInspectorReporte={funcionesAddOnload:function(){this._init();this._conectEvents();frondendReporte.funcionesAddOnload()},_init:function(){},_conectEvents:function(){$("#cuadreInspector_fecha").datepicker({format:"dd/mm/yyyy",startDate:"-10y",endDate:"d",todayBtn:true,language:"es",autoclose:true,todayHighlight:true});$("#cuadreInspector_fecha").datepicker("setDate",new Date());if(!core.isMovil()){$("#cuadreInspector_usuario").select2({allowClear:$("#cuadreInspector_usuario option[value='']").length===1});$("#cuadreInspector_usuario").select2("readonly",($("#cuadreInspector_usuario").attr("readonly")==="readonly"))}}};
ventaBoletoPropietarioReporte={funcionesAddOnload:function(){this._init();this._conectEvents();frondendReporte.funcionesAddOnload()},_init:function(){},_conectEvents:function(){$("#COD001_rangoFecha").daterangepicker({format:"DD/MM/YYYY",dateLimit:moment.duration(90,"d")});if(!core.isMovil()){$("#COD001_estacion").select2({allowClear:$("#COD001_estacion option[value='']").length===1});$("#COD001_estacion").select2("readonly",($("#COD001_estacion").attr("readonly")==="readonly"));$("#COD001_empresa").select2({allowClear:$("#COD001_empresa option[value='']").length===1});$("#COD001_empresa").select2("readonly",($("#COD001_empresa").attr("readonly")==="readonly"))}}};
ventaBoletoUsuarioReporte={funcionesAddOnload:function(){this._init();this._conectEvents();frondendReporte.funcionesAddOnload()},_init:function(){},_conectEvents:function(){$("#COD002_rangoFecha").daterangepicker({format:"DD/MM/YYYY",dateLimit:moment.duration(90,"d")});if(!core.isMovil()){$("#COD002_moneda").select2({allowClear:$("#COD002_moneda option[value='']").length===1});$("#COD002_estacion").select2({allowClear:$("#COD002_estacion option[value='']").length===1});$("#COD002_estacion").select2("readonly",($("#COD002_estacion").attr("readonly")==="readonly"));$("#COD002_empresa").select2({allowClear:$("#COD002_empresa option[value='']").length===1});$("#COD002_empresa").select2("readonly",($("#COD002_empresa").attr("readonly")==="readonly"));$("#COD002_usuario").select2({allowClear:$("#COD002_usuario option[value='']").length===1});$("#COD002_usuario").select2("readonly",($("#COD002_usuario").attr("readonly")==="readonly"))}}};
boletoAnuladoUsuarioReporte={funcionesAddOnload:function(){this._init();this._conectEvents();frondendReporte.funcionesAddOnload()},_init:function(){},_conectEvents:function(){$("#COD003_rangoFecha").daterangepicker({format:"DD/MM/YYYY",dateLimit:moment.duration(120,"d")});if(!core.isMovil()){$("#COD003_moneda").select2({allowClear:$("#COD003_moneda option[value='']").length===1});$("#COD003_estacion").select2({allowClear:$("#COD003_estacion option[value='']").length===1});$("#COD003_estacion").select2("readonly",($("#COD003_estacion").attr("readonly")==="readonly"));$("#COD003_empresa").select2({allowClear:$("#COD003_empresa option[value='']").length===1});$("#COD003_empresa").select2("readonly",($("#COD003_empresa").attr("readonly")==="readonly"));$("#COD003_usuario").select2({allowClear:$("#COD003_usuario option[value='']").length===1});$("#COD003_usuario").select2("readonly",($("#COD003_usuario").attr("readonly")==="readonly"))}}};
ventaBoletoPrepagadoReporte={funcionesAddOnload:function(){this._init();this._conectEvents();frondendReporte.funcionesAddOnload()},_init:function(){},_conectEvents:function(){$("#COD004_rangoFecha").daterangepicker({format:"DD/MM/YYYY",dateLimit:moment.duration(90,"d")});if(!core.isMovil()){$("#COD004_moneda").select2({allowClear:$("#COD004_moneda option[value='']").length===1});$("#COD004_estacion").select2({allowClear:$("#COD004_estacion option[value='']").length===1});$("#COD004_estacion").select2("readonly",($("#COD004_estacion").attr("readonly")==="readonly"));$("#COD004_empresa").select2({allowClear:$("#COD004_empresa option[value='']").length===1});$("#COD004_empresa").select2("readonly",($("#COD004_empresa").attr("readonly")==="readonly"));$("#COD004_usuario").select2({allowClear:$("#COD004_usuario option[value='']").length===1});$("#COD004_usuario").select2("readonly",($("#COD004_usuario").attr("readonly")==="readonly"))}}};
ventaBoletoPrepagadoPorBusesReporte={funcionesAddOnload:function(){this._init();this._conectEvents();frondendReporte.funcionesAddOnload()},_init:function(){},_conectEvents:function(){$("#ventaBoletoPrepagadoOtrasEstacionesPorBuses_rangoFecha").daterangepicker({format:"DD/MM/YYYY",dateLimit:moment.duration(180,"d")});if(!core.isMovil()){$("#ventaBoletoPrepagadoOtrasEstacionesPorBuses_moneda").select2({allowClear:$("#ventaBoletoPrepagadoOtrasEstacionesPorBuses_moneda option[value='']").length===1});$("#ventaBoletoPrepagadoOtrasEstacionesPorBuses_estacion").select2({allowClear:$("#ventaBoletoPrepagadoOtrasEstacionesPorBuses_estacion option[value='']").length===1});$("#ventaBoletoPrepagadoOtrasEstacionesPorBuses_estacion").select2("readonly",($("#ventaBoletoPrepagadoOtrasEstacionesPorBuses_estacion").attr("readonly")==="readonly"));$("#ventaBoletoPrepagadoOtrasEstacionesPorBuses_empresa").select2({allowClear:$("#ventaBoletoPrepagadoOtrasEstacionesPorBuses_empresa option[value='']").length===1});$("#ventaBoletoPrepagadoOtrasEstacionesPorBuses_empresa").select2("readonly",($("#ventaBoletoPrepagadoOtrasEstacionesPorBuses_empresa").attr("readonly")==="readonly"));$("#ventaBoletoPrepagadoOtrasEstacionesPorBuses_bus").select2({allowClear:$("#ventaBoletoPrepagadoOtrasEstacionesPorBuses_bus option[value='']").length===1});$("#ventaBoletoPrepagadoOtrasEstacionesPorBuses_bus").select2("readonly",($("#ventaBoletoPrepagadoOtrasEstacionesPorBuses_bus").attr("readonly")==="readonly"))}}};
ventaBoletoOtrasEstacionesReporte={funcionesAddOnload:function(){this._init();this._conectEvents();frondendReporte.funcionesAddOnload()},_init:function(){},_conectEvents:function(){$("#COD005_rangoFecha").daterangepicker({format:"DD/MM/YYYY",dateLimit:moment.duration(90,"d")});if(!core.isMovil()){$("#COD005_moneda").select2({allowClear:$("#COD005_moneda option[value='']").length===1});$("#COD005_estacion").select2({allowClear:$("#COD005_estacion option[value='']").length===1});$("#COD005_estacion").select2("readonly",($("#COD005_estacion").attr("readonly")==="readonly"));$("#COD005_empresa").select2({allowClear:$("#COD005_empresa option[value='']").length===1});$("#COD005_empresa").select2("readonly",($("#COD005_empresa").attr("readonly")==="readonly"));$("#COD005_usuario").select2({allowClear:$("#COD005_usuario option[value='']").length===1});$("#COD005_usuario").select2("readonly",($("#COD005_usuario").attr("readonly")==="readonly"))}}};
manisfiestoBoletoFull={funcionesAddOnload:function(){this._init();this._conectEvents();frondendReporte.funcionesAddOnload()},_init:function(){$("#manisfiestoBoletoFull_salida").select2({minimumInputLength:1,allowClear:true,ajax:{url:$("#pathListarSalidasPaginando").val(),dataType:"json",type:"POST",data:function(a,b){return{term:a,page_limit:10}},results:function(b,a){return{results:b.options}}}})},_conectEvents:function(){}};
manisfiestoBoletoPiloto={funcionesAddOnload:function(){this._init();this._conectEvents();frondendReporte.funcionesAddOnload()},_init:function(){$("#manisfiestoBoletoPiloto_salida").select2({minimumInputLength:1,allowClear:true,ajax:{url:$("#pathListarSalidasPaginando").val(),dataType:"json",type:"POST",data:function(a,b){return{term:a,page_limit:10}},results:function(b,a){return{results:b.options}}}})},_conectEvents:function(){}};
manisfiestoEncomiendaFull={funcionesAddOnload:function(){this._init();this._conectEvents();frondendReporte.funcionesAddOnload()},_init:function(){$("#manisfiestoEncomiendaFull_salida").select2({minimumInputLength:1,allowClear:true,ajax:{url:$("#pathListarSalidasPaginando").val(),dataType:"json",type:"POST",data:function(a,b){return{term:a,page_limit:10}},results:function(b,a){return{results:b.options}}}});if(!core.isMovil()){$("#manisfiestoEncomiendaFull_estacionOrigen").select2({allowClear:$("#manisfiestoEncomiendaFull_estacionOrigen option[value='']").length===1});$("#manisfiestoEncomiendaFull_estacionOrigen").select2("readonly",($("#manisfiestoEncomiendaFull_estacionOrigen").attr("readonly")==="readonly"));$("#manisfiestoEncomiendaFull_estacionDestino").select2({allowClear:$("#manisfiestoEncomiendaFull_estacionDestino option[value='']").length===1});$("#manisfiestoEncomiendaFull_estacionDestino").select2("readonly",($("#manisfiestoEncomiendaFull_estacionDestino").attr("readonly")==="readonly"))}},_conectEvents:function(){}};
cuadreEncomiendaReporte={funcionesAddOnload:function(){this._init();this._conectEvents();frondendReporte.funcionesAddOnload()},_init:function(){},_conectEvents:function(){$("#cuadreEncomienda_fecha").datepicker({format:"dd/mm/yyyy",startDate:"-10y",endDate:"d",todayBtn:true,language:"es",autoclose:true,todayHighlight:true});$("#cuadreEncomienda_fecha").datepicker("setDate",new Date());if(!core.isMovil()){$("#cuadreEncomienda_estacion").select2({allowClear:$("#cuadreEncomienda_estacion option[value='']").length===1});$("#cuadreEncomienda_estacion").select2("readonly",($("#cuadreEncomienda_estacion").attr("readonly")==="readonly"));$("#cuadreEncomienda_empresa").select2({allowClear:$("#cuadreEncomienda_empresa option[value='']").length===1});$("#cuadreEncomienda_empresa").select2("readonly",($("#cuadreEncomienda_empresa").attr("readonly")==="readonly"))}}};
encomiendaPendienteEntregarReporte={funcionesAddOnload:function(){this._init();this._conectEvents();frondendReporte.funcionesAddOnload()},_init:function(){},_conectEvents:function(){if(!core.isMovil()){$("#encomiendaPendienteEntregar_estacion").select2({allowClear:$("#encomiendaPendienteEntregar_estacion option[value='']").length===1});$("#encomiendaPendienteEntregar_estacion").select2("readonly",($("#encomiendaPendienteEntregar_estacion").attr("readonly")==="readonly"));$("#encomiendaPendienteEntregar_empresa").select2({allowClear:$("#encomiendaPendienteEntregar_empresa option[value='']").length===1});$("#encomiendaPendienteEntregar_empresa").select2("readonly",($("#encomiendaPendienteEntregar_empresa").attr("readonly")==="readonly"))}}};
encomiendaAnuladaUsuarioReporte={funcionesAddOnload:function(){this._init();this._conectEvents();frondendReporte.funcionesAddOnload()},_init:function(){},_conectEvents:function(){$("#encomiendaAnuladoUsuario_rangoFecha").daterangepicker({format:"DD/MM/YYYY",dateLimit:moment.duration(90,"d")});if(!core.isMovil()){$("#encomiendaAnuladoUsuario_moneda").select2({allowClear:$("#encomiendaAnuladoUsuario_moneda option[value='']").length===1});$("#encomiendaAnuladoUsuario_estacion").select2({allowClear:$("#encomiendaAnuladoUsuario_estacion option[value='']").length===1});$("#encomiendaAnuladoUsuario_estacion").select2("readonly",($("#encomiendaAnuladoUsuario_estacion").attr("readonly")==="readonly"));$("#encomiendaAnuladoUsuario_empresa").select2({allowClear:$("#encomiendaAnuladoUsuario_empresa option[value='']").length===1});$("#encomiendaAnuladoUsuario_empresa").select2("readonly",($("#encomiendaAnuladoUsuario_empresa").attr("readonly")==="readonly"));$("#encomiendaAnuladoUsuario_usuario").select2({allowClear:$("#encomiendaAnuladoUsuario_usuario option[value='']").length===1});$("#encomiendaAnuladoUsuario_usuario").select2("readonly",($("#encomiendaAnuladoUsuario_usuario").attr("readonly")==="readonly"))}}};
detalleGuiaInternaEncomiendaReporte={funcionesAddOnload:function(){this._init();this._conectEvents();frondendReporte.funcionesAddOnload()},_init:function(){},_conectEvents:function(){$("#detalleGuiaInternaEncomienda_rangoFecha").daterangepicker({format:"DD/MM/YYYY"});if(!core.isMovil()){$("#detalleGuiaInternaEncomienda_estacion").select2({allowClear:$("#detalleGuiaInternaEncomienda_estacion option[value='']").length===1});$("#detalleGuiaInternaEncomienda_estacion").select2("readonly",($("#detalleGuiaInternaEncomienda_estacion").attr("readonly")==="readonly"));$("#detalleGuiaInternaEncomienda_empresa").select2({allowClear:$("#detalleGuiaInternaEncomienda_empresa option[value='']").length===1});$("#detalleGuiaInternaEncomienda_empresa").select2("readonly",($("#detalleGuiaInternaEncomienda_empresa").attr("readonly")==="readonly"))}}};
detalleCortesiaEncomiendaReporte={funcionesAddOnload:function(){this._init();this._conectEvents();frondendReporte.funcionesAddOnload()},_init:function(){},_conectEvents:function(){$("#detalleCortesiaEncomienda_rangoFecha").daterangepicker({format:"DD/MM/YYYY"});if(!core.isMovil()){$("#detalleCortesiaEncomienda_estacion").select2({allowClear:$("#detalleCortesiaEncomienda_estacion option[value='']").length===1});$("#detalleCortesiaEncomienda_estacion").select2("readonly",($("#detalleCortesiaEncomienda_estacion").attr("readonly")==="readonly"));$("#detalleCortesiaEncomienda_empresa").select2({allowClear:$("#detalleCortesiaEncomienda_empresa option[value='']").length===1});$("#detalleCortesiaEncomienda_empresa").select2("readonly",($("#detalleCortesiaEncomienda_empresa").attr("readonly")==="readonly"))}}};
tarifasBoletosReporte={funcionesAddOnload:function(){this._init();this._conectEvents();frondendReporte.funcionesAddOnload()},_init:function(){if(!core.isMovil()){$("#tarifasBoletos_estacionOrigen").select2({allowClear:$("#tarifasBoletos_estacionOrigen option[value='']").length===1});$("#tarifasBoletos_estacionOrigen").select2("readonly",($("#tarifasBoletos_estacionOrigen").attr("readonly")==="readonly"));$("#tarifasBoletos_claseBus").select2({allowClear:$("#tarifasBoletos_claseBus option[value='']").length===1});$("#tarifasBoletos_claseBus").select2("readonly",($("#tarifasBoletos_claseBus").attr("readonly")==="readonly"))}},_conectEvents:function(){}};
cajaReporte={funcionesAddOnload:function(){this._init();this._conectEvents();frondendReporte.funcionesAddOnload()},_init:function(){},_conectEvents:function(){$("#caja_fecha").datepicker({format:"dd/mm/yyyy",startDate:"-10y",endDate:"d",todayBtn:true,language:"es",autoclose:true,todayHighlight:true});$("#caja_fecha").datepicker("setDate",new Date());if(!core.isMovil()){$("#caja_moneda").select2({allowClear:$("#caja_moneda option[value='']").length===1});$("#caja_estacion").select2({allowClear:$("#caja_estacion option[value='']").length===1});$("#caja_estacion").select2("readonly",($("#caja_estacion").attr("readonly")==="readonly"));$("#caja_empresa").select2({allowClear:$("#caja_empresa option[value='']").length===1});$("#caja_empresa").select2("readonly",($("#caja_empresa").attr("readonly")==="readonly"));$("#caja_usuario").select2({allowClear:$("#caja_usuario option[value='']").length===1});$("#caja_usuario").select2("readonly",($("#caja_usuario").attr("readonly")==="readonly"))}}};
detalleCajaReporte={funcionesAddOnload:function(){this._init();this._conectEvents();frondendReporte.funcionesAddOnload()},_init:function(){},_conectEvents:function(){$("#detalleCaja_fecha").datepicker({format:"dd/mm/yyyy",startDate:"-10y",endDate:"d",todayBtn:true,language:"es",autoclose:true,todayHighlight:true});$("#detalleCaja_fecha").datepicker("setDate",new Date());if(!core.isMovil()){$("#detalleCaja_moneda").select2({allowClear:$("#detalleCaja_moneda option[value='']").length===1});$("#detalleCaja_estacion").select2({allowClear:$("#detalleCaja_estacion option[value='']").length===1});$("#detalleCaja_estacion").select2("readonly",($("#detalleCaja_estacion").attr("readonly")==="readonly"));$("#detalleCaja_empresa").select2({allowClear:$("#detalleCaja_empresa option[value='']").length===1});$("#detalleCaja_empresa").select2("readonly",($("#detalleCaja_empresa").attr("readonly")==="readonly"));$("#detalleCaja_usuario").select2({allowClear:$("#detalleCaja_usuario option[value='']").length===1});$("#detalleCaja_usuario").select2("readonly",($("#detalleCaja_usuario").attr("readonly")==="readonly"))}}};
encomiendaPropietario={funcionesAddOnload:function(){this._init();this._conectEvents();frondendReporte.funcionesAddOnload()},_init:function(){},_conectEvents:function(){$("#encomiendaPropietario_rangoFecha").daterangepicker({format:"DD/MM/YYYY",dateLimit:moment.duration(90,"d")});if(!core.isMovil()){$("#encomiendaPropietario_estacion").select2({allowClear:$("#encomiendaPropietario_estacion option[value='']").length===1});$("#encomiendaPropietario_estacion").select2("readonly",($("#encomiendaPropietario_estacion").attr("readonly")==="readonly"));$("#encomiendaPropietario_empresa").select2({allowClear:$("#encomiendaPropietario_empresa option[value='']").length===1});$("#encomiendaPropietario_empresa").select2("readonly",($("#encomiendaPropietario_empresa").attr("readonly")==="readonly"))}}};
detalleFacturaReporte={funcionesAddOnload:function(){this._init();this._conectEvents();frondendReporte.funcionesAddOnload()},_init:function(){},_conectEvents:function(){$("#detalleFactura_rangoFecha").daterangepicker({format:"DD/MM/YYYY"});if(!core.isMovil()){$("#detalleFactura_estacion").select2({allowClear:$("#detalleFactura_estacion option[value='']").length===1});$("#detalleFactura_estacion").select2("readonly",($("#detalleFactura_estacion").attr("readonly")==="readonly"));$("#detalleFactura_empresa").select2({allowClear:$("#detalleFactura_empresa option[value='']").length===1});$("#detalleFactura_empresa").select2("readonly",($("#detalleFactura_empresa").attr("readonly")==="readonly"))}}};
detalleCortesiaBoletoReporte={funcionesAddOnload:function(){this._init();this._conectEvents();frondendReporte.funcionesAddOnload()},_init:function(){},_conectEvents:function(){$("#detalleCortesiaBoleto_rangoFecha").daterangepicker({format:"DD/MM/YYYY"});if(!core.isMovil()){$("#detalleCortesiaBoleto_estacion").select2({allowClear:$("#detalleCortesiaBoleto_estacion option[value='']").length===1});$("#detalleCortesiaBoleto_estacion").select2("readonly",($("#detalleCortesiaBoleto_estacion").attr("readonly")==="readonly"));$("#detalleCortesiaBoleto_empresa").select2({allowClear:$("#detalleCortesiaBoleto_empresa option[value='']").length===1});$("#detalleCortesiaBoleto_empresa").select2("readonly",($("#detalleCortesiaBoleto_empresa").attr("readonly")==="readonly"))}}};
cuadreVentaBoletoReporte={funcionesAddOnload:function(){this._init();this._conectEvents();frondendReporte.funcionesAddOnload()},_init:function(){},_conectEvents:function(){$("#cuadreVentaBoleto_fecha").datepicker({format:"dd/mm/yyyy",startDate:"-10y",endDate:"d",todayBtn:true,language:"es",autoclose:true,todayHighlight:true});$("#cuadreVentaBoleto_fecha").datepicker("setDate",new Date());if(!core.isMovil()){$("#cuadreVentaBoleto_moneda").select2({allowClear:$("#cuadreVentaBoleto_moneda option[value='']").length===1});$("#cuadreVentaBoleto_moneda").select2("readonly",($("#cuadreVentaBoleto_moneda").attr("readonly")==="readonly"));$("#cuadreVentaBoleto_estacion").select2({allowClear:$("#cuadreVentaBoleto_estacion option[value='']").length===1});$("#cuadreVentaBoleto_estacion").select2("readonly",($("#cuadreVentaBoleto_estacion").attr("readonly")==="readonly"));$("#cuadreVentaBoleto_empresa").select2({allowClear:$("#cuadreVentaBoleto_empresa option[value='']").length===1});$("#cuadreVentaBoleto_empresa").select2("readonly",($("#cuadreVentaBoleto_empresa").attr("readonly")==="readonly"))}}};
cuadreVentaBoletoVoucherReporte={funcionesAddOnload:function(){this._init();this._conectEvents();frondendReporte.funcionesAddOnload()},_init:function(){},_conectEvents:function(){$("#cuadreVentaBoletoVoucher_rangoFecha").daterangepicker({format:"DD/MM/YYYY"});if(!core.isMovil()){$("#cuadreVentaBoletoVoucher_estacion").select2({allowClear:$("#cuadreVentaBoletoVoucher_estacion option[value='']").length===1});$("#cuadreVentaBoletoVoucher_estacion").select2("readonly",($("#cuadreVentaBoletoVoucher_estacion").attr("readonly")==="readonly"));$("#cuadreVentaBoletoVoucher_empresa").select2({allowClear:$("#cuadreVentaBoletoVoucher_empresa option[value='']").length===1});$("#cuadreVentaBoletoVoucher_empresa").select2("readonly",($("#cuadreVentaBoletoVoucher_empresa").attr("readonly")==="readonly"))}}};
detalleAlquilerReporte={funcionesAddOnload:function(){this._init();this._conectEvents();frondendReporte.funcionesAddOnload()},_init:function(){},_conectEvents:function(){$("#detalleAlquiler_rangoFecha").daterangepicker({format:"DD/MM/YYYY",dateLimit:moment.duration(120,"d")});if(!core.isMovil()){$("#detalleAlquiler_estacion").select2({allowClear:$("#detalleAlquiler_estacion option[value='']").length===1});$("#detalleAlquiler_estacion").select2("readonly",($("#detalleAlquiler_estacion").attr("readonly")==="readonly"))}}};
asistenciaPilotosReporte={funcionesAddOnload:function(){this._init();this._conectEvents();frondendReporte.funcionesAddOnload()},_init:function(){},_conectEvents:function(){$("#asistenciaPilotos_rangoFecha").daterangepicker({format:"DD/MM/YYYY",dateLimit:moment.duration(90,"d")});if(!core.isMovil()){$("#asistenciaPilotos_empresa").select2({allowClear:$("#asistenciaPilotos_empresa option[value='']").length===1});$("#asistenciaPilotos_empresa").select2("readonly",($("#asistenciaPilotos_empresa").attr("readonly")==="readonly"))}}};
detallePortalReporte={funcionesAddOnload:function(){this._init();this._conectEvents();frondendReporte.funcionesAddOnload()},_init:function(){},_conectEvents:function(){$("#detallePortal_rangoFecha").daterangepicker({format:"DD/MM/YYYY",startDate:core.modDate(-30),endDate:new Date(),dateLimit:moment.duration(2,"years")});$("#detallePortal_rangoFecha").data("daterangepicker").clickApply();if(!core.isMovil()){$("#detallePortal_portal").select2({allowClear:$("#detallePortal_portal option[value='']").length===1});$("#detallePortal_portal").select2("readonly",($("#detallePortal_portal").attr("readonly")==="readonly"));$("#detallePortal_empresa").select2({allowClear:$("#detallePortal_empresa option[value='']").length===1});$("#detallePortal_empresa").select2("readonly",($("#detallePortal_empresa").attr("readonly")==="readonly"))}}};
detalleAgenciaReporte={funcionesAddOnload:function(){this._init();this._conectEvents();frondendReporte.funcionesAddOnload()},_init:function(){},_conectEvents:function(){$("#detalleAgencia_rangoFecha").daterangepicker({format:"DD/MM/YYYY",startDate:core.modDate(-30),endDate:new Date(),dateLimit:moment.duration(2,"years")});$("#detalleAgencia_rangoFecha").data("daterangepicker").clickApply();if(!core.isMovil()){$("#detalleAgencia_estacion").select2({allowClear:$("#detalleAgencia_estacion option[value='']").length===1});$("#detalleAgencia_estacion").select2("readonly",($("#detalleAgencia_estacion").attr("readonly")==="readonly"));$("#detalleAgencia_empresa").select2({allowClear:$("#detalleAgencia_empresa option[value='']").length===1});$("#detalleAgencia_empresa").select2("readonly",($("#detalleAgencia_empresa").attr("readonly")==="readonly"))}}};
detalleAgenciaGraficoReporte={funcionesAddOnload:function(){this._init();this._conectEvents();frondendReporte.funcionesAddOnload()},_init:function(){},_conectEvents:function(){$("#detalleAgenciaGrafico_rangoFecha").daterangepicker({format:"DD/MM/YYYY",startDate:core.modDate(-30),endDate:new Date(),dateLimit:moment.duration(2,"months")});$("#detalleAgenciaGrafico_rangoFecha").data("daterangepicker").clickApply();if(!core.isMovil()){$("#detalleAgenciaGrafico_estacion").select2({allowClear:$("#detalleAgenciaGrafico_estacion option[value='']").length===1});$("#detalleAgenciaGrafico_estacion").select2("readonly",($("#detalleAgenciaGrafico_estacion").attr("readonly")==="readonly"));$("#detalleAgenciaGrafico_empresa").select2({allowClear:$("#detalleAgenciaGrafico_empresa option[value='']").length===1});$("#detalleAgenciaGrafico_empresa").select2("readonly",($("#detalleAgenciaGrafico_empresa").attr("readonly")==="readonly"))}}};
detalleDepositoAgenciaReporte={funcionesAddOnload:function(){this._init();this._conectEvents();frondendReporte.funcionesAddOnload()},_init:function(){},_conectEvents:function(){$("#detalleDepositoAgencia_rangoFecha").daterangepicker({format:"DD/MM/YYYY"});if(!core.isMovil()){$("#detalleDepositoAgencia_estacion").select2({allowClear:$("#detalleDepositoAgencia_estacion option[value='']").length===1});$("#detalleDepositoAgencia_estacion").select2("readonly",($("#detalleDepositoAgencia_estacion").attr("readonly")==="readonly"))}}};
detalleGeneralReporte={funcionesAddOnload:function(){this._init();this._conectEvents();frondendReporte.funcionesAddOnload()},_init:function(){},_conectEvents:function(){$("#detalleGeneralEncomienda_rangoFecha").daterangepicker({format:"DD/MM/YYYY",startDate:new Date(),endDate:new Date(),dateLimit:moment.duration(1,"years")});$("#detalleGeneralEncomienda_rangoFecha").data("daterangepicker").clickApply();if(!core.isMovil()){$("#detalleGeneralEncomienda_empresa").select2({allowClear:$("#detalleGeneralEncomienda_empresa option[value='']").length===1});$("#detalleGeneralEncomienda_empresa").select2("readonly",($("#detalleGeneralEncomienda_empresa").attr("readonly")==="readonly"));$("#detalleGeneralEncomienda_estacionOrigen").select2({allowClear:$("#detalleGeneralEncomienda_estacionOrigen option[value='']").length===1});$("#detalleGeneralEncomienda_estacionOrigen").select2("readonly",($("#detalleGeneralEncomienda_estacionOrigen").attr("readonly")==="readonly"));$("#detalleGeneralEncomienda_estacionDestino").select2({allowClear:$("#detalleGeneralEncomienda_estacionDestino option[value='']").length===1});$("#detalleGeneralEncomienda_estacionDestino").select2("readonly",($("#detalleGeneralEncomienda_estacionDestino").attr("readonly")==="readonly"))}}};
detalleSalidasReporte={funcionesAddOnload:function(){this._init();this._conectEvents();frondendReporte.funcionesAddOnload()},_init:function(){},_conectEvents:function(){var a=new Date();$("#detalleSalidas_rangoFecha").daterangepicker({format:"DD/MM/YYYY",startDate:a,endDate:a,dateLimit:moment.duration(2,"years")});$("#detalleSalidas_rangoFecha").data("daterangepicker").clickApply();if(!core.isMovil()){$("#detalleSalidas_empresa").select2({allowClear:$("#detalleSalidas_empresa option[value='']").length===1});$("#detalleSalidas_empresa").select2("readonly",($("#detalleSalidas_empresa").attr("readonly")==="readonly"))}}};
detalleBusesReporte={funcionesAddOnload:function(){this._init();this._conectEvents();frondendReporte.funcionesAddOnload()},_init:function(){},_conectEvents:function(){if(!core.isMovil()){$("#detalleBuses_empresa").select2({allowClear:$("#detalleBuses_empresa option[value='']").length===1});$("#detalleBuses_empresa").select2("readonly",($("#detalleBuses_empresa").attr("readonly")==="readonly"))}}};
detallePilotosReporte={funcionesAddOnload:function(){this._init();this._conectEvents();frondendReporte.funcionesAddOnload()},_init:function(){},_conectEvents:function(){if(!core.isMovil()){$("#detallePilotos_empresa").select2({allowClear:$("#detallePilotos_empresa option[value='']").length===1});$("#detallePilotos_empresa").select2("readonly",($("#detallePilotos_empresa").attr("readonly")==="readonly"))}}};
estadisticaVentaTotalesReporte={funcionesAddOnload:function(){this._init();this._conectEvents();frondendReporte.funcionesAddOnload()},_init:function(){},_conectEvents:function(){$("#estadisticaVentaTotales_rangoFecha").daterangepicker({format:"DD/MM/YYYY",startDate:core.modDate(-30),endDate:new Date(),dateLimit:moment.duration(2,"months")});$("#estadisticaVentaTotales_rangoFecha").data("daterangepicker").clickApply();if(!core.isMovil()){$("#estadisticaVentaTotales_estacion").select2({allowClear:$("#estadisticaVentaTotales_estacion option[value='']").length===1});$("#estadisticaVentaTotales_estacion").select2("readonly",($("#estadisticaVentaTotales_estacion").attr("readonly")==="readonly"));$("#estadisticaVentaTotales_empresa").select2({allowClear:$("#estadisticaVentaTotales_empresa option[value='']").length===1});$("#estadisticaVentaTotales_empresa").select2("readonly",($("#estadisticaVentaTotales_empresa").attr("readonly")==="readonly"))}}};
detalleTarjetasReporte={funcionesAddOnload:function(){this._init();this._conectEvents();frondendReporte.funcionesAddOnload()},_init:function(){},_conectEvents:function(){$("#detalleTarjetas_fecha").datepicker({format:"dd/mm/yyyy",startDate:"-10y",endDate:"d",todayBtn:true,language:"es",autoclose:true,todayHighlight:true});$("#detalleTarjetas_fecha").datepicker("setDate",new Date())}};